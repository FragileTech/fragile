{
  "stage": "directives",
  "directive_type": "definition",
  "generated_at": "2025-11-08T23:19:38.396871+00:00",
  "source_documents": [
    "01_crystalline_gas_yang_mills_mass_gap_proof",
    "01_fragile_gas_framework",
    "01_yang_mills_dynamic_lattice",
    "02_euclidean_gas",
    "03_cloning",
    "04_rigorous_gauge_symmetry_emergence",
    "04_wasserstein_contraction",
    "04_wasserstein_contraction_ASSEMBLED",
    "05_kinetic_contraction",
    "05_osterwalder_schrader_verification",
    "06_convergence",
    "07_mean_field",
    "08_propagation_chaos",
    "09_kl_convergence",
    "10_qsd_exchangeability_theory",
    "11_geometric_gas",
    "11_geometric_gas",
    "11_hk_convergence",
    "12_symmetries_geometric_gas",
    "13_geometric_gas_c3_regularity",
    "13_geometric_gas_c3_regularity",
    "14_geometric_gas_cinf_regularity_full",
    "15_geometric_gas_lsi_proof",
    "16_convergence_mean_field",
    "16_convergence_mean_field",
    "18_emergent_geometry",
    "19_geometric_gas_cinf_regularity_simplified",
    "20_geometric_gas_cinf_regularity_full"
  ],
  "document_count": 28,
  "total_count": 248,
  "items": [
    {
      "directive_type": "definition",
      "label": "def-cg-walker-state-space",
      "title": "Walker State Space",
      "start_line": 94,
      "end_line": 114,
      "header_lines": [
        95
      ],
      "content_start": 97,
      "content_end": 113,
      "content": "97: :label: def-cg-walker-state-space\n98: \n99: Let $d \\geq 3$ be the spatial dimension. The **walker state space** is the phase space\n100: \n101: $$\n102: \\Omega := \\mathcal{X} \\times \\mathcal{V} = \\mathbb{R}^{d} \\times \\mathbb{R}^{d}\n103: $$\n104: \n105: A **walker** is a point $w = (x, v) \\in \\Omega$ consisting of:\n106: - **Position:** $x \\in \\mathcal{X} = \\mathbb{R}^{d}$\n107: - **Velocity:** $v \\in \\mathcal{V} = \\mathbb{R}^{d}$\n108: \n109: The state space $\\Omega$ is equipped with the product metric\n110: \n111: $$\n112: d_{\\Omega}(w_1, w_2) := \\sqrt{\\|x_1 - x_2\\|^2 + \\|v_1 - v_2\\|^2}\n113: $$",
      "metadata": {
        "label": "def-cg-walker-state-space"
      },
      "section": "## 2. The Crystalline Gas Algorithm",
      "references": [],
      "raw_directive": "94: ### 2.1 The State Space and Configuration Space\n95: \n96: :::{prf:definition} Walker State Space\n97: :label: def-cg-walker-state-space\n98: \n99: Let $d \\geq 3$ be the spatial dimension. The **walker state space** is the phase space\n100: \n101: $$\n102: \\Omega := \\mathcal{X} \\times \\mathcal{V} = \\mathbb{R}^{d} \\times \\mathbb{R}^{d}\n103: $$\n104: \n105: A **walker** is a point $w = (x, v) \\in \\Omega$ consisting of:\n106: - **Position:** $x \\in \\mathcal{X} = \\mathbb{R}^{d}$\n107: - **Velocity:** $v \\in \\mathcal{V} = \\mathbb{R}^{d}$\n108: \n109: The state space $\\Omega$ is equipped with the product metric\n110: \n111: $$\n112: d_{\\Omega}(w_1, w_2) := \\sqrt{\\|x_1 - x_2\\|^2 + \\|v_1 - v_2\\|^2}\n113: $$\n114: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Crystalline Gas Algorithm"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-configuration-space",
      "title": "Swarm Configuration Space",
      "start_line": 116,
      "end_line": 134,
      "header_lines": [
        117
      ],
      "content_start": 119,
      "content_end": 133,
      "content": "119: :label: def-cg-configuration-space\n120: \n121: Fix $N \\geq 2$ entities (walkers). The **swarm configuration space** is\n122: \n123: $$\n124: \\Sigma_N := \\Omega^N = (\\mathbb{R}^{d} \\times \\mathbb{R}^{d})^N\n125: $$\n126: \n127: A **swarm configuration** is an ordered $N$-tuple\n128: \n129: $$\n130: \\mathcal{S} = (w_1, \\ldots, w_N) \\in \\Sigma_N\n131: $$\n132: \n133: We denote by $\\mathcal{S}_x = (x_1, \\ldots, x_N) \\in (\\mathbb{R}^{d})^N$ and $\\mathcal{S}_v = (v_1, \\ldots, v_N) \\in (\\mathbb{R}^{d})^N$ the position and velocity projections.",
      "metadata": {
        "label": "def-cg-configuration-space"
      },
      "section": "## 2. The Crystalline Gas Algorithm",
      "references": [],
      "raw_directive": "116: :::\n117: \n118: :::{prf:definition} Swarm Configuration Space\n119: :label: def-cg-configuration-space\n120: \n121: Fix $N \\geq 2$ entities (walkers). The **swarm configuration space** is\n122: \n123: $$\n124: \\Sigma_N := \\Omega^N = (\\mathbb{R}^{d} \\times \\mathbb{R}^{d})^N\n125: $$\n126: \n127: A **swarm configuration** is an ordered $N$-tuple\n128: \n129: $$\n130: \\mathcal{S} = (w_1, \\ldots, w_N) \\in \\Sigma_N\n131: $$\n132: \n133: We denote by $\\mathcal{S}_x = (x_1, \\ldots, x_N) \\in (\\mathbb{R}^{d})^N$ and $\\mathcal{S}_v = (v_1, \\ldots, v_N) \\in (\\mathbb{R}^{d})^N$ the position and velocity projections.\n134: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Crystalline Gas Algorithm"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-fitness-landscape",
      "title": "Fitness Landscape",
      "start_line": 144,
      "end_line": 186,
      "header_lines": [
        145
      ],
      "content_start": 147,
      "content_end": 185,
      "content": "147: :label: def-cg-fitness-landscape\n148: \n149: The **fitness landscape** is a smooth function\n150: \n151: $$\n152: \\Phi : \\mathbb{R}^{d} \\to \\mathbb{R}\n153: $$\n154: \n155: satisfying the following properties:\n156: \n157: 1. **Smoothness:** $\\Phi \\in C^{\\infty}(\\mathbb{R}^{d})$\n158: \n159: 2. **Strict Concavity:** The Hessian $H_{\\Phi}(x) := \\nabla^2 \\Phi(x)$ satisfies\n160: \n161: $$\n162: H_{\\Phi}(x) \\preceq -\\kappa I \\quad \\text{for all } x \\in \\mathbb{R}^{d}\n163: $$\n164: \n165: for some constant $\\kappa > 0$, where $A \\preceq B$ means $B - A$ is positive semi-definite, and $I$ is the identity matrix.\n166: \n167: 3. **Coercivity:** There exists $R_0 > 0$ such that\n168: \n169: $$\n170: \\Phi(x) \\leq \\Phi(0) - \\frac{\\kappa}{4} \\|x\\|^2 \\quad \\text{for all } \\|x\\| \\geq R_0\n171: $$\n172: \n173: 4. **Bounded Gradient:** The gradient satisfies\n174: \n175: $$\n176: \\|\\nabla \\Phi(x)\\| \\leq L_{\\Phi}(1 + \\|x\\|) \\quad \\text{for all } x \\in \\mathbb{R}^{d}\n177: $$\n178: \n179: for some constant $L_{\\Phi} > 0$.\n180: \n181: 5. **Bounded Higher Derivatives:** For all $k \\geq 3$, there exists $C_k > 0$ such that\n182: \n183: $$\n184: \\|\\nabla^k \\Phi(x)\\| \\leq C_k \\quad \\text{for all } x \\in \\mathbb{R}^{d}\n185: $$",
      "metadata": {
        "label": "def-cg-fitness-landscape"
      },
      "section": "## 2. The Crystalline Gas Algorithm",
      "references": [],
      "raw_directive": "144: The dynamics of the Crystalline Gas are governed by a **fitness landscape** $\\Phi : \\mathcal{X} \\to \\mathbb{R}$, which plays the role of a potential function guiding the stochastic ascent.\n145: \n146: :::{prf:definition} Fitness Landscape\n147: :label: def-cg-fitness-landscape\n148: \n149: The **fitness landscape** is a smooth function\n150: \n151: $$\n152: \\Phi : \\mathbb{R}^{d} \\to \\mathbb{R}\n153: $$\n154: \n155: satisfying the following properties:\n156: \n157: 1. **Smoothness:** $\\Phi \\in C^{\\infty}(\\mathbb{R}^{d})$\n158: \n159: 2. **Strict Concavity:** The Hessian $H_{\\Phi}(x) := \\nabla^2 \\Phi(x)$ satisfies\n160: \n161: $$\n162: H_{\\Phi}(x) \\preceq -\\kappa I \\quad \\text{for all } x \\in \\mathbb{R}^{d}\n163: $$\n164: \n165: for some constant $\\kappa > 0$, where $A \\preceq B$ means $B - A$ is positive semi-definite, and $I$ is the identity matrix.\n166: \n167: 3. **Coercivity:** There exists $R_0 > 0$ such that\n168: \n169: $$\n170: \\Phi(x) \\leq \\Phi(0) - \\frac{\\kappa}{4} \\|x\\|^2 \\quad \\text{for all } \\|x\\| \\geq R_0\n171: $$\n172: \n173: 4. **Bounded Gradient:** The gradient satisfies\n174: \n175: $$\n176: \\|\\nabla \\Phi(x)\\| \\leq L_{\\Phi}(1 + \\|x\\|) \\quad \\text{for all } x \\in \\mathbb{R}^{d}\n177: $$\n178: \n179: for some constant $L_{\\Phi} > 0$.\n180: \n181: 5. **Bounded Higher Derivatives:** For all $k \\geq 3$, there exists $C_k > 0$ such that\n182: \n183: $$\n184: \\|\\nabla^k \\Phi(x)\\| \\leq C_k \\quad \\text{for all } x \\in \\mathbb{R}^{d}\n185: $$\n186: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Crystalline Gas Algorithm"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-dynamics",
      "title": "Crystalline Gas Dynamics",
      "start_line": 217,
      "end_line": 231,
      "header_lines": [
        218
      ],
      "content_start": 220,
      "content_end": 230,
      "content": "220: :label: def-cg-dynamics\n221: \n222: Let $\\mathcal{S}(t) = (w_1(t), \\ldots, w_N(t)) \\in \\Sigma_N$ denote the swarm configuration at discrete time $t \\in \\mathbb{N} \\cdot \\Delta t$. The **Crystalline Gas update operator** is the composition\n223: \n224: $$\n225: \\Psi_{\\text{CG}} := \\Psi_{\\text{thermal}} \\circ \\Psi_{\\text{ascent}}\n226: $$\n227: \n228: where $\\Psi_{\\text{ascent}}$ and $\\Psi_{\\text{thermal}}$ are defined below. The time evolution is given by\n229: \n230: $$",
      "metadata": {
        "label": "def-cg-dynamics"
      },
      "section": "## 2. The Crystalline Gas Algorithm",
      "references": [],
      "raw_directive": "217: The Crystalline Gas evolves through a discrete-time Markov process on $\\Sigma_N$. Each time step consists of two operators applied sequentially: **Geometric Ascent** followed by **Thermal Fluctuation**.\n218: \n219: :::{prf:definition} Crystalline Gas Dynamics\n220: :label: def-cg-dynamics\n221: \n222: Let $\\mathcal{S}(t) = (w_1(t), \\ldots, w_N(t)) \\in \\Sigma_N$ denote the swarm configuration at discrete time $t \\in \\mathbb{N} \\cdot \\Delta t$. The **Crystalline Gas update operator** is the composition\n223: \n224: $$\n225: \\Psi_{\\text{CG}} := \\Psi_{\\text{thermal}} \\circ \\Psi_{\\text{ascent}}\n226: $$\n227: \n228: where $\\Psi_{\\text{ascent}}$ and $\\Psi_{\\text{thermal}}$ are defined below. The time evolution is given by\n229: \n230: $$\n231: \\mathcal{S}(t + \\Delta t) = \\Psi_{\\text{CG}}(\\mathcal{S}(t))",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Crystalline Gas Algorithm"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-ascent-operator",
      "title": "Geometric Ascent Operator",
      "start_line": 235,
      "end_line": 285,
      "header_lines": [
        236
      ],
      "content_start": 238,
      "content_end": 284,
      "content": "238: :label: def-cg-ascent-operator\n239: \n240: The **Geometric Ascent operator** $\\Psi_{\\text{ascent}} : \\Sigma_N \\to \\Sigma_N$ updates the position of each walker according to a Hessian-informed gradient ascent step on a collective fitness potential.\n241: \n242: For each walker $i \\in \\{1, \\ldots, N\\}$, given configuration $\\mathcal{S} = (w_1, \\ldots, w_N)$ with $w_i = (x_i, v_i)$:\n243: \n244: 1. **Define Collective Fitness Potential:** Let\n245: \n246: $$\n247: \\Psi(x_1, \\ldots, x_N) := \\frac{1}{\\beta} \\log \\sum_{j=1}^N e^{\\beta \\Phi(x_j)}\n248: $$\n249: \n250: where:\n251: - $\\Phi : \\mathbb{R}^d \\to \\mathbb{R}$ is the fitness landscape ({prf:ref}`def-cg-fitness-landscape`)\n252: - $\\beta > 0$ is the **inverse temperature parameter** (controls selection strength)\n253: \n254: This is the **log-sum-exp** (smooth maximum) of individual fitness values.\n255: \n256: 2. **Compute Gradient:** The gradient of $\\Psi$ with respect to walker $i$'s position is:\n257: \n258: $$\n259: \\nabla_{x_i} \\Psi(x) = \\frac{e^{\\beta \\Phi(x_i)}}{\\sum_{k=1}^N e^{\\beta \\Phi(x_k)}} \\nabla \\Phi(x_i) = p_i \\cdot \\nabla \\Phi(x_i)\n260: $$\n261: \n262: where $p_i := \\frac{e^{\\beta \\Phi(x_i)}}{\\sum_{k=1}^N e^{\\beta \\Phi(x_k)}}$ is the softmax weight of walker $i$.\n263: \n264: 3. **Gradient Ascent Update:** Update the walker state via\n265: \n266: $$\n267: \\begin{aligned}\n268: x_i' &= x_i + \\eta \\cdot (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1} \\nabla_{x_i} \\Psi(x) \\\\\n269: v_i' &= v_i + \\frac{1}{\\Delta t}(x_i' - x_i)\n270: \\end{aligned}\n271: $$\n272: \n273: where:\n274: - $\\eta \\in (0, 1]$ is the **step size parameter**\n275: - $(-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1}$ is the **emergent metric tensor** at $x_i$\n276: - The velocity update reflects the displacement with timescale $\\Delta t$\n277: \n278: The updated configuration is $\\mathcal{S}' = (w_1', \\ldots, w_N')$ with $w_i' = (x_i', v_i')$.\n279: \n280: **Note:** This defines the **matter force** from the fitness landscape. The full dynamics in Section 4 includes an additional **gauge force** that mediates interactions through SU(3) link variables, yielding:\n281: \n282: $$\n283: F_i^{\\text{total}} = F_i^{\\text{matter}} + F_i^{\\text{gauge}}\n284: $$",
      "metadata": {
        "label": "def-cg-ascent-operator"
      },
      "section": "## 2. The Crystalline Gas Algorithm",
      "references": [
        "def-cg-fitness-landscape",
        "def-cg-gauge-covariant-force"
      ],
      "raw_directive": "235: #### 2.3.1 The Geometric Ascent Operator\n236: \n237: :::{prf:definition} Geometric Ascent Operator\n238: :label: def-cg-ascent-operator\n239: \n240: The **Geometric Ascent operator** $\\Psi_{\\text{ascent}} : \\Sigma_N \\to \\Sigma_N$ updates the position of each walker according to a Hessian-informed gradient ascent step on a collective fitness potential.\n241: \n242: For each walker $i \\in \\{1, \\ldots, N\\}$, given configuration $\\mathcal{S} = (w_1, \\ldots, w_N)$ with $w_i = (x_i, v_i)$:\n243: \n244: 1. **Define Collective Fitness Potential:** Let\n245: \n246: $$\n247: \\Psi(x_1, \\ldots, x_N) := \\frac{1}{\\beta} \\log \\sum_{j=1}^N e^{\\beta \\Phi(x_j)}\n248: $$\n249: \n250: where:\n251: - $\\Phi : \\mathbb{R}^d \\to \\mathbb{R}$ is the fitness landscape ({prf:ref}`def-cg-fitness-landscape`)\n252: - $\\beta > 0$ is the **inverse temperature parameter** (controls selection strength)\n253: \n254: This is the **log-sum-exp** (smooth maximum) of individual fitness values.\n255: \n256: 2. **Compute Gradient:** The gradient of $\\Psi$ with respect to walker $i$'s position is:\n257: \n258: $$\n259: \\nabla_{x_i} \\Psi(x) = \\frac{e^{\\beta \\Phi(x_i)}}{\\sum_{k=1}^N e^{\\beta \\Phi(x_k)}} \\nabla \\Phi(x_i) = p_i \\cdot \\nabla \\Phi(x_i)\n260: $$\n261: \n262: where $p_i := \\frac{e^{\\beta \\Phi(x_i)}}{\\sum_{k=1}^N e^{\\beta \\Phi(x_k)}}$ is the softmax weight of walker $i$.\n263: \n264: 3. **Gradient Ascent Update:** Update the walker state via\n265: \n266: $$\n267: \\begin{aligned}\n268: x_i' &= x_i + \\eta \\cdot (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1} \\nabla_{x_i} \\Psi(x) \\\\\n269: v_i' &= v_i + \\frac{1}{\\Delta t}(x_i' - x_i)\n270: \\end{aligned}\n271: $$\n272: \n273: where:\n274: - $\\eta \\in (0, 1]$ is the **step size parameter**\n275: - $(-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1}$ is the **emergent metric tensor** at $x_i$\n276: - The velocity update reflects the displacement with timescale $\\Delta t$\n277: \n278: The updated configuration is $\\mathcal{S}' = (w_1', \\ldots, w_N')$ with $w_i' = (x_i', v_i')$.\n279: \n280: **Note:** This defines the **matter force** from the fitness landscape. The full dynamics in Section 4 includes an additional **gauge force** that mediates interactions through SU(3) link variables, yielding:\n281: \n282: $$\n283: F_i^{\\text{total}} = F_i^{\\text{matter}} + F_i^{\\text{gauge}}\n284: $$\n285: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Crystalline Gas Algorithm"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-thermal-operator",
      "title": "Thermal Fluctuation Operator",
      "start_line": 321,
      "end_line": 361,
      "header_lines": [
        322
      ],
      "content_start": 324,
      "content_end": 360,
      "content": "324: :label: def-cg-thermal-operator\n325: \n326: The **Thermal Fluctuation operator** $\\Psi_{\\text{thermal}} : \\Sigma_N \\to \\Sigma_N$ adds state-dependent Gaussian noise to each walker's position and velocity.\n327: \n328: For each walker $i \\in \\{1, \\ldots, N\\}$, given configuration $\\mathcal{S}' = (w_1', \\ldots, w_N')$ from the ascent step with $w_i' = (x_i', v_i')$:\n329: \n330: 1. **Define Diffusion Tensor:** Let\n331: \n332: $$\n333: \\Sigma_{\\text{reg}}(x) := (-H_{\\Phi}(x) + \\varepsilon_{\\text{reg}} I)^{-1/2}\n334: $$\n335: \n336: where $\\varepsilon_{\\text{reg}} > 0$ is the **regularization parameter**. The square root is well-defined since $-H_{\\Phi}(x) + \\varepsilon_{\\text{reg}} I \\succ 0$ is positive definite (because $H_\\Phi(x) \\preceq -\\kappa I$ implies $-H_\\Phi(x) \\succeq \\kappa I$, so $-H_\\Phi(x) + \\varepsilon_{\\text{reg}} I \\succeq (\\kappa + \\varepsilon_{\\text{reg}}) I \\succ 0$).\n337: \n338: 2. **Sample Noise:** Draw independent Gaussian random vectors\n339: \n340: $$\n341: \\xi_i^{(x)}, \\xi_i^{(v)} \\sim \\mathcal{N}(0, I_d) \\in \\mathbb{R}^{d}\n342: $$\n343: \n344: where $I_d$ is the $d \\times d$ identity matrix.\n345: \n346: 3. **Stochastic Update (BAOAB O-step):** Update the walker state via\n347: \n348: $$\n349: \\begin{aligned}\n350: x_i(t + \\Delta t) &= x_i' + \\sqrt{\\Delta t} \\cdot \\sigma_x \\cdot \\Sigma_{\\text{reg}}(x_i') \\xi_i^{(x)} \\\\\n351: v_i(t + \\Delta t) &= c_1 \\, v_i' + c_2 \\, \\xi_i^{(v)}\n352: \\end{aligned}\n353: $$\n354: \n355: where:\n356: - $\\sigma_x > 0$ is the **position noise scale**\n357: - $\\sigma_v > 0$ is the **velocity noise scale**\n358: - $\\gamma_{\\text{fric}} > 0$ is the **friction coefficient**\n359: - $c_1 := e^{-\\gamma_{\\text{fric}} \\Delta t}$ is the **friction decay factor**\n360: - $c_2 := \\sigma_v \\sqrt{1 - c_1^2}$ is the **equipartition noise amplitude**",
      "metadata": {
        "label": "def-cg-thermal-operator"
      },
      "section": "## 2. The Crystalline Gas Algorithm",
      "references": [],
      "raw_directive": "321: #### 2.3.2 The Thermal Fluctuation Operator\n322: \n323: :::{prf:definition} Thermal Fluctuation Operator\n324: :label: def-cg-thermal-operator\n325: \n326: The **Thermal Fluctuation operator** $\\Psi_{\\text{thermal}} : \\Sigma_N \\to \\Sigma_N$ adds state-dependent Gaussian noise to each walker's position and velocity.\n327: \n328: For each walker $i \\in \\{1, \\ldots, N\\}$, given configuration $\\mathcal{S}' = (w_1', \\ldots, w_N')$ from the ascent step with $w_i' = (x_i', v_i')$:\n329: \n330: 1. **Define Diffusion Tensor:** Let\n331: \n332: $$\n333: \\Sigma_{\\text{reg}}(x) := (-H_{\\Phi}(x) + \\varepsilon_{\\text{reg}} I)^{-1/2}\n334: $$\n335: \n336: where $\\varepsilon_{\\text{reg}} > 0$ is the **regularization parameter**. The square root is well-defined since $-H_{\\Phi}(x) + \\varepsilon_{\\text{reg}} I \\succ 0$ is positive definite (because $H_\\Phi(x) \\preceq -\\kappa I$ implies $-H_\\Phi(x) \\succeq \\kappa I$, so $-H_\\Phi(x) + \\varepsilon_{\\text{reg}} I \\succeq (\\kappa + \\varepsilon_{\\text{reg}}) I \\succ 0$).\n337: \n338: 2. **Sample Noise:** Draw independent Gaussian random vectors\n339: \n340: $$\n341: \\xi_i^{(x)}, \\xi_i^{(v)} \\sim \\mathcal{N}(0, I_d) \\in \\mathbb{R}^{d}\n342: $$\n343: \n344: where $I_d$ is the $d \\times d$ identity matrix.\n345: \n346: 3. **Stochastic Update (BAOAB O-step):** Update the walker state via\n347: \n348: $$\n349: \\begin{aligned}\n350: x_i(t + \\Delta t) &= x_i' + \\sqrt{\\Delta t} \\cdot \\sigma_x \\cdot \\Sigma_{\\text{reg}}(x_i') \\xi_i^{(x)} \\\\\n351: v_i(t + \\Delta t) &= c_1 \\, v_i' + c_2 \\, \\xi_i^{(v)}\n352: \\end{aligned}\n353: $$\n354: \n355: where:\n356: - $\\sigma_x > 0$ is the **position noise scale**\n357: - $\\sigma_v > 0$ is the **velocity noise scale**\n358: - $\\gamma_{\\text{fric}} > 0$ is the **friction coefficient**\n359: - $c_1 := e^{-\\gamma_{\\text{fric}} \\Delta t}$ is the **friction decay factor**\n360: - $c_2 := \\sigma_v \\sqrt{1 - c_1^2}$ is the **equipartition noise amplitude**\n361: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Crystalline Gas Algorithm"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-markov-kernel",
      "title": "Crystalline Gas Markov Kernel",
      "start_line": 409,
      "end_line": 438,
      "header_lines": [
        410
      ],
      "content_start": 412,
      "content_end": 437,
      "content": "412: :label: def-cg-markov-kernel\n413: \n414: The Crystalline Gas dynamics define a discrete-time Markov process on $\\Sigma_N$ with transition kernel $P_{\\text{CG}} : \\Sigma_N \\times \\mathcal{B}(\\Sigma_N) \\to [0, 1]$ given by\n415: \n416: $$\n417: P_{\\text{CG}}(\\mathcal{S}, A) := \\mathbb{P}(\\Psi_{\\text{CG}}(\\mathcal{S}) \\in A)\n418: $$\n419: \n420: for all $\\mathcal{S} \\in \\Sigma_N$ and $A \\in \\mathcal{B}(\\Sigma_N)$, where the probability is with respect to the random noise $\\{\\xi_i^{(x)}, \\xi_i^{(v)}\\}_{i=1}^N$ in the thermal fluctuation operator {prf:ref}`def-cg-thermal-operator`.\n421: \n422: The kernel satisfies:\n423: 1. **Feller Property:** For any bounded continuous $f : \\Sigma_N \\to \\mathbb{R}$, the function $P_{\\text{CG}} f : \\Sigma_N \\to \\mathbb{R}$ defined by\n424: \n425: $$\n426: (P_{\\text{CG}} f)(\\mathcal{S}) := \\int_{\\Sigma_N} f(\\mathcal{S}') \\, P_{\\text{CG}}(\\mathcal{S}, \\mathrm{d}\\mathcal{S}')\n427: $$\n428: \n429: is bounded and continuous.\n430: \n431: 2. **Irreducibility:** For any $\\mathcal{S}_0, \\mathcal{S}_1 \\in \\Sigma_N$ and any $\\varepsilon > 0$, there exists $n \\in \\mathbb{N}$ such that\n432: \n433: $$\n434: P_{\\text{CG}}^{(n)}(\\mathcal{S}_0, B_{\\varepsilon}(\\mathcal{S}_1)) > 0\n435: $$\n436: \n437: where $B_{\\varepsilon}(\\mathcal{S}_1)$ is the $\\varepsilon$-ball around $\\mathcal{S}_1$.",
      "metadata": {
        "label": "def-cg-markov-kernel"
      },
      "section": "## 2. The Crystalline Gas Algorithm",
      "references": [
        "def-cg-thermal-operator"
      ],
      "raw_directive": "409: ### 2.4 The Markov Transition Kernel\n410: \n411: :::{prf:definition} Crystalline Gas Markov Kernel\n412: :label: def-cg-markov-kernel\n413: \n414: The Crystalline Gas dynamics define a discrete-time Markov process on $\\Sigma_N$ with transition kernel $P_{\\text{CG}} : \\Sigma_N \\times \\mathcal{B}(\\Sigma_N) \\to [0, 1]$ given by\n415: \n416: $$\n417: P_{\\text{CG}}(\\mathcal{S}, A) := \\mathbb{P}(\\Psi_{\\text{CG}}(\\mathcal{S}) \\in A)\n418: $$\n419: \n420: for all $\\mathcal{S} \\in \\Sigma_N$ and $A \\in \\mathcal{B}(\\Sigma_N)$, where the probability is with respect to the random noise $\\{\\xi_i^{(x)}, \\xi_i^{(v)}\\}_{i=1}^N$ in the thermal fluctuation operator {prf:ref}`def-cg-thermal-operator`.\n421: \n422: The kernel satisfies:\n423: 1. **Feller Property:** For any bounded continuous $f : \\Sigma_N \\to \\mathbb{R}$, the function $P_{\\text{CG}} f : \\Sigma_N \\to \\mathbb{R}$ defined by\n424: \n425: $$\n426: (P_{\\text{CG}} f)(\\mathcal{S}) := \\int_{\\Sigma_N} f(\\mathcal{S}') \\, P_{\\text{CG}}(\\mathcal{S}, \\mathrm{d}\\mathcal{S}')\n427: $$\n428: \n429: is bounded and continuous.\n430: \n431: 2. **Irreducibility:** For any $\\mathcal{S}_0, \\mathcal{S}_1 \\in \\Sigma_N$ and any $\\varepsilon > 0$, there exists $n \\in \\mathbb{N}$ such that\n432: \n433: $$\n434: P_{\\text{CG}}^{(n)}(\\mathcal{S}_0, B_{\\varepsilon}(\\mathcal{S}_1)) > 0\n435: $$\n436: \n437: where $B_{\\varepsilon}(\\mathcal{S}_1)$ is the $\\varepsilon$-ball around $\\mathcal{S}_1$.\n438: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Crystalline Gas Algorithm"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-invariant-measure",
      "title": "Invariant Measure",
      "start_line": 468,
      "end_line": 484,
      "header_lines": [
        469
      ],
      "content_start": 471,
      "content_end": 483,
      "content": "471: :label: def-cg-invariant-measure\n472: \n473: A probability measure $\\pi \\in \\mathcal{P}(\\Sigma_N)$ is **invariant** (or **stationary**) for the Markov kernel $P_{\\text{CG}}$ if\n474: \n475: $$\n476: \\pi(A) = \\int_{\\Sigma_N} P_{\\text{CG}}(\\mathcal{S}, A) \\, \\pi(\\mathrm{d}\\mathcal{S})\n477: $$\n478: \n479: for all $A \\in \\mathcal{B}(\\Sigma_N)$.\n480: \n481: Equivalently, for any bounded measurable function $f : \\Sigma_N \\to \\mathbb{R}$:\n482: \n483: $$",
      "metadata": {
        "label": "def-cg-invariant-measure"
      },
      "section": "## 3. Existence and Uniqueness of the Quasi-Stationary Distribution",
      "references": [],
      "raw_directive": "468: ### 3.1 The Invariant Measure and QSD\n469: \n470: :::{prf:definition} Invariant Measure\n471: :label: def-cg-invariant-measure\n472: \n473: A probability measure $\\pi \\in \\mathcal{P}(\\Sigma_N)$ is **invariant** (or **stationary**) for the Markov kernel $P_{\\text{CG}}$ if\n474: \n475: $$\n476: \\pi(A) = \\int_{\\Sigma_N} P_{\\text{CG}}(\\mathcal{S}, A) \\, \\pi(\\mathrm{d}\\mathcal{S})\n477: $$\n478: \n479: for all $A \\in \\mathcal{B}(\\Sigma_N)$.\n480: \n481: Equivalently, for any bounded measurable function $f : \\Sigma_N \\to \\mathbb{R}$:\n482: \n483: $$\n484: \\int_{\\Sigma_N} f \\, \\mathrm{d}\\pi = \\int_{\\Sigma_N} (P_{\\text{CG}} f) \\, \\mathrm{d}\\pi",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. Existence and Uniqueness of the Quasi-Stationary Distribution"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-matter-force",
      "title": "Matter Force (Fitness Landscape)",
      "start_line": 770,
      "end_line": 787,
      "header_lines": [
        771
      ],
      "content_start": 773,
      "content_end": 786,
      "content": "773: :label: def-cg-matter-force\n774: \n775: For walker $i$ undergoing geometric ascent ({prf:ref}`def-cg-ascent-operator`), the **matter force** from the fitness landscape is:\n776: \n777: $$\n778: F_i^{\\text{matter}} := \\eta \\cdot g(x_i) \\nabla_{x_i} \\Psi = \\eta \\cdot (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1} \\cdot p_i \\nabla\\Phi(x_i) \\in \\mathbb{R}^{3}\n779: $$\n780: \n781: where:\n782: - $\\Psi = \\frac{1}{\\beta}\\log\\sum_j e^{\\beta\\Phi(x_j)}$ is the collective fitness potential\n783: - $p_i = \\frac{e^{\\beta\\Phi(x_i)}}{\\sum_k e^{\\beta\\Phi(x_k)}}$ is the softmax weight\n784: - $g(x_i) = (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1}$ is the emergent Riemannian metric\n785: - $\\eta \\in (0,1]$ is the step size parameter\n786: - We assume $d=3$ for Standard Model correspondence",
      "metadata": {
        "label": "def-cg-matter-force"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [
        "def-cg-ascent-operator"
      ],
      "raw_directive": "770: The Crystalline Gas matter sector consists of walkers with physical degrees of freedom (position, momentum) and an emergent **color observable** that encodes their interaction state.\n771: \n772: :::{prf:definition} Matter Force (Fitness Landscape)\n773: :label: def-cg-matter-force\n774: \n775: For walker $i$ undergoing geometric ascent ({prf:ref}`def-cg-ascent-operator`), the **matter force** from the fitness landscape is:\n776: \n777: $$\n778: F_i^{\\text{matter}} := \\eta \\cdot g(x_i) \\nabla_{x_i} \\Psi = \\eta \\cdot (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1} \\cdot p_i \\nabla\\Phi(x_i) \\in \\mathbb{R}^{3}\n779: $$\n780: \n781: where:\n782: - $\\Psi = \\frac{1}{\\beta}\\log\\sum_j e^{\\beta\\Phi(x_j)}$ is the collective fitness potential\n783: - $p_i = \\frac{e^{\\beta\\Phi(x_i)}}{\\sum_k e^{\\beta\\Phi(x_k)}}$ is the softmax weight\n784: - $g(x_i) = (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1}$ is the emergent Riemannian metric\n785: - $\\eta \\in (0,1]$ is the step size parameter\n786: - We assume $d=3$ for Standard Model correspondence\n787: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-momentum",
      "title": "Momentum and Phase Space Structure",
      "start_line": 789,
      "end_line": 797,
      "header_lines": [
        790
      ],
      "content_start": 792,
      "content_end": 796,
      "content": "792: :label: def-cg-momentum\n793: \n794: For walker $i$ with velocity $v_i \\in \\mathbb{R}^{3}$, define:\n795: - **Momentum:** $p_i := m v_i \\in \\mathbb{R}^{3}$ where $m$ is the effective walker mass (set $m=1$ without loss of generality)\n796: - **Phase space state:** $(x_i, v_i) \\in \\Omega = \\mathbb{R}^{3} \\times \\mathbb{R}^{3}$",
      "metadata": {
        "label": "def-cg-momentum"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [
        "def-cg-thermal-operator"
      ],
      "raw_directive": "789: :::\n790: \n791: :::{prf:definition} Momentum and Phase Space Structure\n792: :label: def-cg-momentum\n793: \n794: For walker $i$ with velocity $v_i \\in \\mathbb{R}^{3}$, define:\n795: - **Momentum:** $p_i := m v_i \\in \\mathbb{R}^{3}$ where $m$ is the effective walker mass (set $m=1$ without loss of generality)\n796: - **Phase space state:** $(x_i, v_i) \\in \\Omega = \\mathbb{R}^{3} \\times \\mathbb{R}^{3}$\n797: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-color-observable",
      "title": "Color Observable (SU(3) Charge)",
      "start_line": 799,
      "end_line": 819,
      "header_lines": [
        800
      ],
      "content_start": 802,
      "content_end": 818,
      "content": "802: :label: def-cg-color-observable\n803: \n804: For walker $i$, the **color observable** is a complex 3-vector that encodes the walker's total interaction state:\n805: \n806: $$\n807: |\\Psi_i\\rangle := F_i^{\\text{matter}} + \\frac{i}{\\hbar_{\\text{eff}}} p_i \\in \\mathbb{C}^{3}\n808: $$\n809: \n810: where:\n811: - $F_i^{\\text{matter}} \\in \\mathbb{R}^{3}$ is the matter force from {prf:ref}`def-cg-matter-force`\n812: - $p_i \\in \\mathbb{R}^{3}$ is the momentum\n813: - $\\hbar_{\\text{eff}}$ is an effective dimensionless constant (set $\\hbar_{\\text{eff}} = 1$ without loss of generality)\n814: \n815: This complex 3-vector lives in a local $\\mathbb{C}^{3}$ **color space** attached to walker $i$. It serves as the **SU(3) charge** for gauge field interactions.\n816: \n817: **Physical Interpretation:**\n818: - The real part $\\text{Re}(|\\Psi_i\\rangle) = F_i^{\\text{matter}}$ encodes the walker's response to the fitness landscape",
      "metadata": {
        "label": "def-cg-color-observable"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [
        "def-cg-matter-force"
      ],
      "raw_directive": "799: :::\n800: \n801: :::{prf:definition} Color Observable (SU(3) Charge)\n802: :label: def-cg-color-observable\n803: \n804: For walker $i$, the **color observable** is a complex 3-vector that encodes the walker's total interaction state:\n805: \n806: $$\n807: |\\Psi_i\\rangle := F_i^{\\text{matter}} + \\frac{i}{\\hbar_{\\text{eff}}} p_i \\in \\mathbb{C}^{3}\n808: $$\n809: \n810: where:\n811: - $F_i^{\\text{matter}} \\in \\mathbb{R}^{3}$ is the matter force from {prf:ref}`def-cg-matter-force`\n812: - $p_i \\in \\mathbb{R}^{3}$ is the momentum\n813: - $\\hbar_{\\text{eff}}$ is an effective dimensionless constant (set $\\hbar_{\\text{eff}} = 1$ without loss of generality)\n814: \n815: This complex 3-vector lives in a local $\\mathbb{C}^{3}$ **color space** attached to walker $i$. It serves as the **SU(3) charge** for gauge field interactions.\n816: \n817: **Physical Interpretation:**\n818: - The real part $\\text{Re}(|\\Psi_i\\rangle) = F_i^{\\text{matter}}$ encodes the walker's response to the fitness landscape\n819: - The imaginary part $\\text{Im}(|\\Psi_i\\rangle) = p_i$ encodes the walker's kinetic state",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-information-graph",
      "title": "Walker Information Graph",
      "start_line": 827,
      "end_line": 842,
      "header_lines": [
        828
      ],
      "content_start": 830,
      "content_end": 841,
      "content": "830: :label: def-cg-information-graph\n831: \n832: The walkers form a **dynamic information graph** $\\mathcal{G} = (\\mathcal{V}, \\mathcal{E})$ where:\n833: \n834: - **Nodes (Vertices):** $\\mathcal{V} = \\{1, 2, \\ldots, N\\}$ are the walkers\n835: - **Edges:** $(i, j) \\in \\mathcal{E}$ if walkers $i$ and $j$ are within interaction range:\n836: \n837: $$\n838: (i, j) \\in \\mathcal{E} \\quad \\Leftrightarrow \\quad \\|x_i - x_j\\| \\leq \\varepsilon_c\n839: $$\n840: \n841: where $\\varepsilon_c > 0$ is the interaction cutoff radius.",
      "metadata": {
        "label": "def-cg-information-graph"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "827: We now construct the **SU(3) color gauge field** as a **fundamental degree of freedom** living on the edges of the walker interaction graph. This creates a true gauge theory with bidirectional feedback between matter (walkers) and field (link variables).\n828: \n829: :::{prf:definition} Walker Information Graph\n830: :label: def-cg-information-graph\n831: \n832: The walkers form a **dynamic information graph** $\\mathcal{G} = (\\mathcal{V}, \\mathcal{E})$ where:\n833: \n834: - **Nodes (Vertices):** $\\mathcal{V} = \\{1, 2, \\ldots, N\\}$ are the walkers\n835: - **Edges:** $(i, j) \\in \\mathcal{E}$ if walkers $i$ and $j$ are within interaction range:\n836: \n837: $$\n838: (i, j) \\in \\mathcal{E} \\quad \\Leftrightarrow \\quad \\|x_i - x_j\\| \\leq \\varepsilon_c\n839: $$\n840: \n841: where $\\varepsilon_c > 0$ is the interaction cutoff radius.\n842: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-link-variables",
      "title": "Link Variables (SU(3) Gauge Field)",
      "start_line": 844,
      "end_line": 865,
      "header_lines": [
        845
      ],
      "content_start": 847,
      "content_end": 864,
      "content": "847: :label: def-cg-link-variables\n848: \n849: On every edge $(i, j) \\in \\mathcal{E}$, there exists a **fundamental degree of freedom** called the **link variable**:\n850: \n851: $$\n852: U_{ij} \\in \\text{SU}(3)\n853: $$\n854: \n855: The set of all link variables $\\{U_{ij}\\}_{(i,j) \\in \\mathcal{E}}$ **is the SU(3) gauge field**.\n856: \n857: **Key Properties:**\n858: - $U_{ij}$ is a $3 \\times 3$ special unitary matrix: $U_{ij}^\\dagger U_{ij} = I_3$ and $\\det(U_{ij}) = 1$\n859: - Hermitian symmetry: $U_{ji} = U_{ij}^\\dagger$\n860: - $U_{ij}$ is **NOT** calculated from walker states; it is an independent variable of the system\n861: - $U_{ij}$ acts as the **parallel transport operator** for color vectors from site $j$ to site $i$\n862: \n863: **Physical Interpretation:**\n864: - $U_{ij}$ encodes how the local color basis at $x_j$ relates to the local color basis at $x_i$",
      "metadata": {
        "label": "def-cg-link-variables"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "844: :::\n845: \n846: :::{prf:definition} Link Variables (SU(3) Gauge Field)\n847: :label: def-cg-link-variables\n848: \n849: On every edge $(i, j) \\in \\mathcal{E}$, there exists a **fundamental degree of freedom** called the **link variable**:\n850: \n851: $$\n852: U_{ij} \\in \\text{SU}(3)\n853: $$\n854: \n855: The set of all link variables $\\{U_{ij}\\}_{(i,j) \\in \\mathcal{E}}$ **is the SU(3) gauge field**.\n856: \n857: **Key Properties:**\n858: - $U_{ij}$ is a $3 \\times 3$ special unitary matrix: $U_{ij}^\\dagger U_{ij} = I_3$ and $\\det(U_{ij}) = 1$\n859: - Hermitian symmetry: $U_{ji} = U_{ij}^\\dagger$\n860: - $U_{ij}$ is **NOT** calculated from walker states; it is an independent variable of the system\n861: - $U_{ij}$ acts as the **parallel transport operator** for color vectors from site $j$ to site $i$\n862: \n863: **Physical Interpretation:**\n864: - $U_{ij}$ encodes how the local color basis at $x_j$ relates to the local color basis at $x_i$\n865: - When $U_{ij} = I_3$, the field is \"flat\" between $i$ and $j$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-gauge-covariant-force",
      "title": "Parallel Transport and Gauge-Covariant Force",
      "start_line": 871,
      "end_line": 894,
      "header_lines": [
        872
      ],
      "content_start": 874,
      "content_end": 893,
      "content": "874: :label: def-cg-gauge-covariant-force\n875: \n876: For walker $i$, the **total force** includes both the matter force and a **gauge force** mediated by the SU(3) field:\n877: \n878: $$\n879: F_i^{\\text{total}} = F_i^{\\text{matter}} + F_i^{\\text{gauge}}\n880: $$\n881: \n882: The **gauge force** is defined as:\n883: \n884: $$\n885: F_i^{\\text{gauge}} := \\nu \\sum_{j : (i,j) \\in \\mathcal{E}} K_\\rho(x_i, x_j) \\left[ \\text{Re}(U_{ij} |\\Psi_j\\rangle) - \\text{Re}(|\\Psi_i\\rangle) \\right]\n886: $$\n887: \n888: where:\n889: - $\\nu > 0$ is the gauge coupling strength\n890: - $K_\\rho(x_i, x_j) = \\exp(-\\|x_i - x_j\\|^2/(2\\rho^2))$ is the interaction kernel\n891: - $|\\Psi_j\\rangle$ is the color observable of walker $j$ from {prf:ref}`def-cg-color-observable`\n892: - $U_{ij} |\\Psi_j\\rangle \\in \\mathbb{C}^{3}$ is the **parallel-transported** color observable of $j$ to site $i$\n893: - $\\text{Re}(\\cdot)$ takes the real part component-wise",
      "metadata": {
        "label": "def-cg-gauge-covariant-force"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [
        "def-cg-color-observable"
      ],
      "raw_directive": "871: The gauge field mediates forces between walkers. The force on walker $i$ depends on the parallel-transported color observables of its neighbors.\n872: \n873: :::{prf:definition} Parallel Transport and Gauge-Covariant Force\n874: :label: def-cg-gauge-covariant-force\n875: \n876: For walker $i$, the **total force** includes both the matter force and a **gauge force** mediated by the SU(3) field:\n877: \n878: $$\n879: F_i^{\\text{total}} = F_i^{\\text{matter}} + F_i^{\\text{gauge}}\n880: $$\n881: \n882: The **gauge force** is defined as:\n883: \n884: $$\n885: F_i^{\\text{gauge}} := \\nu \\sum_{j : (i,j) \\in \\mathcal{E}} K_\\rho(x_i, x_j) \\left[ \\text{Re}(U_{ij} |\\Psi_j\\rangle) - \\text{Re}(|\\Psi_i\\rangle) \\right]\n886: $$\n887: \n888: where:\n889: - $\\nu > 0$ is the gauge coupling strength\n890: - $K_\\rho(x_i, x_j) = \\exp(-\\|x_i - x_j\\|^2/(2\\rho^2))$ is the interaction kernel\n891: - $|\\Psi_j\\rangle$ is the color observable of walker $j$ from {prf:ref}`def-cg-color-observable`\n892: - $U_{ij} |\\Psi_j\\rangle \\in \\mathbb{C}^{3}$ is the **parallel-transported** color observable of $j$ to site $i$\n893: - $\\text{Re}(\\cdot)$ takes the real part component-wise\n894: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-wilson-loop",
      "title": "Wilson Loop and Plaquette",
      "start_line": 914,
      "end_line": 932,
      "header_lines": [
        915
      ],
      "content_start": 917,
      "content_end": 931,
      "content": "917: :label: def-cg-wilson-loop\n918: \n919: A **loop** $\\mathcal{L} = (i_1 \\to i_2 \\to \\cdots \\to i_k \\to i_1)$ in the walker graph is a closed path of edges. The **Wilson loop** (holonomy) around $\\mathcal{L}$ is:\n920: \n921: $$\n922: U_{\\mathcal{L}} := U_{i_1 i_2} U_{i_2 i_3} \\cdots U_{i_k i_1} \\in \\text{SU}(3)\n923: $$\n924: \n925: The simplest loops are **plaquettes**: loops formed by 4 walkers (elementary squares in the graph).\n926: \n927: **Gauge Invariance:** Under local gauge transformations $U_{ij} \\to G(x_i) U_{ij} G(x_j)^\\dagger$, the Wilson loop transforms as:\n928: \n929: $$\n930: U_{\\mathcal{L}} \\to G(x_{i_1}) U_{\\mathcal{L}} G(x_{i_1})^\\dagger\n931: $$",
      "metadata": {
        "label": "def-cg-wilson-loop"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "914: The gauge field evolves to minimize an action functional that measures the \"curvature\" of the field configuration.\n915: \n916: :::{prf:definition} Wilson Loop and Plaquette\n917: :label: def-cg-wilson-loop\n918: \n919: A **loop** $\\mathcal{L} = (i_1 \\to i_2 \\to \\cdots \\to i_k \\to i_1)$ in the walker graph is a closed path of edges. The **Wilson loop** (holonomy) around $\\mathcal{L}$ is:\n920: \n921: $$\n922: U_{\\mathcal{L}} := U_{i_1 i_2} U_{i_2 i_3} \\cdots U_{i_k i_1} \\in \\text{SU}(3)\n923: $$\n924: \n925: The simplest loops are **plaquettes**: loops formed by 4 walkers (elementary squares in the graph).\n926: \n927: **Gauge Invariance:** Under local gauge transformations $U_{ij} \\to G(x_i) U_{ij} G(x_j)^\\dagger$, the Wilson loop transforms as:\n928: \n929: $$\n930: U_{\\mathcal{L}} \\to G(x_{i_1}) U_{\\mathcal{L}} G(x_{i_1})^\\dagger\n931: $$\n932: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-wilson-action",
      "title": "Wilson Action (Field Energy)",
      "start_line": 934,
      "end_line": 953,
      "header_lines": [
        935
      ],
      "content_start": 937,
      "content_end": 952,
      "content": "937: :label: def-cg-wilson-action\n938: \n939: The **Wilson action** measures the total \"field energy\" stored in the gauge field configuration $\\{U_{ij}\\}$:\n940: \n941: $$\n942: S_W[\\{U_{ij}\\}] := \\sum_{\\text{plaquettes } \\mathcal{P}} \\beta_{\\text{gauge}} \\left[ 1 - \\frac{1}{3} \\text{Re}(\\text{Tr}(U_{\\mathcal{P}})) \\right]\n943: $$\n944: \n945: where:\n946: - The sum runs over all elementary plaquettes in the walker graph\n947: - $\\beta_{\\text{gauge}} > 0$ is the inverse gauge coupling (analogous to $1/g^2$ in lattice QFT)\n948: - $U_{\\mathcal{P}}$ is the ordered product of link variables around plaquette $\\mathcal{P}$\n949: \n950: **Physical Interpretation:**\n951: - When $U_{\\mathcal{P}} \\approx I_3$ (identity), the field is \"flat\" and $S_W \\approx 0$\n952: - When $U_{\\mathcal{P}}$ is far from identity, the field has high curvature and $S_W$ is large",
      "metadata": {
        "label": "def-cg-wilson-action"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "934: :::\n935: \n936: :::{prf:definition} Wilson Action (Field Energy)\n937: :label: def-cg-wilson-action\n938: \n939: The **Wilson action** measures the total \"field energy\" stored in the gauge field configuration $\\{U_{ij}\\}$:\n940: \n941: $$\n942: S_W[\\{U_{ij}\\}] := \\sum_{\\text{plaquettes } \\mathcal{P}} \\beta_{\\text{gauge}} \\left[ 1 - \\frac{1}{3} \\text{Re}(\\text{Tr}(U_{\\mathcal{P}})) \\right]\n943: $$\n944: \n945: where:\n946: - The sum runs over all elementary plaquettes in the walker graph\n947: - $\\beta_{\\text{gauge}} > 0$ is the inverse gauge coupling (analogous to $1/g^2$ in lattice QFT)\n948: - $U_{\\mathcal{P}}$ is the ordered product of link variables around plaquette $\\mathcal{P}$\n949: \n950: **Physical Interpretation:**\n951: - When $U_{\\mathcal{P}} \\approx I_3$ (identity), the field is \"flat\" and $S_W \\approx 0$\n952: - When $U_{\\mathcal{P}}$ is far from identity, the field has high curvature and $S_W$ is large\n953: - Minimizing $S_W$ favors smooth field configurations",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-field-update",
      "title": "Field Update Rule (Link Dynamics)",
      "start_line": 955,
      "end_line": 982,
      "header_lines": [
        956
      ],
      "content_start": 958,
      "content_end": 981,
      "content": "958: :label: def-cg-field-update\n959: \n960: The link variables evolve to minimize the Wilson action. Two standard methods from Lattice Gauge Theory:\n961: \n962: **Method A: Monte Carlo Heat Bath**\n963: \n964: For each link $U_{ij}$:\n965: 1. Compute the **staple** $S_{ij}$: the sum of all plaquettes containing $U_{ij}$ with $U_{ij}$ removed\n966: 2. The effective action for $U_{ij}$ given fixed neighbors is $S_{\\text{eff}}(U_{ij}) \\propto \\text{Re}(\\text{Tr}(U_{ij} S_{ij}^\\dagger))$\n967: 3. Sample a new $U_{ij}$ from the Boltzmann distribution:\n968: \n969: $$\n970: P(U_{ij}) \\propto \\exp\\left(-\\beta_{\\text{gauge}} S_{\\text{eff}}(U_{ij})\\right)\n971: $$\n972: \n973: **Method B: Langevin Dynamics on SU(3)**\n974: \n975: Define a \"force\" on $U_{ij}$ as the gradient of the action on the SU(3) manifold:\n976: \n977: $$\n978: \\frac{dU_{ij}}{dt} = -\\gamma_{\\text{field}} \\frac{\\delta S_W}{\\delta U_{ij}} + \\sqrt{2\\gamma_{\\text{field}}/\\beta_{\\text{gauge}}} \\, \\xi_{ij}(t)\n979: $$\n980: \n981: where $\\xi_{ij}(t)$ is Gaussian noise on $\\mathfrak{su}(3)$ (the Lie algebra).",
      "metadata": {
        "label": "def-cg-field-update"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "955: :::\n956: \n957: :::{prf:definition} Field Update Rule (Link Dynamics)\n958: :label: def-cg-field-update\n959: \n960: The link variables evolve to minimize the Wilson action. Two standard methods from Lattice Gauge Theory:\n961: \n962: **Method A: Monte Carlo Heat Bath**\n963: \n964: For each link $U_{ij}$:\n965: 1. Compute the **staple** $S_{ij}$: the sum of all plaquettes containing $U_{ij}$ with $U_{ij}$ removed\n966: 2. The effective action for $U_{ij}$ given fixed neighbors is $S_{\\text{eff}}(U_{ij}) \\propto \\text{Re}(\\text{Tr}(U_{ij} S_{ij}^\\dagger))$\n967: 3. Sample a new $U_{ij}$ from the Boltzmann distribution:\n968: \n969: $$\n970: P(U_{ij}) \\propto \\exp\\left(-\\beta_{\\text{gauge}} S_{\\text{eff}}(U_{ij})\\right)\n971: $$\n972: \n973: **Method B: Langevin Dynamics on SU(3)**\n974: \n975: Define a \"force\" on $U_{ij}$ as the gradient of the action on the SU(3) manifold:\n976: \n977: $$\n978: \\frac{dU_{ij}}{dt} = -\\gamma_{\\text{field}} \\frac{\\delta S_W}{\\delta U_{ij}} + \\sqrt{2\\gamma_{\\text{field}}/\\beta_{\\text{gauge}}} \\, \\xi_{ij}(t)\n979: $$\n980: \n981: where $\\xi_{ij}(t)$ is Gaussian noise on $\\mathfrak{su}(3)$ (the Lie algebra).\n982: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-ascent-direction-su2",
      "title": "Ascent Direction Vector",
      "start_line": 1199,
      "end_line": 1217,
      "header_lines": [
        1200
      ],
      "content_start": 1202,
      "content_end": 1216,
      "content": "1202: :label: def-cg-ascent-direction-su2\n1203: \n1204: For walker $i$, the gradient-based ascent defines a natural geometric direction via the Riemannian gradient of the collective potential:\n1205: \n1206: $$\n1207: \\vec{v}_{\\text{ascent}}(i) := g(x_i) \\nabla_{x_i} \\Psi = (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1} \\cdot \\tilde{p}_i \\nabla\\Phi(x_i) \\in \\mathbb{R}^{3}\n1208: $$\n1209: \n1210: where $\\tilde{p}_i = \\frac{e^{\\beta\\Phi(x_i)}}{\\sum_{k=1}^N e^{\\beta\\Phi(x_k)}}$ (softmax weight).\n1211: \n1212: **Normalized ascent direction:**\n1213: \n1214: $$\n1215: \\hat{v}_{\\text{ascent}}(i) := \\frac{\\vec{v}_{\\text{ascent}}(i)}{\\|\\vec{v}_{\\text{ascent}}(i)\\|} \\in S^{2}\n1216: $$",
      "metadata": {
        "label": "def-cg-ascent-direction-su2"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "1199: The edge-centric framework for SU(3) can be extended to include additional gauge groups. For completeness, we sketch how SU(2) weak isospin fields could be constructed using the ascent direction geometry.\n1200: \n1201: :::{prf:definition} Ascent Direction Vector\n1202: :label: def-cg-ascent-direction-su2\n1203: \n1204: For walker $i$, the gradient-based ascent defines a natural geometric direction via the Riemannian gradient of the collective potential:\n1205: \n1206: $$\n1207: \\vec{v}_{\\text{ascent}}(i) := g(x_i) \\nabla_{x_i} \\Psi = (-H_{\\Phi}(x_i) + \\varepsilon_{\\text{reg}} I)^{-1} \\cdot \\tilde{p}_i \\nabla\\Phi(x_i) \\in \\mathbb{R}^{3}\n1208: $$\n1209: \n1210: where $\\tilde{p}_i = \\frac{e^{\\beta\\Phi(x_i)}}{\\sum_{k=1}^N e^{\\beta\\Phi(x_k)}}$ (softmax weight).\n1211: \n1212: **Normalized ascent direction:**\n1213: \n1214: $$\n1215: \\hat{v}_{\\text{ascent}}(i) := \\frac{\\vec{v}_{\\text{ascent}}(i)}{\\|\\vec{v}_{\\text{ascent}}(i)\\|} \\in S^{2}\n1216: $$\n1217: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-spectral-gap",
      "title": "Spectral Gap",
      "start_line": 1268,
      "end_line": 1283,
      "header_lines": [
        1269
      ],
      "content_start": 1271,
      "content_end": 1282,
      "content": "1271: :label: def-spectral-gap\n1272: \n1273: The **spectral gap** $\\lambda_{\\text{gap}}$ of the generator $L_{\\text{CG}}$ is defined as\n1274: \n1275: $$\n1276: \\lambda_{\\text{gap}} := \\inf \\left\\{ \\frac{\\langle f, -L_{\\text{CG}} f \\rangle_{\\pi_{\\text{QSD}}}}{\\langle f, f \\rangle_{\\pi_{\\text{QSD}}}} \\; : \\; f \\in \\mathcal{D}(L_{\\text{CG}}), \\; \\langle f, 1 \\rangle_{\\pi_{\\text{QSD}}} = 0 \\right\\}\n1277: $$\n1278: \n1279: where:\n1280: - $\\mathcal{D}(L_{\\text{CG}})$ is the domain of $L_{\\text{CG}}$ (smooth functions with appropriate boundary conditions)\n1281: - $\\langle f, g \\rangle_{\\pi_{\\text{QSD}}} := \\int_{\\Sigma_N} f(\\mathcal{S}) g(\\mathcal{S}) \\, \\pi_{\\text{QSD}}(\\mathrm{d}\\mathcal{S})$ is the $L^2(\\pi_{\\text{QSD}})$ inner product\n1282: - The condition $\\langle f, 1 \\rangle_{\\pi_{\\text{QSD}}} = 0$ means $f$ has zero mean",
      "metadata": {
        "label": "def-spectral-gap"
      },
      "section": "## 5. The Spectral Gap",
      "references": [],
      "raw_directive": "1268: \n1269: \n1270: :::{prf:definition} Spectral Gap\n1271: :label: def-spectral-gap\n1272: \n1273: The **spectral gap** $\\lambda_{\\text{gap}}$ of the generator $L_{\\text{CG}}$ is defined as\n1274: \n1275: $$\n1276: \\lambda_{\\text{gap}} := \\inf \\left\\{ \\frac{\\langle f, -L_{\\text{CG}} f \\rangle_{\\pi_{\\text{QSD}}}}{\\langle f, f \\rangle_{\\pi_{\\text{QSD}}}} \\; : \\; f \\in \\mathcal{D}(L_{\\text{CG}}), \\; \\langle f, 1 \\rangle_{\\pi_{\\text{QSD}}} = 0 \\right\\}\n1277: $$\n1278: \n1279: where:\n1280: - $\\mathcal{D}(L_{\\text{CG}})$ is the domain of $L_{\\text{CG}}$ (smooth functions with appropriate boundary conditions)\n1281: - $\\langle f, g \\rangle_{\\pi_{\\text{QSD}}} := \\int_{\\Sigma_N} f(\\mathcal{S}) g(\\mathcal{S}) \\, \\pi_{\\text{QSD}}(\\mathrm{d}\\mathcal{S})$ is the $L^2(\\pi_{\\text{QSD}})$ inner product\n1282: - The condition $\\langle f, 1 \\rangle_{\\pi_{\\text{QSD}}} = 0$ means $f$ has zero mean\n1283: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Spectral Gap"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-wilson-loop",
      "title": "Wilson Loop Operator",
      "start_line": 1701,
      "end_line": 1717,
      "header_lines": [
        1702
      ],
      "content_start": 1704,
      "content_end": 1716,
      "content": "1704: :label: def-cg-wilson-loop\n1705: \n1706: Let $\\mathcal{C}$ be a closed curve (loop) in spacetime. The **Wilson loop** is the operator\n1707: \n1708: $$\n1709: W_{\\mathcal{C}} := \\text{Tr} \\left[ \\mathcal{P} \\exp \\left( i g \\oint_{\\mathcal{C}} A_{\\mu} \\, \\mathrm{d}x^{\\mu} \\right) \\right]\n1710: $$\n1711: \n1712: where:\n1713: - $A_{\\mu}$ is the gauge field (Lie-algebra-valued)\n1714: - $g$ is the coupling constant\n1715: - $\\mathcal{P}$ denotes path-ordering\n1716: - The trace is over the gauge group representation",
      "metadata": {
        "label": "def-cg-wilson-loop"
      },
      "section": "## 6. Confinement via the Area Law for Wilson Loops",
      "references": [],
      "raw_directive": "1701: ### 6.1 Wilson Loops\n1702: \n1703: :::{prf:definition} Wilson Loop Operator\n1704: :label: def-cg-wilson-loop\n1705: \n1706: Let $\\mathcal{C}$ be a closed curve (loop) in spacetime. The **Wilson loop** is the operator\n1707: \n1708: $$\n1709: W_{\\mathcal{C}} := \\text{Tr} \\left[ \\mathcal{P} \\exp \\left( i g \\oint_{\\mathcal{C}} A_{\\mu} \\, \\mathrm{d}x^{\\mu} \\right) \\right]\n1710: $$\n1711: \n1712: where:\n1713: - $A_{\\mu}$ is the gauge field (Lie-algebra-valued)\n1714: - $g$ is the coupling constant\n1715: - $\\mathcal{P}$ denotes path-ordering\n1716: - The trace is over the gauge group representation\n1717: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Confinement via the Area Law for Wilson Loops"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-area-perimeter-law",
      "title": "Area Law vs. Perimeter Law",
      "start_line": 1752,
      "end_line": 1774,
      "header_lines": [
        1753
      ],
      "content_start": 1755,
      "content_end": 1773,
      "content": "1755: :label: def-area-perimeter-law\n1756: \n1757: The expectation value $\\langle W_{\\mathcal{C}} \\rangle$ of the Wilson loop exhibits one of two behaviors:\n1758: \n1759: 1. **Perimeter Law (Deconfinement):**\n1760: \n1761: $$\n1762: \\langle W_{\\mathcal{C}} \\rangle \\sim e^{-\\mu \\mathcal{L}(\\mathcal{C})}\n1763: $$\n1764: \n1765: where $\\mathcal{L}(\\mathcal{C})$ is the length (perimeter) of the loop. This occurs in the deconfined phase (e.g., high temperature or Abelian theories).\n1766: \n1767: 2. **Area Law (Confinement):**\n1768: \n1769: $$\n1770: \\langle W_{\\mathcal{C}} \\rangle \\sim e^{-\\sigma \\mathcal{A}(\\mathcal{C})}\n1771: $$\n1772: \n1773: where $\\mathcal{A}(\\mathcal{C})$ is the minimal area enclosed by the loop, and $\\sigma > 0$ is the **string tension**. This occurs in the confined phase of non-Abelian gauge theories.",
      "metadata": {
        "label": "def-area-perimeter-law"
      },
      "section": "## 6. Confinement via the Area Law for Wilson Loops",
      "references": [],
      "raw_directive": "1752: :::\n1753: \n1754: :::{prf:definition} Area Law vs. Perimeter Law\n1755: :label: def-area-perimeter-law\n1756: \n1757: The expectation value $\\langle W_{\\mathcal{C}} \\rangle$ of the Wilson loop exhibits one of two behaviors:\n1758: \n1759: 1. **Perimeter Law (Deconfinement):**\n1760: \n1761: $$\n1762: \\langle W_{\\mathcal{C}} \\rangle \\sim e^{-\\mu \\mathcal{L}(\\mathcal{C})}\n1763: $$\n1764: \n1765: where $\\mathcal{L}(\\mathcal{C})$ is the length (perimeter) of the loop. This occurs in the deconfined phase (e.g., high temperature or Abelian theories).\n1766: \n1767: 2. **Area Law (Confinement):**\n1768: \n1769: $$\n1770: \\langle W_{\\mathcal{C}} \\rangle \\sim e^{-\\sigma \\mathcal{A}(\\mathcal{C})}\n1771: $$\n1772: \n1773: where $\\mathcal{A}(\\mathcal{C})$ is the minimal area enclosed by the loop, and $\\sigma > 0$ is the **string tension**. This occurs in the confined phase of non-Abelian gauge theories.\n1774: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Confinement via the Area Law for Wilson Loops"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-glueball",
      "title": "Glueball States",
      "start_line": 1967,
      "end_line": 1982,
      "header_lines": [
        1968
      ],
      "content_start": 1970,
      "content_end": 1981,
      "content": "1970: :label: def-cg-glueball\n1971: \n1972: In a pure Yang-Mills theory (without quarks), the **glueball** is the lightest bound state of gluons. Glueballs are characterized by their quantum numbers:\n1973: - **Spin** $J$ (angular momentum)\n1974: - **Parity** $P = \\pm 1$\n1975: - **Charge conjugation** $C = \\pm 1$ (for neutral states)\n1976: \n1977: The **glueball spectrum** is the set of energy eigenvalues $\\{E_n\\}$ of these bound states, ordered as:\n1978: \n1979: $$\n1980: 0 = E_0 < E_1 \\leq E_2 \\leq \\cdots\n1981: $$",
      "metadata": {
        "label": "def-cg-glueball"
      },
      "section": "## 7. The Mass Gap",
      "references": [],
      "raw_directive": "1967: ### 7.1 Glueballs and the Spectrum\n1968: \n1969: :::{prf:definition} Glueball States\n1970: :label: def-cg-glueball\n1971: \n1972: In a pure Yang-Mills theory (without quarks), the **glueball** is the lightest bound state of gluons. Glueballs are characterized by their quantum numbers:\n1973: - **Spin** $J$ (angular momentum)\n1974: - **Parity** $P = \\pm 1$\n1975: - **Charge conjugation** $C = \\pm 1$ (for neutral states)\n1976: \n1977: The **glueball spectrum** is the set of energy eigenvalues $\\{E_n\\}$ of these bound states, ordered as:\n1978: \n1979: $$\n1980: 0 = E_0 < E_1 \\leq E_2 \\leq \\cdots\n1981: $$\n1982: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. The Mass Gap"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mass-gap",
      "title": "Mass Gap",
      "start_line": 1984,
      "end_line": 1996,
      "header_lines": [
        1985
      ],
      "content_start": 1987,
      "content_end": 1995,
      "content": "1987: :label: def-mass-gap\n1988: \n1989: The **mass gap** $\\Delta_{\\text{YM}}$ is the energy of the lightest non-trivial excitation above the vacuum:\n1990: \n1991: $$\n1992: \\Delta_{\\text{YM}} := E_1 - E_0 = E_1\n1993: $$\n1994: \n1995: where $E_1$ is the mass of the lightest glueball (typically the $0^{++}$ scalar glueball).",
      "metadata": {
        "label": "def-mass-gap"
      },
      "section": "## 7. The Mass Gap",
      "references": [],
      "raw_directive": "1984: :::\n1985: \n1986: :::{prf:definition} Mass Gap\n1987: :label: def-mass-gap\n1988: \n1989: The **mass gap** $\\Delta_{\\text{YM}}$ is the energy of the lightest non-trivial excitation above the vacuum:\n1990: \n1991: $$\n1992: \\Delta_{\\text{YM}} := E_1 - E_0 = E_1\n1993: $$\n1994: \n1995: where $E_1$ is the mass of the lightest glueball (typically the $0^{++}$ scalar glueball).\n1996: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. The Mass Gap"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-os-reflection-operator",
      "title": "Euclidean Reflection Operator",
      "start_line": 2197,
      "end_line": 2213,
      "header_lines": [
        2198
      ],
      "content_start": 2200,
      "content_end": 2212,
      "content": "2200: :label: def-os-reflection-operator\n2201: \n2202: For a coordinate direction $\\mu \\in \\{0, 1, 2, 3\\}$, the **reflection operator** $\\theta_\\mu: \\mathbb{R}^4 \\to \\mathbb{R}^4$ is defined by:\n2203: \n2204: $$\n2205: \\theta_\\mu(x^0, x^1, x^2, x^3) := (x^0, \\ldots, -x^\\mu, \\ldots, x^3)\n2206: $$\n2207: \n2208: For the **time direction** (choosing $\\mu = 0$), we write:\n2209: \n2210: $$\n2211: \\theta(x^0, \\vec{x}) := (-x^0, \\vec{x})\n2212: $$",
      "metadata": {
        "label": "def-os-reflection-operator"
      },
      "section": "## 8. Osterwalder-Schrader Axiom Verification and CMI Criteria",
      "references": [],
      "raw_directive": "2197: #### Preliminary Definitions\n2198: \n2199: :::{prf:definition} Euclidean Reflection Operator\n2200: :label: def-os-reflection-operator\n2201: \n2202: For a coordinate direction $\\mu \\in \\{0, 1, 2, 3\\}$, the **reflection operator** $\\theta_\\mu: \\mathbb{R}^4 \\to \\mathbb{R}^4$ is defined by:\n2203: \n2204: $$\n2205: \\theta_\\mu(x^0, x^1, x^2, x^3) := (x^0, \\ldots, -x^\\mu, \\ldots, x^3)\n2206: $$\n2207: \n2208: For the **time direction** (choosing $\\mu = 0$), we write:\n2209: \n2210: $$\n2211: \\theta(x^0, \\vec{x}) := (-x^0, \\vec{x})\n2212: $$\n2213: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 8. Osterwalder-Schrader Axiom Verification and CMI Criteria"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-os-half-space",
      "title": "Half-Space and Test Functions",
      "start_line": 2215,
      "end_line": 2225,
      "header_lines": [
        2216
      ],
      "content_start": 2218,
      "content_end": 2224,
      "content": "2218: :label: def-os-half-space\n2219: \n2220: The **time-positive half-space** is:\n2221: \n2222: $$\n2223: \\mathcal{H}_+ := \\{x \\in \\mathbb{R}^4 : x^0 \\geq 0\\}\n2224: $$",
      "metadata": {
        "label": "def-os-half-space"
      },
      "section": "## 8. Osterwalder-Schrader Axiom Verification and CMI Criteria",
      "references": [],
      "raw_directive": "2215: :::\n2216: \n2217: :::{prf:definition} Half-Space and Test Functions\n2218: :label: def-os-half-space\n2219: \n2220: The **time-positive half-space** is:\n2221: \n2222: $$\n2223: \\mathcal{H}_+ := \\{x \\in \\mathbb{R}^4 : x^0 \\geq 0\\}\n2224: $$\n2225: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 8. Osterwalder-Schrader Axiom Verification and CMI Criteria"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-os4-axiom",
      "title": "OS4 Axiom (Clustering)",
      "start_line": 2325,
      "end_line": 2343,
      "header_lines": [
        2326
      ],
      "content_start": 2328,
      "content_end": 2342,
      "content": "2328: :label: def-os4-axiom\n2329: \n2330: **(Osterwalder-Schrader 1973, Axiom OS4)**\n2331: \n2332: The Schwinger functions (Euclidean correlation functions) satisfy **exponential clustering**: for any gauge-invariant observables $\\mathcal{O}_1, \\mathcal{O}_2$ supported on regions separated by distance $R$:\n2333: \n2334: $$\n2335: \\left| \\langle \\mathcal{O}_1 \\mathcal{O}_2 \\rangle_{\\pi} - \\langle \\mathcal{O}_1 \\rangle_{\\pi} \\langle \\mathcal{O}_2 \\rangle_{\\pi} \\right| \\leq C_{\\mathcal{O}_1, \\mathcal{O}_2} \\cdot e^{-m_{\\text{gap}} R}\n2336: $$\n2337: \n2338: where:\n2339: - $\\pi$ is the invariant measure (QSD for Crystalline Gas)\n2340: - $R = \\inf\\{d(x,y) : x \\in \\text{supp}(\\mathcal{O}_1), y \\in \\text{supp}(\\mathcal{O}_2)\\}$ is the separation distance\n2341: - $m_{\\text{gap}} > 0$ is the **mass gap** (correlation length)\n2342: - $C_{\\mathcal{O}_1, \\mathcal{O}_2} < \\infty$ depends on the observables but not on $R$",
      "metadata": {
        "label": "def-os4-axiom"
      },
      "section": "## 8. Osterwalder-Schrader Axiom Verification and CMI Criteria",
      "references": [],
      "raw_directive": "2325: #### 8.3.1 OS4 Axiom Statement\n2326: \n2327: :::{prf:definition} OS4 Axiom (Clustering)\n2328: :label: def-os4-axiom\n2329: \n2330: **(Osterwalder-Schrader 1973, Axiom OS4)**\n2331: \n2332: The Schwinger functions (Euclidean correlation functions) satisfy **exponential clustering**: for any gauge-invariant observables $\\mathcal{O}_1, \\mathcal{O}_2$ supported on regions separated by distance $R$:\n2333: \n2334: $$\n2335: \\left| \\langle \\mathcal{O}_1 \\mathcal{O}_2 \\rangle_{\\pi} - \\langle \\mathcal{O}_1 \\rangle_{\\pi} \\langle \\mathcal{O}_2 \\rangle_{\\pi} \\right| \\leq C_{\\mathcal{O}_1, \\mathcal{O}_2} \\cdot e^{-m_{\\text{gap}} R}\n2336: $$\n2337: \n2338: where:\n2339: - $\\pi$ is the invariant measure (QSD for Crystalline Gas)\n2340: - $R = \\inf\\{d(x,y) : x \\in \\text{supp}(\\mathcal{O}_1), y \\in \\text{supp}(\\mathcal{O}_2)\\}$ is the separation distance\n2341: - $m_{\\text{gap}} > 0$ is the **mass gap** (correlation length)\n2342: - $C_{\\mathcal{O}_1, \\mathcal{O}_2} < \\infty$ depends on the observables but not on $R$\n2343: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_crystalline_gas_yang_mills_mass_gap_proof",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 8. Osterwalder-Schrader Axiom Verification and CMI Criteria"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-walker",
      "title": "Walker",
      "start_line": 153,
      "end_line": 165,
      "header_lines": [
        154
      ],
      "content_start": 156,
      "content_end": 164,
      "content": "156: :label: def-walker\n157: \n158: A **walker**, denoted $w$, is a tuple consisting of a position and a status:\n159: \n160: $$\n161: w := (x, s)\n162: $$\n163: \n164: where:",
      "metadata": {
        "label": "def-walker"
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [],
      "raw_directive": "153: :::\n154: \n155: :::{prf:definition} Walker\n156: :label: def-walker\n157: \n158: A **walker**, denoted $w$, is a tuple consisting of a position and a status:\n159: \n160: $$\n161: w := (x, s)\n162: $$\n163: \n164: where:\n165: 1.  $x \\in \\mathcal{X}$ is the walker's **position** in a state space $\\mathcal{X}$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-swarm-and-state-space",
      "title": "Swarm and Swarm State Space",
      "start_line": 180,
      "end_line": 195,
      "header_lines": [
        181
      ],
      "content_start": 183,
      "content_end": 194,
      "content": "183: :label: def-swarm-and-state-space\n184: \n185: A **swarm**, denoted $\\mathcal{S}$, is an N-tuple of walkers:\n186: \n187: $$\n188: \\mathcal{S} := (w_1, w_2, \\dots, w_N)\n189: $$\n190: \n191: The **Swarm State Space**, denoted $\\Sigma_N$, is the set of all possible swarms of size N. It is the N-fold Cartesian product of the single-walker state space:\n192: \n193: $$\n194: \\Sigma_N := (\\mathcal{X} \\times \\{0, 1\\})^N",
      "metadata": {
        "label": "def-swarm-and-state-space"
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [],
      "raw_directive": "180: :::\n181: \n182: :::{prf:definition} Swarm and Swarm State Space\n183: :label: def-swarm-and-state-space\n184: \n185: A **swarm**, denoted $\\mathcal{S}$, is an N-tuple of walkers:\n186: \n187: $$\n188: \\mathcal{S} := (w_1, w_2, \\dots, w_N)\n189: $$\n190: \n191: The **Swarm State Space**, denoted $\\Sigma_N$, is the set of all possible swarms of size N. It is the N-fold Cartesian product of the single-walker state space:\n192: \n193: $$\n194: \\Sigma_N := (\\mathcal{X} \\times \\{0, 1\\})^N\n195: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-alive-dead-sets",
      "title": "Alive and Dead Sets",
      "start_line": 199,
      "end_line": 218,
      "header_lines": [
        200
      ],
      "content_start": 202,
      "content_end": 217,
      "content": "202: :label: def-alive-dead-sets\n203: \n204: For any swarm state $\\mathcal{S} = ((x_1, s_1), \\dots, (x_N, s_N)) \\in \\Sigma_N$:\n205: \n206: 1.  The **alive set**, $\\mathcal{A}(\\mathcal{S})$, is the set of indices of all walkers with a survival status of 1.\n207: \n208: \n209: $$\n210: \\mathcal{A}(\\mathcal{S}) := \\{i \\in \\{1, \\dots, N\\} \\mid s_i = 1\\}\n211: $$\n212: \n213: 2.  The **dead set**, $\\mathcal{D}(\\mathcal{S})$, is the set of indices of all walkers with a survival status of 0.\n214: \n215: \n216: $$\n217: \\mathcal{D}(\\mathcal{S}) := \\{i \\in \\{1, \\dots, N\\} \\mid s_i = 0\\}",
      "metadata": {
        "label": "def-alive-dead-sets"
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [],
      "raw_directive": "199: For any swarm $\\mathcal{S}$, we define two critical index sets that partition the walkers based on their survival status.\n200: \n201: :::{prf:definition} Alive and Dead Sets\n202: :label: def-alive-dead-sets\n203: \n204: For any swarm state $\\mathcal{S} = ((x_1, s_1), \\dots, (x_N, s_N)) \\in \\Sigma_N$:\n205: \n206: 1.  The **alive set**, $\\mathcal{A}(\\mathcal{S})$, is the set of indices of all walkers with a survival status of 1.\n207: \n208: \n209: $$\n210: \\mathcal{A}(\\mathcal{S}) := \\{i \\in \\{1, \\dots, N\\} \\mid s_i = 1\\}\n211: $$\n212: \n213: 2.  The **dead set**, $\\mathcal{D}(\\mathcal{S})$, is the set of indices of all walkers with a survival status of 0.\n214: \n215: \n216: $$\n217: \\mathcal{D}(\\mathcal{S}) := \\{i \\in \\{1, \\dots, N\\} \\mid s_i = 0\\}\n218: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-valid-state-space",
      "title": "Valid State Space",
      "start_line": 256,
      "end_line": 272,
      "header_lines": [
        257
      ],
      "content_start": 259,
      "content_end": 271,
      "content": "259: :label: def-valid-state-space\n260: \n261: A **Valid State Space** is a tuple $(\\mathcal{X}, d_{\\mathcal{X}}, \\mu_{\\mathcal{X}})$ with the following properties:\n262: \n263: 1.  **Topological Structure:** The space $(\\mathcal{X}, d_{\\mathcal{X}})$ must be a **Polish space** (a complete, separable metric space). This ensures that notions of convergence and probability measures are well-defined.\n264: \n265: 2.  **Measure Structure:** The space must be equipped with a **reference measure** $\\mu_{\\mathcal{X}}$ (e.g., Lebesgue measure for Euclidean spaces, or the Riemannian volume measure for manifolds). This measure is used to define probability densities for the noise kernels.\n266: \n267: 3.  **Existence of Valid Noise:** The space must support a **Valid Noise Measure** ($\\mathcal{P}_\\sigma$ and $\\mathcal{Q}_\\delta$) as per {prf:ref}`def-valid-noise-measure`. This is the most critical functional requirement, as it implies the space has enough geometric regularity to satisfy:\n268:     *   The **Axiom of Bounded Second Moment of Perturbation** ([](#def-axiom-bounded-second-moment-perturbation)).\n269:     *   The **Axiom of Boundary Regularity** ([](#axiom-boundary-regularity)).\n270: \n271: 4.  **Regularity of the Domain:** The **Valid Domain** $\\mathcal{X}_{\\mathrm{valid}} \\subset \\mathcal{X}$ must have a boundary $\\partial \\mathcal{X}_{\\mathrm{valid}}$ that is a null set with respect to any admissible noise measure. For example, if $\\mathcal{X}$ is a smooth manifold, requiring a $C^1$ boundary is sufficient.",
      "metadata": {
        "label": "def-valid-state-space"
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [
        "def-valid-noise-measure"
      ],
      "raw_directive": "256: For the analytical framework to be sound, the State Space $(\\mathcal{X}, d_{\\mathcal{X}}, \\mu_{\\mathcal{X}})$ in which walkers evolve must satisfy a set of foundational properties. Any space that meets these criteria is considered a **Valid State Space**.\n257: \n258: :::{prf:definition} Valid State Space\n259: :label: def-valid-state-space\n260: \n261: A **Valid State Space** is a tuple $(\\mathcal{X}, d_{\\mathcal{X}}, \\mu_{\\mathcal{X}})$ with the following properties:\n262: \n263: 1.  **Topological Structure:** The space $(\\mathcal{X}, d_{\\mathcal{X}})$ must be a **Polish space** (a complete, separable metric space). This ensures that notions of convergence and probability measures are well-defined.\n264: \n265: 2.  **Measure Structure:** The space must be equipped with a **reference measure** $\\mu_{\\mathcal{X}}$ (e.g., Lebesgue measure for Euclidean spaces, or the Riemannian volume measure for manifolds). This measure is used to define probability densities for the noise kernels.\n266: \n267: 3.  **Existence of Valid Noise:** The space must support a **Valid Noise Measure** ($\\mathcal{P}_\\sigma$ and $\\mathcal{Q}_\\delta$) as per {prf:ref}`def-valid-noise-measure`. This is the most critical functional requirement, as it implies the space has enough geometric regularity to satisfy:\n268:     *   The **Axiom of Bounded Second Moment of Perturbation** ([](#def-axiom-bounded-second-moment-perturbation)).\n269:     *   The **Axiom of Boundary Regularity** ([](#axiom-boundary-regularity)).\n270: \n271: 4.  **Regularity of the Domain:** The **Valid Domain** $\\mathcal{X}_{\\mathrm{valid}} \\subset \\mathcal{X}$ must have a boundary $\\partial \\mathcal{X}_{\\mathrm{valid}}$ that is a null set with respect to any admissible noise measure. For example, if $\\mathcal{X}$ is a smooth manifold, requiring a $C^1$ boundary is sufficient.\n272: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-reference-measures",
      "title": "Reference Noise and Kernel Families",
      "start_line": 322,
      "end_line": 332,
      "header_lines": [
        323
      ],
      "content_start": 325,
      "content_end": 331,
      "content": "325: :label: def-reference-measures\n326: \n327: - **Perturbation kernels on $\\mathcal{X}$ (dimension $d$):**\n328:   - Gaussian: $\\xi \\sim \\mathcal{N}(0, \\sigma^2 I_d)$ so that $\\mathbb{E}[\\|\\xi\\|_2^2] = d\\,\\sigma^2$.\n329:   - Uniform ball: $\\xi$ uniform on $B_d(0,\\sigma)$ with density $1/\\lambda_d(B_d(0,\\sigma))$.\n330: - **Cloning kernels on $\\mathcal{X}$:** analogously parameterized by $\\delta>0$ (e.g., $\\mathcal{N}(0, \\delta^2 I_d)$ or uniform on $B_d(0,\\delta)$).\n331: - **Smoothing kernels on $\\mathcal{Y}$ (dimension $m$):**",
      "metadata": {
        "label": "def-reference-measures"
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [],
      "raw_directive": "322: :::\n323: \n324: :::{prf:definition} Reference Noise and Kernel Families\n325: :label: def-reference-measures\n326: \n327: - **Perturbation kernels on $\\mathcal{X}$ (dimension $d$):**\n328:   - Gaussian: $\\xi \\sim \\mathcal{N}(0, \\sigma^2 I_d)$ so that $\\mathbb{E}[\\|\\xi\\|_2^2] = d\\,\\sigma^2$.\n329:   - Uniform ball: $\\xi$ uniform on $B_d(0,\\sigma)$ with density $1/\\lambda_d(B_d(0,\\sigma))$.\n330: - **Cloning kernels on $\\mathcal{X}$:** analogously parameterized by $\\delta>0$ (e.g., $\\mathcal{N}(0, \\delta^2 I_d)$ or uniform on $B_d(0,\\delta)$).\n331: - **Smoothing kernels on $\\mathcal{Y}$ (dimension $m$):**\n332:   - Gaussian: $K_\\sigma(y) = (2\\pi\\sigma^2)^{-m/2} \\exp(-\\|y\\|_2^2/(2\\sigma^2))$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-n-particle-displacement-metric",
      "title": "N-Particle Displacement Pseudometric ($d_{\\text{Disp},\\mathcal{Y}}$)",
      "start_line": 414,
      "end_line": 443,
      "header_lines": [
        415,
        434,
        435
      ],
      "content_start": 417,
      "content_end": 442,
      "content": "417: :label: def-n-particle-displacement-metric\n418: \n419: For any two swarms, $\\mathcal{S}_1$ and $\\mathcal{S}_2$, define the (pseudo)metric by\n420: \n421: $$\n422: d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2)\n423: := \\Bigg( \\frac{1}{N} \\sum_{i=1}^N d_{\\mathcal{Y}}\\!\\big(\\varphi(x_{1,i}), \\varphi(x_{2,i})\\big)^2\n424: \\;+\n425: \\; \\frac{\\lambda_{\\mathrm{status}}}{N} \\sum_{i=1}^N (s_{1,i} - s_{2,i})^2 \\Bigg)^{\\!1/2}.\n426: $$\n427: \n428: For algebraic convenience we will frequently write and bound its square,\n429: \n430: $$\n431: d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2)^2\n432: = \\frac{1}{N} \\sum_{i=1}^N d_{\\mathcal{Y}}(\\varphi(x_{1,i}), \\varphi(x_{2,i}))^2 + \\frac{\\lambda_{\\mathrm{status}}}{N} \\sum_{i=1}^N (s_{1,i} - s_{2,i})^2.\n433: $$\n434: \n435: :::{admonition} Breaking Down the Formula\n436: :class: note\n437: :open:\n438: This formula has two parts:\n439: \n440: 1. **Position Changes** (first term): For each walker $i$, measure how far it moved in the algorithmic space, square it, then average over all walkers.\n441: \n442: 2. **Status Changes** (second term): For each walker $i$, check if its status changed (alive ↔ dead). Since status is 0 or 1, $(s_{1,i} - s_{2,i})^2$ equals 1 if status changed, 0 if unchanged. Sum these up and weight by $\\lambda_{\\text{status}}$.",
      "metadata": {
        "label": "def-n-particle-displacement-metric",
        "class": "note",
        "open": ""
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [],
      "raw_directive": "414: :::\n415: \n416: :::{prf:definition} N-Particle Displacement Pseudometric ($d_{\\text{Disp},\\mathcal{Y}}$)\n417: :label: def-n-particle-displacement-metric\n418: \n419: For any two swarms, $\\mathcal{S}_1$ and $\\mathcal{S}_2$, define the (pseudo)metric by\n420: \n421: $$\n422: d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2)\n423: := \\Bigg( \\frac{1}{N} \\sum_{i=1}^N d_{\\mathcal{Y}}\\!\\big(\\varphi(x_{1,i}), \\varphi(x_{2,i})\\big)^2\n424: \\;+\n425: \\; \\frac{\\lambda_{\\mathrm{status}}}{N} \\sum_{i=1}^N (s_{1,i} - s_{2,i})^2 \\Bigg)^{\\!1/2}.\n426: $$\n427: \n428: For algebraic convenience we will frequently write and bound its square,\n429: \n430: $$\n431: d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2)^2\n432: = \\frac{1}{N} \\sum_{i=1}^N d_{\\mathcal{Y}}(\\varphi(x_{1,i}), \\varphi(x_{2,i}))^2 + \\frac{\\lambda_{\\mathrm{status}}}{N} \\sum_{i=1}^N (s_{1,i} - s_{2,i})^2.\n433: $$\n434: \n435: :::{admonition} Breaking Down the Formula\n436: :class: note\n437: :open:\n438: This formula has two parts:\n439: \n440: 1. **Position Changes** (first term): For each walker $i$, measure how far it moved in the algorithmic space, square it, then average over all walkers.\n441: \n442: 2. **Status Changes** (second term): For each walker $i$, check if its status changed (alive ↔ dead). Since status is 0 or 1, $(s_{1,i} - s_{2,i})^2$ equals 1 if status changed, 0 if unchanged. Sum these up and weight by $\\lambda_{\\text{status}}$.\n443: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-metric-quotient",
      "title": "Metric quotient of $(\\Sigma_N, d_{\\text{Disp},\\mathcal{Y}})$",
      "start_line": 447,
      "end_line": 456,
      "header_lines": [
        448
      ],
      "content_start": 449,
      "content_end": 455,
      "content": "449: :::{prf:definition} Metric quotient of $(\\Sigma_N, d_{\\text{Disp},\\mathcal{Y}})$\n450: :label: def-metric-quotient\n451: Define the equivalence relation $\\mathcal{S}_1\\sim\\mathcal{S}_2$ iff $d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2)=0$. The **metric identification** (Kolmogorov quotient) is $\\overline{\\Sigma}_N := \\Sigma_N/\\!\\sim$ with metric\n452: \n453: $$\n454: \\overline d_{\\text{Disp},\\mathcal{Y}}\\big([\\mathcal{S}_1],[\\mathcal{S}_2]\\big):= d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2),\n455: $$",
      "metadata": {
        "label": "def-metric-quotient"
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [],
      "raw_directive": "447: #### 1.6.1 Metric identification (Kolmogorov quotient)\n448: \n449: :::{prf:definition} Metric quotient of $(\\Sigma_N, d_{\\text{Disp},\\mathcal{Y}})$\n450: :label: def-metric-quotient\n451: Define the equivalence relation $\\mathcal{S}_1\\sim\\mathcal{S}_2$ iff $d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2)=0$. The **metric identification** (Kolmogorov quotient) is $\\overline{\\Sigma}_N := \\Sigma_N/\\!\\sim$ with metric\n452: \n453: $$\n454: \\overline d_{\\text{Disp},\\mathcal{Y}}\\big([\\mathcal{S}_1],[\\mathcal{S}_2]\\big):= d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2),\n455: $$\n456: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-displacement-components",
      "title": "Components of Swarm Displacement",
      "start_line": 507,
      "end_line": 520,
      "header_lines": [
        508
      ],
      "content_start": 510,
      "content_end": 519,
      "content": "510: :label: def-displacement-components\n511: \n512: For any two swarms, $\\mathcal{S}_1$ and $\\mathcal{S}_2$, their total displacement is decomposed into two fundamental components:\n513: \n514: 1.  **The Squared Positional Displacement ($\\Delta_{\\text{pos}}^2$):** The sum of squared distances between corresponding walkers in the algorithmic space.\n515: \n516: $$\n517: \\Delta_{\\text{pos}}^2(\\mathcal{S}_1, \\mathcal{S}_2) := \\sum_{i=1}^N d_{\\mathcal{Y}}(\\varphi(x_{1,i}), \\varphi(x_{2,i}))^2\n518: $$\n519: ",
      "metadata": {
        "label": "def-displacement-components"
      },
      "section": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters",
      "references": [],
      "raw_directive": "507: This section formally defines the two components of swarm displacement that will be used as inputs to the generalized continuity axioms.\n508: \n509: :::{prf:definition} Components of Swarm Displacement\n510: :label: def-displacement-components\n511: \n512: For any two swarms, $\\mathcal{S}_1$ and $\\mathcal{S}_2$, their total displacement is decomposed into two fundamental components:\n513: \n514: 1.  **The Squared Positional Displacement ($\\Delta_{\\text{pos}}^2$):** The sum of squared distances between corresponding walkers in the algorithmic space.\n515: \n516: $$\n517: \\Delta_{\\text{pos}}^2(\\mathcal{S}_1, \\mathcal{S}_2) := \\sum_{i=1}^N d_{\\mathcal{Y}}(\\varphi(x_{1,i}), \\varphi(x_{2,i}))^2\n518: $$\n519: \n520: :::{hint}",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Global Conventions: Foundational Objects and Core Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-valid-noise-measure",
      "title": "Valid Noise Measure",
      "start_line": 828,
      "end_line": 835,
      "header_lines": [
        829
      ],
      "content_start": 830,
      "content_end": 834,
      "content": "830: :::{prf:definition} Valid Noise Measure\n831: :label: def-valid-noise-measure\n832: A kernel $\\mathcal P_\\sigma$ (and analogously $\\mathcal Q_\\delta$) is valid if it is Feller and satisfies:\n833: - Bounded second moment in $\\mathcal Y$ with constant $M_{\\mathrm{pert}}^2$ (as used in the perturbation continuity bounds);\n834: - Boundary regularity assumptions required by the status‑continuity theorem (Section 14);",
      "metadata": {
        "label": "def-valid-noise-measure"
      },
      "section": "## 3. Axiomatic Foundations: A Parametric Debugging Framework",
      "references": [],
      "raw_directive": "828: ### 2.3 Algorithmic & Operator Axioms: Parameters of Dynamic Behavior\n829: \n830: :::{prf:definition} Valid Noise Measure\n831: :label: def-valid-noise-measure\n832: A kernel $\\mathcal P_\\sigma$ (and analogously $\\mathcal Q_\\delta$) is valid if it is Feller and satisfies:\n833: - Bounded second moment in $\\mathcal Y$ with constant $M_{\\mathrm{pert}}^2$ (as used in the perturbation continuity bounds);\n834: - Boundary regularity assumptions required by the status‑continuity theorem (Section 14);\n835: - Non‑degeneracy as stipulated where needed.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. Axiomatic Foundations: A Parametric Debugging Framework"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-components-mean-square-standardization-error",
      "title": "Components of Mean-Square Standardization Error",
      "start_line": 878,
      "end_line": 886,
      "header_lines": [
        879
      ],
      "content_start": 881,
      "content_end": 885,
      "content": "881: :label: def-components-mean-square-standardization-error\n882: \n883: The total expected squared error of the standardization operator, $\\mathbb{E}[\\|\\mathbf{z}(\\mathcal{S}_1, V, M) - \\mathbf{z}(\\mathcal{S}_2, V, M)\\|_2^2]$, is bounded by the sum of two components:\n884: \n885: 1.  **The Expected Squared Value Error ($E^2_{V,ms}$):** The error arising from the change in the raw value vector's probability distribution (from $V(\\mathcal{S}_1)$ to $V(\\mathcal{S}_2)$) while the swarm's structure is held fixed at $\\mathcal{S}_1$. This component quantifies the propagation of measurement stochasticity.",
      "metadata": {
        "label": "def-components-mean-square-standardization-error"
      },
      "section": "## 3. Axiomatic Foundations: A Parametric Debugging Framework",
      "references": [],
      "raw_directive": "878: To formalize this analysis, we first define the two fundamental and independent sources of error that contribute to the total mean-square error.\n879: \n880: :::{prf:definition} Components of Mean-Square Standardization Error\n881: :label: def-components-mean-square-standardization-error\n882: \n883: The total expected squared error of the standardization operator, $\\mathbb{E}[\\|\\mathbf{z}(\\mathcal{S}_1, V, M) - \\mathbf{z}(\\mathcal{S}_2, V, M)\\|_2^2]$, is bounded by the sum of two components:\n884: \n885: 1.  **The Expected Squared Value Error ($E^2_{V,ms}$):** The error arising from the change in the raw value vector's probability distribution (from $V(\\mathcal{S}_1)$ to $V(\\mathcal{S}_2)$) while the swarm's structure is held fixed at $\\mathcal{S}_1$. This component quantifies the propagation of measurement stochasticity.\n886: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. Axiomatic Foundations: A Parametric Debugging Framework"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-reward-measurement",
      "title": "Reward Measurement",
      "start_line": 1107,
      "end_line": 1114,
      "header_lines": [
        1108
      ],
      "content_start": 1109,
      "content_end": 1113,
      "content": "1109: :label: def-reward-measurement\n1110: The reward value $r_i$ for walker $i$ at position $x_i$ is the result of integrating the global Reward Function $R$ against the walker's **positional measure**, which is the Dirac delta measure $\\delta_{x_i}$ on $\\mathcal{X}$.\n1111: $$\n1112: r_i := \\mathbb{E}_{\\delta_{x_i}}[R] = \\int_{\\mathcal{X}} R(x) \\, d\\delta_{x_i}(x) = R(x_i)\n1113: $$",
      "metadata": {
        "label": "def-reward-measurement"
      },
      "section": "## 4. The Environment: State and Reward Measurement",
      "references": [],
      "raw_directive": "1107: A walker determines the value of its location by evaluating the global Reward Function.\n1108: :::{prf:definition} Reward Measurement\n1109: :label: def-reward-measurement\n1110: The reward value $r_i$ for walker $i$ at position $x_i$ is the result of integrating the global Reward Function $R$ against the walker's **positional measure**, which is the Dirac delta measure $\\delta_{x_i}$ on $\\mathcal{X}$.\n1111: $$\n1112: r_i := \\mathbb{E}_{\\delta_{x_i}}[R] = \\int_{\\mathcal{X}} R(x) \\, d\\delta_{x_i}(x) = R(x_i)\n1113: $$\n1114: This formalizes the act of \"evaluating the reward\" as a measurement process.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. The Environment: State and Reward Measurement"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-perturbation-measure",
      "title": "Perturbation Measure",
      "start_line": 1119,
      "end_line": 1122,
      "header_lines": [
        1120
      ],
      "content_start": 1121,
      "content_end": 1121,
      "content": "1121: :label: def-perturbation-measure",
      "metadata": {
        "label": "def-perturbation-measure"
      },
      "section": "## 5. Algorithmic Noise Measures",
      "references": [
        "def-valid-noise-measure"
      ],
      "raw_directive": "1119: The algorithm uses two distinct noise measures, both of which are required to be instantiations of a Valid Noise Measure.\n1120: :::{prf:definition} Perturbation Measure\n1121: :label: def-perturbation-measure\n1122: For a given noise scale $\\sigma > 0$, the **Perturbation Measure**, $\\mathcal{P}_\\sigma(x, \\cdot)$, is a **Valid Noise Measure** according to {prf:ref}`def-valid-noise-measure`. It governs the random walks during the perturbation step of the algorithm.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. Algorithmic Noise Measures"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-measure",
      "title": "Cloning Measure",
      "start_line": 1123,
      "end_line": 1126,
      "header_lines": [
        1124
      ],
      "content_start": 1125,
      "content_end": 1125,
      "content": "1125: :label: def-cloning-measure",
      "metadata": {
        "label": "def-cloning-measure"
      },
      "section": "## 5. Algorithmic Noise Measures",
      "references": [
        "def-valid-noise-measure"
      ],
      "raw_directive": "1123: :::\n1124: :::{prf:definition} Cloning Measure\n1125: :label: def-cloning-measure\n1126: For a given cloning noise scale $\\delta > 0$, the **Cloning Measure**, $\\mathcal{Q}_\\delta(x, \\cdot)$, is a **Valid Noise Measure** according to {prf:ref}`def-valid-noise-measure`. It governs the displacement for newly created walkers during the cloning step.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. Algorithmic Noise Measures"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-algorithmic-space-generic",
      "title": "Algorithmic Space",
      "start_line": 1219,
      "end_line": 1222,
      "header_lines": [
        1220
      ],
      "content_start": 1221,
      "content_end": 1221,
      "content": "1221: :label: def-algorithmic-space-generic",
      "metadata": {
        "label": "def-algorithmic-space-generic"
      },
      "section": "## 6. Algorithm Space and Distance Measurement",
      "references": [],
      "raw_directive": "1219: ### 6.1 Specification of the Algorithmic Space\n1220: :::{prf:definition} Algorithmic Space\n1221: :label: def-algorithmic-space-generic\n1222: An **algorithmic space** is a pair $(\\mathcal{Y}, d_{\\mathcal{Y}})$ consisting of a real vector space $\\mathcal{Y}$ and a true metric $d_{\\mathcal{Y}}$ on $\\mathcal{Y}$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Algorithm Space and Distance Measurement"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-distance-positional-measures",
      "title": "Distance Between Positional Measures",
      "start_line": 1225,
      "end_line": 1235,
      "header_lines": [
        1226
      ],
      "content_start": 1227,
      "content_end": 1234,
      "content": "1227: :label: def-distance-positional-measures\n1228: Let two walkers, $i$ and $j$, have their positions represented by the Dirac positional measures $\\delta_{x_i}$ and $\\delta_{x_j}$. The distance between them in the algorithmic space is the **1-Wasserstein distance ($W_1$)** between their **projected positional measures**, with $d_{\\mathcal{Y}}$ as the ground metric.\n1229: The projected positional measure for walker $i$ is the pushforward measure $\\varphi_* \\delta_{x_i} = \\delta_{\\varphi(x_i)}$. The distance is then:\n1230: $$\n1231: \n1232: d(\\varphi_* \\delta_{x_i}, \\varphi_* \\delta_{x_j}) := W_1(\\delta_{\\varphi(x_i)}, \\delta_{\\varphi(x_j)})\n1233: \n1234: $$",
      "metadata": {
        "label": "def-distance-positional-measures"
      },
      "section": "## 6. Algorithm Space and Distance Measurement",
      "references": [],
      "raw_directive": "1225: The distance between two walkers is formally defined as the distance between the probability measures representing their positions.\n1226: :::{prf:definition} Distance Between Positional Measures\n1227: :label: def-distance-positional-measures\n1228: Let two walkers, $i$ and $j$, have their positions represented by the Dirac positional measures $\\delta_{x_i}$ and $\\delta_{x_j}$. The distance between them in the algorithmic space is the **1-Wasserstein distance ($W_1$)** between their **projected positional measures**, with $d_{\\mathcal{Y}}$ as the ground metric.\n1229: The projected positional measure for walker $i$ is the pushforward measure $\\varphi_* \\delta_{x_i} = \\delta_{\\varphi(x_i)}$. The distance is then:\n1230: $$\n1231: \n1232: d(\\varphi_* \\delta_{x_i}, \\varphi_* \\delta_{x_j}) := W_1(\\delta_{\\varphi(x_i)}, \\delta_{\\varphi(x_j)})\n1233: \n1234: $$\n1235: For Dirac measures, the Wasserstein distance simplifies to the ground metric distance between their points of support.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Algorithm Space and Distance Measurement"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-alg-distance",
      "title": "Algorithmic Distance",
      "start_line": 1237,
      "end_line": 1246,
      "header_lines": [
        1238
      ],
      "content_start": 1239,
      "content_end": 1245,
      "content": "1239: :label: def-alg-distance\n1240: The **algorithmic distance** $d_{\\text{alg}}\\colon\\mathcal{X}\\times\\mathcal{X}\\to\\mathbb{R}_{\\ge0}$ is the distance between the projected positional measures of two walkers. In practice, this is the distance or semidistance function $d_{\\mathcal{Y}}$ applied to the projected points in the algorithmic space:\n1241: $$\n1242: \n1243: \\boxed{d_{\\text{alg}}(x_1, x_2) := d_{\\mathcal{Y}}(\\varphi(x_1), \\varphi(x_2))}\n1244: \n1245: $$",
      "metadata": {
        "label": "def-alg-distance"
      },
      "section": "## 6. Algorithm Space and Distance Measurement",
      "references": [],
      "raw_directive": "1237: ### 6.3 Algorithmic Distance\n1238: :::{prf:definition} Algorithmic Distance\n1239: :label: def-alg-distance\n1240: The **algorithmic distance** $d_{\\text{alg}}\\colon\\mathcal{X}\\times\\mathcal{X}\\to\\mathbb{R}_{\\ge0}$ is the distance between the projected positional measures of two walkers. In practice, this is the distance or semidistance function $d_{\\mathcal{Y}}$ applied to the projected points in the algorithmic space:\n1241: $$\n1242: \n1243: \\boxed{d_{\\text{alg}}(x_1, x_2) := d_{\\mathcal{Y}}(\\varphi(x_1), \\varphi(x_2))}\n1244: \n1245: $$\n1246: This is the practical implementation of the Wasserstein distance between the walkers' projected Dirac measures and serves as the ground distance for all subsequent calculations.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Algorithm Space and Distance Measurement"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-swarm-aggregation-operator-axiomatic",
      "title": "Swarm Aggregation Operator",
      "start_line": 1278,
      "end_line": 1304,
      "header_lines": [
        1279
      ],
      "content_start": 1280,
      "content_end": 1303,
      "content": "1280: :label: def-swarm-aggregation-operator-axiomatic\n1281: A **Swarm Aggregation Operator**, denoted $M$, is a function that maps a swarm state $\\mathcal{S}$ and a raw value vector $\\mathbf{v}$ (defined on the alive set $\\mathcal{A}(\\mathcal{S})$) to a probability measure $\\mu_{\\mathbf{v}}$ on $\\mathbb{R}$.\n1282: **Signature:** $M: \\Sigma_N \\times \\mathbb{R}^{|\\mathcal{A}(\\mathcal{S})|} \\to \\mathcal{P}(\\mathbb{R})$\n1283: For the operator to be valid, it must satisfy the foundational axioms for aggregators defined in Section 2.3.4. Furthermore, the user must provide proofs and explicit functions for the following continuity and structural properties.\n1284: 1.  **Value Continuity (Lipschitz):** For a fixed swarm structure $\\mathcal{S}$, the moment functions must be Lipschitz continuous with respect to the L2-norm of the input value vector $\\mathbf{v}$. The user must provide the **Value Lipschitz Functions**, $L_{\\mu,M}(\\mathcal{S})$ and $L_{m_2,M}(\\mathcal{S})$, such that for any two value vectors $\\mathbf{v}_1, \\mathbf{v}_2$:\n1285: \n1286: $$\n1287: |\\mu(\\mathcal{S}, \\mathbf{v}_1) - \\mu(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{\\mu,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1288: $$\n1289: $$\n1290: |m_2(\\mathcal{S}, \\mathbf{v}_1) - m_2(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{m_2,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1291: $$\n1292: \n1293: 2.  **Structural Continuity (Quadratic):** For a fixed value vector $\\mathbf{v}$, the change in the moment functions due to a change in the swarm's alive set must be bounded. The user must provide the **Structural Continuity Functions**, $L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2)$ and $L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2)$, which may depend on both the initial and final swarm states. These functions must satisfy the following inequalities for any two swarms $\\mathcal{S}_1, \\mathcal{S}_2$:\n1294: \n1295: $$\n1296: |\\mu(\\mathcal{S}_1, \\mathbf{v}) - \\mu(\\mathcal{S}_2, \\mathbf{v})| \\le L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1297: $$\n1298: \n1299: $$\n1300: |m_2(\\mathcal{S}_1, \\mathbf{v}) - m_2(\\mathcal{S}_2, \\mathbf{v})| \\le L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1301: $$\n1302: *Note: The structural continuity is defined with respect to the squared L2-norm of the status change vector. For notational convenience in subsequent sections, we define the **total number of status changes** between two swarms as $n_c := \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2 = \\sum_{j=1}^N (s_{1,j} - s_{2,j})^2$. This quadratic form is a natural choice because the error in common aggregators (like the empirical mean) is directly proportional to the number of added or removed data points, not its square root.*\n1303: :::{hint}",
      "metadata": {
        "label": "def-swarm-aggregation-operator-axiomatic"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1278: #### 7.2.1 Definition: Swarm Aggregation Operator\n1279: :::{prf:definition} Swarm Aggregation Operator\n1280: :label: def-swarm-aggregation-operator-axiomatic\n1281: A **Swarm Aggregation Operator**, denoted $M$, is a function that maps a swarm state $\\mathcal{S}$ and a raw value vector $\\mathbf{v}$ (defined on the alive set $\\mathcal{A}(\\mathcal{S})$) to a probability measure $\\mu_{\\mathbf{v}}$ on $\\mathbb{R}$.\n1282: **Signature:** $M: \\Sigma_N \\times \\mathbb{R}^{|\\mathcal{A}(\\mathcal{S})|} \\to \\mathcal{P}(\\mathbb{R})$\n1283: For the operator to be valid, it must satisfy the foundational axioms for aggregators defined in Section 2.3.4. Furthermore, the user must provide proofs and explicit functions for the following continuity and structural properties.\n1284: 1.  **Value Continuity (Lipschitz):** For a fixed swarm structure $\\mathcal{S}$, the moment functions must be Lipschitz continuous with respect to the L2-norm of the input value vector $\\mathbf{v}$. The user must provide the **Value Lipschitz Functions**, $L_{\\mu,M}(\\mathcal{S})$ and $L_{m_2,M}(\\mathcal{S})$, such that for any two value vectors $\\mathbf{v}_1, \\mathbf{v}_2$:\n1285: \n1286: $$\n1287: |\\mu(\\mathcal{S}, \\mathbf{v}_1) - \\mu(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{\\mu,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1288: $$\n1289: $$\n1290: |m_2(\\mathcal{S}, \\mathbf{v}_1) - m_2(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{m_2,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1291: $$\n1292: \n1293: 2.  **Structural Continuity (Quadratic):** For a fixed value vector $\\mathbf{v}$, the change in the moment functions due to a change in the swarm's alive set must be bounded. The user must provide the **Structural Continuity Functions**, $L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2)$ and $L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2)$, which may depend on both the initial and final swarm states. These functions must satisfy the following inequalities for any two swarms $\\mathcal{S}_1, \\mathcal{S}_2$:\n1294: \n1295: $$\n1296: |\\mu(\\mathcal{S}_1, \\mathbf{v}) - \\mu(\\mathcal{S}_2, \\mathbf{v})| \\le L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1297: $$\n1298: \n1299: $$\n1300: |m_2(\\mathcal{S}_1, \\mathbf{v}) - m_2(\\mathcal{S}_2, \\mathbf{v})| \\le L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1301: $$\n1302: *Note: The structural continuity is defined with respect to the squared L2-norm of the status change vector. For notational convenience in subsequent sections, we define the **total number of status changes** between two swarms as $n_c := \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2 = \\sum_{j=1}^N (s_{1,j} - s_{2,j})^2$. This quadratic form is a natural choice because the error in common aggregators (like the empirical mean) is directly proportional to the number of added or removed data points, not its square root.*\n1303: :::{hint}\n1304: Why quadratic dependence on status changes? When a walker dies or revives, it's like suddenly adding or removing a data point from your dataset. The resulting error in statistics (like the mean) jumps discontinuously. The quadratic form $n_c$ counts these discontinuous jumps, making it the natural measure for how much the aggregated statistics can change.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. Swarm Measuring"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-smoothed-gaussian-measure",
      "title": "Smoothed Gaussian Measure",
      "start_line": 1430,
      "end_line": 1440,
      "header_lines": [
        1431
      ],
      "content_start": 1432,
      "content_end": 1439,
      "content": "1432: :label: def-smoothed-gaussian-measure\n1433: The creation of a smoothed measure requires a key analytical parameter:\n1434: *   **Smoothed Measure Kernel Scale ($\\ell$):** The length scale (standard deviation), $\\ell > 0$, of the Gaussian kernel used for smoothing. A larger $\\ell$ results in a smoother, less detailed density estimate.\n1435: Let $K_\\ell(y, y')$ be a Gaussian kernel with length scale $\\ell$. The **smoothed Gaussian measure**, denoted $\\tilde{\\nu}_{\\mathcal{S}, \\ell}$, is the probability measure whose density is given by:\n1436: \n1437: $$\n1438: \\tilde{\\rho}_{\\mathcal{S}, \\ell}(y) := \\frac{1}{|\\mathcal{A}(\\mathcal{S})|} \\sum_{i \\in \\mathcal{A}(\\mathcal{S})} K_\\ell(y, \\varphi(x_i))\n1439: $$",
      "metadata": {
        "label": "def-smoothed-gaussian-measure"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1430: For analyses where the precise locations of individual walkers are less important than their overall density, we represent the swarm's state using a kernel density estimate.\n1431: :::{prf:definition} Smoothed Gaussian Measure\n1432: :label: def-smoothed-gaussian-measure\n1433: The creation of a smoothed measure requires a key analytical parameter:\n1434: *   **Smoothed Measure Kernel Scale ($\\ell$):** The length scale (standard deviation), $\\ell > 0$, of the Gaussian kernel used for smoothing. A larger $\\ell$ results in a smoother, less detailed density estimate.\n1435: Let $K_\\ell(y, y')$ be a Gaussian kernel with length scale $\\ell$. The **smoothed Gaussian measure**, denoted $\\tilde{\\nu}_{\\mathcal{S}, \\ell}$, is the probability measure whose density is given by:\n1436: \n1437: $$\n1438: \\tilde{\\rho}_{\\mathcal{S}, \\ell}(y) := \\frac{1}{|\\mathcal{A}(\\mathcal{S})|} \\sum_{i \\in \\mathcal{A}(\\mathcal{S})} K_\\ell(y, \\varphi(x_i))\n1439: $$\n1440: This representation provides a smooth, differentiable approximation of the swarm's distribution in the algorithmic space and is the foundation for the $d_{\\Sigma_N, L_2}$ distance.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. Swarm Measuring"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-algorithmic-cemetery-extension",
      "title": "Algorithmic space with cemetery point",
      "start_line": 1443,
      "end_line": 1452,
      "header_lines": [
        1444
      ],
      "content_start": 1445,
      "content_end": 1451,
      "content": "1445: :label: def-algorithmic-cemetery-extension\n1446: Define $\\mathcal{Y}^{\\dagger}:=\\mathcal{Y}\\cup\\{\\dagger\\}$ with metric $d_\\dagger$ given by\n1447: $$\n1448: \n1449: d_\\dagger(y_1,y_2)=d_{\\mathcal{Y}}(y_1,y_2),\\quad d_\\dagger(y,\\dagger)=D_{\\mathrm{valid}}\\quad \\text{for all }y\\in\\mathcal{Y}.\n1450: \n1451: $$",
      "metadata": {
        "label": "def-algorithmic-cemetery-extension"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1443: To ensure that our swarm metrics are well-defined for all possible outcomes, including the absorption of the swarm into the cemetery state, we must formally define its distributional representation. This is achieved by introducing a unique, abstract measure that represents this terminal state.\n1444: :::{prf:definition} Algorithmic space with cemetery point\n1445: :label: def-algorithmic-cemetery-extension\n1446: Define $\\mathcal{Y}^{\\dagger}:=\\mathcal{Y}\\cup\\{\\dagger\\}$ with metric $d_\\dagger$ given by\n1447: $$\n1448: \n1449: d_\\dagger(y_1,y_2)=d_{\\mathcal{Y}}(y_1,y_2),\\quad d_\\dagger(y,\\dagger)=D_{\\mathrm{valid}}\\quad \\text{for all }y\\in\\mathcal{Y}.\n1450: \n1451: $$\n1452: Identifying a dead walker with the point $\\dagger$ makes the Wasserstein distance to the cemetery law canonical: for any living swarm law $\\nu$ and the cemetery $\\delta_{\\dagger}$ we have $W_p(\\nu,\\delta_{\\dagger})=D_{\\mathrm{valid}}$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. Swarm Measuring"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cemetery-state-measure",
      "title": "Cemetery State Measure",
      "start_line": 1457,
      "end_line": 1463,
      "header_lines": [
        1458
      ],
      "content_start": 1459,
      "content_end": 1462,
      "content": "1459: :label: def-cemetery-state-measure\n1460: Let $\\mathcal{S}$ be a swarm. Its distributional representation, denoted $\\mu_{\\mathcal{S}}$, is defined as:\n1461: 1.  If $|\\mathcal{A}(\\mathcal{S})| > 0$, $\\mu_{\\mathcal{S}}$ is the empirical or smoothed measure as defined in 5.1 and 5.2 (i.e., $\\mu_{\\mathcal{S}} = \\nu_{\\mathcal{S}}$ or $\\mu_{\\mathcal{S}} = \\tilde{\\nu}_{\\mathcal{S}, \\ell}$).\n1462: 2.  If $|\\mathcal{A}(\\mathcal{S})| = 0$, its representation is the unique **Cemetery State Measure**, denoted $\\mu_{\\mathcal{S}} := \\nu_{\\emptyset}$.",
      "metadata": {
        "label": "def-cemetery-state-measure"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1457: :::\n1458: :::{prf:definition} Cemetery State Measure\n1459: :label: def-cemetery-state-measure\n1460: Let $\\mathcal{S}$ be a swarm. Its distributional representation, denoted $\\mu_{\\mathcal{S}}$, is defined as:\n1461: 1.  If $|\\mathcal{A}(\\mathcal{S})| > 0$, $\\mu_{\\mathcal{S}}$ is the empirical or smoothed measure as defined in 5.1 and 5.2 (i.e., $\\mu_{\\mathcal{S}} = \\nu_{\\mathcal{S}}$ or $\\mu_{\\mathcal{S}} = \\tilde{\\nu}_{\\mathcal{S}, \\ell}$).\n1462: 2.  If $|\\mathcal{A}(\\mathcal{S})| = 0$, its representation is the unique **Cemetery State Measure**, denoted $\\mu_{\\mathcal{S}} := \\nu_{\\emptyset}$.\n1463: The Cemetery State Measure $\\nu_{\\emptyset}$ is an abstract object that does not have a density on $\\mathcal{Y}$. Its properties are defined entirely by its interaction with the distance functions used in the swarm metrics.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. Swarm Measuring"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-distance-to-cemetery-state",
      "title": "Distance to the Cemetery State",
      "start_line": 1464,
      "end_line": 1478,
      "header_lines": [
        1465
      ],
      "content_start": 1466,
      "content_end": 1477,
      "content": "1466: :label: def-distance-to-cemetery-state\n1467: The distance between any valid probability measure $\\nu$ (representing a living swarm) and the Cemetery State Measure $\\nu_{\\emptyset}$ is defined to be a maximal constant, ensuring that entering the cemetery state represents the largest possible jump in distributional terms.\n1468: *   **For the Wasserstein Metric:** Using [](#def-algorithmic-cemetery-extension), for any measure $\\nu$ corresponding to a living swarm:\n1469: \n1470: $$\n1471:     W_p(\\nu, \\nu_{\\emptyset}) := D_{\\mathrm{valid}} \\quad \\text{and} \\quad W_p(\\nu_{\\emptyset}, \\nu_{\\emptyset}) := 0\n1472: $$\n1473: *   **For the MMD (on living swarms):** We evaluate $\\mathrm{MMD}_k$ only between measures supported on $\\mathcal Y$ (living swarms). No cemetery extension is defined here. If an extension is required, one must specify an explicit positive‑definite kernel $k^{\\dagger}$ on $\\mathcal Y^{\\dagger}$ that yields the desired constant distances while preserving metric properties. When $k$ is characteristic (e.g., Gaussian/RBF), MMD is a true metric on probability measures over $\\mathcal Y$.\n1474: *   **For the $L_2$ Distance:** The distance is a pre-defined maximal value $M_{L2}$ for the norm. For any density $\\tilde{\\rho}$ corresponding to a living swarm:\n1475: \n1476: $$\n1477:     \\|\\tilde{\\rho} - \\tilde{\\rho}_{\\emptyset}\\|_{L_2} := M_{L2} \\quad \\text{and} \\quad \\|\\tilde{\\rho}_{\\emptyset} - \\tilde{\\rho}_{\\emptyset}\\|_{L2} := 0",
      "metadata": {
        "label": "def-distance-to-cemetery-state"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1464: :::\n1465: :::{prf:definition} Distance to the Cemetery State\n1466: :label: def-distance-to-cemetery-state\n1467: The distance between any valid probability measure $\\nu$ (representing a living swarm) and the Cemetery State Measure $\\nu_{\\emptyset}$ is defined to be a maximal constant, ensuring that entering the cemetery state represents the largest possible jump in distributional terms.\n1468: *   **For the Wasserstein Metric:** Using [](#def-algorithmic-cemetery-extension), for any measure $\\nu$ corresponding to a living swarm:\n1469: \n1470: $$\n1471:     W_p(\\nu, \\nu_{\\emptyset}) := D_{\\mathrm{valid}} \\quad \\text{and} \\quad W_p(\\nu_{\\emptyset}, \\nu_{\\emptyset}) := 0\n1472: $$\n1473: *   **For the MMD (on living swarms):** We evaluate $\\mathrm{MMD}_k$ only between measures supported on $\\mathcal Y$ (living swarms). No cemetery extension is defined here. If an extension is required, one must specify an explicit positive‑definite kernel $k^{\\dagger}$ on $\\mathcal Y^{\\dagger}$ that yields the desired constant distances while preserving metric properties. When $k$ is characteristic (e.g., Gaussian/RBF), MMD is a true metric on probability measures over $\\mathcal Y$.\n1474: *   **For the $L_2$ Distance:** The distance is a pre-defined maximal value $M_{L2}$ for the norm. For any density $\\tilde{\\rho}$ corresponding to a living swarm:\n1475: \n1476: $$\n1477:     \\|\\tilde{\\rho} - \\tilde{\\rho}_{\\emptyset}\\|_{L_2} := M_{L2} \\quad \\text{and} \\quad \\|\\tilde{\\rho}_{\\emptyset} - \\tilde{\\rho}_{\\emptyset}\\|_{L2} := 0\n1478: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. Swarm Measuring"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-companion-selection-measure",
      "title": "Companion Selection Measure",
      "start_line": 1495,
      "end_line": 1503,
      "header_lines": [
        1496
      ],
      "content_start": 1497,
      "content_end": 1502,
      "content": "1497: :label: def-companion-selection-measure\n1498: For each walker $i \\in \\{1, \\dots, N\\}$ in a swarm $\\mathcal{S}$ with alive set $\\mathcal{A}$, the **Companion Selection Measure**, $\\mathbb{C}_i(\\mathcal{S})$, is a **uniform discrete probability measure** over a support set $S_i \\subseteq \\{1, \\dots, N\\}$ of valid companion indices. The support set is defined as:\n1499: *   If walker $i$ is alive ($i \\in \\mathcal{A}$) and there is at least one other alive walker ($|\\mathcal{A}| \\ge 2$), the support set is all other alive walkers: $S_i := \\mathcal{A} \\setminus \\{i\\}$.\n1500: *   If walker $i$ is dead ($i \\notin \\mathcal{A}$) and the alive set is not empty ($|\\mathcal{A}| \\ge 1$), the support set is all alive walkers: $S_i := \\mathcal{A}$.\n1501: *   If walker $i$ is the only one alive ($|\\mathcal{A}| = 1$ and $\\mathcal{A} = \\{i\\}$), it is its own companion: $S_i := \\{i\\}$.\n1502: *   If the swarm is empty ($|\\mathcal{A}|=0$), the support set is empty: $S_i := \\emptyset$.",
      "metadata": {
        "label": "def-companion-selection-measure"
      },
      "section": "## 8. Companion Selection",
      "references": [],
      "raw_directive": "1495: :::\n1496: :::{prf:definition} Companion Selection Measure\n1497: :label: def-companion-selection-measure\n1498: For each walker $i \\in \\{1, \\dots, N\\}$ in a swarm $\\mathcal{S}$ with alive set $\\mathcal{A}$, the **Companion Selection Measure**, $\\mathbb{C}_i(\\mathcal{S})$, is a **uniform discrete probability measure** over a support set $S_i \\subseteq \\{1, \\dots, N\\}$ of valid companion indices. The support set is defined as:\n1499: *   If walker $i$ is alive ($i \\in \\mathcal{A}$) and there is at least one other alive walker ($|\\mathcal{A}| \\ge 2$), the support set is all other alive walkers: $S_i := \\mathcal{A} \\setminus \\{i\\}$.\n1500: *   If walker $i$ is dead ($i \\notin \\mathcal{A}$) and the alive set is not empty ($|\\mathcal{A}| \\ge 1$), the support set is all alive walkers: $S_i := \\mathcal{A}$.\n1501: *   If walker $i$ is the only one alive ($|\\mathcal{A}| = 1$ and $\\mathcal{A} = \\{i\\}$), it is its own companion: $S_i := \\{i\\}$.\n1502: *   If the swarm is empty ($|\\mathcal{A}|=0$), the support set is empty: $S_i := \\emptyset$.\n1503: The measure is defined as $\\mathbb{C}_i(\\mathcal{S})(\\{j\\}) = 1/|S_i|$ if $j \\in S_i$ and $|S_i|>0$, and 0 otherwise. The expectation of any function $f$ under this measure is $\\mathbb{E}_{j \\sim \\mathbb{C}_i(\\mathcal{S})}[f(j)] = \\frac{1}{|S_i|} \\sum_{j \\in S_i} f(j)$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 8. Companion Selection"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-asymmetric-rescale-function",
      "title": "Smooth Piecewise Rescale Function",
      "start_line": 1667,
      "end_line": 1688,
      "header_lines": [
        1668
      ],
      "content_start": 1669,
      "content_end": 1687,
      "content": "1669: :label: def-asymmetric-rescale-function\n1670: The rescale function is parameterized by the **Rescale Saturation Threshold ($z_{\\max}$)**, which defines the upper saturation limit. For the function to be well-posed with distinct segments, this parameter must satisfy the constraint $z_{\\max} > 1$.\n1671: The **Smooth Piecewise Rescale Function** $g_A: \\mathbb{R} \\to \\mathbb{R}_{>0}$ is defined as:\n1672: $$\n1673: \n1674: g_A(z) :=\n1675: \\begin{cases}\n1676: \\exp(z), & z \\le 0 \\\\\n1677: \\log(1 + z) + 1, & 0 < z < z_{\\max} - 1 \\\\\n1678: P(z), & z_{\\max} - 1 \\le z \\le z_{\\max} \\\\\n1679: \\log(1 + z_{\\max}) + 1, & z > z_{\\max}\n1680: \\end{cases}\n1681: \n1682: $$\n1683: The function $P(z)$ is a unique cubic polynomial defined on the interval $[z_{\\max}-1, z_{\\max}]$. It serves as a $C^1$ (continuously differentiable) patch that smoothly connects the logarithmic curve to the constant saturation value. Its four coefficients are uniquely determined by solving for the following four boundary conditions:\n1684: 1.  **Match Value at Start:** $P(z_{\\max}-1) = \\log(z_{\\max}) + 1$\n1685: 2.  **Match Slope at Start:** $P'(z_{\\max}-1) = 1 / z_{\\max}$\n1686: 3.  **Match Value at End:** $P(z_{\\max}) = \\log(1 + z_{\\max}) + 1$\n1687: 4.  **Match Slope at End:** $P'(z_{\\max}) = 0$",
      "metadata": {
        "label": "def-asymmetric-rescale-function"
      },
      "section": "## 9. Rescale Transformation",
      "references": [],
      "raw_directive": "1667: #### 8.2.1 Definition of the Asymmetric Rescale Function\n1668: :::{prf:definition} Smooth Piecewise Rescale Function\n1669: :label: def-asymmetric-rescale-function\n1670: The rescale function is parameterized by the **Rescale Saturation Threshold ($z_{\\max}$)**, which defines the upper saturation limit. For the function to be well-posed with distinct segments, this parameter must satisfy the constraint $z_{\\max} > 1$.\n1671: The **Smooth Piecewise Rescale Function** $g_A: \\mathbb{R} \\to \\mathbb{R}_{>0}$ is defined as:\n1672: $$\n1673: \n1674: g_A(z) :=\n1675: \\begin{cases}\n1676: \\exp(z), & z \\le 0 \\\\\n1677: \\log(1 + z) + 1, & 0 < z < z_{\\max} - 1 \\\\\n1678: P(z), & z_{\\max} - 1 \\le z \\le z_{\\max} \\\\\n1679: \\log(1 + z_{\\max}) + 1, & z > z_{\\max}\n1680: \\end{cases}\n1681: \n1682: $$\n1683: The function $P(z)$ is a unique cubic polynomial defined on the interval $[z_{\\max}-1, z_{\\max}]$. It serves as a $C^1$ (continuously differentiable) patch that smoothly connects the logarithmic curve to the constant saturation value. Its four coefficients are uniquely determined by solving for the following four boundary conditions:\n1684: 1.  **Match Value at Start:** $P(z_{\\max}-1) = \\log(z_{\\max}) + 1$\n1685: 2.  **Match Slope at Start:** $P'(z_{\\max}-1) = 1 / z_{\\max}$\n1686: 3.  **Match Value at End:** $P(z_{\\max}) = \\log(1 + z_{\\max}) + 1$\n1687: 4.  **Match Slope at End:** $P'(z_{\\max}) = 0$\n1688: This construction ensures that $g_A(z)$ is continuously differentiable across its entire domain.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 9. Rescale Transformation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-canonical-logistic-rescale-function-example",
      "title": "Canonical Logistic Rescale Function",
      "start_line": 2078,
      "end_line": 2086,
      "header_lines": [
        2079
      ],
      "content_start": 2080,
      "content_end": 2085,
      "content": "2080: :label: def-canonical-logistic-rescale-function-example\n2081: The **Canonical Logistic Rescale Function** $g_A: \\mathbb{R} \\to \\mathbb{R}_{>0}$ is defined as:\n2082: $$\n2083: \n2084: g_A(z) := \\frac{2}{1 + e^{-z}}\n2085: ",
      "metadata": {
        "label": "def-canonical-logistic-rescale-function-example"
      },
      "section": "## 9. Rescale Transformation",
      "references": [],
      "raw_directive": "2078: #### 8.3.1. Definition: Canonical Logistic Rescale Function\n2079: :::{prf:definition} Canonical Logistic Rescale Function\n2080: :label: def-canonical-logistic-rescale-function-example\n2081: The **Canonical Logistic Rescale Function** $g_A: \\mathbb{R} \\to \\mathbb{R}_{>0}$ is defined as:\n2082: $$\n2083: \n2084: g_A(z) := \\frac{2}{1 + e^{-z}}\n2085: \n2086: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 9. Rescale Transformation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-raw-value-operator",
      "title": "Raw Value Operator",
      "start_line": 2109,
      "end_line": 2117,
      "header_lines": [
        2110
      ],
      "content_start": 2111,
      "content_end": 2116,
      "content": "2111: :label: def-raw-value-operator\n2112: A **Raw Value Operator**, denoted $V$, is a function that maps a swarm state $S \\in \\Sigma_N$ to a **probability distribution** over N-dimensional real-valued vectors, $P(\\mathbb{R}^N)$.\n2113: **Signature:** $V: \\Sigma_N \\to P(\\mathbb{R}^N)$\n2114: For any swarm state $S$, a single sample $v \\sim V(S)$ produces a raw value vector. This process must adhere to the following rules:\n2115: 1.  **Alive Set Dependency:** The sampling process for the components of $v$ corresponding to the alive set $\\mathcal{A}(S)$ may depend on the entire state $S$.\n2116: 2.  **Dead Set Determinism:** For any walker $i$ that is not in the alive set ($i \\notin \\mathcal{A}(S)$), the corresponding component of the raw value vector is deterministically zero: $v_i = 0$.",
      "metadata": {
        "label": "def-raw-value-operator"
      },
      "section": "## 10. Abstract Raw Value Measurement",
      "references": [],
      "raw_directive": "2109: ### 9.1 The Raw Value Operator\n2110: :::{prf:definition} Raw Value Operator\n2111: :label: def-raw-value-operator\n2112: A **Raw Value Operator**, denoted $V$, is a function that maps a swarm state $S \\in \\Sigma_N$ to a **probability distribution** over N-dimensional real-valued vectors, $P(\\mathbb{R}^N)$.\n2113: **Signature:** $V: \\Sigma_N \\to P(\\mathbb{R}^N)$\n2114: For any swarm state $S$, a single sample $v \\sim V(S)$ produces a raw value vector. This process must adhere to the following rules:\n2115: 1.  **Alive Set Dependency:** The sampling process for the components of $v$ corresponding to the alive set $\\mathcal{A}(S)$ may depend on the entire state $S$.\n2116: 2.  **Dead Set Determinism:** For any walker $i$ that is not in the alive set ($i \\notin \\mathcal{A}(S)$), the corresponding component of the raw value vector is deterministically zero: $v_i = 0$.\n2117: This definition encapsulates both deterministic measurements (like reward, where the distribution is a Dirac delta) and stochastic measurements (like distance-to-companion).",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 10,
        "chapter_file": "chapter_10.json",
        "section_id": "## 10. Abstract Raw Value Measurement"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-distance-to-companion-measurement",
      "title": "Distance-to-Companion Measurement",
      "start_line": 2152,
      "end_line": 2162,
      "header_lines": [
        2153
      ],
      "content_start": 2154,
      "content_end": 2161,
      "content": "2154: :label: def-distance-to-companion-measurement\n2155: The distance value $d_i$ for walker $i$ is the result of a two-stage sampling process. First, a **potential companion** index, denoted $c_{\\text{pot}}(i)$, is sampled from the **Companion Selection Measure** $\\mathbb{C}_i$. Second, the **Algorithmic Distance** is computed to that specific companion.\n2156: This process is equivalent to sampling a single value from the **Distance-to-Companion Measure** $\\mathbb{D}_i$, which is the pushforward of $\\mathbb{C}_i$ by the distance function $D_i(j) = d_{\\text{alg}}(x_i, x_j)$.\n2157: $$\n2158: \n2159: d_i := d_{\\text{alg}}(x_i, x_{c_{\\text{pot}}(i)}) \\quad \\text{where} \\quad c_{\\text{pot}}(i) \\sim \\mathbb{C}_i(\\cdot)\n2160: \n2161: $$",
      "metadata": {
        "label": "def-distance-to-companion-measurement"
      },
      "section": "## 11. Distance-to-Companion Measurement",
      "references": [],
      "raw_directive": "2152: ### 10.1 Definition of Distance-to-Companion Measurement\n2153: :::{prf:definition} Distance-to-Companion Measurement\n2154: :label: def-distance-to-companion-measurement\n2155: The distance value $d_i$ for walker $i$ is the result of a two-stage sampling process. First, a **potential companion** index, denoted $c_{\\text{pot}}(i)$, is sampled from the **Companion Selection Measure** $\\mathbb{C}_i$. Second, the **Algorithmic Distance** is computed to that specific companion.\n2156: This process is equivalent to sampling a single value from the **Distance-to-Companion Measure** $\\mathbb{D}_i$, which is the pushforward of $\\mathbb{C}_i$ by the distance function $D_i(j) = d_{\\text{alg}}(x_i, x_j)$.\n2157: $$\n2158: \n2159: d_i := d_{\\text{alg}}(x_i, x_{c_{\\text{pot}}(i)}) \\quad \\text{where} \\quad c_{\\text{pot}}(i) \\sim \\mathbb{C}_i(\\cdot)\n2160: \n2161: $$\n2162: The **Raw Distance Vector Operator**, denoted $\\mathbf{d}(\\mathcal{S})$, maps a swarm state $\\mathcal{S}$ to a *distribution* over N-dimensional vectors. A single realization of this vector is produced by performing the distance-to-companion measurement independently for each alive walker. For dead walkers, the component is zero.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 11. Distance-to-Companion Measurement"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-standardization-operator-n-dimensional",
      "title": "N-Dimensional Standardization Operator",
      "start_line": 2790,
      "end_line": 2813,
      "header_lines": [
        2791
      ],
      "content_start": 2792,
      "content_end": 2812,
      "content": "2792: :label: def-standardization-operator-n-dimensional\n2793: The **N-Dimensional Standardization Operator**, denoted $z$, is a function that maps a swarm state $S$ to an N-dimensional vector, parameterized by a choice of a raw value operator and an aggregation operator.\n2794: **Signature:** $z: \\Sigma_N \\times (\\text{Raw Value Operator}) \\times (\\text{Swarm Aggregation Operator}) \\to \\mathbb{R}^N$\n2795: **Inputs:**\n2796: *   The current swarm state, $S_t$.\n2797: *   A **Raw Value Operator**, $V$ (per [](#def-raw-value-operator)).\n2798: *   A **Swarm Aggregation Operator**, $M$ (e.g., $R_{\\text{agg}}$ or $M_D$, per [](#def-swarm-aggregation-operator-axiomatic)).\n2799: *   All relevant implicit parameters ($\\varepsilon_{\\text{std}}$).\n2800: **Operation:**\n2801: The operator computes the output vector $z = z(S_t, V, M)$ as follows:\n2802: 1.  **Generate Raw Values:**\n2803:     a. Let $\\mathcal{A}(S_t)$ be the set of alive walkers. Let $k = |\\mathcal{A}(S_t)|$. If $k=0$, return the zero vector and terminate.\n2804:     b. Generate a single stochastic sample of the raw value vector by drawing $v \\sim V(S_t)$. Let $v_A$ be the k-dimensional sub-vector corresponding to the alive set.\n2805: 2.  **Aggregate and Measure Statistics:**\n2806:     a. Form the **Swarm Aggregation Measure**: $\\mu_v = M(S_t; v_A)$.\n2807:     b. Measure the statistical properties $(\\mu_A, \\sigma'_A)$ from $\\mu_v$ (per Def. 11.1.2), using the provided $\\varepsilon_{\\text{std}}$ and the regularized standard deviation $\\sigma\\'_{\\text{reg}}$.\n2808: 3.  **Standardize and Assemble N-Dimensional Vector:**\n2809:     a. Initialize an N-dimensional zero vector, $z_{\\text{out}} \\leftarrow 0$.\n2810:     b. For each walker $i \\in \\mathcal{A}(S_t)$:\n2811:         *   Compute its Z-score: $z_i := (v_i - \\mu_A) / \\sigma'_A$.\n2812:         *   Set the $i$-th component of the output vector: $z_{\\text{out}}[i] := z_i$.",
      "metadata": {
        "label": "def-standardization-operator-n-dimensional"
      },
      "section": "## 12. Standardization pipeline",
      "references": [],
      "raw_directive": "2790: #### 11.1.1 N-Dimensional Standardization Operator\n2791: :::{prf:definition} N-Dimensional Standardization Operator\n2792: :label: def-standardization-operator-n-dimensional\n2793: The **N-Dimensional Standardization Operator**, denoted $z$, is a function that maps a swarm state $S$ to an N-dimensional vector, parameterized by a choice of a raw value operator and an aggregation operator.\n2794: **Signature:** $z: \\Sigma_N \\times (\\text{Raw Value Operator}) \\times (\\text{Swarm Aggregation Operator}) \\to \\mathbb{R}^N$\n2795: **Inputs:**\n2796: *   The current swarm state, $S_t$.\n2797: *   A **Raw Value Operator**, $V$ (per [](#def-raw-value-operator)).\n2798: *   A **Swarm Aggregation Operator**, $M$ (e.g., $R_{\\text{agg}}$ or $M_D$, per [](#def-swarm-aggregation-operator-axiomatic)).\n2799: *   All relevant implicit parameters ($\\varepsilon_{\\text{std}}$).\n2800: **Operation:**\n2801: The operator computes the output vector $z = z(S_t, V, M)$ as follows:\n2802: 1.  **Generate Raw Values:**\n2803:     a. Let $\\mathcal{A}(S_t)$ be the set of alive walkers. Let $k = |\\mathcal{A}(S_t)|$. If $k=0$, return the zero vector and terminate.\n2804:     b. Generate a single stochastic sample of the raw value vector by drawing $v \\sim V(S_t)$. Let $v_A$ be the k-dimensional sub-vector corresponding to the alive set.\n2805: 2.  **Aggregate and Measure Statistics:**\n2806:     a. Form the **Swarm Aggregation Measure**: $\\mu_v = M(S_t; v_A)$.\n2807:     b. Measure the statistical properties $(\\mu_A, \\sigma'_A)$ from $\\mu_v$ (per Def. 11.1.2), using the provided $\\varepsilon_{\\text{std}}$ and the regularized standard deviation $\\sigma\\'_{\\text{reg}}$.\n2808: 3.  **Standardize and Assemble N-Dimensional Vector:**\n2809:     a. Initialize an N-dimensional zero vector, $z_{\\text{out}} \\leftarrow 0$.\n2810:     b. For each walker $i \\in \\mathcal{A}(S_t)$:\n2811:         *   Compute its Z-score: $z_i := (v_i - \\mu_A) / \\sigma'_A$.\n2812:         *   Set the $i$-th component of the output vector: $z_{\\text{out}}[i] := z_i$.\n2813: **Output:** The full N-dimensional standardized vector $z_{\\text{out}}$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 12. Standardization pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "lem-sigma-reg-derivative-bounds",
      "title": "Statistical Properties Measurement",
      "start_line": 2816,
      "end_line": 2859,
      "header_lines": [
        2817,
        2834
      ],
      "content_start": 2818,
      "content_end": 2858,
      "content": "2818: :label: def-statistical-properties-measurement\n2819: Let $\\mathbf{v}_{\\mathcal{A}}$ be the vector of raw scalar values for the alive set $\\mathcal{A}_t$. Let $\\mu_{\\mathbf{v}} = M(\\mathcal{S}_t; \\mathbf{v}_{\\mathcal{A}})$ be the **Swarm Aggregation Measure** for these values. The **Statistical Properties Measurement** extracts the effective mean and a smoothed, regularized standard deviation from this measure:\n2820: *   **Mean:** $\\mu_{\\mathcal{A}} := \\mathbb{E}[\\mu_{\\mathbf{v}}]$\n2821: *   **Regularized Standard Deviation:** $\\sigma'_{\\mathcal{A}} := \\sigma'_{\\text{reg}}(\\operatorname{Var}[\\mu_{\\mathbf{v}}])$\n2822: where $\\sigma'_{\\text{reg}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$ is the **Regularized Standard Deviation**. This $C^\\infty$ replacement for the square-root prevents pathological sensitivity near zero variance while maintaining smooth behavior everywhere. It is defined as:\n2823: $$\n2824: \n2825: \\sigma'_{\\text{reg}}(V) := \\sqrt{V + \\sigma'^2_{\\min}}\n2826: \n2827: $$\n2828: where $\\sigma'_{\\min} := \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2} > 0$ is the **regularization parameter** combining the variance floor threshold $\\kappa_{\\text{var,min}} > 0$ and the numerical stability parameter $\\varepsilon_{\\text{std}} > 0$.\n2829: **Properties:**\n2830: 1. **C^∞ Regularity:** The function is infinitely differentiable on $[0, \\infty)$ as a composition of smooth functions.\n2831: 2. **Positive Lower Bound:** $\\sigma'_{\\text{reg}}(V) \\ge \\sigma'_{\\min} > 0$ for all $V \\ge 0$, preventing division by zero.\n2832: 3. **Asymptotic Behavior:** For large $V \\gg \\sigma'^2_{\\min}$, the regularized function closely approximates the natural square root: $\\sigma'_{\\text{reg}}(V) \\approx \\sqrt{V} + \\frac{\\sigma'^2_{\\min}}{2\\sqrt{V}}$.\n2833: 4. **Monotonicity:** The function is strictly increasing, with $\\sigma'_{\\text{reg}}(0) = \\sigma'_{\\min}$ and $\\lim_{V \\to \\infty} \\sigma'_{\\text{reg}}(V) = \\infty$.\n2834: ::{prf:lemma} Derivative Bounds for Regularized Standard Deviation\n2835: :label: lem-sigma-reg-derivative-bounds\n2836: The regularized standard deviation $\\sigma'_{\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}$ has explicit derivative bounds for all orders. For the first three derivatives:\n2837: $$\n2838: \n2839: \\left|(\\sigma'_{\text{reg}})'(V)\n2840: ight| = \n2841: rac{1}{2\\sqrt{V + \\sigma'^2_{\\min}}} \\le \n2842: rac{1}{2\\sigma'_{\\min}} =: L_{\\sigma'_{\text{reg}}}\n2843: \n2844: $$\n2845: $$\n2846: \\left|(\\sigma'_{\text{reg}})''(V)\n2847: ight| = \n2848: rac{1}{4(V + \\sigma'^2_{\\min})^{3/2}} \\le \n2849: rac{1}{4\\sigma'^3_{\\min}} =: L_{\\sigma''_{\text{reg}}}\n2850: $$\n2851: \n2852: $$\n2853: \\left|(\\sigma'_{\text{reg}})'''(V)\n2854: ight| = \n2855: rac{3}{8(V + \\sigma'^2_{\\min})^{5/2}} \\le \n2856: rac{3}{8\\sigma'^5_{\\min}} =: L_{\\sigma'''_{\text{reg}}}\n2857: $$\n2858: General form: For the $n$-th derivative with $n \\ge 1$,",
      "metadata": {
        "label": "lem-sigma-reg-derivative-bounds"
      },
      "section": "## 12. Standardization pipeline",
      "references": [],
      "raw_directive": "2816: The first step is to distill the vector of raw measurements from the alive set into a few key statistics. This is achieved by calculating the moments of the **Swarm Aggregation Measure**. The definition of the standard deviation is modified to use a smoothed function, which is a critical and mandatory component for securing a global Lipschitz control on the denominator and, ultimately, the Hölder continuity bounds for the full standardization operator.\n2817: :::{prf:definition} Statistical Properties Measurement\n2818: :label: def-statistical-properties-measurement\n2819: Let $\\mathbf{v}_{\\mathcal{A}}$ be the vector of raw scalar values for the alive set $\\mathcal{A}_t$. Let $\\mu_{\\mathbf{v}} = M(\\mathcal{S}_t; \\mathbf{v}_{\\mathcal{A}})$ be the **Swarm Aggregation Measure** for these values. The **Statistical Properties Measurement** extracts the effective mean and a smoothed, regularized standard deviation from this measure:\n2820: *   **Mean:** $\\mu_{\\mathcal{A}} := \\mathbb{E}[\\mu_{\\mathbf{v}}]$\n2821: *   **Regularized Standard Deviation:** $\\sigma'_{\\mathcal{A}} := \\sigma'_{\\text{reg}}(\\operatorname{Var}[\\mu_{\\mathbf{v}}])$\n2822: where $\\sigma'_{\\text{reg}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$ is the **Regularized Standard Deviation**. This $C^\\infty$ replacement for the square-root prevents pathological sensitivity near zero variance while maintaining smooth behavior everywhere. It is defined as:\n2823: $$\n2824: \n2825: \\sigma'_{\\text{reg}}(V) := \\sqrt{V + \\sigma'^2_{\\min}}\n2826: \n2827: $$\n2828: where $\\sigma'_{\\min} := \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2} > 0$ is the **regularization parameter** combining the variance floor threshold $\\kappa_{\\text{var,min}} > 0$ and the numerical stability parameter $\\varepsilon_{\\text{std}} > 0$.\n2829: **Properties:**\n2830: 1. **C^∞ Regularity:** The function is infinitely differentiable on $[0, \\infty)$ as a composition of smooth functions.\n2831: 2. **Positive Lower Bound:** $\\sigma'_{\\text{reg}}(V) \\ge \\sigma'_{\\min} > 0$ for all $V \\ge 0$, preventing division by zero.\n2832: 3. **Asymptotic Behavior:** For large $V \\gg \\sigma'^2_{\\min}$, the regularized function closely approximates the natural square root: $\\sigma'_{\\text{reg}}(V) \\approx \\sqrt{V} + \\frac{\\sigma'^2_{\\min}}{2\\sqrt{V}}$.\n2833: 4. **Monotonicity:** The function is strictly increasing, with $\\sigma'_{\\text{reg}}(0) = \\sigma'_{\\min}$ and $\\lim_{V \\to \\infty} \\sigma'_{\\text{reg}}(V) = \\infty$.\n2834: ::{prf:lemma} Derivative Bounds for Regularized Standard Deviation\n2835: :label: lem-sigma-reg-derivative-bounds\n2836: The regularized standard deviation $\\sigma'_{\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}$ has explicit derivative bounds for all orders. For the first three derivatives:\n2837: $$\n2838: \n2839: \\left|(\\sigma'_{\text{reg}})'(V)\n2840: ight| = \n2841: rac{1}{2\\sqrt{V + \\sigma'^2_{\\min}}} \\le \n2842: rac{1}{2\\sigma'_{\\min}} =: L_{\\sigma'_{\text{reg}}}\n2843: \n2844: $$\n2845: $$\n2846: \\left|(\\sigma'_{\text{reg}})''(V)\n2847: ight| = \n2848: rac{1}{4(V + \\sigma'^2_{\\min})^{3/2}} \\le \n2849: rac{1}{4\\sigma'^3_{\\min}} =: L_{\\sigma''_{\text{reg}}}\n2850: $$\n2851: \n2852: $$\n2853: \\left|(\\sigma'_{\text{reg}})'''(V)\n2854: ight| = \n2855: rac{3}{8(V + \\sigma'^2_{\\min})^{5/2}} \\le \n2856: rac{3}{8\\sigma'^5_{\\min}} =: L_{\\sigma'''_{\text{reg}}}\n2857: $$\n2858: General form: For the $n$-th derivative with $n \\ge 1$,\n2859: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 12. Standardization pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-value-error-coefficients",
      "title": "Value Error Coefficients",
      "start_line": 3233,
      "end_line": 3263,
      "header_lines": [
        3234
      ],
      "content_start": 3236,
      "content_end": 3262,
      "content": "3236: The squared norm is $\\|z_2\\|_2^2 \\cdot (\\sigma'_2 - \\sigma'_1)^2 / (\\sigma'_1)^2$. We bound each term:\n3237: - From [](#thm-z-score-norm-bound), $\\|z_2\\|_2^2 \\leq k\\,(2V_{\\max}/\\sigma'_{\\min,\\text{bound}})^2$.\n3238: - From [](#lem-stats-value-continuity), $(\\sigma'_2 - \\sigma'_1)^2 \\leq (L_{\\sigma',M}(S))^2 \\|v_1 - v_2\\|_2^2$.\n3239: - The term $1/(\\sigma'_1)^2$ is bounded by $1/(\\sigma'_{\\min,\\text{bound}})^2$.\n3240: Combining these three bounds yields the final result.\n3241: **Q.E.D.**\n3242: :::\n3243: ##### 11.2.2.5. Definition: Value Error Coefficients\n3244: :::{prf:definition} Value Error Coefficients\n3245: :label: def-value-error-coefficients\n3246: \n3247: Let $\\mathcal{S}$ be a fixed swarm state with alive set $\\mathcal{A}$ of size **k**, and let **M** be the chosen **Swarm Aggregation Operator**. The coefficients for the value error bounds are defined as follows:\n3248: \n3249: 1.  **The Direct Shift Coefficient ($C_V,direct$):**\n3250: \n3251: $$\n3252: C_{V,\\text{direct}} := \\frac{1}{\\sigma'^2_{\\min,\\text{bound}}}\n3253: $$\n3254: \n3255: 2.  **The Mean Shift Coefficient ($C_V,\\mu(S)$):**\n3256: \n3257: $$\n3258: C_{V,\\mu}(\\mathcal{S}) := \\frac{k \\cdot (L_{\\mu,M}(\\mathcal{S}))^2}{\\sigma'^2_{\\min,\\text{bound}}}\n3259: $$\n3260: \n3261: 3.  **The Statistical Fluctuation Coefficient ($C_V,\\sigma(S)$):**\n3262: ",
      "metadata": {
        "label": "def-value-error-coefficients"
      },
      "section": "## 12. Standardization pipeline",
      "references": [],
      "raw_directive": "3233: :::{prf:proof}\n3234: :label: proof-lem-sub-statistical-fluctuation-bound\n3235: **Proof.**\n3236: The squared norm is $\\|z_2\\|_2^2 \\cdot (\\sigma'_2 - \\sigma'_1)^2 / (\\sigma'_1)^2$. We bound each term:\n3237: - From [](#thm-z-score-norm-bound), $\\|z_2\\|_2^2 \\leq k\\,(2V_{\\max}/\\sigma'_{\\min,\\text{bound}})^2$.\n3238: - From [](#lem-stats-value-continuity), $(\\sigma'_2 - \\sigma'_1)^2 \\leq (L_{\\sigma',M}(S))^2 \\|v_1 - v_2\\|_2^2$.\n3239: - The term $1/(\\sigma'_1)^2$ is bounded by $1/(\\sigma'_{\\min,\\text{bound}})^2$.\n3240: Combining these three bounds yields the final result.\n3241: **Q.E.D.**\n3242: :::\n3243: ##### 11.2.2.5. Definition: Value Error Coefficients\n3244: :::{prf:definition} Value Error Coefficients\n3245: :label: def-value-error-coefficients\n3246: \n3247: Let $\\mathcal{S}$ be a fixed swarm state with alive set $\\mathcal{A}$ of size **k**, and let **M** be the chosen **Swarm Aggregation Operator**. The coefficients for the value error bounds are defined as follows:\n3248: \n3249: 1.  **The Direct Shift Coefficient ($C_V,direct$):**\n3250: \n3251: $$\n3252: C_{V,\\text{direct}} := \\frac{1}{\\sigma'^2_{\\min,\\text{bound}}}\n3253: $$\n3254: \n3255: 2.  **The Mean Shift Coefficient ($C_V,\\mu(S)$):**\n3256: \n3257: $$\n3258: C_{V,\\mu}(\\mathcal{S}) := \\frac{k \\cdot (L_{\\mu,M}(\\mathcal{S}))^2}{\\sigma'^2_{\\min,\\text{bound}}}\n3259: $$\n3260: \n3261: 3.  **The Statistical Fluctuation Coefficient ($C_V,\\sigma(S)$):**\n3262: \n3263: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 12. Standardization pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-lipschitz-value-error-coefficients",
      "title": "Value Error Coefficients",
      "start_line": 3585,
      "end_line": 3623,
      "header_lines": [
        3586
      ],
      "content_start": 3587,
      "content_end": 3622,
      "content": "3587:     *   From the proven value continuity of the smoothed standard deviation ([](#lem-stats-value-continuity)), $(\\sigma'_2 - \\sigma'_1)^2 \\leq (L_{\\sigma',M}(S))^2 \\|v_1 - v_2\\|_2^2$.\n3588:     *   The term $1/(\\sigma'_1)^2$ is bounded by $1/\\sigma'^2_{\\min\\,\\text{bound}}$.\n3589:     Combining these gives a bound of the form $C \\cdot \\|v_1 - v_2\\|_2^2$ for this component as well.\n3590: 4.  **Combine the Bounds:**\n3591:     Substituting the bounds for each of the three components into the inequality from [](#sub-lem-lipschitz-value-error-decomposition) ($\\|\\Deltaz\\|_2^2 \\leq 3(\\|\\Delta_{\\text{direct}}\\|_2^2 + ...)$), and factoring out the common term $\\|v_1 - v_2\\|_2^2$, yields the final result. The sum of the coefficients for each component, multiplied by 3, constitutes the **Total Value Error Coefficient**, $C_{V,total}(S)$. Since all constituent parts are finite for a given state **S**, $C_{V,total}(S)$ is a finite constant.\n3592: **Q.E.D.**\n3593: :::\n3594: #### 11.3.4 Definition: Value Error Coefficients\n3595: To formalize the result of the preceding theorem and provide modular components for the final proof, we explicitly define the coefficients used in the bound for the Squared Value Error. These coefficients are deterministic functions of a fixed swarm state **S**.\n3596: :::{prf:definition} Value Error Coefficients\n3597: :label: def-lipschitz-value-error-coefficients\n3598: Let **S** be a fixed swarm state with alive set **A** of size **k**, and let **M** be the chosen **Swarm Aggregation Operator**. Let\n3599: $$\n3600: \n3601: \\sigma'_{\\min\\,\\text{bound}} := \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}\n3602: \n3603: $$\n3604: be the uniform lower bound on the regularized standard deviation. The coefficients for the value error bounds are defined as follows:\n3605: 1.  **The Direct Shift Coefficient ($C_V,direct$):**\n3606: $$\n3607: \n3608:     C_{V,\\text{direct}} := \\frac{1}{\\sigma'^2_{\\min\\,\\text{bound}}}\n3609: \n3610: \n3611: $$\n3612: 2.  **The Mean Shift Coefficient ($C_V,\\mu(S)$):**\n3613: $$\n3614: \n3615:     C_{V,\\mu}(\\mathcal{S}) := \\frac{k \\cdot (L_{\\mu,M}(\\mathcal{S}))^2}{\\sigma'^2_{\\min\\,\\text{bound}}}\n3616: \n3617: \n3618: $$\n3619: 3.  **The Denominator Shift Coefficient ($C_V,\\sigma(S)$):**\n3620: $$\n3621: \n3622:     C_{V,\\sigma}(\\mathcal{S}) := k \\left( \\frac{2V_{\\max}}{\\sigma'_{\\min\\,\\text{bound}}} \\right)^2 \\left( \\frac{L_{\\sigma',M}(\\mathcal{S})}{\\sigma'_{\\min\\,\\text{bound}}} \\right)^2",
      "metadata": {
        "label": "def-lipschitz-value-error-coefficients"
      },
      "section": "## 12. Standardization pipeline",
      "references": [],
      "raw_directive": "3585:     The squared norm is $\\|z_2\\|_2^2 \\cdot (\\sigma'_2 - \\sigma'_1)^2 / (\\sigma'_1)^2$. We bound each term:\n3586:     *   From [](#thm-z-score-norm-bound), $\\|z_2\\|_2^2 \\leq k\\big(2V_{\\max}/\\sigma'_{\\min\\,\\text{bound}}\\big)^2$.\n3587:     *   From the proven value continuity of the smoothed standard deviation ([](#lem-stats-value-continuity)), $(\\sigma'_2 - \\sigma'_1)^2 \\leq (L_{\\sigma',M}(S))^2 \\|v_1 - v_2\\|_2^2$.\n3588:     *   The term $1/(\\sigma'_1)^2$ is bounded by $1/\\sigma'^2_{\\min\\,\\text{bound}}$.\n3589:     Combining these gives a bound of the form $C \\cdot \\|v_1 - v_2\\|_2^2$ for this component as well.\n3590: 4.  **Combine the Bounds:**\n3591:     Substituting the bounds for each of the three components into the inequality from [](#sub-lem-lipschitz-value-error-decomposition) ($\\|\\Deltaz\\|_2^2 \\leq 3(\\|\\Delta_{\\text{direct}}\\|_2^2 + ...)$), and factoring out the common term $\\|v_1 - v_2\\|_2^2$, yields the final result. The sum of the coefficients for each component, multiplied by 3, constitutes the **Total Value Error Coefficient**, $C_{V,total}(S)$. Since all constituent parts are finite for a given state **S**, $C_{V,total}(S)$ is a finite constant.\n3592: **Q.E.D.**\n3593: :::\n3594: #### 11.3.4 Definition: Value Error Coefficients\n3595: To formalize the result of the preceding theorem and provide modular components for the final proof, we explicitly define the coefficients used in the bound for the Squared Value Error. These coefficients are deterministic functions of a fixed swarm state **S**.\n3596: :::{prf:definition} Value Error Coefficients\n3597: :label: def-lipschitz-value-error-coefficients\n3598: Let **S** be a fixed swarm state with alive set **A** of size **k**, and let **M** be the chosen **Swarm Aggregation Operator**. Let\n3599: $$\n3600: \n3601: \\sigma'_{\\min\\,\\text{bound}} := \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}\n3602: \n3603: $$\n3604: be the uniform lower bound on the regularized standard deviation. The coefficients for the value error bounds are defined as follows:\n3605: 1.  **The Direct Shift Coefficient ($C_V,direct$):**\n3606: $$\n3607: \n3608:     C_{V,\\text{direct}} := \\frac{1}{\\sigma'^2_{\\min\\,\\text{bound}}}\n3609: \n3610: \n3611: $$\n3612: 2.  **The Mean Shift Coefficient ($C_V,\\mu(S)$):**\n3613: $$\n3614: \n3615:     C_{V,\\mu}(\\mathcal{S}) := \\frac{k \\cdot (L_{\\mu,M}(\\mathcal{S}))^2}{\\sigma'^2_{\\min\\,\\text{bound}}}\n3616: \n3617: \n3618: $$\n3619: 3.  **The Denominator Shift Coefficient ($C_V,\\sigma(S)$):**\n3620: $$\n3621: \n3622:     C_{V,\\sigma}(\\mathcal{S}) := k \\left( \\frac{2V_{\\max}}{\\sigma'_{\\min\\,\\text{bound}}} \\right)^2 \\left( \\frac{L_{\\sigma',M}(\\mathcal{S})}{\\sigma'_{\\min\\,\\text{bound}}} \\right)^2\n3623: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 12. Standardization pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-lipschitz-structural-error-coefficients",
      "title": "Structural Error Coefficients",
      "start_line": 3668,
      "end_line": 3692,
      "header_lines": [
        3669
      ],
      "content_start": 3670,
      "content_end": 3691,
      "content": "3670:     *   The mean shift error is bounded by $2k_{\\text{stable}} \\cdot ((\\mu_1 - \\mu_2)/\\sigma'_1)^2$. Using the structural continuity of the mean ($|\\mu_1-\\mu_2|^2 \\leq (L_{\\mu,S})^2 (n_c)^2$), this term is bounded by an expression proportional to $n_c^2$.\n3671:     *   The denominator shift error is bounded by $2\\|z_1\\|^2((\\sigma'_1-\\sigma'_2)/\\sigma'_2)^2$. Using the structural continuity of $\\sigma'$ ($|\\sigma'_1-\\sigma'_2|^2 \\leq (L_{\\sigma',S})^2 (n_c)^2$), this term is also bounded by an expression proportional to $n_c^2$.\n3672:     The sum of these two terms gives a total bound for the indirect error that is quadratic in $n_c$.\n3673: 4.  **Combine the Bounds:**\n3674:     Summing the bounds for the direct (linear in $n_c$) and indirect (quadratic in $n_c$) components gives the final bound as stated in the theorem.\n3675: **Q.E.D.**\n3676: :::\n3677: #### 11.3.6 Definition: Structural Error Coefficients\n3678: To formalize the result of the preceding theorem, we explicitly define the coefficients used in the bound for the Squared Structural Error. These coefficients are deterministic functions of the two swarm states, $\\mathcal{S}_1$ and $\\mathcal{S}_2$.\n3679: :::{prf:definition} Structural Error Coefficients\n3680: :label: def-lipschitz-structural-error-coefficients\n3681: Let $\\mathcal{S}_1$ and $\\mathcal{S}_2$ be two swarm states with alive sets $\\mathcal{A}_1$ and $\\mathcal{A}_2$, of sizes $k_1:=|\\mathcal{A}_1|$ and $k_2:=|\\mathcal{A}_2|$. Let $k_{\\text{stable}}:=|\\mathcal{A}_1\\cap\\mathcal{A}_2|$. Let\n3682: $$\n3683: \n3684: \\sigma'_{\\min\\,\\text{bound}} := \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}\n3685: \n3686: $$\n3687: be a uniform lower bound on the regularized standard deviation. The coefficients for the structural error bounds are defined as follows:\n3688: 1.  **The Direct Structural Error Coefficient ($C_{S,\\text{direct}}$):** The coefficient of the term linear in $n_c$.\n3689: $$\n3690: \n3691:     C_{S,\\text{direct}} := \\left( \\frac{2V_{\\max}}{\\sigma'_{\\min\\,\\text{bound}}} \\right)^2",
      "metadata": {
        "label": "def-lipschitz-structural-error-coefficients"
      },
      "section": "## 12. Standardization pipeline",
      "references": [],
      "raw_directive": "3668: 3.  **Bound the Indirect Error Component ($\\Delta_{\\text{indirect}}$):**\n3669:     For the $k_{\\text{stable}}$ walkers that are alive in both swarms, the error $z_{1,i} - z_{2,i}$ is decomposed into a mean-shift part and a denominator-shift part. Using $\\|a+b\\|^2 \\leq 2(\\|a\\|^2 + \\|b\\|^2)$, we bound the sum of these errors over all stable walkers.\n3670:     *   The mean shift error is bounded by $2k_{\\text{stable}} \\cdot ((\\mu_1 - \\mu_2)/\\sigma'_1)^2$. Using the structural continuity of the mean ($|\\mu_1-\\mu_2|^2 \\leq (L_{\\mu,S})^2 (n_c)^2$), this term is bounded by an expression proportional to $n_c^2$.\n3671:     *   The denominator shift error is bounded by $2\\|z_1\\|^2((\\sigma'_1-\\sigma'_2)/\\sigma'_2)^2$. Using the structural continuity of $\\sigma'$ ($|\\sigma'_1-\\sigma'_2|^2 \\leq (L_{\\sigma',S})^2 (n_c)^2$), this term is also bounded by an expression proportional to $n_c^2$.\n3672:     The sum of these two terms gives a total bound for the indirect error that is quadratic in $n_c$.\n3673: 4.  **Combine the Bounds:**\n3674:     Summing the bounds for the direct (linear in $n_c$) and indirect (quadratic in $n_c$) components gives the final bound as stated in the theorem.\n3675: **Q.E.D.**\n3676: :::\n3677: #### 11.3.6 Definition: Structural Error Coefficients\n3678: To formalize the result of the preceding theorem, we explicitly define the coefficients used in the bound for the Squared Structural Error. These coefficients are deterministic functions of the two swarm states, $\\mathcal{S}_1$ and $\\mathcal{S}_2$.\n3679: :::{prf:definition} Structural Error Coefficients\n3680: :label: def-lipschitz-structural-error-coefficients\n3681: Let $\\mathcal{S}_1$ and $\\mathcal{S}_2$ be two swarm states with alive sets $\\mathcal{A}_1$ and $\\mathcal{A}_2$, of sizes $k_1:=|\\mathcal{A}_1|$ and $k_2:=|\\mathcal{A}_2|$. Let $k_{\\text{stable}}:=|\\mathcal{A}_1\\cap\\mathcal{A}_2|$. Let\n3682: $$\n3683: \n3684: \\sigma'_{\\min\\,\\text{bound}} := \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}\n3685: \n3686: $$\n3687: be a uniform lower bound on the regularized standard deviation. The coefficients for the structural error bounds are defined as follows:\n3688: 1.  **The Direct Structural Error Coefficient ($C_{S,\\text{direct}}$):** The coefficient of the term linear in $n_c$.\n3689: $$\n3690: \n3691:     C_{S,\\text{direct}} := \\left( \\frac{2V_{\\max}}{\\sigma'_{\\min\\,\\text{bound}}} \\right)^2\n3692: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 12. Standardization pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-alive-set-potential-operator",
      "title": "Rescaled Potential Operator for the Alive Set",
      "start_line": 3737,
      "end_line": 3763,
      "header_lines": [
        3738
      ],
      "content_start": 3739,
      "content_end": 3762,
      "content": "3739: \n3740: \n3741: $$\n3742: 4.  **Combine the Bounds:** Substituting the bounds from steps 2 and 3 into the decomposition from step 1 yields the final inequality as stated in the theorem. This provides a complete, deterministic, worst-case bound on the operator's output error.\n3743: **Q.E.D.**\n3744: :::\n3745: ## 13. Fitness potential operator\n3746: This section defines the sequence of deterministic operators that transform the raw measurement vectors (rewards and distances) into a final, N-dimensional fitness potential vector. These operators are executed after the stochastic measurement stage and are fixed for the remainder of the cloning decision process.\n3747: ### 12.1 Rescaled Potential Operator for the Alive Set\n3748: :::{prf:definition} Rescaled Potential Operator for the Alive Set\n3749: :label: def-alive-set-potential-operator\n3750: The **Rescaled Potential Operator for the Alive Set**, denoted $V_{\\text{op},\\mathcal{A}}$, is a deterministic function that maps the raw reward and distance vectors of an alive set of size $k=|\\mathcal{A}_t|$ to a vector of fitness potentials for that same set.\n3751: **Signature:** $V_{\\text{op},\\mathcal{A}}: \\Sigma_N \\times \\mathbb{R}^k \\times \\mathbb{R}^k \\to \\mathbb{R}^k$\n3752: **Inputs:**\n3753: *   The current swarm state, $\\mathcal{S}_t$ (used for the aggregation operators).\n3754: *   The raw reward vector for the alive set, $\\mathbf{r} = (r_j)_{j \\in \\mathcal{A}_t}$.\n3755: *   The raw distance vector for the alive set, $\\mathbf{d} = (d_j)_{j \\in \\mathcal{A}_t}$.\n3756: *   All relevant algorithmic parameters ($\\eta, \\varepsilon_{\\mathrm{std}}, z_{\\max}, R_{agg}, M_D, \\alpha, \\beta$).\n3757: **Operation:**\n3758: The operator computes the output vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$ as follows:\n3759: 1.  **Standardize Raw Values (patched z‑score):** The **N-Dimensional Standardization Operator** (Def. 11.1.1) is applied independently to each raw vector using the regularized standard deviation $\\sigma\\'_{\\text{reg}}$.\n3760:     *   Compute reward Z‑scores: $\\mathbf{z_r} := z(\\mathcal{S}_t, \\mathbf{r}, R_{agg}, \\varepsilon_{\\mathrm{std}})$.\n3761:     *   Compute distance Z-scores: $\\mathbf{z_d} := z(\\mathcal{S}_t, \\mathbf{d}, M_D, \\varepsilon_{\\mathrm{std}})$.\n3762: 2.  **Compute Potentials:** For each walker $i \\in \\mathcal{A}_t$:",
      "metadata": {
        "label": "def-alive-set-potential-operator"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3737: \n3738:     E_{S}^2(\\mathcal{S}_1, \\mathcal{S}_2; \\mathbf{v}_2) \\le C_{S,\\text{direct}} \\cdot n_c(\\mathcal{S}_1, \\mathcal{S}_2) + C_{S,\\text{indirect}}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot n_c(\\mathcal{S}_1, \\mathcal{S}_2)^2\n3739: \n3740: \n3741: $$\n3742: 4.  **Combine the Bounds:** Substituting the bounds from steps 2 and 3 into the decomposition from step 1 yields the final inequality as stated in the theorem. This provides a complete, deterministic, worst-case bound on the operator's output error.\n3743: **Q.E.D.**\n3744: :::\n3745: ## 13. Fitness potential operator\n3746: This section defines the sequence of deterministic operators that transform the raw measurement vectors (rewards and distances) into a final, N-dimensional fitness potential vector. These operators are executed after the stochastic measurement stage and are fixed for the remainder of the cloning decision process.\n3747: ### 12.1 Rescaled Potential Operator for the Alive Set\n3748: :::{prf:definition} Rescaled Potential Operator for the Alive Set\n3749: :label: def-alive-set-potential-operator\n3750: The **Rescaled Potential Operator for the Alive Set**, denoted $V_{\\text{op},\\mathcal{A}}$, is a deterministic function that maps the raw reward and distance vectors of an alive set of size $k=|\\mathcal{A}_t|$ to a vector of fitness potentials for that same set.\n3751: **Signature:** $V_{\\text{op},\\mathcal{A}}: \\Sigma_N \\times \\mathbb{R}^k \\times \\mathbb{R}^k \\to \\mathbb{R}^k$\n3752: **Inputs:**\n3753: *   The current swarm state, $\\mathcal{S}_t$ (used for the aggregation operators).\n3754: *   The raw reward vector for the alive set, $\\mathbf{r} = (r_j)_{j \\in \\mathcal{A}_t}$.\n3755: *   The raw distance vector for the alive set, $\\mathbf{d} = (d_j)_{j \\in \\mathcal{A}_t}$.\n3756: *   All relevant algorithmic parameters ($\\eta, \\varepsilon_{\\mathrm{std}}, z_{\\max}, R_{agg}, M_D, \\alpha, \\beta$).\n3757: **Operation:**\n3758: The operator computes the output vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$ as follows:\n3759: 1.  **Standardize Raw Values (patched z‑score):** The **N-Dimensional Standardization Operator** (Def. 11.1.1) is applied independently to each raw vector using the regularized standard deviation $\\sigma\\'_{\\text{reg}}$.\n3760:     *   Compute reward Z‑scores: $\\mathbf{z_r} := z(\\mathcal{S}_t, \\mathbf{r}, R_{agg}, \\varepsilon_{\\mathrm{std}})$.\n3761:     *   Compute distance Z-scores: $\\mathbf{z_d} := z(\\mathcal{S}_t, \\mathbf{d}, M_D, \\varepsilon_{\\mathrm{std}})$.\n3762: 2.  **Compute Potentials:** For each walker $i \\in \\mathcal{A}_t$:\n3763:     a.  Apply the **Smooth Piecewise Rescale Function** ($g_A$) and add the lower bound $\\eta$ to create the rescaled components from the Z-scores $z_{i,r}$ and $z_{i,d}$:",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 13,
        "chapter_file": "chapter_13.json",
        "section_id": "## 13. Fitness potential operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-swarm-potential-assembly-operator",
      "title": "Swarm Potential Assembly Operator",
      "start_line": 3764,
      "end_line": 3778,
      "header_lines": [
        3765
      ],
      "content_start": 3766,
      "content_end": 3777,
      "content": "3766:     b.  Combine the components to get the final fitness potential for that walker:\n3767: $$\n3768: \n3769:     V_i := (d'_i)^{\\beta} \\cdot (r'_i)^{\\alpha} \\quad \\text{for } i \\in \\mathcal{A}_t\n3770: \n3771: \n3772: $$\n3773: **Output:** The operator returns the $k$-dimensional vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$.\n3774: :::\n3775: :::{prf:definition} Swarm Potential Assembly Operator\n3776: :label: def-swarm-potential-assembly-operator\n3777: The **Swarm Potential Assembly Operator**, denoted $A_{\\text{pot}}$, is a deterministic function that maps the potential vector of the alive set to the full N-dimensional fitness potential vector for the entire swarm.",
      "metadata": {
        "label": "def-swarm-potential-assembly-operator"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3764:         *   $r'_i := g_A(z_{i,r}) + \\eta$\n3765:         *   $d'_i := g_A(z_{i,d}) + \\eta$\n3766:     b.  Combine the components to get the final fitness potential for that walker:\n3767: $$\n3768: \n3769:     V_i := (d'_i)^{\\beta} \\cdot (r'_i)^{\\alpha} \\quad \\text{for } i \\in \\mathcal{A}_t\n3770: \n3771: \n3772: $$\n3773: **Output:** The operator returns the $k$-dimensional vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$.\n3774: :::\n3775: :::{prf:definition} Swarm Potential Assembly Operator\n3776: :label: def-swarm-potential-assembly-operator\n3777: The **Swarm Potential Assembly Operator**, denoted $A_{\\text{pot}}$, is a deterministic function that maps the potential vector of the alive set to the full N-dimensional fitness potential vector for the entire swarm.\n3778: **Signature:** $A_{\\text{pot}}: \\Sigma_N \\times \\mathbb{R}^{|\\mathcal{A}_t|} \\to \\mathbb{R}^N$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 13,
        "chapter_file": "chapter_13.json",
        "section_id": "## 13. Fitness potential operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-perturbation-operator",
      "title": "Perturbation Operator",
      "start_line": 4003,
      "end_line": 4016,
      "header_lines": [
        4004
      ],
      "content_start": 4005,
      "content_end": 4015,
      "content": "4005: F_{\\text{pot,det}}(\\mathcal{S}_1, \\mathcal{S}_2, \\mathbf{v}_{r1}, \\mathbf{v}_{r2}, \\mathbf{v}_{d1}, \\mathbf{v}_{d2})\n4006: \\;\\xrightarrow[(d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2),\\,\\|\\Delta\\mathbf{v}_r\\|,\\,\\|\\Delta\\mathbf{v}_d\\|)\\to 0]{}\\;0.\n4007: \n4008: $$\n4009: Moreover, for $d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2)^2\\le r_{\\mathrm{status}}$ we have $n_c=0$ and the unstable term vanishes exactly; the remaining terms are controlled by the deterministic continuity of the patched standardization operator and the Lipschitz continuity of the potential map $F$.\n4010: :::\n4011: ## 14. The Perturbation Operator\n4012: The perturbation stage applies a random displacement to each walker in the swarm, representing an exploration step. This is a purely stochastic operator that only affects walker positions.\n4013: ### 13.1 Definition: Perturbation Operator\n4014: :::{prf:definition} Perturbation Operator\n4015: :label: def-perturbation-operator",
      "metadata": {
        "label": "def-perturbation-operator"
      },
      "section": "## 14. The Perturbation Operator",
      "references": [],
      "raw_directive": "4003: $$\n4004: \n4005: F_{\\text{pot,det}}(\\mathcal{S}_1, \\mathcal{S}_2, \\mathbf{v}_{r1}, \\mathbf{v}_{r2}, \\mathbf{v}_{d1}, \\mathbf{v}_{d2})\n4006: \\;\\xrightarrow[(d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2),\\,\\|\\Delta\\mathbf{v}_r\\|,\\,\\|\\Delta\\mathbf{v}_d\\|)\\to 0]{}\\;0.\n4007: \n4008: $$\n4009: Moreover, for $d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1,\\mathcal{S}_2)^2\\le r_{\\mathrm{status}}$ we have $n_c=0$ and the unstable term vanishes exactly; the remaining terms are controlled by the deterministic continuity of the patched standardization operator and the Lipschitz continuity of the potential map $F$.\n4010: :::\n4011: ## 14. The Perturbation Operator\n4012: The perturbation stage applies a random displacement to each walker in the swarm, representing an exploration step. This is a purely stochastic operator that only affects walker positions.\n4013: ### 13.1 Definition: Perturbation Operator\n4014: :::{prf:definition} Perturbation Operator\n4015: :label: def-perturbation-operator\n4016: The **Perturbation Operator**, denoted $\\Psi_{\\text{pert}}: \\Sigma_N \\to \\mathcal{P}(\\Sigma_N)$, maps an input swarm $\\mathcal{S}_{\\text{in}}$ to a distribution over swarms where only the positions have been updated.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 14,
        "chapter_file": "chapter_14.json",
        "section_id": "## 14. The Perturbation Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-perturbation-fluctuation-bounds-reproof",
      "title": "Perturbation Fluctuation Bounds",
      "start_line": 4133,
      "end_line": 4151,
      "header_lines": [
        4134
      ],
      "content_start": 4135,
      "content_end": 4150,
      "content": "4135: $$\n4136: Setting the failure probability to $\\delta'$ and solving for $t$ gives the stochastic fluctuation bound for the average,\n4137:     $\\displaystyle B_{S,\\text{avg}}(N,\\delta') = D_{\\mathcal{Y}}^2 \\sqrt{\\tfrac{1}{2N}\\ln\\!(\\tfrac{2}{\\delta'})}$. Multiplying back by $N$ recovers the bound for $\\Delta_{\\text{pert}}^2$ used below.\n4138: 4.  **Combine with Axiomatic Mean Bound.**\n4139:     The expected total displacement $E[\\Delta_pert^2]$ is bounded by the **Mean Displacement Bound**, $B_M(N)$. Combining these gives the final high-probability bound.\n4140: **Q.E.D.**\n4141: :::\n4142: #### 13.2.4. Definition: Perturbation Fluctuation Bounds\n4143: This section formally defines the two components that bound the total random displacement introduced by the Perturbation Operator. These terms are direct consequences of the preceding analysis and are functions of the foundational parameters of the system.\n4144: :::{prf:definition} Perturbation Fluctuation Bounds\n4145: :label: def-perturbation-fluctuation-bounds-reproof\n4146: The total random displacement introduced by the Perturbation Operator is bounded by the sum of two components: a deterministic bound on its mean and a probabilistic bound on its fluctuations.\n4147: 1.  **The Mean Displacement Bound ($B_M(N)$):** A deterministic upper bound on the total expected squared displacement for a swarm of size N. It is derived from the **Axiom of Bounded Second Moment of Perturbation** ([](#def-axiom-bounded-second-moment-perturbation)).\n4148: $$\n4149: \n4150:     B_M(N) := N \\cdot M_{\\text{pert}}^2",
      "metadata": {
        "label": "def-perturbation-fluctuation-bounds-reproof"
      },
      "section": "## 14. The Perturbation Operator",
      "references": [],
      "raw_directive": "4133: \n4134: \n4135: $$\n4136: Setting the failure probability to $\\delta'$ and solving for $t$ gives the stochastic fluctuation bound for the average,\n4137:     $\\displaystyle B_{S,\\text{avg}}(N,\\delta') = D_{\\mathcal{Y}}^2 \\sqrt{\\tfrac{1}{2N}\\ln\\!(\\tfrac{2}{\\delta'})}$. Multiplying back by $N$ recovers the bound for $\\Delta_{\\text{pert}}^2$ used below.\n4138: 4.  **Combine with Axiomatic Mean Bound.**\n4139:     The expected total displacement $E[\\Delta_pert^2]$ is bounded by the **Mean Displacement Bound**, $B_M(N)$. Combining these gives the final high-probability bound.\n4140: **Q.E.D.**\n4141: :::\n4142: #### 13.2.4. Definition: Perturbation Fluctuation Bounds\n4143: This section formally defines the two components that bound the total random displacement introduced by the Perturbation Operator. These terms are direct consequences of the preceding analysis and are functions of the foundational parameters of the system.\n4144: :::{prf:definition} Perturbation Fluctuation Bounds\n4145: :label: def-perturbation-fluctuation-bounds-reproof\n4146: The total random displacement introduced by the Perturbation Operator is bounded by the sum of two components: a deterministic bound on its mean and a probabilistic bound on its fluctuations.\n4147: 1.  **The Mean Displacement Bound ($B_M(N)$):** A deterministic upper bound on the total expected squared displacement for a swarm of size N. It is derived from the **Axiom of Bounded Second Moment of Perturbation** ([](#def-axiom-bounded-second-moment-perturbation)).\n4148: $$\n4149: \n4150:     B_M(N) := N \\cdot M_{\\text{pert}}^2\n4151: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 14,
        "chapter_file": "chapter_14.json",
        "section_id": "## 14. The Perturbation Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-status-update-operator",
      "title": "Status Update Operator",
      "start_line": 4193,
      "end_line": 4206,
      "header_lines": [
        4194
      ],
      "content_start": 4195,
      "content_end": 4205,
      "content": "4195: **Q.E.D.**\n4196: :::\n4197: :::{admonition} Scope and assumptions\n4198: :class: note\n4199: This concentration bound relies on Assumption A (in‑step independence) and on the with‑replacement sampling policy in §7.1.1. Implementations that use within‑step dependence (e.g., systematic resampling with a shared uniform) violate these assumptions; in that case use a dependent bounded‑differences inequality (see Appendix) instead of McDiarmid.\n4200: :::\n4201: ## 15. The Status Update Operator\n4202: After any change in position (either from cloning or perturbation), a walker's status must be re-evaluated. This operator performs that check deterministically.\n4203: ### 14.1 Definition: Status Update Operator\n4204: :::{prf:definition} Status Update Operator\n4205: :label: def-status-update-operator",
      "metadata": {
        "label": "def-status-update-operator"
      },
      "section": "## 15. The Status Update Operator",
      "references": [],
      "raw_directive": "4193: 4.  **Combine All Bounds.**\n4194:     Substituting the deterministic bound for the status component and the high-probability bound for the positional component back into the metric definition gives the final result as stated in the theorem.\n4195: **Q.E.D.**\n4196: :::\n4197: :::{admonition} Scope and assumptions\n4198: :class: note\n4199: This concentration bound relies on Assumption A (in‑step independence) and on the with‑replacement sampling policy in §7.1.1. Implementations that use within‑step dependence (e.g., systematic resampling with a shared uniform) violate these assumptions; in that case use a dependent bounded‑differences inequality (see Appendix) instead of McDiarmid.\n4200: :::\n4201: ## 15. The Status Update Operator\n4202: After any change in position (either from cloning or perturbation), a walker's status must be re-evaluated. This operator performs that check deterministically.\n4203: ### 14.1 Definition: Status Update Operator\n4204: :::{prf:definition} Status Update Operator\n4205: :label: def-status-update-operator\n4206: The **Status Update Operator**, denoted $\\Psi_{\\text{status}}: \\Sigma_N \\to \\Sigma_N$, is a deterministic function that maps an input swarm to an output swarm where only the aliveness statuses have been updated to reflect their current positions.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 15,
        "chapter_file": "chapter_15.json",
        "section_id": "## 15. The Status Update Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-stochastic-threshold-cloning",
      "title": "Cloning Score Function",
      "start_line": 4291,
      "end_line": 4340,
      "header_lines": [
        4292,
        4304
      ],
      "content_start": 4293,
      "content_end": 4339,
      "content": "4293:     *   **Hölder Term:** The bound on the squared difference of means is identical for all $N$ walkers. Summing this bound $N$ times gives $N L_{\\text{death}}^2 \\left( d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2) \\right)^{2\\alpha_B}$.\n4294:     Combining these two bounds yields the final inequality as stated in the theorem.\n4295: **Q.E.D.**\n4296: :::\n4297: ## 16. The Cloning Transition Measure\n4298: The final step in the measurement pipeline is to convert the N-dimensional fitness potential vector into a probabilistic cloning decision for each walker. This process is governed by a score function and the resulting $Cloning Bernoulli Measure$.\n4299: ### 15.1 Definition: Cloning Transition Measure\n4300: #### 15.1.1 The Cloning Score Function\n4301: The core arithmetic of the cloning decision is encapsulated in a deterministic function that compares a walker's potential to that of its companion.\n4302: :::{prf:definition} Cloning Score Function\n4303: :label: def-cloning-score-function\n4304: The **Cloning Score Function**, $S: \\mathbb{R}_{\\ge 0} \\times \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}$, takes the fitness potential of a companion walker ($v_c$) and a primary walker ($v_i$) and computes a raw score.\n4305: $$\n4306: \n4307: S(v_c, v_i) := \\frac{v_c - v_i}{v_i + \\varepsilon}\n4308: \n4309: $$\n4310: where $\\varepsilon > 0$ is the cloning denominator regularizer.\n4311: ::::\n4312: #### 15.1.2 Stochastic Threshold Cloning\n4313: This procedure defines the cloning action for each walker. It replaces a probabilistic model with a deterministic comparison between the walker's score and a randomly sampled threshold.\n4314: :::{prf:definition} Stochastic Threshold Cloning\n4315: :label: def-stochastic-threshold-cloning\n4316: For each walker $i \\in \\{1, \\dots, N\\}$, the cloning action $a_i \\in \\{\\text{Clone}, \\text{Persist}\\}$ is determined by the following procedure, which depends on the full fitness potential vector of the swarm and an independent random choice of a companion.\n4317: **Inputs:**\n4318: *   The full N-dimensional fitness potential vector, $\\mathbf{V}_{\\text{fit}}$.\n4319: *   The walker's index, $i$.\n4320: *   The **Companion Selection Measure** for that walker, $\\mathbb{C}_i$.\n4321: *   The **Clone Threshold Scale** parameter, $p_{\\max}$.\n4322: **Operation:**\n4323: The action is determined as follows:\n4324: 1.  **Sample Cloning Companion:** An independent cloning companion index, $c_{\\text{clone}}(i)$, is sampled from the companion measure: $c_{\\text{clone}}(i) \\sim \\mathbb{C}_i(\\cdot)$.\n4325: 2.  **Compute Score:** The walker's potential, $v_i = V_{\\text{fit},i}$, and its companion's potential, $v_c = V_{\\text{fit},c_{\\text{clone}}(i)}$, are used to compute the cloning score using the [](#def-cloning-score-function):\n4326: $$\n4327: \n4328:     S_i := S(v_c, v_i)\n4329: \n4330: \n4331: $$\n4332: 3.  **Sample Cloning Threshold:** A random threshold, $T_{\\text{clone}}$, is drawn from a uniform distribution over the interval defined by the Clone Threshold Scale:\n4333: $$\n4334: \n4335:     T_{\\text{clone}} \\sim \\text{Uniform}(0, p_{\\max})\n4336: \n4337: \n4338: $$\n4339: 4.  **Determine Action:** The action is determined by comparing the score to the threshold. A walker is cloned only if its score exceeds the randomly drawn threshold.",
      "metadata": {
        "label": "def-stochastic-threshold-cloning"
      },
      "section": "## 16. The Cloning Transition Measure",
      "references": [],
      "raw_directive": "4291: 4.  **Finalize the Bound:**\n4292:     *   **Variance Term:** The variance of a Bernoulli random variable is $\\operatorname{Var}(X) = p(1-p)$, which is always bounded above by $1/4$. Therefore, the sum of all variance terms is bounded by a constant: $\\sum_{i=1}^N (\\operatorname{Var}[s'_{1,i}] + \\operatorname{Var}[s'_{2,i}]) \\le \\sum_{i=1}^N (\\frac{1}{4} + \\frac{1}{4}) = \\frac{N}{2}$.\n4293:     *   **Hölder Term:** The bound on the squared difference of means is identical for all $N$ walkers. Summing this bound $N$ times gives $N L_{\\text{death}}^2 \\left( d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2) \\right)^{2\\alpha_B}$.\n4294:     Combining these two bounds yields the final inequality as stated in the theorem.\n4295: **Q.E.D.**\n4296: :::\n4297: ## 16. The Cloning Transition Measure\n4298: The final step in the measurement pipeline is to convert the N-dimensional fitness potential vector into a probabilistic cloning decision for each walker. This process is governed by a score function and the resulting $Cloning Bernoulli Measure$.\n4299: ### 15.1 Definition: Cloning Transition Measure\n4300: #### 15.1.1 The Cloning Score Function\n4301: The core arithmetic of the cloning decision is encapsulated in a deterministic function that compares a walker's potential to that of its companion.\n4302: :::{prf:definition} Cloning Score Function\n4303: :label: def-cloning-score-function\n4304: The **Cloning Score Function**, $S: \\mathbb{R}_{\\ge 0} \\times \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}$, takes the fitness potential of a companion walker ($v_c$) and a primary walker ($v_i$) and computes a raw score.\n4305: $$\n4306: \n4307: S(v_c, v_i) := \\frac{v_c - v_i}{v_i + \\varepsilon}\n4308: \n4309: $$\n4310: where $\\varepsilon > 0$ is the cloning denominator regularizer.\n4311: ::::\n4312: #### 15.1.2 Stochastic Threshold Cloning\n4313: This procedure defines the cloning action for each walker. It replaces a probabilistic model with a deterministic comparison between the walker's score and a randomly sampled threshold.\n4314: :::{prf:definition} Stochastic Threshold Cloning\n4315: :label: def-stochastic-threshold-cloning\n4316: For each walker $i \\in \\{1, \\dots, N\\}$, the cloning action $a_i \\in \\{\\text{Clone}, \\text{Persist}\\}$ is determined by the following procedure, which depends on the full fitness potential vector of the swarm and an independent random choice of a companion.\n4317: **Inputs:**\n4318: *   The full N-dimensional fitness potential vector, $\\mathbf{V}_{\\text{fit}}$.\n4319: *   The walker's index, $i$.\n4320: *   The **Companion Selection Measure** for that walker, $\\mathbb{C}_i$.\n4321: *   The **Clone Threshold Scale** parameter, $p_{\\max}$.\n4322: **Operation:**\n4323: The action is determined as follows:\n4324: 1.  **Sample Cloning Companion:** An independent cloning companion index, $c_{\\text{clone}}(i)$, is sampled from the companion measure: $c_{\\text{clone}}(i) \\sim \\mathbb{C}_i(\\cdot)$.\n4325: 2.  **Compute Score:** The walker's potential, $v_i = V_{\\text{fit},i}$, and its companion's potential, $v_c = V_{\\text{fit},c_{\\text{clone}}(i)}$, are used to compute the cloning score using the [](#def-cloning-score-function):\n4326: $$\n4327: \n4328:     S_i := S(v_c, v_i)\n4329: \n4330: \n4331: $$\n4332: 3.  **Sample Cloning Threshold:** A random threshold, $T_{\\text{clone}}$, is drawn from a uniform distribution over the interval defined by the Clone Threshold Scale:\n4333: $$\n4334: \n4335:     T_{\\text{clone}} \\sim \\text{Uniform}(0, p_{\\max})\n4336: \n4337: \n4338: $$\n4339: 4.  **Determine Action:** The action is determined by comparing the score to the threshold. A walker is cloned only if its score exceeds the randomly drawn threshold.\n4340: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 16,
        "chapter_file": "chapter_16.json",
        "section_id": "## 16. The Cloning Transition Measure"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-total-expected-cloning-action",
      "title": "Total Expected Cloning Action",
      "start_line": 4357,
      "end_line": 4367,
      "header_lines": [
        4358
      ],
      "content_start": 4359,
      "content_end": 4366,
      "content": "4359: The Cloning Transition is a composite stochastic operator that determines the intermediate swarm state based on the calculated fitness potentials. Its continuity analysis is critical, as it governs how sensitively the cloning and revival mechanisms react to small changes in the swarm state. A discontinuous transition would imply chaotic behavior where small measurement fluctuations could lead to drastically different swarm configurations.\n4360: This section proves that the operator is probabilistically continuous. The analysis is centered on the key insight that the continuity of the overall transition depends on the continuity of the **total probability** of cloning. We first define this total probability, which averages over all stochasticity in the measurement pipeline, and then prove that it is a continuous function of the input swarm state. This result is the foundation for proving the continuity of the full operator.\n4361: :::{prf:remark} Cloning Scope and Companion Convention\n4362: :label: rem-cloning-scope-companion-convention\n4363: \n4364: All bounds in §15.2.4–§15.2.8 are stated for the regime $k_1=|\\mathcal A(\\mathcal S_1)|\\ge 2$ (at least two alive walkers), with the \"no self‑companion\" convention (an alive walker samples companions from $\\mathcal A\\setminus\\{i\\}$). The edge case $k=1$ is handled separately in §15 (single‑survivor revival), after which analysis resumes with $k\\ge 2$. Where intermediate formulas feature denominators $k_1-1$, they are interpreted under this precondition; if a generic statement is needed, replace $k_1-1$ by $\\max(1, k_1-1)$ and invoke the $k=1$ section.\n4365: :::\n4366: #### 15.2.1. The Total Expected Cloning Action",
      "metadata": {
        "label": "def-total-expected-cloning-action"
      },
      "section": "## 16. The Cloning Transition Measure",
      "references": [],
      "raw_directive": "4357: :::\n4358: ### 15.2. Continuity of the Cloning Transition Measure\n4359: The Cloning Transition is a composite stochastic operator that determines the intermediate swarm state based on the calculated fitness potentials. Its continuity analysis is critical, as it governs how sensitively the cloning and revival mechanisms react to small changes in the swarm state. A discontinuous transition would imply chaotic behavior where small measurement fluctuations could lead to drastically different swarm configurations.\n4360: This section proves that the operator is probabilistically continuous. The analysis is centered on the key insight that the continuity of the overall transition depends on the continuity of the **total probability** of cloning. We first define this total probability, which averages over all stochasticity in the measurement pipeline, and then prove that it is a continuous function of the input swarm state. This result is the foundation for proving the continuity of the full operator.\n4361: :::{prf:remark} Cloning Scope and Companion Convention\n4362: :label: rem-cloning-scope-companion-convention\n4363: \n4364: All bounds in §15.2.4–§15.2.8 are stated for the regime $k_1=|\\mathcal A(\\mathcal S_1)|\\ge 2$ (at least two alive walkers), with the \"no self‑companion\" convention (an alive walker samples companions from $\\mathcal A\\setminus\\{i\\}$). The edge case $k=1$ is handled separately in §15 (single‑survivor revival), after which analysis resumes with $k\\ge 2$. Where intermediate formulas feature denominators $k_1-1$, they are interpreted under this precondition; if a generic statement is needed, replace $k_1-1$ by $\\max(1, k_1-1)$ and invoke the $k=1$ section.\n4365: :::\n4366: #### 15.2.1. The Total Expected Cloning Action\n4367: The ultimate probability of a \"Clone\" action for a walker depends on the outcome of the stochastic distance measurement and the random companion choice. To analyze the operator's continuity as a function of the input swarm state, we must average over all sources of randomness.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 16,
        "chapter_file": "chapter_16.json",
        "section_id": "## 16. The Cloning Transition Measure"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-probability-function",
      "title": "The Conditional Cloning Probability Function",
      "start_line": 4370,
      "end_line": 4380,
      "header_lines": [
        4371
      ],
      "content_start": 4372,
      "content_end": 4379,
      "content": "4372: $$\n4373: \n4374: \\overline{P}_{\\text{clone}}(\\mathcal{S})_i := \\mathbb{E}_{\\mathbf{d} \\sim \\mathbf{d}(\\mathcal{S})} \\left[ P_{\\text{clone}}(\\mathcal{S}, \\mathbf{V}(\\mathbf{r}(\\mathcal{S}), \\mathbf{d}))_i \\right]\n4375: \n4376: $$\n4377: This quantity is a deterministic function of the input swarm state $\\mathcal{S}$ and is the central object for the continuity analysis of the cloning stage.\n4378: :::\n4379: #### 15.2.2. The Conditional Cloning Probability Function and its Continuity",
      "metadata": {
        "label": "def-cloning-probability-function"
      },
      "section": "## 16. The Cloning Transition Measure",
      "references": [],
      "raw_directive": "4370: The **Total Expected Cloning Action** for a walker $i$, denoted $\\overline{P}_{\\text{clone}}(\\mathcal{S})_i$, is the probability that walker $i$ will be assigned the \"Clone\" action, given the swarm state $\\mathcal{S}$. It is the expectation of the **Conditional Expected Cloning Action** (Def. 15.2.3) taken over the probability distribution of the raw distance vector $\\mathbf{d} \\sim \\mathbf{d}(\\mathcal{S})$.\n4371: Let $\\mathbf{r}(\\mathcal{S})$ be the deterministic raw reward vector for state $\\mathcal{S}$, and let $\\mathbf{V}(\\mathbf{r}, \\mathbf{d})$ be the fitness potential vector generated from a specific realization of the raw measurement vectors. The total expected action is:\n4372: $$\n4373: \n4374: \\overline{P}_{\\text{clone}}(\\mathcal{S})_i := \\mathbb{E}_{\\mathbf{d} \\sim \\mathbf{d}(\\mathcal{S})} \\left[ P_{\\text{clone}}(\\mathcal{S}, \\mathbf{V}(\\mathbf{r}(\\mathcal{S}), \\mathbf{d}))_i \\right]\n4375: \n4376: $$\n4377: This quantity is a deterministic function of the input swarm state $\\mathcal{S}$ and is the central object for the continuity analysis of the cloning stage.\n4378: :::\n4379: #### 15.2.2. The Conditional Cloning Probability Function and its Continuity\n4380: The probability of a \"Clone\" action for a walker **i** with a specific companion **c** can be expressed as a deterministic function of their respective fitness potentials. This represents the probability *conditional* on a specific realization of the potential vector.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 16,
        "chapter_file": "chapter_16.json",
        "section_id": "## 16. The Cloning Transition Measure"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-expected-cloning-action",
      "title": "Conditional Expected Cloning Action",
      "start_line": 4415,
      "end_line": 4423,
      "header_lines": [
        4416
      ],
      "content_start": 4417,
      "content_end": 4422,
      "content": "4417: **Proof.**\n4418: The proof proceeds by finding the Lipschitz constant of the composition of the **clip** function and the normalized score function, $S(v_c, v_i)/p_{\\max}$. The **clip** function (min(1, max(0, x))) has a Lipschitz constant of 1. Therefore, the Lipschitz constant of $\\pi$ is bounded by the Lipschitz constant of the normalized score. We find this by bounding the partial derivatives of the score function $S(v_c, v_i)$.\n4419: 1.  **Partial Derivative with respect to $v_c$:** $\\partial S/\\partial v_c = 1/(v_i + \\varepsilon_{\\text{clone}})$. For alive walkers, [](#lem-potential-boundedness) gives $v_i\\ge V_{\\text{pot,min}}$, hence the bound $1/(V_{\\text{pot,min}} + \\varepsilon_{\\text{clone}})$. For a dead walker ($v_i=0$), the bound is $1/\\varepsilon_{\\text{clone}}$. The worst case is the dead‑walker value $1/\\varepsilon_{\\text{clone}}$.\n4420: 2.  **Partial Derivative with respect to $v_i$:** $\\partial S/\\partial v_i = (-\\varepsilon_{\\text{clone}} - v_c)/(v_i + \\varepsilon_{\\text{clone}})^2$. In magnitude, this is $\\le (V_{\\text{pot,max}} + \\varepsilon_{\\text{clone}})/(v_i + \\varepsilon_{\\text{clone}})^2$. For alive walkers, use $v_i\\ge V_{\\text{pot,min}}$; for a dead walker, $v_i=0$ yields the worst‑case bound $(V_{\\text{pot,max}} + \\varepsilon_{\\text{clone}})/\\varepsilon_{\\text{clone}}^2$.\n4421: 3.  **Combine:** Divide the worst‑case partial‑derivative bounds by $p_{\\max}$ to obtain the stated uniform Lipschitz constants $L_{\\pi,c}$ and $L_{\\pi,i}$ that cover both alive and dead cases.\n4422: **Q.E.D.**",
      "metadata": {
        "label": "def-expected-cloning-action"
      },
      "section": "## 16. The Cloning Transition Measure",
      "references": [],
      "raw_directive": "4415: :label: proof-lem-cloning-probability-lipschitz\n4416: \n4417: **Proof.**\n4418: The proof proceeds by finding the Lipschitz constant of the composition of the **clip** function and the normalized score function, $S(v_c, v_i)/p_{\\max}$. The **clip** function (min(1, max(0, x))) has a Lipschitz constant of 1. Therefore, the Lipschitz constant of $\\pi$ is bounded by the Lipschitz constant of the normalized score. We find this by bounding the partial derivatives of the score function $S(v_c, v_i)$.\n4419: 1.  **Partial Derivative with respect to $v_c$:** $\\partial S/\\partial v_c = 1/(v_i + \\varepsilon_{\\text{clone}})$. For alive walkers, [](#lem-potential-boundedness) gives $v_i\\ge V_{\\text{pot,min}}$, hence the bound $1/(V_{\\text{pot,min}} + \\varepsilon_{\\text{clone}})$. For a dead walker ($v_i=0$), the bound is $1/\\varepsilon_{\\text{clone}}$. The worst case is the dead‑walker value $1/\\varepsilon_{\\text{clone}}$.\n4420: 2.  **Partial Derivative with respect to $v_i$:** $\\partial S/\\partial v_i = (-\\varepsilon_{\\text{clone}} - v_c)/(v_i + \\varepsilon_{\\text{clone}})^2$. In magnitude, this is $\\le (V_{\\text{pot,max}} + \\varepsilon_{\\text{clone}})/(v_i + \\varepsilon_{\\text{clone}})^2$. For alive walkers, use $v_i\\ge V_{\\text{pot,min}}$; for a dead walker, $v_i=0$ yields the worst‑case bound $(V_{\\text{pot,max}} + \\varepsilon_{\\text{clone}})/\\varepsilon_{\\text{clone}}^2$.\n4421: 3.  **Combine:** Divide the worst‑case partial‑derivative bounds by $p_{\\max}$ to obtain the stated uniform Lipschitz constants $L_{\\pi,c}$ and $L_{\\pi,i}$ that cover both alive and dead cases.\n4422: **Q.E.D.**\n4423: :::",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 16,
        "chapter_file": "chapter_16.json",
        "section_id": "## 16. The Cloning Transition Measure"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-swarm-update-procedure",
      "title": "Swarm Update Procedure",
      "start_line": 4727,
      "end_line": 4785,
      "header_lines": [
        4728
      ],
      "content_start": 4729,
      "content_end": 4784,
      "content": "4729:     *   **Conclusion:** The score $S_i$ is guaranteed to be greater than any possible sampled threshold $T_{\\text{clone}}$. Walker $i$ is assigned the \"Clone\" action with probability 1. Its intermediate position is sampled from $\\mathcal{Q}_\\delta(x_j^{(t)}, \\cdot)$. This proves the second property for all $N-1$ dead walkers.\n4730: 3.  **Proof of Swarm Revival and Failure Condition:**\n4731:     *   From (1) and (2), all $N$ walkers persist or are cloned. As per the **Swarm Update Procedure**, all walkers in the intermediate swarm $\\mathcal{S}_{t+0.5}$ are assigned a status of alive. Thus, $|\\mathcal{A}(\\mathcal{S}_{t+0.5})| = N$ is guaranteed.\n4732:     *   The final state $\\mathcal{S}_{t+1}$ is determined by applying the **Perturbation Operator** and **Status Update Operator** to $\\mathcal{S}_{t+0.5}$. The only way for the swarm to become extinct is if every walker $i \\in \\{1, \\dots, N\\}$ has its new position $x_i^{(t+1)}$ fall within the invalid domain.\n4733:     *   Since the perturbations are independent for each walker, the probability of total swarm failure is the product of the individual probabilities of failure. This isolates the extinction risk to a single, quantifiable event, contingent entirely on the outcomes of the **N** post-revival random walks. This proves the third property.\n4734: **Q.E.D.**\n4735: :::\n4736: ## 18. Swarm Update Operator: A Composition of Measures\n4737: ### 17.1 Definition: Swarm Update Operator\n4738: :::{prf:definition} Swarm Update Procedure\n4739: :label: def-swarm-update-procedure\n4740: The **swarm update operator** $\\Psi: \\Sigma_N \\to \\mathcal{P}(\\Sigma_N)$ defines the one-step transition measure of the Markov process, evolving a swarm state $\\mathcal{S}_t$ to a probability distribution over the subsequent state $\\mathcal{S}_{t+1}$. A single realization $\\mathcal{S}_{t+1} \\sim \\Psi(\\mathcal{S}_t, \\cdot)$ is generated by the sequential application of the following operators.\n4741: 1.  **Stage 1: Cemetery State Absorption**\n4742:     *   If the input swarm is in the absorbing cemetery state, $|\\mathcal{A}(\\mathcal{S}_t)|=0$, the process terminates. The operator returns a Dirac measure on the input state: $\\Psi(\\mathcal{S}_t, \\cdot) = \\delta_{\\mathcal{S}_t}(\\cdot)$, such that $\\mathcal{S}_{t+1} = \\mathcal{S}_t$. Otherwise, the transition is defined by the composition of the following stages.\n4743: 2.  **Stage 2: Stochastic Measurement and Potential Calculation**\n4744:     This stage maps the input swarm state $\\mathcal{S}_t$ to a single, fixed N-dimensional fitness potential vector $\\mathbf{V}_{\\text{fit}}$, which is then used as a deterministic parameter for the remainder of the timestep.\n4745:     *   **a. Raw Measurement (Stochastic):**\n4746:         *   The raw reward vector for the alive set, $\\mathbf{r}_{\\mathcal{A}}$, is generated deterministically: $\\mathbf{r}_{\\mathcal{A}} := (R(x_i))_{i \\in \\mathcal{A}_t}$.\n4747:         *   The raw distance vector, $\\mathbf{d}_{\\mathcal{A}}$, is generated stochastically by first sampling a *potential companion* $c_{\\text{pot}}(i) \\sim \\mathbb{C}_i(\\mathcal{S}_t)$ for each alive walker $i \\in \\mathcal{A}_t$ (from Def. 7.1), then computing: $\\mathbf{d}_{\\mathcal{A}} := (d_{\\text{alg}}(x_i, x_{c_{\\text{pot}}(i)}))_{i \\in \\mathcal{A}_t}$.\n4748:     *   **b. Potential Vector Calculation (Deterministic):**\n4749:         *   Using the single realization of the raw vectors $(\\mathbf{r}_{\\mathcal{A}}, \\mathbf{d}_{\\mathcal{A}})$ from the previous step, the potential vector for the alive set is computed by applying the deterministic **Rescaled Potential Operator for the Alive Set** ([](#def-alive-set-potential-operator)):\n4750: $$\n4751: \n4752:             \\mathbf{V}_{\\mathcal{A}} \\leftarrow V_{\\text{op},\\mathcal{A}}(\\mathcal{S}_t, \\mathbf{r}_{\\mathcal{A}}, \\mathbf{d}_{\\mathcal{A}})\n4753: \n4754: \n4755: $$\n4756: *   The full N-dimensional fitness potential vector is then assembled using the deterministic **Swarm Potential Assembly Operator** ([](#def-swarm-potential-assembly-operator)):\n4757: $$\n4758: \n4759:             \\mathbf{V}_{\\text{fit}} \\leftarrow A_{\\text{pot}}(\\mathcal{S}_t, \\mathbf{V}_{\\mathcal{A}})\n4760: \n4761: \n4762: $$\n4763: 3.  **Stage 3: Cloning Transition**\n4764:     This stage maps the input swarm $\\mathcal{S}_t$ and the fixed potential vector $\\mathbf{V}_{\\text{fit}}$ to a distribution over an intermediate swarm state $\\mathcal{S}_{t+0.5}$. The process is defined as a product measure over the N walkers. For each walker $i \\in \\{1, \\dots, N\\}$:\n4765:     *   **a. Sample Cloning Companion:** An independent *cloning companion* index, $c_{\\text{clone}}(i)$, is sampled from the **Companion Selection Measure** $\\mathbb{C}_i(\\mathcal{S}_t)$.\n4766:     *   **b. Determine Action:** An action $a_i \\in \\{\\text{Clone}, \\text{Persist}\\}$ is determined via the **Stochastic Threshold Cloning** procedure (Def. 15.2), which compares the walker's score against a random threshold sampled from $[0, p_{\\max}]$.\n4767:     *   **c. Sample Intermediate Position:** A **Conditional Intermediate Position Measure** $\\mathbb{M}_i$ on $\\mathcal{X}$ is defined based on the determined action:\n4768: $$\n4769: \n4770:         \\mathbb{M}_i(\\cdot | a_i) :=\n4771:         \\begin{cases}\n4772:         \\mathcal{Q}_\\delta(x_{c_{\\text{clone}}(i)}^{(t)}, \\cdot) & \\text{if } a_i = \\text{Clone} \\\\\n4773:         \\delta_{x_i^{(t)}}(\\cdot) & \\text{if } a_i = \\text{Persist}\n4774:         \\end{cases}\n4775: \n4776: \n4777: $$\n4778: where $\\mathcal{Q}_\\delta$ is the **Cloning Measure** ([](#def-cloning-measure)) and $\\delta_{x}$ is the Dirac delta measure. The intermediate position is then sampled: $x_i^{(t+0.5)} \\sim \\mathbb{M}_i(\\cdot | a_i)$.\n4779:     *   **d. Form Intermediate Walker:** The intermediate status is set deterministically to alive, $s_i^{(t+0.5)} \\leftarrow 1$, yielding the intermediate walker $w_i^{(t+0.5)} = (x_i^{(t+0.5)}, s_i^{(t+0.5)})$. The intermediate swarm is $\\mathcal{S}_{t+0.5} = (w_i^{(t+0.5)})_{i=1}^N$.\n4780: 4.  **Stage 4: Perturbation and Final Status Update**\n4781:     The final swarm state $\\mathcal{S}_{t+1}$ is generated by the composition of the final two operators.\n4782:     *   **a. Perturbation:** The positions of the intermediate swarm are updated by sampling from the measure defined by the **Perturbation Operator** ([](#def-perturbation-operator)), resulting in a new swarm $\\mathcal{S}_{\\text{pert}}$:\n4783: $$\n4784: ",
      "metadata": {
        "label": "def-swarm-update-procedure"
      },
      "section": "## 18. Swarm Update Operator: A Composition of Measures",
      "references": [],
      "raw_directive": "4727: $$\n4728: Therefore, we have the following guaranteed inequality: $S_i \\ge \\frac{\\eta^{\\alpha+\\beta}}{\\varepsilon_{\\text{clone}}} > p_{\\max} \\ge T_{\\text{clone}}$.\n4729:     *   **Conclusion:** The score $S_i$ is guaranteed to be greater than any possible sampled threshold $T_{\\text{clone}}$. Walker $i$ is assigned the \"Clone\" action with probability 1. Its intermediate position is sampled from $\\mathcal{Q}_\\delta(x_j^{(t)}, \\cdot)$. This proves the second property for all $N-1$ dead walkers.\n4730: 3.  **Proof of Swarm Revival and Failure Condition:**\n4731:     *   From (1) and (2), all $N$ walkers persist or are cloned. As per the **Swarm Update Procedure**, all walkers in the intermediate swarm $\\mathcal{S}_{t+0.5}$ are assigned a status of alive. Thus, $|\\mathcal{A}(\\mathcal{S}_{t+0.5})| = N$ is guaranteed.\n4732:     *   The final state $\\mathcal{S}_{t+1}$ is determined by applying the **Perturbation Operator** and **Status Update Operator** to $\\mathcal{S}_{t+0.5}$. The only way for the swarm to become extinct is if every walker $i \\in \\{1, \\dots, N\\}$ has its new position $x_i^{(t+1)}$ fall within the invalid domain.\n4733:     *   Since the perturbations are independent for each walker, the probability of total swarm failure is the product of the individual probabilities of failure. This isolates the extinction risk to a single, quantifiable event, contingent entirely on the outcomes of the **N** post-revival random walks. This proves the third property.\n4734: **Q.E.D.**\n4735: :::\n4736: ## 18. Swarm Update Operator: A Composition of Measures\n4737: ### 17.1 Definition: Swarm Update Operator\n4738: :::{prf:definition} Swarm Update Procedure\n4739: :label: def-swarm-update-procedure\n4740: The **swarm update operator** $\\Psi: \\Sigma_N \\to \\mathcal{P}(\\Sigma_N)$ defines the one-step transition measure of the Markov process, evolving a swarm state $\\mathcal{S}_t$ to a probability distribution over the subsequent state $\\mathcal{S}_{t+1}$. A single realization $\\mathcal{S}_{t+1} \\sim \\Psi(\\mathcal{S}_t, \\cdot)$ is generated by the sequential application of the following operators.\n4741: 1.  **Stage 1: Cemetery State Absorption**\n4742:     *   If the input swarm is in the absorbing cemetery state, $|\\mathcal{A}(\\mathcal{S}_t)|=0$, the process terminates. The operator returns a Dirac measure on the input state: $\\Psi(\\mathcal{S}_t, \\cdot) = \\delta_{\\mathcal{S}_t}(\\cdot)$, such that $\\mathcal{S}_{t+1} = \\mathcal{S}_t$. Otherwise, the transition is defined by the composition of the following stages.\n4743: 2.  **Stage 2: Stochastic Measurement and Potential Calculation**\n4744:     This stage maps the input swarm state $\\mathcal{S}_t$ to a single, fixed N-dimensional fitness potential vector $\\mathbf{V}_{\\text{fit}}$, which is then used as a deterministic parameter for the remainder of the timestep.\n4745:     *   **a. Raw Measurement (Stochastic):**\n4746:         *   The raw reward vector for the alive set, $\\mathbf{r}_{\\mathcal{A}}$, is generated deterministically: $\\mathbf{r}_{\\mathcal{A}} := (R(x_i))_{i \\in \\mathcal{A}_t}$.\n4747:         *   The raw distance vector, $\\mathbf{d}_{\\mathcal{A}}$, is generated stochastically by first sampling a *potential companion* $c_{\\text{pot}}(i) \\sim \\mathbb{C}_i(\\mathcal{S}_t)$ for each alive walker $i \\in \\mathcal{A}_t$ (from Def. 7.1), then computing: $\\mathbf{d}_{\\mathcal{A}} := (d_{\\text{alg}}(x_i, x_{c_{\\text{pot}}(i)}))_{i \\in \\mathcal{A}_t}$.\n4748:     *   **b. Potential Vector Calculation (Deterministic):**\n4749:         *   Using the single realization of the raw vectors $(\\mathbf{r}_{\\mathcal{A}}, \\mathbf{d}_{\\mathcal{A}})$ from the previous step, the potential vector for the alive set is computed by applying the deterministic **Rescaled Potential Operator for the Alive Set** ([](#def-alive-set-potential-operator)):\n4750: $$\n4751: \n4752:             \\mathbf{V}_{\\mathcal{A}} \\leftarrow V_{\\text{op},\\mathcal{A}}(\\mathcal{S}_t, \\mathbf{r}_{\\mathcal{A}}, \\mathbf{d}_{\\mathcal{A}})\n4753: \n4754: \n4755: $$\n4756: *   The full N-dimensional fitness potential vector is then assembled using the deterministic **Swarm Potential Assembly Operator** ([](#def-swarm-potential-assembly-operator)):\n4757: $$\n4758: \n4759:             \\mathbf{V}_{\\text{fit}} \\leftarrow A_{\\text{pot}}(\\mathcal{S}_t, \\mathbf{V}_{\\mathcal{A}})\n4760: \n4761: \n4762: $$\n4763: 3.  **Stage 3: Cloning Transition**\n4764:     This stage maps the input swarm $\\mathcal{S}_t$ and the fixed potential vector $\\mathbf{V}_{\\text{fit}}$ to a distribution over an intermediate swarm state $\\mathcal{S}_{t+0.5}$. The process is defined as a product measure over the N walkers. For each walker $i \\in \\{1, \\dots, N\\}$:\n4765:     *   **a. Sample Cloning Companion:** An independent *cloning companion* index, $c_{\\text{clone}}(i)$, is sampled from the **Companion Selection Measure** $\\mathbb{C}_i(\\mathcal{S}_t)$.\n4766:     *   **b. Determine Action:** An action $a_i \\in \\{\\text{Clone}, \\text{Persist}\\}$ is determined via the **Stochastic Threshold Cloning** procedure (Def. 15.2), which compares the walker's score against a random threshold sampled from $[0, p_{\\max}]$.\n4767:     *   **c. Sample Intermediate Position:** A **Conditional Intermediate Position Measure** $\\mathbb{M}_i$ on $\\mathcal{X}$ is defined based on the determined action:\n4768: $$\n4769: \n4770:         \\mathbb{M}_i(\\cdot | a_i) :=\n4771:         \\begin{cases}\n4772:         \\mathcal{Q}_\\delta(x_{c_{\\text{clone}}(i)}^{(t)}, \\cdot) & \\text{if } a_i = \\text{Clone} \\\\\n4773:         \\delta_{x_i^{(t)}}(\\cdot) & \\text{if } a_i = \\text{Persist}\n4774:         \\end{cases}\n4775: \n4776: \n4777: $$\n4778: where $\\mathcal{Q}_\\delta$ is the **Cloning Measure** ([](#def-cloning-measure)) and $\\delta_{x}$ is the Dirac delta measure. The intermediate position is then sampled: $x_i^{(t+0.5)} \\sim \\mathbb{M}_i(\\cdot | a_i)$.\n4779:     *   **d. Form Intermediate Walker:** The intermediate status is set deterministically to alive, $s_i^{(t+0.5)} \\leftarrow 1$, yielding the intermediate walker $w_i^{(t+0.5)} = (x_i^{(t+0.5)}, s_i^{(t+0.5)})$. The intermediate swarm is $\\mathcal{S}_{t+0.5} = (w_i^{(t+0.5)})_{i=1}^N$.\n4780: 4.  **Stage 4: Perturbation and Final Status Update**\n4781:     The final swarm state $\\mathcal{S}_{t+1}$ is generated by the composition of the final two operators.\n4782:     *   **a. Perturbation:** The positions of the intermediate swarm are updated by sampling from the measure defined by the **Perturbation Operator** ([](#def-perturbation-operator)), resulting in a new swarm $\\mathcal{S}_{\\text{pert}}$:\n4783: $$\n4784: \n4785:         \\mathcal{S}_{\\text{pert}} \\sim \\Psi_{\\text{pert}}(\\mathcal{S}_{t+0.5}, \\cdot)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 18,
        "chapter_file": "chapter_18.json",
        "section_id": "## 18. Swarm Update Operator: A Composition of Measures"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-w2-output-metric",
      "title": "Wasserstein-2 on the output space (quotient)",
      "start_line": 5086,
      "end_line": 5095,
      "header_lines": [
        5087
      ],
      "content_start": 5088,
      "content_end": 5094,
      "content": "5088: **Q.E.D.**\n5089: :::\n5090: :::{prf:remark}\n5091: :label: rem-remark-context-4997\n5092: Local vs global: for $V\\in[0,1]$ all sub-linear powers are $\\le 1$ and can be absorbed in a constant; for $V\\ge 1$ every sub-linear term is bounded above by the term with exponent $p_{\\max}$. This is the only global (uniform in $V\\ge 0$) way to replace a sum of distinct powers by a single power, and it justifies using $\\alpha_H^{\\mathrm{global}}=\\max(\\tfrac12,\\alpha_B)$ when aggregating sub-linear exponents.\n5093: :::\n5094: ##### 17.2.4.4. W2 Coupling: Removing Constant Offsets",
      "metadata": {
        "label": "def-w2-output-metric"
      },
      "section": "## 18. Swarm Update Operator: A Composition of Measures",
      "references": [],
      "raw_directive": "5086: $$\n5087: Combining the two cases gives the stated global bound. This is sharp in the sense that no uniform inequality of the form $\\sum_k A_k V^{p_k} \\le C\\,V^{q}+K$ can hold with $q<p_{\\max}$ for all $V\\ge 0$.\n5088: **Q.E.D.**\n5089: :::\n5090: :::{prf:remark}\n5091: :label: rem-remark-context-4997\n5092: Local vs global: for $V\\in[0,1]$ all sub-linear powers are $\\le 1$ and can be absorbed in a constant; for $V\\ge 1$ every sub-linear term is bounded above by the term with exponent $p_{\\max}$. This is the only global (uniform in $V\\ge 0$) way to replace a sum of distinct powers by a single power, and it justifies using $\\alpha_H^{\\mathrm{global}}=\\max(\\tfrac12,\\alpha_B)$ when aggregating sub-linear exponents.\n5093: :::\n5094: ##### 17.2.4.4. W2 Coupling: Removing Constant Offsets\n5095: :label: subsec-w2-coupling-offset-removal",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 18,
        "chapter_file": "chapter_18.json",
        "section_id": "## 18. Swarm Update Operator: A Composition of Measures"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-fragile-swarm-instantiation",
      "title": "Fragile Swarm Instantiation",
      "start_line": 5204,
      "end_line": 5212,
      "header_lines": [
        5205
      ],
      "content_start": 5206,
      "content_end": 5211,
      "content": "5206: :::{admonition} Analytical coupling vs. in‑run independence\n5207: :class: note\n5208: We compare two runs via synchronous coupling (same noise seeds) to control $W_2$ distances. This is a proof device only. Within a single run and timestep, per‑walker random inputs remain independent (Assumption A). The $W_2$‑optimized bound and the expectation‑based bound are distinct results proved with different couplings; the former eliminates additive offsets at zero input distance.\n5209: :::\n5210: :::\n5211: ## 19. Fragile Gas: The Algorithm's Execution",
      "metadata": {
        "label": "def-fragile-swarm-instantiation"
      },
      "section": "## 19. Fragile Gas: The Algorithm's Execution",
      "references": [],
      "raw_directive": "5204: All selection, cloning and aggregation maps are Borel on $\\Sigma_N$, being built from basic Borel operations (finite products, CDF inversion, order statistics, and continuous compositions).\n5205: :::\n5206: :::{admonition} Analytical coupling vs. in‑run independence\n5207: :class: note\n5208: We compare two runs via synchronous coupling (same noise seeds) to control $W_2$ distances. This is a proof device only. Within a single run and timestep, per‑walker random inputs remain independent (Assumption A). The $W_2$‑optimized bound and the expectation‑based bound are distinct results proved with different couplings; the former eliminates additive offsets at zero input distance.\n5209: :::\n5210: :::\n5211: ## 19. Fragile Gas: The Algorithm's Execution\n5212: The preceding sections have defined all the necessary mathematical objects, operators, and axiomatic constraints that constitute the Fragile framework. This final section formally defines the algorithm's execution, describing how the one-step **Swarm Update Operator** is used to evolve a swarm over time.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 19,
        "chapter_file": "chapter_19.json",
        "section_id": "## 19. Fragile Gas: The Algorithm's Execution"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-fragile-gas-algorithm",
      "title": "The Fragile Gas Algorithm",
      "start_line": 5215,
      "end_line": 5233,
      "header_lines": [
        5216
      ],
      "content_start": 5217,
      "content_end": 5232,
      "content": "5217: A **Fragile Swarm**, denoted $\\mathcal{F}$, is a tuple that encapsulates a complete and fixed configuration of the algorithm. It contains:\n5218: 1.  **The Foundational & Environmental Parameters:** The full set of environmental structures, including the State Space $(\\mathcal{X}, d_{\\mathcal{X}})$, Valid Domain $\\mathcal{X}_{\\mathrm{valid}}$, Reward Function $R$, Algorithmic Space $(\\mathcal{Y}, d_{\\mathcal{Y}})$, and Projection Map $\\varphi$.\n5219: 2.  **The Core Algorithmic Parameters:** A specific, fixed set of all tunable values, including the number of walkers $N$, dynamics weights $(\\alpha, \\beta)$, noise scales $(\\sigma, \\delta)$, and all regulation and threshold parameters $(p_{\\max}, \\eta, \\varepsilon_{\\text{std}}, z_{\\max}, \\varepsilon_{\\text{clone}})$.\n5220: 3.  **The Concrete Operator Choices:** The specific, user-chosen functions for the **Reward Aggregation Operator** ($R_{agg}$) and the **Distance Aggregation Operator** ($M_D$).\n5221: 4.  **The Concrete Noise Measure Choices:** The specific, user-chosen probability measures for the **Perturbation Measure** ($\\mathcal{P}_\\sigma$) and the **Cloning Measure** ($\\mathcal{Q}_\\delta$).\n5222: A Fragile Swarm instantiation must satisfy all axioms defined in Section 2 for the analytical framework to apply. It represents a single, well-defined point in the algorithm's vast parameter space.\n5223: :::\n5224: ### 18.2 The Fragile Gas Algorithm\n5225: The **Fragile Gas** is the algorithm that describes the temporal evolution of a swarm of N walkers. It generates a trajectory of swarm states by repeatedly applying the Swarm Update Operator, which is fully parameterized by a specific Fragile Swarm instantiation.\n5226: :::{prf:definition} The Fragile Gas Algorithm\n5227: :label: def-fragile-gas-algorithm\n5228: The **Fragile Gas Algorithm** generates a sequence of swarm states (a trajectory) by evolving an initial swarm over a discrete number of timesteps.\n5229: **Inputs:**\n5230: *   A **Fragile Swarm Instantiation**, $\\mathcal{F}$, which fixes all parameters and operators.\n5231: *   An **initial swarm state**, $\\mathcal{S}_0 \\in \\Sigma_N$.\n5232: *   A total number of **timesteps**, $T \\in \\mathbb{N}$.",
      "metadata": {
        "label": "def-fragile-gas-algorithm"
      },
      "section": "## 19. Fragile Gas: The Algorithm's Execution",
      "references": [],
      "raw_directive": "5215: :::{prf:definition} Fragile Swarm Instantiation\n5216: :label: def-fragile-swarm-instantiation\n5217: A **Fragile Swarm**, denoted $\\mathcal{F}$, is a tuple that encapsulates a complete and fixed configuration of the algorithm. It contains:\n5218: 1.  **The Foundational & Environmental Parameters:** The full set of environmental structures, including the State Space $(\\mathcal{X}, d_{\\mathcal{X}})$, Valid Domain $\\mathcal{X}_{\\mathrm{valid}}$, Reward Function $R$, Algorithmic Space $(\\mathcal{Y}, d_{\\mathcal{Y}})$, and Projection Map $\\varphi$.\n5219: 2.  **The Core Algorithmic Parameters:** A specific, fixed set of all tunable values, including the number of walkers $N$, dynamics weights $(\\alpha, \\beta)$, noise scales $(\\sigma, \\delta)$, and all regulation and threshold parameters $(p_{\\max}, \\eta, \\varepsilon_{\\text{std}}, z_{\\max}, \\varepsilon_{\\text{clone}})$.\n5220: 3.  **The Concrete Operator Choices:** The specific, user-chosen functions for the **Reward Aggregation Operator** ($R_{agg}$) and the **Distance Aggregation Operator** ($M_D$).\n5221: 4.  **The Concrete Noise Measure Choices:** The specific, user-chosen probability measures for the **Perturbation Measure** ($\\mathcal{P}_\\sigma$) and the **Cloning Measure** ($\\mathcal{Q}_\\delta$).\n5222: A Fragile Swarm instantiation must satisfy all axioms defined in Section 2 for the analytical framework to apply. It represents a single, well-defined point in the algorithm's vast parameter space.\n5223: :::\n5224: ### 18.2 The Fragile Gas Algorithm\n5225: The **Fragile Gas** is the algorithm that describes the temporal evolution of a swarm of N walkers. It generates a trajectory of swarm states by repeatedly applying the Swarm Update Operator, which is fully parameterized by a specific Fragile Swarm instantiation.\n5226: :::{prf:definition} The Fragile Gas Algorithm\n5227: :label: def-fragile-gas-algorithm\n5228: The **Fragile Gas Algorithm** generates a sequence of swarm states (a trajectory) by evolving an initial swarm over a discrete number of timesteps.\n5229: **Inputs:**\n5230: *   A **Fragile Swarm Instantiation**, $\\mathcal{F}$, which fixes all parameters and operators.\n5231: *   An **initial swarm state**, $\\mathcal{S}_0 \\in \\Sigma_N$.\n5232: *   A total number of **timesteps**, $T \\in \\mathbb{N}$.\n5233: **Process:**",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_fragile_gas_framework",
        "chapter_index": 19,
        "chapter_file": "chapter_19.json",
        "section_id": "## 19. Fragile Gas: The Algorithm's Execution"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mdlgt-state-space",
      "title": "MDLGT State Space with Center-of-Mass Constraint",
      "start_line": 60,
      "end_line": 82,
      "header_lines": [
        61
      ],
      "content_start": 63,
      "content_end": 81,
      "content": "63: :label: def-mdlgt-state-space\n64: \n65: The state of the MDLGT system is a pair $\\mathcal{S} = (\\mathbf{x}, \\mathbf{U})$ living in the constrained product space:\n66: \n67: $$\n68: \\Sigma_N = \\left\\{(\\mathbf{x}, \\mathbf{U}) \\in (\\mathbb{R}^4)^N \\times (\\text{SU}(N_c))^{E_N(\\mathbf{x})} : \\sum_{i=1}^N x_i = 0\\right\\}\n69: \n70: $$\n71: \n72: where:\n73: \n74: - **Nodes (Lattice Sites)**: $\\mathbf{x} = (x_1, \\ldots, x_N)$ with each $x_i \\in \\mathbb{R}^4$ representing a position in Euclidean spacetime, subject to the **center-of-mass constraint**:\n75: \n76: $$\n77: \\sum_{i=1}^N x_i = 0\n78: \n79: $$\n80: \n81: - **Graph Construction**: $\\mathcal{G}(\\mathbf{x})$ is the **Delaunay triangulation** of the point set $\\{x_1, \\ldots, x_N\\}$ in $\\mathbb{R}^4$, producing a simplicial complex of 4-simplices with edge set $E_N(\\mathbf{x})$",
      "metadata": {
        "label": "def-mdlgt-state-space"
      },
      "section": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)",
      "references": [],
      "raw_directive": "60: ### State Space and Gauge Fixing\n61: \n62: :::{prf:definition} MDLGT State Space with Center-of-Mass Constraint\n63: :label: def-mdlgt-state-space\n64: \n65: The state of the MDLGT system is a pair $\\mathcal{S} = (\\mathbf{x}, \\mathbf{U})$ living in the constrained product space:\n66: \n67: $$\n68: \\Sigma_N = \\left\\{(\\mathbf{x}, \\mathbf{U}) \\in (\\mathbb{R}^4)^N \\times (\\text{SU}(N_c))^{E_N(\\mathbf{x})} : \\sum_{i=1}^N x_i = 0\\right\\}\n69: \n70: $$\n71: \n72: where:\n73: \n74: - **Nodes (Lattice Sites)**: $\\mathbf{x} = (x_1, \\ldots, x_N)$ with each $x_i \\in \\mathbb{R}^4$ representing a position in Euclidean spacetime, subject to the **center-of-mass constraint**:\n75: \n76: $$\n77: \\sum_{i=1}^N x_i = 0\n78: \n79: $$\n80: \n81: - **Graph Construction**: $\\mathcal{G}(\\mathbf{x})$ is the **Delaunay triangulation** of the point set $\\{x_1, \\ldots, x_N\\}$ in $\\mathbb{R}^4$, producing a simplicial complex of 4-simplices with edge set $E_N(\\mathbf{x})$\n82: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_yang_mills_dynamic_lattice",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mdlgt-hamiltonian",
      "title": "MDLGT Hamiltonian",
      "start_line": 162,
      "end_line": 173,
      "header_lines": [
        163
      ],
      "content_start": 165,
      "content_end": 172,
      "content": "165: :label: def-mdlgt-hamiltonian\n166: \n167: The total energy of the system is given by the Hamiltonian:\n168: \n169: $$\n170: H(\\mathbf{x}, \\mathbf{U}) = H_{\\text{nodes}}(\\mathbf{x}) + H_{\\text{gauge}}(\\mathbf{x}, \\mathbf{U})\n171: \n172: $$",
      "metadata": {
        "label": "def-mdlgt-hamiltonian"
      },
      "section": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)",
      "references": [],
      "raw_directive": "162: ### Hamiltonian (Energy Functional)\n163: \n164: :::{prf:definition} MDLGT Hamiltonian\n165: :label: def-mdlgt-hamiltonian\n166: \n167: The total energy of the system is given by the Hamiltonian:\n168: \n169: $$\n170: H(\\mathbf{x}, \\mathbf{U}) = H_{\\text{nodes}}(\\mathbf{x}) + H_{\\text{gauge}}(\\mathbf{x}, \\mathbf{U})\n171: \n172: $$\n173: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_yang_mills_dynamic_lattice",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-node-hamiltonian",
      "title": "Node Hamiltonian (Translation-Invariant)",
      "start_line": 175,
      "end_line": 197,
      "header_lines": [
        176
      ],
      "content_start": 178,
      "content_end": 196,
      "content": "178: :label: def-node-hamiltonian\n179: \n180: The node Hamiltonian is defined in terms of **relative coordinates only**:\n181: \n182: $$\n183: H_{\\text{nodes}}(\\mathbf{x}) = \\sum_{i<j} V_{\\text{pair}}(\\|x_i - x_j\\|)\n184: \n185: $$\n186: \n187: where $V_{\\text{pair}}(r)$ is a pairwise potential with the following properties:\n188: 1. **Repulsion at short range**: $V_{\\text{pair}}(r) \\to +\\infty$ as $r \\to 0$\n189: 2. **Confinement at long range**: $V_{\\text{pair}}(r) \\to +\\infty$ as $r \\to \\infty$\n190: 3. **Bounded gradient on hard-core region**: $\\sup_{r \\geq r_{\\min}} |V_{\\text{pair}}'(r)| < \\infty$ for any $r_{\\min} > 0$\n191: 4. **Unique minimum**: $V_{\\text{pair}}(r)$ has a unique minimum at $r = r_0 > 0$\n192: \n193: :::{note} Relaxed Gradient Requirement\n194: Property 3 has been **relaxed from global boundedness** to boundedness on $[r_{\\min}, \\infty)$ for any $r_{\\min} > 0$. This relaxation is necessary because no $C^1$ function can simultaneously:\n195: - Diverge to $+\\infty$ as $r \\to 0$ (Property 1)\n196: - Have globally bounded derivative",
      "metadata": {
        "label": "def-node-hamiltonian"
      },
      "section": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)",
      "references": [
        "lem-hard-core-exclusion"
      ],
      "raw_directive": "175: :::\n176: \n177: :::{prf:definition} Node Hamiltonian (Translation-Invariant)\n178: :label: def-node-hamiltonian\n179: \n180: The node Hamiltonian is defined in terms of **relative coordinates only**:\n181: \n182: $$\n183: H_{\\text{nodes}}(\\mathbf{x}) = \\sum_{i<j} V_{\\text{pair}}(\\|x_i - x_j\\|)\n184: \n185: $$\n186: \n187: where $V_{\\text{pair}}(r)$ is a pairwise potential with the following properties:\n188: 1. **Repulsion at short range**: $V_{\\text{pair}}(r) \\to +\\infty$ as $r \\to 0$\n189: 2. **Confinement at long range**: $V_{\\text{pair}}(r) \\to +\\infty$ as $r \\to \\infty$\n190: 3. **Bounded gradient on hard-core region**: $\\sup_{r \\geq r_{\\min}} |V_{\\text{pair}}'(r)| < \\infty$ for any $r_{\\min} > 0$\n191: 4. **Unique minimum**: $V_{\\text{pair}}(r)$ has a unique minimum at $r = r_0 > 0$\n192: \n193: :::{note} Relaxed Gradient Requirement\n194: Property 3 has been **relaxed from global boundedness** to boundedness on $[r_{\\min}, \\infty)$ for any $r_{\\min} > 0$. This relaxation is necessary because no $C^1$ function can simultaneously:\n195: - Diverge to $+\\infty$ as $r \\to 0$ (Property 1)\n196: - Have globally bounded derivative\n197: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_yang_mills_dynamic_lattice",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-gauge-hamiltonian",
      "title": "Gauge Hamiltonian",
      "start_line": 245,
      "end_line": 266,
      "header_lines": [
        246
      ],
      "content_start": 248,
      "content_end": 265,
      "content": "248: :label: def-gauge-hamiltonian\n249: \n250: The gauge Hamiltonian is the standard Wilson plaquette action summed over the **2-faces of the Delaunay triangulation**:\n251: \n252: $$\n253: H_{\\text{gauge}}(\\mathbf{x}, \\mathbf{U}) = \\beta_{\\text{gauge}} \\sum_{\\Delta \\in \\text{Plaq}(\\mathbf{x})} \\left(1 - \\frac{1}{N_c}\\text{Re}\\,\\text{Tr}(U_{\\Delta})\\right)\n254: \n255: $$\n256: \n257: where:\n258: - $\\beta_{\\text{gauge}} > 0$ is the inverse coupling constant\n259: - $\\text{Plaq}(\\mathbf{x})$ denotes the set of **oriented 2-simplices** (triangular plaquettes) in the Delaunay triangulation of $\\mathbf{x}$\n260: - For a triangular 2-face $\\Delta = (i, j, k)$ with ordered vertices, the Wilson loop is:\n261: \n262: $$\n263: U_{\\Delta} = U_{ij}U_{jk}U_{ki}\n264: \n265: $$",
      "metadata": {
        "label": "def-gauge-hamiltonian"
      },
      "section": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)",
      "references": [],
      "raw_directive": "245: :::\n246: \n247: :::{prf:definition} Gauge Hamiltonian\n248: :label: def-gauge-hamiltonian\n249: \n250: The gauge Hamiltonian is the standard Wilson plaquette action summed over the **2-faces of the Delaunay triangulation**:\n251: \n252: $$\n253: H_{\\text{gauge}}(\\mathbf{x}, \\mathbf{U}) = \\beta_{\\text{gauge}} \\sum_{\\Delta \\in \\text{Plaq}(\\mathbf{x})} \\left(1 - \\frac{1}{N_c}\\text{Re}\\,\\text{Tr}(U_{\\Delta})\\right)\n254: \n255: $$\n256: \n257: where:\n258: - $\\beta_{\\text{gauge}} > 0$ is the inverse coupling constant\n259: - $\\text{Plaq}(\\mathbf{x})$ denotes the set of **oriented 2-simplices** (triangular plaquettes) in the Delaunay triangulation of $\\mathbf{x}$\n260: - For a triangular 2-face $\\Delta = (i, j, k)$ with ordered vertices, the Wilson loop is:\n261: \n262: $$\n263: U_{\\Delta} = U_{ij}U_{jk}U_{ki}\n264: \n265: $$\n266: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_yang_mills_dynamic_lattice",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mdlgt-dynamics",
      "title": "MDLGT Dynamics with Constraint",
      "start_line": 308,
      "end_line": 343,
      "header_lines": [
        309
      ],
      "content_start": 311,
      "content_end": 342,
      "content": "311: :label: def-mdlgt-dynamics\n312: \n313: The system evolves via a two-step update procedure:\n314: \n315: **Step A (Node Update - Constrained Langevin):**\n316: \n317: For each node $i = 1, \\ldots, N$, the dynamics evolve on the constrained manifold $\\sum_i x_i = 0$ via:\n318: \n319: $$\n320: dx_i = -\\left[\\mathbb{P}_{\\perp}\\nabla_{x_i} H(\\mathbf{x}, \\mathbf{U})\\right]\\, dt + \\sqrt{2T}\\, \\left[\\mathbb{P}_{\\perp} dW\\right]_i\n321: \n322: $$\n323: \n324: where:\n325: - $dW = (dW_1, \\ldots, dW_N)$ with each $dW_i$ an independent 4-dimensional Brownian motion\n326: - $T > 0$ is the temperature\n327: - $\\mathbb{P}_{\\perp}$ is the orthogonal projection onto the tangent space of the constraint manifold, acting component-wise:\n328: \n329: $$\n330: \\left[\\mathbb{P}_{\\perp} v\\right]_i = v_i - \\frac{1}{N}\\sum_{j=1}^N v_j\n331: \n332: $$\n333: \n334: The projection is applied to both the drift and diffusion terms, ensuring $\\sum_i dx_i = 0$ for all times, preserving the constraint.\n335: \n336: **Step B (Link Update - Heat Bath):**\n337: \n338: For fixed node positions $\\mathbf{x}$, each link $U_{ij}$ on the current graph $\\mathcal{G}(\\mathbf{x})$ is resampled from its conditional Boltzmann distribution:\n339: \n340: $$\n341: P(U_{ij} \\mid \\text{all other links}) \\propto \\exp\\left(-\\frac{1}{T} H_{\\text{gauge}}(\\mathbf{x}, \\mathbf{U})\\right)\n342: $$",
      "metadata": {
        "label": "def-mdlgt-dynamics"
      },
      "section": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)",
      "references": [],
      "raw_directive": "308: The MDLGT evolves through alternating updates of nodes and links, defining a coupled stochastic process on $\\Sigma_N$.\n309: \n310: :::{prf:definition} MDLGT Dynamics with Constraint\n311: :label: def-mdlgt-dynamics\n312: \n313: The system evolves via a two-step update procedure:\n314: \n315: **Step A (Node Update - Constrained Langevin):**\n316: \n317: For each node $i = 1, \\ldots, N$, the dynamics evolve on the constrained manifold $\\sum_i x_i = 0$ via:\n318: \n319: $$\n320: dx_i = -\\left[\\mathbb{P}_{\\perp}\\nabla_{x_i} H(\\mathbf{x}, \\mathbf{U})\\right]\\, dt + \\sqrt{2T}\\, \\left[\\mathbb{P}_{\\perp} dW\\right]_i\n321: \n322: $$\n323: \n324: where:\n325: - $dW = (dW_1, \\ldots, dW_N)$ with each $dW_i$ an independent 4-dimensional Brownian motion\n326: - $T > 0$ is the temperature\n327: - $\\mathbb{P}_{\\perp}$ is the orthogonal projection onto the tangent space of the constraint manifold, acting component-wise:\n328: \n329: $$\n330: \\left[\\mathbb{P}_{\\perp} v\\right]_i = v_i - \\frac{1}{N}\\sum_{j=1}^N v_j\n331: \n332: $$\n333: \n334: The projection is applied to both the drift and diffusion terms, ensuring $\\sum_i dx_i = 0$ for all times, preserving the constraint.\n335: \n336: **Step B (Link Update - Heat Bath):**\n337: \n338: For fixed node positions $\\mathbf{x}$, each link $U_{ij}$ on the current graph $\\mathcal{G}(\\mathbf{x})$ is resampled from its conditional Boltzmann distribution:\n339: \n340: $$\n341: P(U_{ij} \\mid \\text{all other links}) \\propto \\exp\\left(-\\frac{1}{T} H_{\\text{gauge}}(\\mathbf{x}, \\mathbf{U})\\right)\n342: $$\n343: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_yang_mills_dynamic_lattice",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mdlgt-generator",
      "title": "MDLGT Generator",
      "start_line": 363,
      "end_line": 381,
      "header_lines": [
        364
      ],
      "content_start": 366,
      "content_end": 380,
      "content": "366: :label: def-mdlgt-generator\n367: \n368: The infinitesimal generator of the full MDLGT process acting on test functions $f: \\Sigma_N \\to \\mathbb{R}$ is:\n369: \n370: $$\n371: \\mathcal{L} f = \\mathcal{L}_{\\text{nodes}} f + \\mathcal{L}_{\\text{links}} f\n372: \n373: $$\n374: \n375: where:\n376: \n377: $$\n378: \\mathcal{L}_{\\text{nodes}} f = -\\sum_i \\mathbb{P}_{\\perp}\\nabla_{x_i} H \\cdot \\nabla_{x_i} f + T\\sum_i \\text{tr}(\\mathbb{P}_{\\perp} \\nabla_{x_i}^2 f)\n379: \n380: $$",
      "metadata": {
        "label": "def-mdlgt-generator"
      },
      "section": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)",
      "references": [],
      "raw_directive": "363: :::\n364: \n365: :::{prf:definition} MDLGT Generator\n366: :label: def-mdlgt-generator\n367: \n368: The infinitesimal generator of the full MDLGT process acting on test functions $f: \\Sigma_N \\to \\mathbb{R}$ is:\n369: \n370: $$\n371: \\mathcal{L} f = \\mathcal{L}_{\\text{nodes}} f + \\mathcal{L}_{\\text{links}} f\n372: \n373: $$\n374: \n375: where:\n376: \n377: $$\n378: \\mathcal{L}_{\\text{nodes}} f = -\\sum_i \\mathbb{P}_{\\perp}\\nabla_{x_i} H \\cdot \\nabla_{x_i} f + T\\sum_i \\text{tr}(\\mathbb{P}_{\\perp} \\nabla_{x_i}^2 f)\n379: \n380: $$\n381: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "01_yang_mills_dynamic_lattice",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## The Minimal Dynamic Lattice Gauge Theory (MDLGT)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-sasaki-standardization-constants",
      "title": "Standardization constants (Sasaki geometry)",
      "start_line": 1285,
      "end_line": 1325,
      "header_lines": [
        1286
      ],
      "content_start": 1288,
      "content_end": 1324,
      "content": "1288: :label: def-sasaki-standardization-constants\n1289: \n1290: Let $\\sigma_{\\min,\\mathrm{patch}}:=\\sqrt{\\kappa_{\\mathrm{var,min}}+\\varepsilon_{\\mathrm{std}}^2}$ be the uniform lower bound on the regularized standard deviation, and let $L_{\\sigma'_{\\mathrm{patch}}}$ be its global Lipschitz constant from Lemma {prf:ref}`lem-sigma-patch-lipschitz`.\n1291: \n1292: ##### Value Error Coefficients\n1293: The following coefficients bound the error in the standardization operator when the swarm structure is fixed but the raw values change due to positional displacement. They are notably independent of the number of alive walkers, `k`.\n1294: \n1295: -   **Direct Shift Coefficient ($C_{V,\\mathrm{direct}}$):** Bounding the error from the direct change in the raw value vector.\n1296: \n1297:     $$\n1298:     C_{V,\\mathrm{direct}} := \\frac{1}{\\sigma_{\\min,\\mathrm{patch}}}\n1299:     $$\n1300: \n1301: -   **Mean Shift Coefficient ($C_{V,\\mathrm{mean}}$):** Bounding the error from the resulting change in the empirical mean.\n1302: \n1303:     $$\n1304:     C_{V,\\mathrm{mean}} := \\frac{1}{\\sigma_{\\min,\\mathrm{patch}}}\n1305:     $$\n1306: \n1307: -   **Denominator Shift Coefficient ($C_{V,\\mathrm{denom}}$):** Bounding the error from the resulting change in the regularized standard deviation.\n1308: \n1309:     $$\n1310:     C_{V,\\mathrm{denom}} := \\frac{8\\big(V_{\\mathrm{max}}^{(R)}\\big)^2 L_{\\sigma'_{\\mathrm{patch}}}}{\\sigma_{\\min,\\mathrm{patch}}^2}\n1311:     $$\n1312: \n1313: -   **Total Value Error Coefficient ($C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}$):** The composite coefficient for the full Lipschitz bound on the value error, which aggregates the component-wise effects.\n1314: \n1315:     $$\n1316:     C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}} := L_R^{\\mathrm{Sasaki}} \\left( C_{V,\\mathrm{direct}} + C_{V,\\mathrm{mean}} + C_{V,\\mathrm{denom}} \\right) = L_R^{\\mathrm{Sasaki}} \\left( \\frac{2}{\\sigma_{\\min,\\mathrm{patch}}} + \\frac{8\\big(V_{\\mathrm{max}}^{(R)}\\big)^2 L_{\\sigma'_{\\mathrm{patch}}}}{\\sigma_{\\min,\\mathrm{patch}}^2} \\right)\n1317:     $$\n1318: \n1319: ##### Structural Error Coefficients\n1320: The structural error coefficients, which are used in the subsequent theorem for structural continuity, remain as defined:\n1321: \n1322: $$\n1323: C_{S,\\mathrm{direct}}^{\\mathrm{Sasaki}}(k_{\\min}):=\\frac{V_{\\mathrm{max}}^{(R)}}{\\sigma_{\\min,\\mathrm{patch}}}+\\frac{2\\big(V_{\\mathrm{max}}^{(R)}\\big)^2}{\\sigma_{\\min,\\mathrm{patch}}^2},\n1324: \\qquad C_{S,\\mathrm{indirect}}^{\\mathrm{Sasaki}}(k_{\\min}):=\\frac{3V_{\\mathrm{max}}^{(R)}}{\\sigma_{\\min,\\mathrm{patch}}k_{\\min}}+\\frac{6\\big(V_{\\mathrm{max}}^{(R)}\\big)^2}{\\sigma_{\\min,\\mathrm{patch}}^2k_{\\min}}L_{\\sigma',M}^{\\mathrm{Sasaki}}(k_{\\min}).",
      "metadata": {
        "label": "def-sasaki-standardization-constants"
      },
      "section": "## 4. Axiom-by-axiom validation (Sasaki formulation)",
      "references": [
        "lem-sigma-patch-lipschitz"
      ],
      "raw_directive": "1285: $$\n1286: \n1287: :::{prf:definition} Standardization constants (Sasaki geometry)\n1288: :label: def-sasaki-standardization-constants\n1289: \n1290: Let $\\sigma_{\\min,\\mathrm{patch}}:=\\sqrt{\\kappa_{\\mathrm{var,min}}+\\varepsilon_{\\mathrm{std}}^2}$ be the uniform lower bound on the regularized standard deviation, and let $L_{\\sigma'_{\\mathrm{patch}}}$ be its global Lipschitz constant from Lemma {prf:ref}`lem-sigma-patch-lipschitz`.\n1291: \n1292: ##### Value Error Coefficients\n1293: The following coefficients bound the error in the standardization operator when the swarm structure is fixed but the raw values change due to positional displacement. They are notably independent of the number of alive walkers, `k`.\n1294: \n1295: -   **Direct Shift Coefficient ($C_{V,\\mathrm{direct}}$):** Bounding the error from the direct change in the raw value vector.\n1296: \n1297:     $$\n1298:     C_{V,\\mathrm{direct}} := \\frac{1}{\\sigma_{\\min,\\mathrm{patch}}}\n1299:     $$\n1300: \n1301: -   **Mean Shift Coefficient ($C_{V,\\mathrm{mean}}$):** Bounding the error from the resulting change in the empirical mean.\n1302: \n1303:     $$\n1304:     C_{V,\\mathrm{mean}} := \\frac{1}{\\sigma_{\\min,\\mathrm{patch}}}\n1305:     $$\n1306: \n1307: -   **Denominator Shift Coefficient ($C_{V,\\mathrm{denom}}$):** Bounding the error from the resulting change in the regularized standard deviation.\n1308: \n1309:     $$\n1310:     C_{V,\\mathrm{denom}} := \\frac{8\\big(V_{\\mathrm{max}}^{(R)}\\big)^2 L_{\\sigma'_{\\mathrm{patch}}}}{\\sigma_{\\min,\\mathrm{patch}}^2}\n1311:     $$\n1312: \n1313: -   **Total Value Error Coefficient ($C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}$):** The composite coefficient for the full Lipschitz bound on the value error, which aggregates the component-wise effects.\n1314: \n1315:     $$\n1316:     C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}} := L_R^{\\mathrm{Sasaki}} \\left( C_{V,\\mathrm{direct}} + C_{V,\\mathrm{mean}} + C_{V,\\mathrm{denom}} \\right) = L_R^{\\mathrm{Sasaki}} \\left( \\frac{2}{\\sigma_{\\min,\\mathrm{patch}}} + \\frac{8\\big(V_{\\mathrm{max}}^{(R)}\\big)^2 L_{\\sigma'_{\\mathrm{patch}}}}{\\sigma_{\\min,\\mathrm{patch}}^2} \\right)\n1317:     $$\n1318: \n1319: ##### Structural Error Coefficients\n1320: The structural error coefficients, which are used in the subsequent theorem for structural continuity, remain as defined:\n1321: \n1322: $$\n1323: C_{S,\\mathrm{direct}}^{\\mathrm{Sasaki}}(k_{\\min}):=\\frac{V_{\\mathrm{max}}^{(R)}}{\\sigma_{\\min,\\mathrm{patch}}}+\\frac{2\\big(V_{\\mathrm{max}}^{(R)}\\big)^2}{\\sigma_{\\min,\\mathrm{patch}}^2},\n1324: \\qquad C_{S,\\mathrm{indirect}}^{\\mathrm{Sasaki}}(k_{\\min}):=\\frac{3V_{\\mathrm{max}}^{(R)}}{\\sigma_{\\min,\\mathrm{patch}}k_{\\min}}+\\frac{6\\big(V_{\\mathrm{max}}^{(R)}\\big)^2}{\\sigma_{\\min,\\mathrm{patch}}^2k_{\\min}}L_{\\sigma',M}^{\\mathrm{Sasaki}}(k_{\\min}).\n1325: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "02_euclidean_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Axiom-by-axiom validation (Sasaki formulation)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-sasaki-standardization-constants-sq",
      "title": "Value Error Coefficients (Squared Form)",
      "start_line": 1646,
      "end_line": 1676,
      "header_lines": [
        1647
      ],
      "content_start": 1649,
      "content_end": 1675,
      "content": "1649: :label: def-sasaki-standardization-constants-sq\n1650: \n1651: Let $\\mathcal S$ be a fixed swarm state with alive set $\\mathcal A$ of size $k \\ge 1$, and let $M$ be the chosen **Swarm Aggregation Operator**. The coefficients for the bounds on the squared value error are defined as follows:\n1652: \n1653: 1.  **The Squared Direct Shift Coefficient ($C_{V,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S)$):**\n1654: \n1655:     $$\n1656:     C_{V,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S) := \\frac{1}{\\sigma_{\\min,\\mathrm{patch}}^2}\n1657:     $$\n1658: \n1659: 2.  **The Squared Mean Shift Coefficient ($C_{V,\\mathrm{mean}}^{\\mathrm{sq}}(\\mathcal S)$):**\n1660: \n1661:     $$\n1662:     C_{V,\\mathrm{mean}}^{\\mathrm{sq}}(\\mathcal S) := \\frac{k \\cdot (L_{\\mu,M}^{\\mathrm{Sasaki}}(k))^2}{\\sigma_{\\min,\\mathrm{patch}}^2}\n1663:     $$\n1664: \n1665: 3.  **The Squared Denominator Shift Coefficient ($C_{V,\\mathrm{denom}}^{\\mathrm{sq}}(\\mathcal S)$):**\n1666: \n1667:     $$\n1668:     C_{V,\\mathrm{denom}}^{\\mathrm{sq}}(\\mathcal S) := k \\left( \\frac{2V_{\\max}^{(R)}}{\\sigma_{\\min,\\mathrm{patch}}} \\right)^2 \\left( \\frac{L_{\\sigma',M}^{\\mathrm{Sasaki}}(k)}{\\sigma_{\\min,\\mathrm{patch}}} \\right)^2\n1669:     $$\n1670: \n1671: 4.  **The Total Value Error Coefficient ($C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S)$):** The composite coefficient that bounds the total squared value error, incorporating the factor of 3 from the error decomposition.\n1672: \n1673:     $$\n1674:     C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S) := 3 \\cdot \\left( C_{V,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S) + C_{V,\\mathrm{mean}}^{\\mathrm{sq}}(\\mathcal S) + C_{V,\\mathrm{denom}}^{\\mathrm{sq}}(\\mathcal S) \\right)\n1675:     $$",
      "metadata": {
        "label": "def-sasaki-standardization-constants-sq"
      },
      "section": "## 4. Axiom-by-axiom validation (Sasaki formulation)",
      "references": [],
      "raw_directive": "1646: ##### 2.3.5. Definition: Value Error Coefficients (Squared Form)\n1647: \n1648: :::{prf:definition} Value Error Coefficients (Squared Form)\n1649: :label: def-sasaki-standardization-constants-sq\n1650: \n1651: Let $\\mathcal S$ be a fixed swarm state with alive set $\\mathcal A$ of size $k \\ge 1$, and let $M$ be the chosen **Swarm Aggregation Operator**. The coefficients for the bounds on the squared value error are defined as follows:\n1652: \n1653: 1.  **The Squared Direct Shift Coefficient ($C_{V,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S)$):**\n1654: \n1655:     $$\n1656:     C_{V,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S) := \\frac{1}{\\sigma_{\\min,\\mathrm{patch}}^2}\n1657:     $$\n1658: \n1659: 2.  **The Squared Mean Shift Coefficient ($C_{V,\\mathrm{mean}}^{\\mathrm{sq}}(\\mathcal S)$):**\n1660: \n1661:     $$\n1662:     C_{V,\\mathrm{mean}}^{\\mathrm{sq}}(\\mathcal S) := \\frac{k \\cdot (L_{\\mu,M}^{\\mathrm{Sasaki}}(k))^2}{\\sigma_{\\min,\\mathrm{patch}}^2}\n1663:     $$\n1664: \n1665: 3.  **The Squared Denominator Shift Coefficient ($C_{V,\\mathrm{denom}}^{\\mathrm{sq}}(\\mathcal S)$):**\n1666: \n1667:     $$\n1668:     C_{V,\\mathrm{denom}}^{\\mathrm{sq}}(\\mathcal S) := k \\left( \\frac{2V_{\\max}^{(R)}}{\\sigma_{\\min,\\mathrm{patch}}} \\right)^2 \\left( \\frac{L_{\\sigma',M}^{\\mathrm{Sasaki}}(k)}{\\sigma_{\\min,\\mathrm{patch}}} \\right)^2\n1669:     $$\n1670: \n1671: 4.  **The Total Value Error Coefficient ($C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S)$):** The composite coefficient that bounds the total squared value error, incorporating the factor of 3 from the error decomposition.\n1672: \n1673:     $$\n1674:     C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S) := 3 \\cdot \\left( C_{V,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S) + C_{V,\\mathrm{mean}}^{\\mathrm{sq}}(\\mathcal S) + C_{V,\\mathrm{denom}}^{\\mathrm{sq}}(\\mathcal S) \\right)\n1675:     $$\n1676: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "02_euclidean_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Axiom-by-axiom validation (Sasaki formulation)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-single-swarm-space",
      "title": "Single-Walker and Swarm State Spaces",
      "start_line": 106,
      "end_line": 127,
      "header_lines": [
        107
      ],
      "content_start": 109,
      "content_end": 126,
      "content": "109: :label: def-single-swarm-space\n110: \n111: 1.  A **walker** is a tuple $(x, s)$, where $x \\in \\mathcal{X}$ is its position in a state space and $s \\in \\{0, 1\\}$ is its survival status. For the Euclidean Gas, this is extended to include a velocity component, making the **full state** of a single walker a tuple $(x, v, s) \\in \\mathbb{R}^d \\times \\mathbb{R}^d \\times \\{0, 1\\}$. We refer to $(x,v)$ as the **kinematic state**.\n112: \n113: 2.  A **swarm configuration**, $S$, is an N-tuple of walker states:\n114: \n115: \n116: \n117: $$\n118: S := \\left( (x_1, v_1, s_1), (x_2, v_2, s_2), \\dots, (x_N, v_N, s_N) \\right)\n119: $$\n120: \n121: 3.  The **single-swarm state space**, denoted $\\Sigma_N$, is the Cartesian product of the per-walker state spaces:\n122: \n123: \n124: \n125: $$\n126: \\Sigma_N := \\left( \\mathbb{R}^d \\times \\mathbb{R}^d \\times \\{0, 1\\} \\right)^N.",
      "metadata": {
        "label": "def-single-swarm-space"
      },
      "section": "## 2. The Coupled State Space and State Differences",
      "references": [],
      "raw_directive": "106: The fundamental unit of the system is the walker, and a collection of these walkers constitutes a swarm. We begin by defining their state spaces abstractly, in a manner consistent with the Fragile Gas framework.\n107: \n108: :::{prf:definition} Single-Walker and Swarm State Spaces\n109: :label: def-single-swarm-space\n110: \n111: 1.  A **walker** is a tuple $(x, s)$, where $x \\in \\mathcal{X}$ is its position in a state space and $s \\in \\{0, 1\\}$ is its survival status. For the Euclidean Gas, this is extended to include a velocity component, making the **full state** of a single walker a tuple $(x, v, s) \\in \\mathbb{R}^d \\times \\mathbb{R}^d \\times \\{0, 1\\}$. We refer to $(x,v)$ as the **kinematic state**.\n112: \n113: 2.  A **swarm configuration**, $S$, is an N-tuple of walker states:\n114: \n115: \n116: \n117: $$\n118: S := \\left( (x_1, v_1, s_1), (x_2, v_2, s_2), \\dots, (x_N, v_N, s_N) \\right)\n119: $$\n120: \n121: 3.  The **single-swarm state space**, denoted $\\Sigma_N$, is the Cartesian product of the per-walker state spaces:\n122: \n123: \n124: \n125: $$\n126: \\Sigma_N := \\left( \\mathbb{R}^d \\times \\mathbb{R}^d \\times \\{0, 1\\} \\right)^N.\n127: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Coupled State Space and State Differences"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-coupled-state-space",
      "title": "The Coupled State Space",
      "start_line": 144,
      "end_line": 158,
      "header_lines": [
        145
      ],
      "content_start": 147,
      "content_end": 157,
      "content": "147: :label: def-coupled-state-space\n148: \n149: The **coupled state space** for the Euclidean Gas is the Cartesian product $\\Sigma_N \\times \\Sigma_N$. An element of this space is an ordered pair of swarm configurations, $(S_1, S_2)$, where:\n150: \n151: $$\n152: S_1 = \\left( (x_{1,1}, v_{1,1}, s_{1,1}), \\dots, (x_{1,N}, v_{1,N}, s_{1,N}) \\right) \\in \\Sigma_N,\n153: $$\n154: \n155: $$\n156: S_2 = \\left( (x_{2,1}, v_{2,1}, s_{2,1}), \\dots, (x_{2,N}, v_{2,N}, s_{2,N}) \\right) \\in \\Sigma_N.\n157: $$",
      "metadata": {
        "label": "def-coupled-state-space"
      },
      "section": "## 2. The Coupled State Space and State Differences",
      "references": [],
      "raw_directive": "144: This synchronous coupling is chosen because it is designed to minimize the distance between the two trajectories, making it the most suitable choice for proving a contraction. All expectations $\\mathbb{E}[\\cdot]$ in the subsequent analysis are taken with respect to this single, shared source of randomness.\n145: \n146: :::{prf:definition} The Coupled State Space\n147: :label: def-coupled-state-space\n148: \n149: The **coupled state space** for the Euclidean Gas is the Cartesian product $\\Sigma_N \\times \\Sigma_N$. An element of this space is an ordered pair of swarm configurations, $(S_1, S_2)$, where:\n150: \n151: $$\n152: S_1 = \\left( (x_{1,1}, v_{1,1}, s_{1,1}), \\dots, (x_{1,N}, v_{1,N}, s_{1,N}) \\right) \\in \\Sigma_N,\n153: $$\n154: \n155: $$\n156: S_2 = \\left( (x_{2,1}, v_{2,1}, s_{2,1}), \\dots, (x_{2,N}, v_{2,N}, s_{2,N}) \\right) \\in \\Sigma_N.\n157: $$\n158: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Coupled State Space and State Differences"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-state-difference-vectors",
      "title": "State Difference Vectors",
      "start_line": 164,
      "end_line": 186,
      "header_lines": [
        165
      ],
      "content_start": 167,
      "content_end": 185,
      "content": "167: :label: def-state-difference-vectors\n168: \n169: For any element $(S_1, S_2) \\in \\Sigma_N \\times \\Sigma_N$, we define the **state difference vectors** for each walker index $i \\in \\{1, \\ldots, N\\}$ as follows:\n170: \n171: 1.  The **position difference vector** for walker $i$ is:\n172: \n173: \n174: \n175: $$\n176: \\Delta x_i := x_{1,i} - x_{2,i} \\in \\mathbb{R}^d\n177: $$\n178: \n179: 2.  The **velocity difference vector** for walker $i$ is:\n180: \n181: \n182: \n183: $$\n184: \\Delta v_i := v_{1,i} - v_{2,i} \\in \\mathbb{R}^d\n185: $$",
      "metadata": {
        "label": "def-state-difference-vectors"
      },
      "section": "## 2. The Coupled State Space and State Differences",
      "references": [],
      "raw_directive": "164: The core of the hypocoercive analysis is not the absolute state of the swarms, but the *difference* between them. We formally define the vectors that capture this relative configuration.\n165: \n166: :::{prf:definition} State Difference Vectors\n167: :label: def-state-difference-vectors\n168: \n169: For any element $(S_1, S_2) \\in \\Sigma_N \\times \\Sigma_N$, we define the **state difference vectors** for each walker index $i \\in \\{1, \\ldots, N\\}$ as follows:\n170: \n171: 1.  The **position difference vector** for walker $i$ is:\n172: \n173: \n174: \n175: $$\n176: \\Delta x_i := x_{1,i} - x_{2,i} \\in \\mathbb{R}^d\n177: $$\n178: \n179: 2.  The **velocity difference vector** for walker $i$ is:\n180: \n181: \n182: \n183: $$\n184: \\Delta v_i := v_{1,i} - v_{2,i} \\in \\mathbb{R}^d\n185: $$\n186: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Coupled State Space and State Differences"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-barycentres-and-centered-vectors",
      "title": "Barycentres and Centered Vectors (Alive Walkers Only)",
      "start_line": 364,
      "end_line": 415,
      "header_lines": [
        365,
        406
      ],
      "content_start": 367,
      "content_end": 414,
      "content": "367: :label: def-barycentres-and-centered-vectors\n368: \n369: For each swarm $k \\in \\{1, 2\\}$ in a coupled state $(S_1, S_2)$, let $\\mathcal{A}(S_k)$ denote the set of alive walker indices and let $k_{\\text{alive}} := |\\mathcal{A}(S_k)|$ denote the number of alive walkers in swarm $k$. We define:\n370: \n371: 1.  The **positional center of mass** (barycentre) **computed over alive walkers only**:\n372: \n373: \n374: \n375: $$\n376: \\mu_{x,k} := \\frac{1}{k_{\\text{alive}}}\\sum_{i \\in \\mathcal{A}(S_k)} x_{k,i}\n377: $$\n378: \n379: 2.  The **velocity center of mass** **computed over alive walkers only**:\n380: \n381: \n382: \n383: $$\n384: \\mu_{v,k} := \\frac{1}{k_{\\text{alive}}}\\sum_{i \\in \\mathcal{A}(S_k)} v_{k,i}\n385: $$\n386: \n387: The **centered vectors** represent the state of each **alive** walker relative to its swarm's center of mass:\n388: \n389: 1.  The **centered position vector** for alive walker $i \\in \\mathcal{A}(S_k)$:\n390: \n391: \n392: \n393: $$\n394: \\delta_{x,k,i} := x_{k,i} - \\mu_{x,k}\n395: $$\n396: \n397: 2.  The **centered velocity vector** for alive walker $i \\in \\mathcal{A}(S_k)$:\n398: \n399: \n400: \n401: $$\n402: \\delta_{v,k,i} := v_{k,i} - \\mu_{v,k}\n403: $$\n404: \n405: **Convention**: Dead walkers ($i \\notin \\mathcal{A}(S_k)$) do not contribute to barycentres, variances, or any statistical quantities. By construction, the centered vectors for alive walkers in any swarm sum to zero: $\\sum_{i \\in \\mathcal{A}(S_k)} \\delta_{x,k,i} = 0$ and $\\sum_{i \\in \\mathcal{A}(S_k)} \\delta_{v,k,i} = 0$.\n406: \n407: :::{admonition} Rationale for Alive-Walker-Only Statistics\n408: :class: important\n409: \n410: Dead walkers retain their last known position $(x_i, v_i)$ but have status $s_i = 0$. Including them in statistical calculations would distort the geometric properties:\n411: \n412: 1. **Physical Interpretation**: Dead walkers represent \"failed\" exploration paths. Their positions are historical artifacts, not part of the current active swarm distribution.\n413: \n414: 2. **Cloning Operator Target**: The cloning operator $\\Psi_{\\text{clone}}$ acts on the fitness and geometric distribution of **alive** walkers. The variance it contracts is specifically the variance of the alive population.",
      "metadata": {
        "label": "def-barycentres-and-centered-vectors",
        "class": "important"
      },
      "section": "## 3. The Augmented Hypocoercive Lyapunov Function",
      "references": [],
      "raw_directive": "364: We begin by formally defining the mathematical objects required for this decomposition.\n365: \n366: :::{prf:definition} Barycentres and Centered Vectors (Alive Walkers Only)\n367: :label: def-barycentres-and-centered-vectors\n368: \n369: For each swarm $k \\in \\{1, 2\\}$ in a coupled state $(S_1, S_2)$, let $\\mathcal{A}(S_k)$ denote the set of alive walker indices and let $k_{\\text{alive}} := |\\mathcal{A}(S_k)|$ denote the number of alive walkers in swarm $k$. We define:\n370: \n371: 1.  The **positional center of mass** (barycentre) **computed over alive walkers only**:\n372: \n373: \n374: \n375: $$\n376: \\mu_{x,k} := \\frac{1}{k_{\\text{alive}}}\\sum_{i \\in \\mathcal{A}(S_k)} x_{k,i}\n377: $$\n378: \n379: 2.  The **velocity center of mass** **computed over alive walkers only**:\n380: \n381: \n382: \n383: $$\n384: \\mu_{v,k} := \\frac{1}{k_{\\text{alive}}}\\sum_{i \\in \\mathcal{A}(S_k)} v_{k,i}\n385: $$\n386: \n387: The **centered vectors** represent the state of each **alive** walker relative to its swarm's center of mass:\n388: \n389: 1.  The **centered position vector** for alive walker $i \\in \\mathcal{A}(S_k)$:\n390: \n391: \n392: \n393: $$\n394: \\delta_{x,k,i} := x_{k,i} - \\mu_{x,k}\n395: $$\n396: \n397: 2.  The **centered velocity vector** for alive walker $i \\in \\mathcal{A}(S_k)$:\n398: \n399: \n400: \n401: $$\n402: \\delta_{v,k,i} := v_{k,i} - \\mu_{v,k}\n403: $$\n404: \n405: **Convention**: Dead walkers ($i \\notin \\mathcal{A}(S_k)$) do not contribute to barycentres, variances, or any statistical quantities. By construction, the centered vectors for alive walkers in any swarm sum to zero: $\\sum_{i \\in \\mathcal{A}(S_k)} \\delta_{x,k,i} = 0$ and $\\sum_{i \\in \\mathcal{A}(S_k)} \\delta_{v,k,i} = 0$.\n406: \n407: :::{admonition} Rationale for Alive-Walker-Only Statistics\n408: :class: important\n409: \n410: Dead walkers retain their last known position $(x_i, v_i)$ but have status $s_i = 0$. Including them in statistical calculations would distort the geometric properties:\n411: \n412: 1. **Physical Interpretation**: Dead walkers represent \"failed\" exploration paths. Their positions are historical artifacts, not part of the current active swarm distribution.\n413: \n414: 2. **Cloning Operator Target**: The cloning operator $\\Psi_{\\text{clone}}$ acts on the fitness and geometric distribution of **alive** walkers. The variance it contracts is specifically the variance of the alive population.\n415: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Augmented Hypocoercive Lyapunov Function"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-location-error-component",
      "title": "The Location Error Component ($V_{\\text{loc}}$)",
      "start_line": 426,
      "end_line": 436,
      "header_lines": [
        427
      ],
      "content_start": 429,
      "content_end": 435,
      "content": "429: :label: def-location-error-component\n430: \n431: For any pair of swarm configurations $(S_1, S_2)$ with barycenters $(\\mu_{x,1}, \\mu_{v,1})$ and $(\\mu_{x,2}, \\mu_{v,2})$, the **location error component** is defined as:\n432: \n433: $$\n434: V_{\\text{loc}} := \\|\\Delta\\mu_x\\|^2 + \\lambda_v\\|\\Delta\\mu_v\\|^2 + b\\langle\\Delta\\mu_x, \\Delta\\mu_v\\rangle\n435: $$",
      "metadata": {
        "label": "def-location-error-component"
      },
      "section": "## 3. The Augmented Hypocoercive Lyapunov Function",
      "references": [],
      "raw_directive": "426: The distance between the swarms' centers of mass is an intrinsically permutation-invariant quantity. We define the location error as the hypocoercive quadratic form applied to the difference between the barycenters of the two swarms.\n427: \n428: :::{prf:definition} The Location Error Component ($V_{\\text{loc}}$)\n429: :label: def-location-error-component\n430: \n431: For any pair of swarm configurations $(S_1, S_2)$ with barycenters $(\\mu_{x,1}, \\mu_{v,1})$ and $(\\mu_{x,2}, \\mu_{v,2})$, the **location error component** is defined as:\n432: \n433: $$\n434: V_{\\text{loc}} := \\|\\Delta\\mu_x\\|^2 + \\lambda_v\\|\\Delta\\mu_v\\|^2 + b\\langle\\Delta\\mu_x, \\Delta\\mu_v\\rangle\n435: $$\n436: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Augmented Hypocoercive Lyapunov Function"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-structural-error-component",
      "title": "The Structural Error Component ($V_{\\text{struct}}$)",
      "start_line": 442,
      "end_line": 460,
      "header_lines": [
        443
      ],
      "content_start": 445,
      "content_end": 459,
      "content": "445: :label: def-structural-error-component\n446: \n447: Let $\\tilde{\\mu}_1$ and $\\tilde{\\mu}_2$ be the centered empirical measures of swarms $S_1$ and $S_2$ **computed over alive walkers only**:\n448: \n449: $$\n450: \\tilde{\\mu}_k := \\frac{1}{k_{\\text{alive}}} \\sum_{i \\in \\mathcal{A}(S_k)} \\delta_{(\\delta_{x,k,i}, \\delta_{v,k,i})}\n451: $$\n452: \n453: where $k_{\\text{alive}} = |\\mathcal{A}(S_k)|$ is the number of alive walkers in swarm $k$, and $\\delta_{x,k,i}, \\delta_{v,k,i}$ are the centered vectors defined in [](#def-barycentres-and-centered-vectors).\n454: \n455: The **structural error component** $V_{\\text{struct}}$ is defined as the squared hypocoercive Wasserstein distance between these centered measures:\n456: \n457: $$\n458: V_{\\text{struct}} := W_h^2(\\tilde{\\mu}_1, \\tilde{\\mu}_2) = \\inf_{\\gamma \\in \\Gamma(\\tilde{\\mu}_1, \\tilde{\\mu}_2)} \\int c(\\delta_{z,1}, \\delta_{z,2}) \\, d\\gamma(\\delta_{z,1}, \\delta_{z,2})\n459: $$",
      "metadata": {
        "label": "def-structural-error-component"
      },
      "section": "## 3. The Augmented Hypocoercive Lyapunov Function",
      "references": [],
      "raw_directive": "442: The structural error measures the mismatch between the \"shapes\" of the two swarms. The shape of a swarm is described by the set of its centered vectors, $\\{\\delta_{z,k,i}\\}$. To compare these shapes in a permutation-invariant way, we find the **optimal matching** between the centered vectors of the two swarms and measure the residual error of that matching. This is equivalent to the hypocoercive Wasserstein distance between the *centered empirical measures*.\n443: \n444: :::{prf:definition} The Structural Error Component ($V_{\\text{struct}}$)\n445: :label: def-structural-error-component\n446: \n447: Let $\\tilde{\\mu}_1$ and $\\tilde{\\mu}_2$ be the centered empirical measures of swarms $S_1$ and $S_2$ **computed over alive walkers only**:\n448: \n449: $$\n450: \\tilde{\\mu}_k := \\frac{1}{k_{\\text{alive}}} \\sum_{i \\in \\mathcal{A}(S_k)} \\delta_{(\\delta_{x,k,i}, \\delta_{v,k,i})}\n451: $$\n452: \n453: where $k_{\\text{alive}} = |\\mathcal{A}(S_k)|$ is the number of alive walkers in swarm $k$, and $\\delta_{x,k,i}, \\delta_{v,k,i}$ are the centered vectors defined in [](#def-barycentres-and-centered-vectors).\n454: \n455: The **structural error component** $V_{\\text{struct}}$ is defined as the squared hypocoercive Wasserstein distance between these centered measures:\n456: \n457: $$\n458: V_{\\text{struct}} := W_h^2(\\tilde{\\mu}_1, \\tilde{\\mu}_2) = \\inf_{\\gamma \\in \\Gamma(\\tilde{\\mu}_1, \\tilde{\\mu}_2)} \\int c(\\delta_{z,1}, \\delta_{z,2}) \\, d\\gamma(\\delta_{z,1}, \\delta_{z,2})\n459: $$\n460: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Augmented Hypocoercive Lyapunov Function"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-full-synergistic-lyapunov-function",
      "title": "The Full Synergistic Hypocoercive Lyapunov Function",
      "start_line": 745,
      "end_line": 848,
      "header_lines": [
        746,
        794
      ],
      "content_start": 748,
      "content_end": 847,
      "content": "748: :label: def-full-synergistic-lyapunov-function\n749: \n750: For any pair of swarm configurations $(S_1, S_2)$ with corresponding empirical measures $(\\mu_1, \\mu_2)$, the **total synergistic Lyapunov function** is defined as:\n751: \n752: $$\n753: V_{\\mathrm{total}}(S_1, S_2) := W_h^2(\\mu_1, \\mu_2) + c_V V_{Var}(S_1, S_2) + c_B W_b(S_1, S_2)\n754: $$\n755: \n756: where the intra-swarm variance term explicitly decomposes into positional and velocity components **summed over alive walkers only, but normalized by the total swarm size $N$**:\n757: \n758: $$\n759: V_{Var}(S_1, S_2) = V_{Var,x}(S_1, S_2) + \\lambda_v V_{Var,v}(S_1, S_2)\n760: $$\n761: \n762: with:\n763: \n764: $$\n765: \\begin{align*}\n766: V_{Var,x}(S_1, S_2) &:= \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\|\\delta_{x,1,i}\\|^2 + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\|\\delta_{x,2,i}\\|^2 \\\\\n767: V_{Var,v}(S_1, S_2) &:= \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\|\\delta_{v,1,i}\\|^2 + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\|\\delta_{v,2,i}\\|^2\n768: \\end{align*}\n769: $$\n770: \n771: where $N$ is the total swarm size, $\\mathcal{A}(S_k)$ is the set of alive walker indices in swarm $k$, and $\\delta_{x,k,i}, \\delta_{v,k,i}$ are the centered vectors defined in [](#def-barycentres-and-centered-vectors).\n772: \n773: The function is a sum of three components:\n774: \n775: 1.  **The Inter-Swarm Error ($W_h^2$):** The squared hypocoercive 2-Wasserstein distance between the swarms' full empirical measures. This term quantifies the total permutation-invariant distance between the two swarms in phase space. As established in [](#lem-wasserstein-decomposition), this component can be exactly decomposed into:\n776:     *   A **Location Component ($V_{\\text{loc}}$)**, measuring the error between the swarm centers of mass.\n777:     *   A **Structural Component ($V_{\\text{struct}}$)**, measuring the mismatch in swarm shapes.\n778: \n779: 2.  **The Intra-Swarm Error ($V_{\\text{Var}}$):** The sum of the internal hypocoercive variances of each swarm. This term quantifies the internal dispersion or \"shape error\" *within* each individual swarm in phase space, measuring their lack of internal convergence in both position and velocity. This component is the primary target of the **synergistic dissipation framework**:\n780:     *   The **cloning operator** ($\\Psi_{\\text{clone}}$, analyzed in this document) provides powerful contraction of the positional variance component $V_{Var,x}$ but causes bounded expansion of the velocity variance component $V_{Var,v}$ through the velocity reset mechanism.\n781:     *   The **kinetic operator** ($\\Psi_{\\text{kin}}$, analyzed in the companion document) provides contraction of the velocity variance component $V_{Var,v}$ through Langevin dissipation but causes bounded expansion of the positional variance component $V_{Var,x}$ through diffusion.\n782:     *   When properly balanced, these two operators achieve **net contraction** of the total $V_{Var}$, enabling the system to converge in both position and velocity simultaneously.\n783: \n784: 3.  **The Boundary Potential ($W_b$):** A term that penalizes **alive** walkers approaching the boundary, constructed from the smooth barrier function $\\varphi_{\\text{barrier}}(x)$ defined in [](#prop-barrier-existence).\n785: \n786: \n787: $$\n788: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n789: $$\n790: \n791:     where $N$ is the total swarm size and $\\mathcal{A}(S_k)$ denotes the set of alive walker indices in swarm $k$. Note that dead walkers do not contribute to the boundary potential.\n792: \n793: The parameters $b$ and $\\lambda_v > 0$ are the **hypocoercive parameters**. The constants $c_V > 0$ and $c_B > 0$ are small, positive **coupling constants** used in the analysis to balance the contributions of the different error components in the final drift inequality.\n794: \n795: :::{admonition} Normalization by $N$ vs. $k_{\\text{alive}}$ in the Lyapunov Function\n796: :class: important\n797: \n798: The Lyapunov function components $V_{\\text{Var}}$ and $W_b$ are normalized by the **total swarm size $N$**, not by the number of alive walkers $k_{\\text{alive}}$. This design choice is critical for mathematical tractability and deserves careful explanation:\n799: \n800: **Why This Choice Differs from Algorithm Internals:**\n801: \n802: The algorithm's internal fitness calculations (z-scores, variance measurements used for cloning decisions) correctly use $k_{\\text{alive}}$-normalization to compute statistics over the current active population. This is the physically and statistically correct choice for **decision-making**, as it accurately characterizes the distribution of alive walkers at each step.\n803: \n804: However, the Lyapunov function serves a different purpose: it is an **analytical tool** designed to prove long-term stability through drift analysis. For this purpose, $N$-normalization is mathematically necessary.\n805: \n806: **The Mathematical Necessity:**\n807: \n808: Consider the one-step change in the variance component:\n809: \n810: $$\n811: \\Delta V_{\\text{Var}} = V_{\\text{Var}}(S_{t+1}) - V_{\\text{Var}}(S_t)\n812: $$\n813: \n814: If $V_{\\text{Var}}$ were normalized by $k_{\\text{alive}}$, the drift calculation would become:\n815: \n816: $$\n817: \\mathbb{E}[\\Delta V_{\\text{Var}}] = \\mathbb{E}\\left[\\frac{1}{k_{t+1}} \\sum_{i} \\|\\delta_{x,i}\\|^2_{t+1} - \\frac{1}{k_t} \\sum_{i} \\|\\delta_{x,i}\\|^2_t\\right]\n818: $$\n819: \n820: This expression involves the **ratio of correlated random variables**: both the sum of squares and the number of alive walkers change stochastically at each step, and these changes are strongly coupled (e.g., if a high-variance walker dies, both the numerator and denominator change). The expectation of such a ratio cannot be simplified, making rigorous drift bounds essentially impossible to derive.\n821: \n822: With $N$-normalization, the constant factor $1/N$ factors out of the expectation:\n823: \n824: $$\n825: \\mathbb{E}[\\Delta V_{\\text{Var}}] = \\frac{1}{N} \\mathbb{E}\\left[\\sum_{i} \\|\\delta_{x,i}\\|^2_{t+1} - \\sum_{i} \\|\\delta_{x,i}\\|^2_t\\right]\n826: $$\n827: \n828: This allows the analysis to focus entirely on $\\mathbb{E}[\\Delta \\text{SumOfSquares}]$, which is the direct effect of the cloning and kinetic operators on the swarm's kinematic state. This is precisely what the Keystone Principle and the hypocoercive analysis are designed to bound.\n829: \n830: **The Mean-Field Interpretation:**\n831: \n832: The $N$-normalized variance can be interpreted as:\n833: \n834: $$\n835: V_{\\text{Var},x}(S_k) = \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2 = \\frac{k_{\\text{alive}}}{N} \\cdot \\text{Var}_{\\text{alive}}(S_k)\n836: $$\n837: \n838: This represents the **mean-field contribution to system disorder per walker slot**. It scales with the fraction of alive walkers, which is exactly the correct behavior: if only a small fraction of walkers remain alive, the system's total disorder (as measured by the Lyapunov function) should reflect this reduced active mass.\n839: \n840: **The Viability Requirement:**\n841: \n842: This normalization implicitly assumes that the swarm remains viable, meaning $k_{\\text{alive}}/N$ is bounded away from zero. This is guaranteed by the framework's design:\n843: - The Safe Harbor Axiom ensures existence of a desirable region away from boundaries\n844: - The contractive properties of the cloning operator (Keystone Principle) and the confining potential prevent swarm collapse\n845: - The Lyapunov analysis operates in the regime where the swarm is stable, with extinction probability exponentially small\n846: \n847: **Conclusion:**",
      "metadata": {
        "label": "def-full-synergistic-lyapunov-function",
        "class": "important"
      },
      "section": "## 3. The Augmented Hypocoercive Lyapunov Function",
      "references": [],
      "raw_directive": "745: With the permutation-invariant decomposition of the inter-swarm error established, we now define the full Lyapunov function. This **synergistic** function is constructed as a weighted sum of three distinct error components. It is designed to capture not only the distance *between* the swarms, but also the internal disorder *within* each swarm, which is the primary target of the cloning operator.\n746: \n747: :::{prf:definition} The Full Synergistic Hypocoercive Lyapunov Function\n748: :label: def-full-synergistic-lyapunov-function\n749: \n750: For any pair of swarm configurations $(S_1, S_2)$ with corresponding empirical measures $(\\mu_1, \\mu_2)$, the **total synergistic Lyapunov function** is defined as:\n751: \n752: $$\n753: V_{\\mathrm{total}}(S_1, S_2) := W_h^2(\\mu_1, \\mu_2) + c_V V_{Var}(S_1, S_2) + c_B W_b(S_1, S_2)\n754: $$\n755: \n756: where the intra-swarm variance term explicitly decomposes into positional and velocity components **summed over alive walkers only, but normalized by the total swarm size $N$**:\n757: \n758: $$\n759: V_{Var}(S_1, S_2) = V_{Var,x}(S_1, S_2) + \\lambda_v V_{Var,v}(S_1, S_2)\n760: $$\n761: \n762: with:\n763: \n764: $$\n765: \\begin{align*}\n766: V_{Var,x}(S_1, S_2) &:= \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\|\\delta_{x,1,i}\\|^2 + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\|\\delta_{x,2,i}\\|^2 \\\\\n767: V_{Var,v}(S_1, S_2) &:= \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\|\\delta_{v,1,i}\\|^2 + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\|\\delta_{v,2,i}\\|^2\n768: \\end{align*}\n769: $$\n770: \n771: where $N$ is the total swarm size, $\\mathcal{A}(S_k)$ is the set of alive walker indices in swarm $k$, and $\\delta_{x,k,i}, \\delta_{v,k,i}$ are the centered vectors defined in [](#def-barycentres-and-centered-vectors).\n772: \n773: The function is a sum of three components:\n774: \n775: 1.  **The Inter-Swarm Error ($W_h^2$):** The squared hypocoercive 2-Wasserstein distance between the swarms' full empirical measures. This term quantifies the total permutation-invariant distance between the two swarms in phase space. As established in [](#lem-wasserstein-decomposition), this component can be exactly decomposed into:\n776:     *   A **Location Component ($V_{\\text{loc}}$)**, measuring the error between the swarm centers of mass.\n777:     *   A **Structural Component ($V_{\\text{struct}}$)**, measuring the mismatch in swarm shapes.\n778: \n779: 2.  **The Intra-Swarm Error ($V_{\\text{Var}}$):** The sum of the internal hypocoercive variances of each swarm. This term quantifies the internal dispersion or \"shape error\" *within* each individual swarm in phase space, measuring their lack of internal convergence in both position and velocity. This component is the primary target of the **synergistic dissipation framework**:\n780:     *   The **cloning operator** ($\\Psi_{\\text{clone}}$, analyzed in this document) provides powerful contraction of the positional variance component $V_{Var,x}$ but causes bounded expansion of the velocity variance component $V_{Var,v}$ through the velocity reset mechanism.\n781:     *   The **kinetic operator** ($\\Psi_{\\text{kin}}$, analyzed in the companion document) provides contraction of the velocity variance component $V_{Var,v}$ through Langevin dissipation but causes bounded expansion of the positional variance component $V_{Var,x}$ through diffusion.\n782:     *   When properly balanced, these two operators achieve **net contraction** of the total $V_{Var}$, enabling the system to converge in both position and velocity simultaneously.\n783: \n784: 3.  **The Boundary Potential ($W_b$):** A term that penalizes **alive** walkers approaching the boundary, constructed from the smooth barrier function $\\varphi_{\\text{barrier}}(x)$ defined in [](#prop-barrier-existence).\n785: \n786: \n787: $$\n788: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n789: $$\n790: \n791:     where $N$ is the total swarm size and $\\mathcal{A}(S_k)$ denotes the set of alive walker indices in swarm $k$. Note that dead walkers do not contribute to the boundary potential.\n792: \n793: The parameters $b$ and $\\lambda_v > 0$ are the **hypocoercive parameters**. The constants $c_V > 0$ and $c_B > 0$ are small, positive **coupling constants** used in the analysis to balance the contributions of the different error components in the final drift inequality.\n794: \n795: :::{admonition} Normalization by $N$ vs. $k_{\\text{alive}}$ in the Lyapunov Function\n796: :class: important\n797: \n798: The Lyapunov function components $V_{\\text{Var}}$ and $W_b$ are normalized by the **total swarm size $N$**, not by the number of alive walkers $k_{\\text{alive}}$. This design choice is critical for mathematical tractability and deserves careful explanation:\n799: \n800: **Why This Choice Differs from Algorithm Internals:**\n801: \n802: The algorithm's internal fitness calculations (z-scores, variance measurements used for cloning decisions) correctly use $k_{\\text{alive}}$-normalization to compute statistics over the current active population. This is the physically and statistically correct choice for **decision-making**, as it accurately characterizes the distribution of alive walkers at each step.\n803: \n804: However, the Lyapunov function serves a different purpose: it is an **analytical tool** designed to prove long-term stability through drift analysis. For this purpose, $N$-normalization is mathematically necessary.\n805: \n806: **The Mathematical Necessity:**\n807: \n808: Consider the one-step change in the variance component:\n809: \n810: $$\n811: \\Delta V_{\\text{Var}} = V_{\\text{Var}}(S_{t+1}) - V_{\\text{Var}}(S_t)\n812: $$\n813: \n814: If $V_{\\text{Var}}$ were normalized by $k_{\\text{alive}}$, the drift calculation would become:\n815: \n816: $$\n817: \\mathbb{E}[\\Delta V_{\\text{Var}}] = \\mathbb{E}\\left[\\frac{1}{k_{t+1}} \\sum_{i} \\|\\delta_{x,i}\\|^2_{t+1} - \\frac{1}{k_t} \\sum_{i} \\|\\delta_{x,i}\\|^2_t\\right]\n818: $$\n819: \n820: This expression involves the **ratio of correlated random variables**: both the sum of squares and the number of alive walkers change stochastically at each step, and these changes are strongly coupled (e.g., if a high-variance walker dies, both the numerator and denominator change). The expectation of such a ratio cannot be simplified, making rigorous drift bounds essentially impossible to derive.\n821: \n822: With $N$-normalization, the constant factor $1/N$ factors out of the expectation:\n823: \n824: $$\n825: \\mathbb{E}[\\Delta V_{\\text{Var}}] = \\frac{1}{N} \\mathbb{E}\\left[\\sum_{i} \\|\\delta_{x,i}\\|^2_{t+1} - \\sum_{i} \\|\\delta_{x,i}\\|^2_t\\right]\n826: $$\n827: \n828: This allows the analysis to focus entirely on $\\mathbb{E}[\\Delta \\text{SumOfSquares}]$, which is the direct effect of the cloning and kinetic operators on the swarm's kinematic state. This is precisely what the Keystone Principle and the hypocoercive analysis are designed to bound.\n829: \n830: **The Mean-Field Interpretation:**\n831: \n832: The $N$-normalized variance can be interpreted as:\n833: \n834: $$\n835: V_{\\text{Var},x}(S_k) = \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2 = \\frac{k_{\\text{alive}}}{N} \\cdot \\text{Var}_{\\text{alive}}(S_k)\n836: $$\n837: \n838: This represents the **mean-field contribution to system disorder per walker slot**. It scales with the fraction of alive walkers, which is exactly the correct behavior: if only a small fraction of walkers remain alive, the system's total disorder (as measured by the Lyapunov function) should reflect this reduced active mass.\n839: \n840: **The Viability Requirement:**\n841: \n842: This normalization implicitly assumes that the swarm remains viable, meaning $k_{\\text{alive}}/N$ is bounded away from zero. This is guaranteed by the framework's design:\n843: - The Safe Harbor Axiom ensures existence of a desirable region away from boundaries\n844: - The contractive properties of the cloning operator (Keystone Principle) and the confining potential prevent swarm collapse\n845: - The Lyapunov analysis operates in the regime where the swarm is stable, with extinction probability exponentially small\n846: \n847: **Conclusion:**\n848: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Augmented Hypocoercive Lyapunov Function"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-variance-conversions",
      "title": "Variance Notation Conversion Formulas",
      "start_line": 855,
      "end_line": 898,
      "header_lines": [
        856
      ],
      "content_start": 858,
      "content_end": 897,
      "content": "858: :label: def-variance-conversions\n859: \n860: For a swarm $k$ with $k_{\\text{alive}} = |\\mathcal{A}(S_k)|$ alive walkers out of $N$ total walker slots:\n861: \n862: **1. Un-normalized Sum of Squared Deviations:**\n863: \n864: $$\n865: S_k := \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2\n866: $$\n867: \n868: This is the total positional variance without any normalization.\n869: \n870: **2. Physical Internal Variance ($k$-normalized):**\n871: \n872: $$\n873: \\text{Var}_k(x) := \\frac{1}{k_{\\text{alive}}} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2 = \\frac{S_k}{k_{\\text{alive}}}\n874: $$\n875: \n876: This is the average squared deviation per alive walker - the standard statistical variance.\n877: \n878: **3. Lyapunov Variance Component ($N$-normalized):**\n879: \n880: $$\n881: V_{\\text{Var},x}(S_k) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2 = \\frac{S_k}{N}\n882: $$\n883: \n884: This is the mean-field contribution to system disorder per walker slot.\n885: \n886: **Conversion Formulas:**\n887: \n888: $$\n889: \\begin{aligned}\n890: S_k &= k_{\\text{alive}} \\cdot \\text{Var}_k(x) = N \\cdot V_{\\text{Var},x}(S_k) \\\\\n891: V_{\\text{Var},x}(S_k) &= \\frac{k_{\\text{alive}}}{N} \\cdot \\text{Var}_k(x) \\\\\n892: \\text{Var}_k(x) &= \\frac{N}{k_{\\text{alive}}} \\cdot V_{\\text{Var},x}(S_k)\n893: \\end{aligned}\n894: $$\n895: \n896: **When converting between notations in proofs:**\n897: - From $S_k$ to $V_{\\text{Var},x}$: **divide by $N$**",
      "metadata": {
        "label": "def-variance-conversions"
      },
      "section": "## 3. The Augmented Hypocoercive Lyapunov Function",
      "references": [],
      "raw_directive": "855: To ensure clarity throughout the proofs, we explicitly state the relationships between the three variance concepts used in this document:\n856: \n857: :::{prf:definition} Variance Notation Conversion Formulas\n858: :label: def-variance-conversions\n859: \n860: For a swarm $k$ with $k_{\\text{alive}} = |\\mathcal{A}(S_k)|$ alive walkers out of $N$ total walker slots:\n861: \n862: **1. Un-normalized Sum of Squared Deviations:**\n863: \n864: $$\n865: S_k := \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2\n866: $$\n867: \n868: This is the total positional variance without any normalization.\n869: \n870: **2. Physical Internal Variance ($k$-normalized):**\n871: \n872: $$\n873: \\text{Var}_k(x) := \\frac{1}{k_{\\text{alive}}} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2 = \\frac{S_k}{k_{\\text{alive}}}\n874: $$\n875: \n876: This is the average squared deviation per alive walker - the standard statistical variance.\n877: \n878: **3. Lyapunov Variance Component ($N$-normalized):**\n879: \n880: $$\n881: V_{\\text{Var},x}(S_k) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2 = \\frac{S_k}{N}\n882: $$\n883: \n884: This is the mean-field contribution to system disorder per walker slot.\n885: \n886: **Conversion Formulas:**\n887: \n888: $$\n889: \\begin{aligned}\n890: S_k &= k_{\\text{alive}} \\cdot \\text{Var}_k(x) = N \\cdot V_{\\text{Var},x}(S_k) \\\\\n891: V_{\\text{Var},x}(S_k) &= \\frac{k_{\\text{alive}}}{N} \\cdot \\text{Var}_k(x) \\\\\n892: \\text{Var}_k(x) &= \\frac{N}{k_{\\text{alive}}} \\cdot V_{\\text{Var},x}(S_k)\n893: \\end{aligned}\n894: $$\n895: \n896: **When converting between notations in proofs:**\n897: - From $S_k$ to $V_{\\text{Var},x}$: **divide by $N$**\n898: - From $\\text{Var}_k(x)$ to $V_{\\text{Var},x}$: **multiply by $\\frac{k_{\\text{alive}}}{N}$**",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Augmented Hypocoercive Lyapunov Function"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-algorithmic-distance-metric",
      "title": "Algorithmic Distance for Companion Selection",
      "start_line": 1349,
      "end_line": 1359,
      "header_lines": [
        1350
      ],
      "content_start": 1352,
      "content_end": 1358,
      "content": "1352: :label: def-algorithmic-distance-metric\n1353: \n1354: For any two walkers $i$ and $j$ with states $(x_i, v_i)$ and $(x_j, v_j)$, the **algorithmic distance** between them is defined as:\n1355: \n1356: $$\n1357: d_{\\text{alg}}(i, j)^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2\n1358: $$",
      "metadata": {
        "label": "def-algorithmic-distance-metric"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1349: Before defining the measurement operators, we must first establish the fundamental metric that quantifies proximity between walkers. This metric is central to all intra-swarm measurements in the algorithm, including companion selection for diversity measurement and companion selection for cloning.\n1350: \n1351: :::{prf:definition} Algorithmic Distance for Companion Selection\n1352: :label: def-algorithmic-distance-metric\n1353: \n1354: For any two walkers $i$ and $j$ with states $(x_i, v_i)$ and $(x_j, v_j)$, the **algorithmic distance** between them is defined as:\n1355: \n1356: $$\n1357: d_{\\text{alg}}(i, j)^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2\n1358: $$\n1359: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-spatial-pairing-operator-diversity",
      "title": "Spatially-Aware Pairing Operator (Idealized Model)",
      "start_line": 1391,
      "end_line": 1422,
      "header_lines": [
        1392
      ],
      "content_start": 1394,
      "content_end": 1421,
      "content": "1394: :label: def-spatial-pairing-operator-diversity\n1395: \n1396: Let $\\mathcal{S}_t$ be the current swarm state with alive set $\\mathcal{A}_t$ of size $k = |\\mathcal{A}_t|$. The idealized **Spatially-Aware Pairing Operator**, denoted $\\mathbb{P}_{\\text{pair}}$, maps the alive set $\\mathcal{A}_t$ to a probability distribution over the set of all possible perfect matchings, $\\mathcal{M}_k$.\n1397: \n1398: **Inputs:**\n1399: *   The alive set of walkers, $\\mathcal{A}_t = \\{w_1, w_2, \\dots, w_k\\}$.\n1400: *   $\\varepsilon_d > 0$ (The Interaction Range for Diversity).\n1401: \n1402: **Operation:**\n1403: 1.  For every pair of distinct walkers $(w_i, w_j)$, an edge weight is assigned based on their phase-space proximity:\n1404: \n1405: \n1406: $$\n1407: w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\epsilon_d^2}\\right)\n1408: $$\n1409: \n1410: 2.  The \"quality\" of a specific perfect matching `M` is the product of the weights of the edges it contains:\n1411: \n1412: \n1413: $$\n1414: W(M) := \\prod_{(i,j) \\in M} w_{ij}\n1415: $$\n1416: \n1417: 3.  The probability of selecting a specific matching `M` is given by its quality normalized by the sum of qualities over all possible matchings (the partition function):\n1418: \n1419: \n1420: $$\n1421: P(M) = \\frac{W(M)}{\\sum_{M' \\in \\mathcal{M}_k} W(M')}",
      "metadata": {
        "label": "def-spatial-pairing-operator-diversity"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1391: For the purposes of theoretical analysis, it is useful to model the pairing as a single, collective draw from a probability distribution over all possible perfect matchings of the alive set. This idealized model captures the physical intent of the operator—to strongly favor pairings between walkers that are close in the algorithmic space.\n1392: \n1393: :::{prf:definition} Spatially-Aware Pairing Operator (Idealized Model)\n1394: :label: def-spatial-pairing-operator-diversity\n1395: \n1396: Let $\\mathcal{S}_t$ be the current swarm state with alive set $\\mathcal{A}_t$ of size $k = |\\mathcal{A}_t|$. The idealized **Spatially-Aware Pairing Operator**, denoted $\\mathbb{P}_{\\text{pair}}$, maps the alive set $\\mathcal{A}_t$ to a probability distribution over the set of all possible perfect matchings, $\\mathcal{M}_k$.\n1397: \n1398: **Inputs:**\n1399: *   The alive set of walkers, $\\mathcal{A}_t = \\{w_1, w_2, \\dots, w_k\\}$.\n1400: *   $\\varepsilon_d > 0$ (The Interaction Range for Diversity).\n1401: \n1402: **Operation:**\n1403: 1.  For every pair of distinct walkers $(w_i, w_j)$, an edge weight is assigned based on their phase-space proximity:\n1404: \n1405: \n1406: $$\n1407: w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\epsilon_d^2}\\right)\n1408: $$\n1409: \n1410: 2.  The \"quality\" of a specific perfect matching `M` is the product of the weights of the edges it contains:\n1411: \n1412: \n1413: $$\n1414: W(M) := \\prod_{(i,j) \\in M} w_{ij}\n1415: $$\n1416: \n1417: 3.  The probability of selecting a specific matching `M` is given by its quality normalized by the sum of qualities over all possible matchings (the partition function):\n1418: \n1419: \n1420: $$\n1421: P(M) = \\frac{W(M)}{\\sum_{M' \\in \\mathcal{M}_k} W(M')}\n1422: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-greedy-pairing-algorithm",
      "title": "Sequential Stochastic Greedy Pairing Operator",
      "start_line": 1430,
      "end_line": 1457,
      "header_lines": [
        1431
      ],
      "content_start": 1433,
      "content_end": 1456,
      "content": "1433: :label: def-greedy-pairing-algorithm\n1434: \n1435: Let `A_t` be the set of `k` alive walkers at time `t`. The pairing operator generates a **Companion Map**, `c: A_t → A_t`, which is a perfect matching if `k` is even, or a maximal matching if `k` is odd.\n1436: \n1437: **Inputs:**\n1438: *   The set of alive walkers, `A_t = {w_1, w_2, ..., w_k}`.\n1439: *   $\\varepsilon_d > 0$ (The Interaction Range for Diversity).\n1440: \n1441: **Operation:**\n1442: 1.  Initialize a set of unpaired walkers `U ← A_t` and an empty companion map `c`.\n1443: 2.  While `|U| > 1`:\n1444:     a. Select and remove an arbitrary walker `i` from `U`.\n1445:     b. For each remaining walker $j \\in U$, calculate the selection weight based on phase-space proximity:\n1446: \n1447: \n1448: $$\n1449: w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\epsilon_d^2}\\right)\n1450: $$\n1451: \n1452:     c. Form a probability distribution over $j \\in U$ where $P(\\text{choose } j) = w_{ij} / (\\sum_{l \\in U} w_{il})$.\n1453:     d. Sample a companion `c_i` for `i` from this distribution.\n1454:     e. Remove `c_i` from `U`.\n1455:     f. Set the pairing in the companion map: `c(i) ← c_i` and `c(c_i) ← i`.\n1456: 3.  Return the completed companion map `c`.",
      "metadata": {
        "label": "def-greedy-pairing-algorithm"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1430: This algorithm builds the matching iteratively. It selects an unpaired walker, computes a probability distribution over all other currently unpaired walkers based on proximity, samples a companion, and removes the new pair from the pool. This reduces the computational complexity from factorial to quadratic, making it practical for large swarms.\n1431: \n1432: :::{prf:definition} Sequential Stochastic Greedy Pairing Operator\n1433: :label: def-greedy-pairing-algorithm\n1434: \n1435: Let `A_t` be the set of `k` alive walkers at time `t`. The pairing operator generates a **Companion Map**, `c: A_t → A_t`, which is a perfect matching if `k` is even, or a maximal matching if `k` is odd.\n1436: \n1437: **Inputs:**\n1438: *   The set of alive walkers, `A_t = {w_1, w_2, ..., w_k}`.\n1439: *   $\\varepsilon_d > 0$ (The Interaction Range for Diversity).\n1440: \n1441: **Operation:**\n1442: 1.  Initialize a set of unpaired walkers `U ← A_t` and an empty companion map `c`.\n1443: 2.  While `|U| > 1`:\n1444:     a. Select and remove an arbitrary walker `i` from `U`.\n1445:     b. For each remaining walker $j \\in U$, calculate the selection weight based on phase-space proximity:\n1446: \n1447: \n1448: $$\n1449: w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\epsilon_d^2}\\right)\n1450: $$\n1451: \n1452:     c. Form a probability distribution over $j \\in U$ where $P(\\text{choose } j) = w_{ij} / (\\sum_{l \\in U} w_{il})$.\n1453:     d. Sample a companion `c_i` for `i` from this distribution.\n1454:     e. Remove `c_i` from `U`.\n1455:     f. Set the pairing in the companion map: `c(i) ← c_i` and `c(c_i) ← i`.\n1456: 3.  Return the completed companion map `c`.\n1457: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-geometric-partition",
      "title": "Geometric Partitioning of High-Variance Swarms",
      "start_line": 1516,
      "end_line": 1524,
      "header_lines": [
        1517
      ],
      "content_start": 1519,
      "content_end": 1523,
      "content": "1519: :label: def-geometric-partition\n1520: \n1521: For a given interaction range $\\varepsilon$, we define a swarm's phase-space structure based on local and global properties. As will be proven in **{prf:ref}`cor-vvarx-to-high-error-fraction`**, any swarm with sufficiently high variance (`Var(x) > R^{2}_var`) can be partitioned into two non-empty, N-uniform sets:\n1522: 1.  A **high-error set** `H_k`, whose members are **kinematically isolated** in phase space. This implies the existence of a distance $D_H(\\varepsilon) > 0$ such that for any $i \\in H_k$, all other walkers `j` are at an algorithmic distance $d_alg(i, j) > D_H(\\varepsilon)$.\n1523: 2.  A **low-error set** `L_k`, whose members are part of dense clusters in phase space. For any $j \\in L_k$, there is a non-empty subset of other walkers `C_j ⊂ L_k` of size $|C_j| \\geq f_c k$ (for some N-uniform `f_c > 0`) located within an algorithmic radius $R_L(\\varepsilon) < D_H(\\varepsilon)$.",
      "metadata": {
        "label": "def-geometric-partition"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [
        "cor-vvarx-to-high-error-fraction"
      ],
      "raw_directive": "1516: First, we must formalize the geometric partitioning of the swarm that is guaranteed to exist in a high-variance state, a result that will be proven in full detail in Chapter 6.\n1517: \n1518: :::{prf:definition} Geometric Partitioning of High-Variance Swarms\n1519: :label: def-geometric-partition\n1520: \n1521: For a given interaction range $\\varepsilon$, we define a swarm's phase-space structure based on local and global properties. As will be proven in **{prf:ref}`cor-vvarx-to-high-error-fraction`**, any swarm with sufficiently high variance (`Var(x) > R^{2}_var`) can be partitioned into two non-empty, N-uniform sets:\n1522: 1.  A **high-error set** `H_k`, whose members are **kinematically isolated** in phase space. This implies the existence of a distance $D_H(\\varepsilon) > 0$ such that for any $i \\in H_k$, all other walkers `j` are at an algorithmic distance $d_alg(i, j) > D_H(\\varepsilon)$.\n1523: 2.  A **low-error set** `L_k`, whose members are part of dense clusters in phase space. For any $j \\in L_k$, there is a non-empty subset of other walkers `C_j ⊂ L_k` of size $|C_j| \\geq f_c k$ (for some N-uniform `f_c > 0`) located within an algorithmic radius $R_L(\\varepsilon) < D_H(\\varepsilon)$.\n1524: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-raw-value-operators",
      "title": "Raw Value Operators",
      "start_line": 1741,
      "end_line": 1761,
      "header_lines": [
        1742
      ],
      "content_start": 1744,
      "content_end": 1760,
      "content": "1744: :label: def-raw-value-operators\n1745: \n1746: 1.  **The Reward Measurement Operator ($V_R$):** The raw reward for each alive walker `i` is its direct, individual measurement of the reward function, which explicitly includes both positional and velocity components:\n1747: \n1748: \n1749: $$\n1750: r_i := R(x_i, v_i) = R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2\n1751: $$\n1752: \n1753:     where $R_{\\text{pos}}(x_i)$ is the positional reward and $c_{v\\_reg} > 0$ is the velocity regularization coefficient from Axiom EG-4.\n1754: \n1755: 2.  **The Paired Distance Measurement Operator ($V_D$):** Given the Companion Map `c(i)` generated by the pairing operator, the raw distance for each alive walker `i` is deterministically defined as the algorithmic distance to its assigned companion:\n1756: \n1757: \n1758: $$\n1759: d_i := d_{\\text{alg}}(i, c(i))\n1760: $$",
      "metadata": {
        "label": "def-raw-value-operators"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1741: Once the Companion Map `c(i)` is fixed for the timestep by the pairing operator, the measurement of raw values for each walker becomes a deterministic process.\n1742: \n1743: :::{prf:definition} Raw Value Operators\n1744: :label: def-raw-value-operators\n1745: \n1746: 1.  **The Reward Measurement Operator ($V_R$):** The raw reward for each alive walker `i` is its direct, individual measurement of the reward function, which explicitly includes both positional and velocity components:\n1747: \n1748: \n1749: $$\n1750: r_i := R(x_i, v_i) = R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2\n1751: $$\n1752: \n1753:     where $R_{\\text{pos}}(x_i)$ is the positional reward and $c_{v\\_reg} > 0$ is the velocity regularization coefficient from Axiom EG-4.\n1754: \n1755: 2.  **The Paired Distance Measurement Operator ($V_D$):** Given the Companion Map `c(i)` generated by the pairing operator, the raw distance for each alive walker `i` is deterministically defined as the algorithmic distance to its assigned companion:\n1756: \n1757: \n1758: $$\n1759: d_i := d_{\\text{alg}}(i, c(i))\n1760: $$\n1761: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-swarm-aggregation-operator",
      "title": "Swarm Aggregation Operator",
      "start_line": 1779,
      "end_line": 1783,
      "header_lines": [
        1780
      ],
      "content_start": 1782,
      "content_end": 1782,
      "content": "1782: :label: def-swarm-aggregation-operator",
      "metadata": {
        "label": "def-swarm-aggregation-operator"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1779: This stage distills the raw reward and distance vectors from the `k` alive walkers into the summary statistics (mean and standard deviation) required for standardization.\n1780: \n1781: :::{prf:definition} Swarm Aggregation Operator\n1782: :label: def-swarm-aggregation-operator\n1783: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-patched-std-dev-function",
      "title": "Patched Standard Deviation Function",
      "start_line": 1792,
      "end_line": 1807,
      "header_lines": [
        1793
      ],
      "content_start": 1795,
      "content_end": 1806,
      "content": "1795: :label: def-patched-std-dev-function\n1796: \n1797: The **Patched Standard Deviation Function**, $\\sigma'_{\\text{patch}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$, is a $C^1$ smooth replacement for the standard square-root function, designed to be globally Lipschitz and bounded away from zero. It is defined piecewise in terms of the raw variance, $V := \\operatorname{Var}[\\mu_{\\mathbf{v}}]$:\n1798: \n1799: $$\n1800: \\sigma'_{\\text{patch}}(V) :=\n1801: \\begin{cases}\n1802: \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\mathrm{std}}^2}, & V \\le \\kappa_{\\text{var,min}} \\\\\n1803: P(V), & \\kappa_{\\text{var,min}} < V < 2\\kappa_{\\text{var,min}} \\\\\n1804: \\sqrt{V + \\varepsilon_{\\mathrm{std}}^2}, & V \\ge 2\\kappa_{\\text{var,min}}\n1805: \\end{cases}\n1806: $$",
      "metadata": {
        "label": "def-patched-std-dev-function"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1792: A critical component of this stage is the use of a robust, smooth function to compute the standard deviation, which is essential for the stability of the entire pipeline.\n1793: \n1794: :::{prf:definition} Patched Standard Deviation Function\n1795: :label: def-patched-std-dev-function\n1796: \n1797: The **Patched Standard Deviation Function**, $\\sigma'_{\\text{patch}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$, is a $C^1$ smooth replacement for the standard square-root function, designed to be globally Lipschitz and bounded away from zero. It is defined piecewise in terms of the raw variance, $V := \\operatorname{Var}[\\mu_{\\mathbf{v}}]$:\n1798: \n1799: $$\n1800: \\sigma'_{\\text{patch}}(V) :=\n1801: \\begin{cases}\n1802: \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\mathrm{std}}^2}, & V \\le \\kappa_{\\text{var,min}} \\\\\n1803: P(V), & \\kappa_{\\text{var,min}} < V < 2\\kappa_{\\text{var,min}} \\\\\n1804: \\sqrt{V + \\varepsilon_{\\mathrm{std}}^2}, & V \\ge 2\\kappa_{\\text{var,min}}\n1805: \\end{cases}\n1806: $$\n1807: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-standardization-operator",
      "title": "N-Dimensional Standardization Operator",
      "start_line": 1818,
      "end_line": 1828,
      "header_lines": [
        1819
      ],
      "content_start": 1821,
      "content_end": 1827,
      "content": "1821: :label: def-standardization-operator\n1822: \n1823: The **N-Dimensional Standardization Operator**, $z$, maps a swarm state `S`, a raw value vector `v`, and an aggregation operator `M` to an N-dimensional vector of Z-scores.\n1824: \n1825: **Operation:**\n1826: 1.  Aggregate the alive components `v_A` to get a measure $\\mu_v = M(S, v_A)$.\n1827: 2.  Compute the mean $\\mu_A = \\mathbb{E}[\\mu_v]$ and the **patched** standard deviation $\\sigma'_A = \\sigma'_{\\text{patch}}(\\text{Var}[\\mu_v])$.",
      "metadata": {
        "label": "def-standardization-operator"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1818: This operator uses the robust statistics from the previous stage to convert the raw value vectors into standardized Z-scores.\n1819: \n1820: :::{prf:definition} N-Dimensional Standardization Operator\n1821: :label: def-standardization-operator\n1822: \n1823: The **N-Dimensional Standardization Operator**, $z$, maps a swarm state `S`, a raw value vector `v`, and an aggregation operator `M` to an N-dimensional vector of Z-scores.\n1824: \n1825: **Operation:**\n1826: 1.  Aggregate the alive components `v_A` to get a measure $\\mu_v = M(S, v_A)$.\n1827: 2.  Compute the mean $\\mu_A = \\mathbb{E}[\\mu_v]$ and the **patched** standard deviation $\\sigma'_A = \\sigma'_{\\text{patch}}(\\text{Var}[\\mu_v])$.\n1828: 3.  For each alive walker `i`, compute its Z-score: $z_i = (v_i - \\mu_A) / \\sigma'_A$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-logistic-rescale",
      "title": "Canonical Logistic Rescale Function",
      "start_line": 1844,
      "end_line": 1853,
      "header_lines": [
        1845
      ],
      "content_start": 1847,
      "content_end": 1852,
      "content": "1847: :label: def-logistic-rescale\n1848: \n1849: The **Canonical Logistic Rescale Function**, $g_A: \\mathbb{R} \\to (0, 2)$, is defined as:\n1850: \n1851: $$\n1852: g_A(z) := \\frac{2}{1 + e^{-z}}",
      "metadata": {
        "label": "def-logistic-rescale"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1844: :::\n1845: \n1846: :::{prf:definition} Canonical Logistic Rescale Function\n1847: :label: def-logistic-rescale\n1848: \n1849: The **Canonical Logistic Rescale Function**, $g_A: \\mathbb{R} \\to (0, 2)$, is defined as:\n1850: \n1851: $$\n1852: g_A(z) := \\frac{2}{1 + e^{-z}}\n1853: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-fitness-potential-operator",
      "title": "Fitness Potential Operator",
      "start_line": 1864,
      "end_line": 1884,
      "header_lines": [
        1865
      ],
      "content_start": 1867,
      "content_end": 1883,
      "content": "1867: :label: def-fitness-potential-operator\n1868: \n1869: The **Fitness Potential Operator**, $\\Phi_{\\text{pipeline}}$, maps a swarm state `S` and its raw measurement vectors `r` and `d` to the final N-dimensional fitness potential vector $\\mathbf{V}_{\\text{fit}}$.\n1870: \n1871: **Operation:**\n1872: 1.  Compute reward Z-scores: $\\mathbf{z}_r = z(S, \\mathbf{r}, R_{agg})$.\n1873: 2.  Compute distance Z-scores: $\\mathbf{z}_d = z(S, \\mathbf{d}, M_D)$.\n1874: 3.  For each alive walker `i`, compute the rescaled components with the floor $\\eta$:\n1875:     *   $r'_i := g_A(z_{r,i}) + \\eta$\n1876:     *   $d'_i := g_A(z_{d,i}) + \\eta$\n1877: 4.  Combine the components using the dynamics weights $\\alpha$ and $\\beta$:\n1878: \n1879: \n1880: \n1881: $$\n1882: V_i := (d'_i)^\\beta \\cdot (r'_i)^\\alpha\n1883: $$",
      "metadata": {
        "label": "def-fitness-potential-operator"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1864: The final stage of the pipeline assembles the rescaled components from both the reward and diversity channels into the final fitness potential vector.\n1865: \n1866: :::{prf:definition} Fitness Potential Operator\n1867: :label: def-fitness-potential-operator\n1868: \n1869: The **Fitness Potential Operator**, $\\Phi_{\\text{pipeline}}$, maps a swarm state `S` and its raw measurement vectors `r` and `d` to the final N-dimensional fitness potential vector $\\mathbf{V}_{\\text{fit}}$.\n1870: \n1871: **Operation:**\n1872: 1.  Compute reward Z-scores: $\\mathbf{z}_r = z(S, \\mathbf{r}, R_{agg})$.\n1873: 2.  Compute distance Z-scores: $\\mathbf{z}_d = z(S, \\mathbf{d}, M_D)$.\n1874: 3.  For each alive walker `i`, compute the rescaled components with the floor $\\eta$:\n1875:     *   $r'_i := g_A(z_{r,i}) + \\eta$\n1876:     *   $d'_i := g_A(z_{d,i}) + \\eta$\n1877: 4.  Combine the components using the dynamics weights $\\alpha$ and $\\beta$:\n1878: \n1879: \n1880: \n1881: $$\n1882: V_i := (d'_i)^\\beta \\cdot (r'_i)^\\alpha\n1883: $$\n1884: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-companion-operator",
      "title": "Companion Selection Operator for Cloning",
      "start_line": 1934,
      "end_line": 1962,
      "header_lines": [
        1935
      ],
      "content_start": 1937,
      "content_end": 1961,
      "content": "1937: :label: def-cloning-companion-operator\n1938: \n1939: The first step of the cloning action is to select a companion. The **Companion Selection Operator for Cloning** defines, for each walker `i`, a probability measure $\\mathcal{C}_i(S)$ from which a companion `c_i` is sampled independently. This is a hybrid operator that uses the best available information for each type of walker.\n1940: \n1941: **Inputs:**\n1942: *   The swarm state `S`, which defines the set of alive walkers, $\\mathcal{A}_k$, and the set of dead walkers, $\\mathcal{D}_k$.\n1943: *   The interaction range for cloning, $\\varepsilon_c > 0$.\n1944: \n1945: **Operation:**\n1946: The definition of the measure $\\mathcal{C}_i(S)$ depends on the status of walker `i`:\n1947: \n1948: 1.  **If `i` is an ALIVE walker ($i \\in \\mathcal{A}_k$):**\n1949:     The selection is phase-space-aware and restricted to other alive walkers. For any other alive walker $j \\in \\mathcal{A}_k \\setminus \\{i\\}$, the probability of selection is given by a softmax distribution based on algorithmic distance:\n1950: \n1951: \n1952: $$\n1953: P(c_i=j \\mid i \\in \\mathcal{A}_k) := \\frac{\\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\epsilon_c^2}\\right)}{\\sum_{l \\in \\mathcal{A}_k \\setminus \\{i\\}} \\exp\\left(-\\frac{d_{\\text{alg}}(i, l)^2}{2\\epsilon_c^2}\\right)}\n1954: $$\n1955: \n1956: 2.  **If `i` is a DEAD walker ($i \\in \\mathcal{D}_k$):**\n1957:     The selection is a uniform random choice from the entire set of `k` alive walkers. For any alive walker $j \\in \\mathcal{A}_k$:\n1958: \n1959: \n1960: $$\n1961: P(c_i=j \\mid i \\in \\mathcal{D}_k) := \\frac{1}{k}",
      "metadata": {
        "label": "def-cloning-companion-operator"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1934: \n1935: #### 5.7.1 Companion Selection Operator for Cloning\n1936: :::{prf:definition} Companion Selection Operator for Cloning\n1937: :label: def-cloning-companion-operator\n1938: \n1939: The first step of the cloning action is to select a companion. The **Companion Selection Operator for Cloning** defines, for each walker `i`, a probability measure $\\mathcal{C}_i(S)$ from which a companion `c_i` is sampled independently. This is a hybrid operator that uses the best available information for each type of walker.\n1940: \n1941: **Inputs:**\n1942: *   The swarm state `S`, which defines the set of alive walkers, $\\mathcal{A}_k$, and the set of dead walkers, $\\mathcal{D}_k$.\n1943: *   The interaction range for cloning, $\\varepsilon_c > 0$.\n1944: \n1945: **Operation:**\n1946: The definition of the measure $\\mathcal{C}_i(S)$ depends on the status of walker `i`:\n1947: \n1948: 1.  **If `i` is an ALIVE walker ($i \\in \\mathcal{A}_k$):**\n1949:     The selection is phase-space-aware and restricted to other alive walkers. For any other alive walker $j \\in \\mathcal{A}_k \\setminus \\{i\\}$, the probability of selection is given by a softmax distribution based on algorithmic distance:\n1950: \n1951: \n1952: $$\n1953: P(c_i=j \\mid i \\in \\mathcal{A}_k) := \\frac{\\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\epsilon_c^2}\\right)}{\\sum_{l \\in \\mathcal{A}_k \\setminus \\{i\\}} \\exp\\left(-\\frac{d_{\\text{alg}}(i, l)^2}{2\\epsilon_c^2}\\right)}\n1954: $$\n1955: \n1956: 2.  **If `i` is a DEAD walker ($i \\in \\mathcal{D}_k$):**\n1957:     The selection is a uniform random choice from the entire set of `k` alive walkers. For any alive walker $j \\in \\mathcal{A}_k$:\n1958: \n1959: \n1960: $$\n1961: P(c_i=j \\mid i \\in \\mathcal{D}_k) := \\frac{1}{k}\n1962: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-score",
      "title": "The Canonical Cloning Score",
      "start_line": 1965,
      "end_line": 1975,
      "header_lines": [
        1966
      ],
      "content_start": 1968,
      "content_end": 1974,
      "content": "1968: :label: def-cloning-score\n1969: \n1970: Once a companion `c_i` has been selected for walker `i`, the **Canonical Cloning Score**, $S_i(c_i)$, is calculated as:\n1971: \n1972: $$\n1973: S_i(c_i) := \\frac{V_{\\text{fit},{c_i}} - V_{\\text{fit},i}}{V_{\\text{fit},i} + \\varepsilon_{\\mathrm{clone}}}\n1974: $$",
      "metadata": {
        "label": "def-cloning-score"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1965: \n1966: #### 5.7.2 Cloning Score\n1967: :::{prf:definition} The Canonical Cloning Score\n1968: :label: def-cloning-score\n1969: \n1970: Once a companion `c_i` has been selected for walker `i`, the **Canonical Cloning Score**, $S_i(c_i)$, is calculated as:\n1971: \n1972: $$\n1973: S_i(c_i) := \\frac{V_{\\text{fit},{c_i}} - V_{\\text{fit},i}}{V_{\\text{fit},i} + \\varepsilon_{\\mathrm{clone}}}\n1974: $$\n1975: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-probability",
      "title": "Total Cloning Probability",
      "start_line": 1977,
      "end_line": 1993,
      "header_lines": [
        1978
      ],
      "content_start": 1980,
      "content_end": 1992,
      "content": "1980: :label: def-cloning-probability\n1981: \n1982: The **total cloning probability**, $p_i$, for a walker `i` is its unconditional probability of being marked for cloning. This is the expectation of the cloning event taken over the random draws of both the companion `c_i` and the threshold `T_i`.\n1983: \n1984: $$\n1985: p_i := \\mathbb{E}_{c_i \\sim \\mathcal{C}_i(S)} \\left[ \\mathbb{P}_{T_i \\sim U(0,p_{\\max})} \\left( S_i(c_i) > T_i \\right) \\right]\n1986: $$\n1987: \n1988: The inner probability, for a fixed companion, evaluates to $\\min(1, \\max(0, S_i(c_i)/p_{\\max}))$. This gives the final expression for the total cloning probability as an expectation over the choice of companion:\n1989: \n1990: $$\n1991: p_i = \\mathbb{E}_{c_i \\sim \\mathcal{C}_i(S)}\\left[\\min\\left(1, \\max\\left(0, \\frac{S_i(c_i)}{p_{\\max}}\\right)\\right)\\right]\n1992: $$",
      "metadata": {
        "label": "def-cloning-probability"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "1977: :::\n1978: \n1979: :::{prf:definition} Total Cloning Probability\n1980: :label: def-cloning-probability\n1981: \n1982: The **total cloning probability**, $p_i$, for a walker `i` is its unconditional probability of being marked for cloning. This is the expectation of the cloning event taken over the random draws of both the companion `c_i` and the threshold `T_i`.\n1983: \n1984: $$\n1985: p_i := \\mathbb{E}_{c_i \\sim \\mathcal{C}_i(S)} \\left[ \\mathbb{P}_{T_i \\sim U(0,p_{\\max})} \\left( S_i(c_i) > T_i \\right) \\right]\n1986: $$\n1987: \n1988: The inner probability, for a fixed companion, evaluates to $\\min(1, \\max(0, S_i(c_i)/p_{\\max}))$. This gives the final expression for the total cloning probability as an expectation over the choice of companion:\n1989: \n1990: $$\n1991: p_i = \\mathbb{E}_{c_i \\sim \\mathcal{C}_i(S)}\\left[\\min\\left(1, \\max\\left(0, \\frac{S_i(c_i)}{p_{\\max}}\\right)\\right)\\right]\n1992: $$\n1993: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-decision",
      "title": "The Stochastic Cloning Decision",
      "start_line": 2005,
      "end_line": 2009,
      "header_lines": [
        2006
      ],
      "content_start": 2008,
      "content_end": 2008,
      "content": "2008: :label: def-cloning-decision",
      "metadata": {
        "label": "def-cloning-decision"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "2005: #### 5.7.3  Cloning Decision\n2006: \n2007: :::{prf:definition} The Stochastic Cloning Decision\n2008: :label: def-cloning-decision\n2009: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-inelastic-collision-update",
      "title": "The Inelastic Collision State Update",
      "start_line": 2017,
      "end_line": 2078,
      "header_lines": [
        2018
      ],
      "content_start": 2020,
      "content_end": 2077,
      "content": "2020: :label: def-inelastic-collision-update\n2021: \n2022: Let the set of all walkers marked for cloning be `C_set`. For each cloner $i \\in C_set$, let `c_i` be its selected companion. The intermediate swarm state `S'` is constructed as follows.\n2023: \n2024: First, for each unique companion `c` in the swarm, we identify the set of all cloners that selected it:\n2025: \n2026: $$\n2027: I_c := \\{j \\in C_{set} \\mid c_j = c\\}\n2028: $$\n2029: \n2030: Let `M = |I_c|` be the number of walkers cloning from companion `c`. The update is then defined for each `(M+1)`-particle system consisting of the companion `c` and its set of cloners `I_c`.\n2031: \n2032: 1.  **Position Updates:**\n2033:     *   For each cloner $j \\in I_c$, its position is reset to that of its companion `c`, plus independent Gaussian jitter:\n2034: \n2035: \n2036: $$\n2037: x'_j := x_c + \\sigma_x \\zeta_j^x\n2038: $$\n2039: \n2040:     *   The position of the companion `c` is unchanged by this interaction: `x'_c := x_c`.\n2041: \n2042: 2.  **Velocity Updates (The Inelastic Collapse):**\n2043:     The velocities of all `M+1` interacting walkers are updated simultaneously in a process that conserves the group's total momentum.\n2044: \n2045:     *   **a. Center-of-Mass Velocity:** First, compute the center-of-mass velocity of the `(M+1)`-particle interacting system. This quantity is conserved throughout the collision.\n2046: \n2047: \n2048: $$\n2049: V_{COM, c} := \\frac{1}{M+1} \\left( v_c + \\sum_{j \\in I_c} v_j \\right)\n2050: $$\n2051: \n2052:     *   **b. Update Relative Velocities:** For each walker `k` in the system ($k \\in I_c \\cup {c}$), its velocity relative to the CoM is `u_k = v_k - V_{COM,c}`. The new relative velocities `u'_k` are defined by a random rotation and a frictional contraction.\n2053:         Let $\\alpha_restitution \\in [0, 1]$ be a fixed algorithmic parameter representing the coefficient of restitution. For each `k`, let `R_k` be a random orthogonal transformation that isotropically rotates `u_k` (i.e., `R_k(u_k)` has the same magnitude as `u_k` but a uniformly random direction on the `(d-1)`-sphere). The new relative velocity is:\n2054: \n2055: \n2056: $$\n2057: u'_k := \\alpha_{\\text{restitution}} \\cdot R_k(u_k)\n2058: $$\n2059: \n2060:     *   **c. Return to Lab Frame:** The final velocities for all interacting walkers are then reconstructed:\n2061: \n2062: \n2063: $$\n2064: v'_k := V_{COM, c} + u'_k\n2065: $$\n2066: \n2067: 3.  **Uninvolved Walkers:** Any walker `k` that is not a cloner and was not selected as a companion by any cloner has its state `(x_k, v_k)` unchanged.\n2068: \n2069: **Analysis of the Restitution Parameter $\\alpha_restitution$:**\n2070: \n2071: This model introduces $\\alpha_restitution$ as a crucial hyperparameter that controls the velocity variance expansion caused by the velocity reset mechanism during cloning.\n2072: \n2073: *   If **$\\alpha_restitution = 1$**, the collision is **perfectly elastic**. The magnitudes of the relative velocities are preserved (`||u'_k|| = ||u_k||`), and the total kinetic energy of the interacting system is conserved. In this regime, cloning redistributes kinetic energy among walkers but does not directly dissipate it. However, the velocity reset mechanism still causes bounded expansion of $V_{\\text{Var},v}$ as walkers' velocities are reset based on their companions.\n2074: \n2075: *   If **$\\alpha_restitution = 0$**, the collision is **perfectly inelastic**. All new relative velocities are zero (`u'_k = 0`), meaning all `M+1` walkers emerge with the identical center-of-mass velocity, `v'_k = V_{COM,c}`. This corresponds to the **maximum possible dissipation** of the group's internal kinetic energy while still conserving total momentum. In this regime, the velocity variance expansion is minimized, as all walkers in a cloning group collapse to a single velocity.\n2076: \n2077: *   If **$\\alpha_restitution \\in (0, 1)$**, the cloning event has **intermediate dissipation**. The internal kinetic energy of the interacting group is reduced by a factor of $\\alpha_restitution^{2}$. This parameter provides a tunable mechanism for controlling the trade-off between maintaining kinetic diversity and bounding velocity variance expansion.",
      "metadata": {
        "label": "def-inelastic-collision-update"
      },
      "section": "## 5. The Measurement and Interaction Pipeline",
      "references": [],
      "raw_directive": "2017: This model handles the complex but common scenario where multiple \"cloners\" (either unfit alive walkers or dead walkers being revived) select the same high-fitness walker as their companion. Instead of a series of pairwise interactions, all cloners associated with a single companion are treated as a single interacting system that undergoes a simultaneous, momentum-conserving \"inelastic collapse.\" This process includes a tunable parameter for energy dissipation, allowing the cloning operator itself to act as a powerful mechanism for controlling the swarm's kinetic energy.\n2018: \n2019: :::{prf:definition} The Inelastic Collision State Update\n2020: :label: def-inelastic-collision-update\n2021: \n2022: Let the set of all walkers marked for cloning be `C_set`. For each cloner $i \\in C_set$, let `c_i` be its selected companion. The intermediate swarm state `S'` is constructed as follows.\n2023: \n2024: First, for each unique companion `c` in the swarm, we identify the set of all cloners that selected it:\n2025: \n2026: $$\n2027: I_c := \\{j \\in C_{set} \\mid c_j = c\\}\n2028: $$\n2029: \n2030: Let `M = |I_c|` be the number of walkers cloning from companion `c`. The update is then defined for each `(M+1)`-particle system consisting of the companion `c` and its set of cloners `I_c`.\n2031: \n2032: 1.  **Position Updates:**\n2033:     *   For each cloner $j \\in I_c$, its position is reset to that of its companion `c`, plus independent Gaussian jitter:\n2034: \n2035: \n2036: $$\n2037: x'_j := x_c + \\sigma_x \\zeta_j^x\n2038: $$\n2039: \n2040:     *   The position of the companion `c` is unchanged by this interaction: `x'_c := x_c`.\n2041: \n2042: 2.  **Velocity Updates (The Inelastic Collapse):**\n2043:     The velocities of all `M+1` interacting walkers are updated simultaneously in a process that conserves the group's total momentum.\n2044: \n2045:     *   **a. Center-of-Mass Velocity:** First, compute the center-of-mass velocity of the `(M+1)`-particle interacting system. This quantity is conserved throughout the collision.\n2046: \n2047: \n2048: $$\n2049: V_{COM, c} := \\frac{1}{M+1} \\left( v_c + \\sum_{j \\in I_c} v_j \\right)\n2050: $$\n2051: \n2052:     *   **b. Update Relative Velocities:** For each walker `k` in the system ($k \\in I_c \\cup {c}$), its velocity relative to the CoM is `u_k = v_k - V_{COM,c}`. The new relative velocities `u'_k` are defined by a random rotation and a frictional contraction.\n2053:         Let $\\alpha_restitution \\in [0, 1]$ be a fixed algorithmic parameter representing the coefficient of restitution. For each `k`, let `R_k` be a random orthogonal transformation that isotropically rotates `u_k` (i.e., `R_k(u_k)` has the same magnitude as `u_k` but a uniformly random direction on the `(d-1)`-sphere). The new relative velocity is:\n2054: \n2055: \n2056: $$\n2057: u'_k := \\alpha_{\\text{restitution}} \\cdot R_k(u_k)\n2058: $$\n2059: \n2060:     *   **c. Return to Lab Frame:** The final velocities for all interacting walkers are then reconstructed:\n2061: \n2062: \n2063: $$\n2064: v'_k := V_{COM, c} + u'_k\n2065: $$\n2066: \n2067: 3.  **Uninvolved Walkers:** Any walker `k` that is not a cloner and was not selected as a companion by any cloner has its state `(x_k, v_k)` unchanged.\n2068: \n2069: **Analysis of the Restitution Parameter $\\alpha_restitution$:**\n2070: \n2071: This model introduces $\\alpha_restitution$ as a crucial hyperparameter that controls the velocity variance expansion caused by the velocity reset mechanism during cloning.\n2072: \n2073: *   If **$\\alpha_restitution = 1$**, the collision is **perfectly elastic**. The magnitudes of the relative velocities are preserved (`||u'_k|| = ||u_k||`), and the total kinetic energy of the interacting system is conserved. In this regime, cloning redistributes kinetic energy among walkers but does not directly dissipate it. However, the velocity reset mechanism still causes bounded expansion of $V_{\\text{Var},v}$ as walkers' velocities are reset based on their companions.\n2074: \n2075: *   If **$\\alpha_restitution = 0$**, the collision is **perfectly inelastic**. All new relative velocities are zero (`u'_k = 0`), meaning all `M+1` walkers emerge with the identical center-of-mass velocity, `v'_k = V_{COM,c}`. This corresponds to the **maximum possible dissipation** of the group's internal kinetic energy while still conserving total momentum. In this regime, the velocity variance expansion is minimized, as all walkers in a cloning group collapse to a single velocity.\n2076: \n2077: *   If **$\\alpha_restitution \\in (0, 1)$**, the cloning event has **intermediate dissipation**. The internal kinetic energy of the interacting group is reduced by a factor of $\\alpha_restitution^{2}$. This parameter provides a tunable mechanism for controlling the trade-off between maintaining kinetic diversity and bounding velocity variance expansion.\n2078: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. The Measurement and Interaction Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-unified-high-low-error-sets",
      "title": "The Unified High-Error and Low-Error Sets",
      "start_line": 2371,
      "end_line": 2414,
      "header_lines": [
        2372
      ],
      "content_start": 2374,
      "content_end": 2413,
      "content": "2374: :label: def-unified-high-low-error-sets\n2375: \n2376: For a given swarm `k` with alive set $\\mathcal{A}_k$ ($k \\ge 2$), we define a partition into a unified high-error set $H_k(\\epsilon)$ and a unified low-error set $L_k(\\epsilon)$ using a **clustering-based approach** that applies uniformly across all interaction regimes. This unified approach captures both global outlier structure and local phase-space clustering through a single consistent mechanism.\n2377: \n2378: **Phase-Space Clustering Construction:**\n2379: \n2380: The construction proceeds in four steps:\n2381: \n2382: 1.  **Clustering:** Partition the alive set $\\mathcal{A}_k$ into disjoint clusters $\\{G_1, \\ldots, G_M\\}$ using complete-linkage hierarchical clustering with a maximum cluster diameter $D_{\\text{diam}}(\\epsilon) := c_d \\cdot \\epsilon$ (where $c_d > 0$ is a fixed constant, typically $c_d = 2$). Each cluster $G_m$ satisfies:\n2383: \n2384: $$\n2385: \\text{diam}(G_m) := \\max_{i,j \\in G_m} d_{\\text{alg}}(i, j) \\le D_{\\text{diam}}(\\epsilon)\n2386: $$\n2387: \n2388: where $d_{\\text{alg}}(i, j)^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2$ is the algorithmic phase-space distance.\n2389: \n2390: 2.  **Statistical Validity Constraint:** To ensure that cluster-level statistics are meaningful, we impose a minimum cluster size requirement. Let $k_{\\min} := \\max(5, \\lceil 0.05k \\rceil)$ be the minimum statistically valid cluster size. All clusters with $|G_m| < k_{\\min}$ are marked as **invalid** and their walkers are automatically included in the high-error set (as they represent statistically unreliable outlier configurations).\n2391: \n2392: 3.  **Outlier Cluster Identification:** For each valid cluster $G_m$ (with $|G_m| \\ge k_{\\min}$), compute its center of mass in phase space: $(\\mu_{x,m}, \\mu_{v,m})$. Compute the between-cluster hypocoercive variance contribution:\n2393: \n2394: $$\n2395: \\text{Contrib}(G_m) := |G_m| \\left(\\|\\mu_{x,m} - \\mu_x\\|^2 + \\lambda_v \\|\\mu_{v,m} - \\mu_v\\|^2\\right)\n2396: $$\n2397: \n2398: where $(\\mu_x, \\mu_v)$ is the global center of mass. Sort valid clusters by $\\text{Contrib}(G_m)$ in descending order, and let $O_M \\subseteq \\{1, \\ldots, M\\}$ be the smallest set of cluster indices (among valid clusters) whose cumulative contribution meets or exceeds a fraction $(1-\\varepsilon_O)$ of the total contribution from valid clusters (where $\\varepsilon_O \\in (0, 1)$ is a fixed structural parameter, typically $\\varepsilon_O = 0.1$):\n2399: \n2400: $$\n2401: \\sum_{m \\in O_M} \\text{Contrib}(G_m) \\ge (1-\\varepsilon_O) \\sum_{\\substack{m=1 \\\\ |G_m| \\ge k_{\\min}}}^M \\text{Contrib}(G_m)\n2402: $$\n2403: \n2404: 4.  **Unified High-Error Set Construction:** The unified high-error set is the union of all walkers in outlier clusters plus all walkers in invalid clusters:\n2405: \n2406: $$\n2407: H_k(\\epsilon) := \\left(\\bigcup_{m \\in O_M} G_m\\right) \\cup \\left(\\bigcup_{\\substack{m: |G_m| < k_{\\min}}} G_m\\right)\n2408: $$\n2409: \n2410: The **Unified Low-Error Set** is the complement:\n2411: \n2412: $$\n2413: L_k(\\epsilon) := \\mathcal{A}_k \\setminus H_k(\\epsilon)",
      "metadata": {
        "label": "def-unified-high-low-error-sets"
      },
      "section": "## 6. The Geometry of Error: From System Error to a Guaranteed Geometric Structure",
      "references": [],
      "raw_directive": "2371: Therefore, this section formally defines these sets based on the swarm's full **phase-space configuration**. We will partition the swarm based on two distinct phase-space measures: global kinematic dispersion and local phase-space density. These definitions create the crucial link between the state of the swarm and the signals measured by the algorithm. The remainder of the Keystone analysis will then be dedicated to proving that high *positional* variance is a sufficient condition to force a non-trivial number of walkers into these *phase-space* defined error sets.\n2372: \n2373: :::{prf:definition} The Unified High-Error and Low-Error Sets\n2374: :label: def-unified-high-low-error-sets\n2375: \n2376: For a given swarm `k` with alive set $\\mathcal{A}_k$ ($k \\ge 2$), we define a partition into a unified high-error set $H_k(\\epsilon)$ and a unified low-error set $L_k(\\epsilon)$ using a **clustering-based approach** that applies uniformly across all interaction regimes. This unified approach captures both global outlier structure and local phase-space clustering through a single consistent mechanism.\n2377: \n2378: **Phase-Space Clustering Construction:**\n2379: \n2380: The construction proceeds in four steps:\n2381: \n2382: 1.  **Clustering:** Partition the alive set $\\mathcal{A}_k$ into disjoint clusters $\\{G_1, \\ldots, G_M\\}$ using complete-linkage hierarchical clustering with a maximum cluster diameter $D_{\\text{diam}}(\\epsilon) := c_d \\cdot \\epsilon$ (where $c_d > 0$ is a fixed constant, typically $c_d = 2$). Each cluster $G_m$ satisfies:\n2383: \n2384: $$\n2385: \\text{diam}(G_m) := \\max_{i,j \\in G_m} d_{\\text{alg}}(i, j) \\le D_{\\text{diam}}(\\epsilon)\n2386: $$\n2387: \n2388: where $d_{\\text{alg}}(i, j)^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2$ is the algorithmic phase-space distance.\n2389: \n2390: 2.  **Statistical Validity Constraint:** To ensure that cluster-level statistics are meaningful, we impose a minimum cluster size requirement. Let $k_{\\min} := \\max(5, \\lceil 0.05k \\rceil)$ be the minimum statistically valid cluster size. All clusters with $|G_m| < k_{\\min}$ are marked as **invalid** and their walkers are automatically included in the high-error set (as they represent statistically unreliable outlier configurations).\n2391: \n2392: 3.  **Outlier Cluster Identification:** For each valid cluster $G_m$ (with $|G_m| \\ge k_{\\min}$), compute its center of mass in phase space: $(\\mu_{x,m}, \\mu_{v,m})$. Compute the between-cluster hypocoercive variance contribution:\n2393: \n2394: $$\n2395: \\text{Contrib}(G_m) := |G_m| \\left(\\|\\mu_{x,m} - \\mu_x\\|^2 + \\lambda_v \\|\\mu_{v,m} - \\mu_v\\|^2\\right)\n2396: $$\n2397: \n2398: where $(\\mu_x, \\mu_v)$ is the global center of mass. Sort valid clusters by $\\text{Contrib}(G_m)$ in descending order, and let $O_M \\subseteq \\{1, \\ldots, M\\}$ be the smallest set of cluster indices (among valid clusters) whose cumulative contribution meets or exceeds a fraction $(1-\\varepsilon_O)$ of the total contribution from valid clusters (where $\\varepsilon_O \\in (0, 1)$ is a fixed structural parameter, typically $\\varepsilon_O = 0.1$):\n2399: \n2400: $$\n2401: \\sum_{m \\in O_M} \\text{Contrib}(G_m) \\ge (1-\\varepsilon_O) \\sum_{\\substack{m=1 \\\\ |G_m| \\ge k_{\\min}}}^M \\text{Contrib}(G_m)\n2402: $$\n2403: \n2404: 4.  **Unified High-Error Set Construction:** The unified high-error set is the union of all walkers in outlier clusters plus all walkers in invalid clusters:\n2405: \n2406: $$\n2407: H_k(\\epsilon) := \\left(\\bigcup_{m \\in O_M} G_m\\right) \\cup \\left(\\bigcup_{\\substack{m: |G_m| < k_{\\min}}} G_m\\right)\n2408: $$\n2409: \n2410: The **Unified Low-Error Set** is the complement:\n2411: \n2412: $$\n2413: L_k(\\epsilon) := \\mathcal{A}_k \\setminus H_k(\\epsilon)\n2414: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. The Geometry of Error: From System Error to a Guaranteed Geometric Structure"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-max-patched-std",
      "title": "Maximum Patched Standard Deviation",
      "start_line": 3656,
      "end_line": 3666,
      "header_lines": [
        3657
      ],
      "content_start": 3659,
      "content_end": 3665,
      "content": "3659: :label: def-max-patched-std\n3660: \n3661: Let $V_{\\max}$ be the uniform upper bound on a raw measurement's absolute value (either $V_{\\max}^{(R)}$ for rewards or $D_{\\text{valid}}$ for distances). The **maximum patched standard deviation**, $\\sigma'_{\\max}$, is the maximum value that the patched standard deviation function can attain over its entire possible input domain.\n3662: \n3663: $$\n3664: \\sigma'_{\\max} := \\sup_{0 \\le V \\le V_{\\max}^2} \\sigma'_{\\mathrm{patch}}(V)\n3665: $$",
      "metadata": {
        "label": "def-max-patched-std"
      },
      "section": "## 7. The Corrective Nature of Fitness: From Signal Generation to Intelligent Adaptation",
      "references": [],
      "raw_directive": "3656: The first component we must bound is the denominator of the standardization formula. The following definition establishes a uniform upper bound on the patched standard deviation.\n3657: \n3658: :::{prf:definition} Maximum Patched Standard Deviation\n3659: :label: def-max-patched-std\n3660: \n3661: Let $V_{\\max}$ be the uniform upper bound on a raw measurement's absolute value (either $V_{\\max}^{(R)}$ for rewards or $D_{\\text{valid}}$ for distances). The **maximum patched standard deviation**, $\\sigma'_{\\max}$, is the maximum value that the patched standard deviation function can attain over its entire possible input domain.\n3662: \n3663: $$\n3664: \\sigma'_{\\max} := \\sup_{0 \\le V \\le V_{\\max}^2} \\sigma'_{\\mathrm{patch}}(V)\n3665: $$\n3666: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. The Corrective Nature of Fitness: From Signal Generation to Intelligent Adaptation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-unfit-set",
      "title": "The Unfit Set",
      "start_line": 4559,
      "end_line": 4568,
      "header_lines": [
        4560
      ],
      "content_start": 4562,
      "content_end": 4567,
      "content": "4562: :label: def-unfit-set\n4563: \n4564: For a given swarm `k` with alive set $\\mathcal{A}_k$ and a calculated fitness potential vector $(V_{k,i})_{i \\in \\mathcal{A}_k}$, the **unfit set**, $U_k$, is the subset of alive walkers whose fitness potential is less than or equal to the swarm's mean fitness potential, $\\mu_{V,k} = \\frac{1}{k}\\sum_{j \\in \\mathcal{A}_k} V_{k,j}$.\n4565: \n4566: $$\n4567: U_k := \\{i \\in \\mathcal{A}_k \\mid V_{k,i} \\le \\mu_{V,k}\\}",
      "metadata": {
        "label": "def-unfit-set"
      },
      "section": "## 7. The Corrective Nature of Fitness: From Signal Generation to Intelligent Adaptation",
      "references": [],
      "raw_directive": "4559: The first pillar of the overlap proof is to show that the fitness signal generated by a high-error swarm is a collective phenomenon. A large `V_struct` implies a large internal variance, which is guaranteed to produce a non-vanishing raw measurement variance ([](#thm-geometry-guarantees-variance)). This raw signal robustly propagates through the measurement pipeline to create a guaranteed microscopic gap in the final fitness potentials, ensuring a non-trivial overall fitness range, $\\kappa_V,gap(\\varepsilon) > 0$. The following lemma proves that such a gap cannot be explained by a single unusually fit or unfit walker; it necessitates a statistically significant imbalance in the fitness distribution of the entire population.\n4560: \n4561: :::{prf:definition} The Unfit Set\n4562: :label: def-unfit-set\n4563: \n4564: For a given swarm `k` with alive set $\\mathcal{A}_k$ and a calculated fitness potential vector $(V_{k,i})_{i \\in \\mathcal{A}_k}$, the **unfit set**, $U_k$, is the subset of alive walkers whose fitness potential is less than or equal to the swarm's mean fitness potential, $\\mu_{V,k} = \\frac{1}{k}\\sum_{j \\in \\mathcal{A}_k} V_{k,j}$.\n4565: \n4566: $$\n4567: U_k := \\{i \\in \\mathcal{A}_k \\mid V_{k,i} \\le \\mu_{V,k}\\}\n4568: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. The Corrective Nature of Fitness: From Signal Generation to Intelligent Adaptation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-critical-target-set",
      "title": "The Critical Target Set",
      "start_line": 4761,
      "end_line": 4771,
      "header_lines": [
        4762
      ],
      "content_start": 4764,
      "content_end": 4770,
      "content": "4764: :label: def-critical-target-set\n4765: \n4766: For a state in the high-error regime, let $k$ be the index of the high-variance swarm. The **critical target set**, $I_{\\text{target}}$, is the set of walkers that are simultaneously stably alive, unfit in swarm $k$, and high-error in swarm $k$.\n4767: \n4768: $$\n4769: I_{\\text{target}} := I_{11} \\cap U_k \\cap H_k(\\epsilon)\n4770: $$",
      "metadata": {
        "label": "def-critical-target-set"
      },
      "section": "## 8. The N-Uniform Quantitative Keystone Lemma",
      "references": [],
      "raw_directive": "4761: The analysis in Chapter 7 proved that this high-variance swarm $k$ contains a non-vanishing fraction of \"unfit\" walkers ($U_k$) and a non-vanishing fraction of \"high-error\" walkers ($H_k$), and that these two sets have a substantial overlap. The final step of the Keystone proof is to show that the corrective cloning action is concentrated on the walkers that are simultaneously members of all three critical sets: those that are alive in both swarms (and thus can contribute to the contractive force), those that are unfit (and thus targeted for cloning), and those that are high-error (and thus the source of the problem). We formally define this intersection as our target set.\n4762: \n4763: :::{prf:definition} The Critical Target Set\n4764: :label: def-critical-target-set\n4765: \n4766: For a state in the high-error regime, let $k$ be the index of the high-variance swarm. The **critical target set**, $I_{\\text{target}}$, is the set of walkers that are simultaneously stably alive, unfit in swarm $k$, and high-error in swarm $k$.\n4767: \n4768: $$\n4769: I_{\\text{target}} := I_{11} \\cap U_k \\cap H_k(\\epsilon)\n4770: $$\n4771: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 8. The N-Uniform Quantitative Keystone Lemma"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-operator-formal",
      "title": "The Cloning Operator $\\Psi_{\\text{clone}}$",
      "start_line": 5806,
      "end_line": 5834,
      "header_lines": [
        5807
      ],
      "content_start": 5809,
      "content_end": 5833,
      "content": "5809: :label: def-cloning-operator-formal\n5810: \n5811: The **cloning operator** $\\Psi_{\\text{clone}}$ is a Markov transition kernel on the swarm state space $\\Sigma_N$. For any input swarm configuration $S \\in \\Sigma_N$, it produces a probability measure $\\Psi_{\\text{clone}}(S, \\cdot)$ on $\\Sigma_N$.\n5812: \n5813: **Domain and Range:**\n5814: - **Input:** A swarm configuration $S = ((x_1, v_1, s_1), \\ldots, (x_N, v_N, s_N)) \\in \\Sigma_N$ with at least one alive walker ($|\\mathcal{A}(S)| \\geq 1$).\n5815: - **Output:** A probability measure over swarm configurations $S' \\in \\Sigma_N$ where all walkers have status $s'_i = 1$ (the intermediate, all-alive configuration).\n5816: \n5817: **Stochastic Structure:**\n5818: \n5819: The operator is defined by a composition of deterministic and stochastic sub-operators:\n5820: \n5821: $$\n5822: \\Psi_{\\text{clone}} = \\Psi_{\\text{update}} \\circ \\Psi_{\\text{decision}} \\circ \\Psi_{\\text{fitness}} \\circ \\Psi_{\\text{measure}}\n5823: $$\n5824: \n5825: where each sub-operator is defined in the subsequent sections.\n5826: \n5827: **Key Property - All-Alive Output:**\n5828: \n5829: By construction, the output configuration $S' \\sim \\Psi_{\\text{clone}}(S, \\cdot)$ satisfies:\n5830: \n5831: $$\n5832: s'_i = 1 \\quad \\text{for all } i \\in \\{1, \\ldots, N\\}\n5833: $$",
      "metadata": {
        "label": "def-cloning-operator-formal"
      },
      "section": "## 9.2. The Cloning Operator as a Markov Kernel",
      "references": [],
      "raw_directive": "5806: We begin with the highest-level definition of the operator as a mathematical object.\n5807: \n5808: :::{prf:definition} The Cloning Operator $\\Psi_{\\text{clone}}$\n5809: :label: def-cloning-operator-formal\n5810: \n5811: The **cloning operator** $\\Psi_{\\text{clone}}$ is a Markov transition kernel on the swarm state space $\\Sigma_N$. For any input swarm configuration $S \\in \\Sigma_N$, it produces a probability measure $\\Psi_{\\text{clone}}(S, \\cdot)$ on $\\Sigma_N$.\n5812: \n5813: **Domain and Range:**\n5814: - **Input:** A swarm configuration $S = ((x_1, v_1, s_1), \\ldots, (x_N, v_N, s_N)) \\in \\Sigma_N$ with at least one alive walker ($|\\mathcal{A}(S)| \\geq 1$).\n5815: - **Output:** A probability measure over swarm configurations $S' \\in \\Sigma_N$ where all walkers have status $s'_i = 1$ (the intermediate, all-alive configuration).\n5816: \n5817: **Stochastic Structure:**\n5818: \n5819: The operator is defined by a composition of deterministic and stochastic sub-operators:\n5820: \n5821: $$\n5822: \\Psi_{\\text{clone}} = \\Psi_{\\text{update}} \\circ \\Psi_{\\text{decision}} \\circ \\Psi_{\\text{fitness}} \\circ \\Psi_{\\text{measure}}\n5823: $$\n5824: \n5825: where each sub-operator is defined in the subsequent sections.\n5826: \n5827: **Key Property - All-Alive Output:**\n5828: \n5829: By construction, the output configuration $S' \\sim \\Psi_{\\text{clone}}(S, \\cdot)$ satisfies:\n5830: \n5831: $$\n5832: s'_i = 1 \\quad \\text{for all } i \\in \\{1, \\ldots, N\\}\n5833: $$\n5834: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 10,
        "chapter_file": "chapter_10.json",
        "section_id": "## 9.2. The Cloning Operator as a Markov Kernel"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-measurement-operator",
      "title": "The Measurement Operator",
      "start_line": 5853,
      "end_line": 5885,
      "header_lines": [
        5854
      ],
      "content_start": 5856,
      "content_end": 5884,
      "content": "5856: :label: def-measurement-operator\n5857: \n5858: For input swarm $S$ with alive set $\\mathcal{A}(S)$ of size $k = |\\mathcal{A}(S)|$:\n5859: \n5860: **Input:** Swarm configuration $S$\n5861: \n5862: **Stochastic Process:**\n5863: \n5864: 1. **Companion Pairing:** Sample a pairing $\\pi: \\mathcal{A}(S) \\to \\mathcal{A}(S)$ from the spatially-aware random pairing distribution ({prf:ref}`def-standardization-operator`):\n5865: \n5866: \n5867: $$\n5868: \\pi \\sim P_{\\text{pair}}(S, \\cdot)\n5869: $$\n5870: \n5871: 2. **Raw Distance Vector:** For each alive walker $i \\in \\mathcal{A}(S)$, compute:\n5872: \n5873: \n5874: $$\n5875: d_i = d_{\\text{alg}}(x_i, x_{\\pi(i)})\n5876: $$\n5877: \n5878: \n5879:    For dead walkers $i \\notin \\mathcal{A}(S)$, set $d_i = 0$ deterministically.\n5880: \n5881: **Output:** The $N$-dimensional raw distance vector $\\mathbf{d} = (d_1, \\ldots, d_N) \\in \\mathbb{R}^N_{\\geq 0}$\n5882: \n5883: **Key Properties:**\n5884: - The pairing $\\pi$ is sampled once per swarm, creating correlations between measurements",
      "metadata": {
        "label": "def-measurement-operator"
      },
      "section": "## 9.3. Decomposition into Sub-Operators",
      "references": [
        "def-standardization-operator"
      ],
      "raw_directive": "5853: The first stage generates the stochastic diversity measurements that form the foundation of the fitness evaluation.\n5854: \n5855: :::{prf:definition} The Measurement Operator\n5856: :label: def-measurement-operator\n5857: \n5858: For input swarm $S$ with alive set $\\mathcal{A}(S)$ of size $k = |\\mathcal{A}(S)|$:\n5859: \n5860: **Input:** Swarm configuration $S$\n5861: \n5862: **Stochastic Process:**\n5863: \n5864: 1. **Companion Pairing:** Sample a pairing $\\pi: \\mathcal{A}(S) \\to \\mathcal{A}(S)$ from the spatially-aware random pairing distribution ({prf:ref}`def-standardization-operator`):\n5865: \n5866: \n5867: $$\n5868: \\pi \\sim P_{\\text{pair}}(S, \\cdot)\n5869: $$\n5870: \n5871: 2. **Raw Distance Vector:** For each alive walker $i \\in \\mathcal{A}(S)$, compute:\n5872: \n5873: \n5874: $$\n5875: d_i = d_{\\text{alg}}(x_i, x_{\\pi(i)})\n5876: $$\n5877: \n5878: \n5879:    For dead walkers $i \\notin \\mathcal{A}(S)$, set $d_i = 0$ deterministically.\n5880: \n5881: **Output:** The $N$-dimensional raw distance vector $\\mathbf{d} = (d_1, \\ldots, d_N) \\in \\mathbb{R}^N_{\\geq 0}$\n5882: \n5883: **Key Properties:**\n5884: - The pairing $\\pi$ is sampled once per swarm, creating correlations between measurements\n5885: - The distribution of $\\mathbf{d}$ depends only on $S$ and the algorithmic parameters $(\\epsilon_p, \\ell_p)$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 9.3. Decomposition into Sub-Operators"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-fitness-operator",
      "title": "The Fitness Evaluation Operator",
      "start_line": 5900,
      "end_line": 5971,
      "header_lines": [
        5901
      ],
      "content_start": 5903,
      "content_end": 5970,
      "content": "5903: :label: def-fitness-operator\n5904: \n5905: **Input:**\n5906: - Swarm configuration $S$\n5907: - Raw distance vector $\\mathbf{d} \\in \\mathbb{R}^N_{\\geq 0}$\n5908: \n5909: **Deterministic Computation:**\n5910: \n5911: 1. **Boundary Proximity:** For each walker $i$, compute:\n5912: \n5913: \n5914: $$\n5915: r_i = g_A(x_i) = \\varphi_{\\text{barrier}}(x_i)\n5916: $$\n5917: \n5918:    yielding the raw reward vector $\\mathbf{r} = (r_1, \\ldots, r_N)$.\n5919: \n5920: 2. **Rescaling:** Apply the rescale function with floor $\\eta > 0$:\n5921: \n5922: \n5923: $$\n5924: \\tilde{d}_i = d_i + \\eta, \\quad \\tilde{r}_i = r_i + \\eta\n5925: $$\n5926: \n5927: 3. **Z-Score Normalization:** Compute empirical means and standard deviations over **alive walkers only**:\n5928: \n5929: \n5930: $$\n5931: \\bar{d} = \\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} \\tilde{d}_i, \\quad \\sigma_d = \\sqrt{\\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} (\\tilde{d}_i - \\bar{d})^2}\n5932: $$\n5933: \n5934: \n5935: \n5936: $$\n5937: \\bar{r} = \\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} \\tilde{r}_i, \\quad \\sigma_r = \\sqrt{\\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} (\\tilde{r}_i - \\bar{r})^2}\n5938: $$\n5939: \n5940: \n5941:    For alive walkers $i \\in \\mathcal{A}(S)$:\n5942: \n5943: \n5944: $$\n5945: z_{d,i} = \\frac{\\tilde{d}_i - \\bar{d}}{\\sigma_d + \\sigma_{\\text{stab}}}, \\quad z_{r,i} = \\frac{\\tilde{r}_i - \\bar{r}}{\\sigma_r + \\sigma_{\\text{stab}}}\n5946: $$\n5947: \n5948: \n5949:    For dead walkers, set $z_{d,i} = z_{r,i} = 0$.\n5950: \n5951: 4. **Fitness Potential:** For each walker $i$, compute:\n5952: \n5953:    a. Apply the Rescale Function $g_A$ and add the floor $\\eta$ to create the rescaled components:\n5954:       - $r'_i := g_A(z_{r,i}) + \\eta$\n5955:       - $d'_i := g_A(z_{d,i}) + \\eta$\n5956: \n5957:    b. Combine the components using the dynamics weights $\\alpha$ and $\\beta$:\n5958: \n5959: \n5960: $$\n5961: V_{\\text{fit},i} = \\begin{cases}\n5962:       (d'_i)^{\\beta} \\cdot (r'_i)^{\\alpha} & \\text{if } i \\in \\mathcal{A}(S) \\\\\n5963:       0 & \\text{if } i \\notin \\mathcal{A}(S)\n5964:       \\end{cases}\n5965: $$\n5966: \n5967: **Output:** The fitness potential vector $\\mathbf{V}_{\\text{fit}} = (V_{\\text{fit},1}, \\ldots, V_{\\text{fit},N}) \\in \\mathbb{R}^N_{\\geq 0}$\n5968: \n5969: **Key Properties:**\n5970: - The operator is deterministic given $S$ and $\\mathbf{d}$",
      "metadata": {
        "label": "def-fitness-operator"
      },
      "section": "## 9.3. Decomposition into Sub-Operators",
      "references": [
        "lem-potential-bounds"
      ],
      "raw_directive": "5900: This deterministic operator transforms raw measurements into fitness potentials.\n5901: \n5902: :::{prf:definition} The Fitness Evaluation Operator\n5903: :label: def-fitness-operator\n5904: \n5905: **Input:**\n5906: - Swarm configuration $S$\n5907: - Raw distance vector $\\mathbf{d} \\in \\mathbb{R}^N_{\\geq 0}$\n5908: \n5909: **Deterministic Computation:**\n5910: \n5911: 1. **Boundary Proximity:** For each walker $i$, compute:\n5912: \n5913: \n5914: $$\n5915: r_i = g_A(x_i) = \\varphi_{\\text{barrier}}(x_i)\n5916: $$\n5917: \n5918:    yielding the raw reward vector $\\mathbf{r} = (r_1, \\ldots, r_N)$.\n5919: \n5920: 2. **Rescaling:** Apply the rescale function with floor $\\eta > 0$:\n5921: \n5922: \n5923: $$\n5924: \\tilde{d}_i = d_i + \\eta, \\quad \\tilde{r}_i = r_i + \\eta\n5925: $$\n5926: \n5927: 3. **Z-Score Normalization:** Compute empirical means and standard deviations over **alive walkers only**:\n5928: \n5929: \n5930: $$\n5931: \\bar{d} = \\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} \\tilde{d}_i, \\quad \\sigma_d = \\sqrt{\\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} (\\tilde{d}_i - \\bar{d})^2}\n5932: $$\n5933: \n5934: \n5935: \n5936: $$\n5937: \\bar{r} = \\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} \\tilde{r}_i, \\quad \\sigma_r = \\sqrt{\\frac{1}{k}\\sum_{i \\in \\mathcal{A}(S)} (\\tilde{r}_i - \\bar{r})^2}\n5938: $$\n5939: \n5940: \n5941:    For alive walkers $i \\in \\mathcal{A}(S)$:\n5942: \n5943: \n5944: $$\n5945: z_{d,i} = \\frac{\\tilde{d}_i - \\bar{d}}{\\sigma_d + \\sigma_{\\text{stab}}}, \\quad z_{r,i} = \\frac{\\tilde{r}_i - \\bar{r}}{\\sigma_r + \\sigma_{\\text{stab}}}\n5946: $$\n5947: \n5948: \n5949:    For dead walkers, set $z_{d,i} = z_{r,i} = 0$.\n5950: \n5951: 4. **Fitness Potential:** For each walker $i$, compute:\n5952: \n5953:    a. Apply the Rescale Function $g_A$ and add the floor $\\eta$ to create the rescaled components:\n5954:       - $r'_i := g_A(z_{r,i}) + \\eta$\n5955:       - $d'_i := g_A(z_{d,i}) + \\eta$\n5956: \n5957:    b. Combine the components using the dynamics weights $\\alpha$ and $\\beta$:\n5958: \n5959: \n5960: $$\n5961: V_{\\text{fit},i} = \\begin{cases}\n5962:       (d'_i)^{\\beta} \\cdot (r'_i)^{\\alpha} & \\text{if } i \\in \\mathcal{A}(S) \\\\\n5963:       0 & \\text{if } i \\notin \\mathcal{A}(S)\n5964:       \\end{cases}\n5965: $$\n5966: \n5967: **Output:** The fitness potential vector $\\mathbf{V}_{\\text{fit}} = (V_{\\text{fit},1}, \\ldots, V_{\\text{fit},N}) \\in \\mathbb{R}^N_{\\geq 0}$\n5968: \n5969: **Key Properties:**\n5970: - The operator is deterministic given $S$ and $\\mathbf{d}$\n5971: - Bounded: $V_{\\text{fit},i} \\in [0, V_{\\text{pot,max}}]$ for alive walkers, where $V_{\\text{pot,max}} = (g_{A,\\max} + \\eta)^{\\alpha+\\beta}$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 9.3. Decomposition into Sub-Operators"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-decision-operator",
      "title": "The Cloning Decision Operator",
      "start_line": 5977,
      "end_line": 6029,
      "header_lines": [
        5978
      ],
      "content_start": 5980,
      "content_end": 6028,
      "content": "5980: :label: def-decision-operator\n5981: \n5982: **Input:**\n5983: - Swarm configuration $S$\n5984: - Fitness potential vector $\\mathbf{V}_{\\text{fit}}$\n5985: \n5986: **Stochastic Process:**\n5987: \n5988: For each walker $i \\in \\{1, \\ldots, N\\}$:\n5989: \n5990: 1. **Companion Selection:**\n5991: \n5992:    - If $i \\in \\mathcal{A}(S)$ (alive): Sample companion $c_i$ from the softmax distribution over other alive walkers:\n5993: \n5994: \n5995: $$\n5996: P(c_i = j) = \\frac{\\exp\\left(-\\frac{d_{\\text{alg}}(x_i, x_j)^2}{2\\epsilon_c^2}\\right)}{\\sum_{\\ell \\in \\mathcal{A}(S) \\setminus \\{i\\}} \\exp\\left(-\\frac{d_{\\text{alg}}(x_i, x_\\ell)^2}{2\\epsilon_c^2}\\right)} \\quad \\text{for } j \\in \\mathcal{A}(S) \\setminus \\{i\\}\n5997: $$\n5998: \n5999: \n6000:    - If $i \\in \\mathcal{D}(S)$ (dead): Sample companion uniformly from all alive walkers:\n6001: \n6002: \n6003: $$\n6004: P(c_i = j) = \\frac{1}{k} \\quad \\text{for all } j \\in \\mathcal{A}(S)\n6005: $$\n6006: \n6007: 2. **Cloning Score:** Compute the score based on fitness difference:\n6008: \n6009: \n6010: $$\n6011: S_i = \\frac{V_{\\text{fit},c_i} - V_{\\text{fit},i}}{V_{\\text{fit},i} + \\varepsilon_{\\text{clone}}}\n6012: $$\n6013: \n6014: 3. **Stochastic Decision:** Sample threshold $T_i \\sim \\text{Uniform}(0, p_{\\max})$ independently.\n6015: \n6016:    Walker $i$ is marked for **cloning** if $S_i > T_i$, otherwise marked to **persist**.\n6017: \n6018: **Output:**\n6019: - Companion assignment vector $\\mathbf{c} = (c_1, \\ldots, c_N)$\n6020: - Binary action vector $\\mathbf{a} = (a_1, \\ldots, a_N)$ where $a_i \\in \\{\\text{clone}, \\text{persist}\\}$\n6021: \n6022: **Total Cloning Probability:**\n6023: \n6024: The key quantity for drift analysis is the **total probability** that walker $i$ clones, averaging over all randomness in companion selection and threshold sampling:\n6025: \n6026: $$\n6027: p_i := P(\\text{walker } i \\text{ clones} \\mid S, \\mathbf{V}_{\\text{fit}})\n6028: $$",
      "metadata": {
        "label": "def-decision-operator"
      },
      "section": "## 9.3. Decomposition into Sub-Operators",
      "references": [
        "lem-quantitative-keystone"
      ],
      "raw_directive": "5977: This stochastic operator determines which walkers will clone and which will persist.\n5978: \n5979: :::{prf:definition} The Cloning Decision Operator\n5980: :label: def-decision-operator\n5981: \n5982: **Input:**\n5983: - Swarm configuration $S$\n5984: - Fitness potential vector $\\mathbf{V}_{\\text{fit}}$\n5985: \n5986: **Stochastic Process:**\n5987: \n5988: For each walker $i \\in \\{1, \\ldots, N\\}$:\n5989: \n5990: 1. **Companion Selection:**\n5991: \n5992:    - If $i \\in \\mathcal{A}(S)$ (alive): Sample companion $c_i$ from the softmax distribution over other alive walkers:\n5993: \n5994: \n5995: $$\n5996: P(c_i = j) = \\frac{\\exp\\left(-\\frac{d_{\\text{alg}}(x_i, x_j)^2}{2\\epsilon_c^2}\\right)}{\\sum_{\\ell \\in \\mathcal{A}(S) \\setminus \\{i\\}} \\exp\\left(-\\frac{d_{\\text{alg}}(x_i, x_\\ell)^2}{2\\epsilon_c^2}\\right)} \\quad \\text{for } j \\in \\mathcal{A}(S) \\setminus \\{i\\}\n5997: $$\n5998: \n5999: \n6000:    - If $i \\in \\mathcal{D}(S)$ (dead): Sample companion uniformly from all alive walkers:\n6001: \n6002: \n6003: $$\n6004: P(c_i = j) = \\frac{1}{k} \\quad \\text{for all } j \\in \\mathcal{A}(S)\n6005: $$\n6006: \n6007: 2. **Cloning Score:** Compute the score based on fitness difference:\n6008: \n6009: \n6010: $$\n6011: S_i = \\frac{V_{\\text{fit},c_i} - V_{\\text{fit},i}}{V_{\\text{fit},i} + \\varepsilon_{\\text{clone}}}\n6012: $$\n6013: \n6014: 3. **Stochastic Decision:** Sample threshold $T_i \\sim \\text{Uniform}(0, p_{\\max})$ independently.\n6015: \n6016:    Walker $i$ is marked for **cloning** if $S_i > T_i$, otherwise marked to **persist**.\n6017: \n6018: **Output:**\n6019: - Companion assignment vector $\\mathbf{c} = (c_1, \\ldots, c_N)$\n6020: - Binary action vector $\\mathbf{a} = (a_1, \\ldots, a_N)$ where $a_i \\in \\{\\text{clone}, \\text{persist}\\}$\n6021: \n6022: **Total Cloning Probability:**\n6023: \n6024: The key quantity for drift analysis is the **total probability** that walker $i$ clones, averaging over all randomness in companion selection and threshold sampling:\n6025: \n6026: $$\n6027: p_i := P(\\text{walker } i \\text{ clones} \\mid S, \\mathbf{V}_{\\text{fit}})\n6028: $$\n6029: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 9.3. Decomposition into Sub-Operators"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-update-operator",
      "title": "The State Update Operator",
      "start_line": 6064,
      "end_line": 6154,
      "header_lines": [
        6065
      ],
      "content_start": 6067,
      "content_end": 6153,
      "content": "6067: :label: def-update-operator\n6068: \n6069: **Input:**\n6070: - Swarm configuration $S$\n6071: - Companion vector $\\mathbf{c}$\n6072: - Action vector $\\mathbf{a}$\n6073: \n6074: **Deterministic Grouping:**\n6075: \n6076: For each unique companion $j \\in \\mathcal{A}(S)$, identify all walkers cloning from it:\n6077: \n6078: $$\n6079: I_j := \\{i \\in \\{1, \\ldots, N\\} : a_i = \\text{clone} \\text{ and } c_i = j\\}\n6080: $$\n6081: \n6082: Let $M_j = |I_j|$ be the number of cloners for companion $j$.\n6083: \n6084: **Stochastic State Update:**\n6085: \n6086: For each $(M_j + 1)$-particle system consisting of companion $j$ and its cloners $I_j$:\n6087: \n6088: 1. **Position Updates:**\n6089: \n6090:    For each cloner $i \\in I_j$, the position is reset to the companion's position plus **Gaussian jitter**:\n6091: \n6092: \n6093: $$\n6094: x'_i = x_j + \\sigma_x \\zeta_i^x \\quad \\text{where } \\zeta_i^x \\sim \\mathcal{N}(0, I_d)\n6095: $$\n6096: \n6097: \n6098:    Companion position is unchanged: $x'_j = x_j$\n6099: \n6100: 2. **Velocity Updates (The Inelastic Collision):**\n6101: \n6102:    The velocities are updated through a momentum-conserving inelastic collision model. **There is NO Gaussian jitter added to velocities.**\n6103: \n6104:    **a. Center-of-Mass Velocity:**\n6105: \n6106: \n6107: $$\n6108: V_{\\text{COM},j} = \\frac{1}{M_j + 1}\\left(v_j + \\sum_{i \\in I_j} v_i\\right)\n6109: $$\n6110: \n6111: \n6112:    **b. Update Relative Velocities:**\n6113: \n6114:    For each walker $k \\in I_j \\cup \\{j\\}$, compute the relative velocity:\n6115: \n6116: \n6117: $$\n6118: u_k = v_k - V_{\\text{COM},j}\n6119: $$\n6120: \n6121: \n6122:    Sample a random orthogonal transformation $R_k$ that isotropically rotates $u_k$ (uniformly random direction on the $(d-1)$-sphere, preserving magnitude). The new relative velocity is:\n6123: \n6124: \n6125: $$\n6126: u'_k = \\alpha_{\\text{restitution}} \\cdot R_k(u_k)\n6127: $$\n6128: \n6129: \n6130:    **c. Return to Lab Frame:**\n6131: \n6132: \n6133: $$\n6134: v'_k = V_{\\text{COM},j} + u'_k\n6135: $$\n6136: \n6137: 3. **Persisting Walkers:**\n6138: \n6139:    For walkers with $a_i = \\text{persist}$:\n6140: \n6141: \n6142: $$\n6143: x'_i = x_i, \\quad v'_i = v_i\n6144: $$\n6145: \n6146: 4. **Status Update:**\n6147: \n6148:    All walkers in the output are alive:\n6149: \n6150: \n6151: $$\n6152: s'_i = 1 \\quad \\text{for all } i \\in \\{1, \\ldots, N\\}\n6153: $$",
      "metadata": {
        "label": "def-update-operator"
      },
      "section": "## 9.3. Decomposition into Sub-Operators",
      "references": [],
      "raw_directive": "6064: The final stage executes the cloning actions, producing the output swarm configuration.\n6065: \n6066: :::{prf:definition} The State Update Operator\n6067: :label: def-update-operator\n6068: \n6069: **Input:**\n6070: - Swarm configuration $S$\n6071: - Companion vector $\\mathbf{c}$\n6072: - Action vector $\\mathbf{a}$\n6073: \n6074: **Deterministic Grouping:**\n6075: \n6076: For each unique companion $j \\in \\mathcal{A}(S)$, identify all walkers cloning from it:\n6077: \n6078: $$\n6079: I_j := \\{i \\in \\{1, \\ldots, N\\} : a_i = \\text{clone} \\text{ and } c_i = j\\}\n6080: $$\n6081: \n6082: Let $M_j = |I_j|$ be the number of cloners for companion $j$.\n6083: \n6084: **Stochastic State Update:**\n6085: \n6086: For each $(M_j + 1)$-particle system consisting of companion $j$ and its cloners $I_j$:\n6087: \n6088: 1. **Position Updates:**\n6089: \n6090:    For each cloner $i \\in I_j$, the position is reset to the companion's position plus **Gaussian jitter**:\n6091: \n6092: \n6093: $$\n6094: x'_i = x_j + \\sigma_x \\zeta_i^x \\quad \\text{where } \\zeta_i^x \\sim \\mathcal{N}(0, I_d)\n6095: $$\n6096: \n6097: \n6098:    Companion position is unchanged: $x'_j = x_j$\n6099: \n6100: 2. **Velocity Updates (The Inelastic Collision):**\n6101: \n6102:    The velocities are updated through a momentum-conserving inelastic collision model. **There is NO Gaussian jitter added to velocities.**\n6103: \n6104:    **a. Center-of-Mass Velocity:**\n6105: \n6106: \n6107: $$\n6108: V_{\\text{COM},j} = \\frac{1}{M_j + 1}\\left(v_j + \\sum_{i \\in I_j} v_i\\right)\n6109: $$\n6110: \n6111: \n6112:    **b. Update Relative Velocities:**\n6113: \n6114:    For each walker $k \\in I_j \\cup \\{j\\}$, compute the relative velocity:\n6115: \n6116: \n6117: $$\n6118: u_k = v_k - V_{\\text{COM},j}\n6119: $$\n6120: \n6121: \n6122:    Sample a random orthogonal transformation $R_k$ that isotropically rotates $u_k$ (uniformly random direction on the $(d-1)$-sphere, preserving magnitude). The new relative velocity is:\n6123: \n6124: \n6125: $$\n6126: u'_k = \\alpha_{\\text{restitution}} \\cdot R_k(u_k)\n6127: $$\n6128: \n6129: \n6130:    **c. Return to Lab Frame:**\n6131: \n6132: \n6133: $$\n6134: v'_k = V_{\\text{COM},j} + u'_k\n6135: $$\n6136: \n6137: 3. **Persisting Walkers:**\n6138: \n6139:    For walkers with $a_i = \\text{persist}$:\n6140: \n6141: \n6142: $$\n6143: x'_i = x_i, \\quad v'_i = v_i\n6144: $$\n6145: \n6146: 4. **Status Update:**\n6147: \n6148:    All walkers in the output are alive:\n6149: \n6150: \n6151: $$\n6152: s'_i = 1 \\quad \\text{for all } i \\in \\{1, \\ldots, N\\}\n6153: $$\n6154: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 9.3. Decomposition into Sub-Operators"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-key-operator-outputs",
      "title": "Key Operator Outputs",
      "start_line": 6204,
      "end_line": 6244,
      "header_lines": [
        6205
      ],
      "content_start": 6207,
      "content_end": 6243,
      "content": "6207: :label: def-key-operator-outputs\n6208: \n6209: For input swarm $S$ and output swarm $S' \\sim \\Psi_{\\text{clone}}(S, \\cdot)$, the following quantities are central to the drift analysis:\n6210: \n6211: 1. **Total Cloning Probability:** For each walker $i$:\n6212: \n6213: \n6214: $$\n6215: p_i = P(\\text{walker } i \\text{ clones} \\mid S)\n6216: $$\n6217: \n6218: 2. **Position Displacement:** For each walker $i$:\n6219: \n6220: \n6221: $$\n6222: \\Delta x_i := x'_i - x_i\n6223: $$\n6224: \n6225:    For cloners, $\\Delta x_i = x_{c_i} - x_i + \\sigma_x \\zeta_i^x$ where $\\zeta_i^x \\sim \\mathcal{N}(0, I_d)$.\n6226: \n6227: 3. **Velocity Perturbation:** For each walker $i$ that participates in a cloning event:\n6228: \n6229: \n6230: $$\n6231: \\Delta v_i := v'_i - v_i\n6232: $$\n6233: \n6234:    This arises from the inelastic collision model. The expected squared velocity change depends on:\n6235:    - The center-of-mass shift: $\\mathbb{E}[\\|V_{\\text{COM},j} - v_i\\|^2]$\n6236:    - The restitution coefficient: $\\alpha_{\\text{restitution}}$\n6237:    - The random rotation: $R_i$\n6238: \n6239: 4. **Centered Displacements:** For coupled swarms $(S_1, S_2)$:\n6240: \n6241: \n6242: $$\n6243: \\Delta\\delta_{x,i} := \\delta_{x,1,i} - \\delta_{x,2,i}",
      "metadata": {
        "label": "def-key-operator-outputs"
      },
      "section": "## 9.5. Key Quantities for Drift Analysis",
      "references": [],
      "raw_directive": "6204: We conclude by highlighting the critical quantities that will be used in the subsequent drift analysis.\n6205: \n6206: :::{prf:definition} Key Operator Outputs\n6207: :label: def-key-operator-outputs\n6208: \n6209: For input swarm $S$ and output swarm $S' \\sim \\Psi_{\\text{clone}}(S, \\cdot)$, the following quantities are central to the drift analysis:\n6210: \n6211: 1. **Total Cloning Probability:** For each walker $i$:\n6212: \n6213: \n6214: $$\n6215: p_i = P(\\text{walker } i \\text{ clones} \\mid S)\n6216: $$\n6217: \n6218: 2. **Position Displacement:** For each walker $i$:\n6219: \n6220: \n6221: $$\n6222: \\Delta x_i := x'_i - x_i\n6223: $$\n6224: \n6225:    For cloners, $\\Delta x_i = x_{c_i} - x_i + \\sigma_x \\zeta_i^x$ where $\\zeta_i^x \\sim \\mathcal{N}(0, I_d)$.\n6226: \n6227: 3. **Velocity Perturbation:** For each walker $i$ that participates in a cloning event:\n6228: \n6229: \n6230: $$\n6231: \\Delta v_i := v'_i - v_i\n6232: $$\n6233: \n6234:    This arises from the inelastic collision model. The expected squared velocity change depends on:\n6235:    - The center-of-mass shift: $\\mathbb{E}[\\|V_{\\text{COM},j} - v_i\\|^2]$\n6236:    - The restitution coefficient: $\\alpha_{\\text{restitution}}$\n6237:    - The random rotation: $R_i$\n6238: \n6239: 4. **Centered Displacements:** For coupled swarms $(S_1, S_2)$:\n6240: \n6241: \n6242: $$\n6243: \\Delta\\delta_{x,i} := \\delta_{x,1,i} - \\delta_{x,2,i}\n6244: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 13,
        "chapter_file": "chapter_13.json",
        "section_id": "## 9.5. Key Quantities for Drift Analysis"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-coupled-cloning-expectation",
      "title": "Coupled Cloning Expectation",
      "start_line": 6324,
      "end_line": 6341,
      "header_lines": [
        6325
      ],
      "content_start": 6327,
      "content_end": 6340,
      "content": "6327: :label: def-coupled-cloning-expectation\n6328: \n6329: Consider two swarms $(S_1, S_2)$ in the coupled state space. Let $(S'_1, S'_2)$ be the output swarms after applying $\\Psi_{\\text{clone}}$ to each independently, using **synchronous coupling** of all randomness:\n6330: \n6331: - Same PRNG seeds for companion selection\n6332: - Same pairing algorithm random choices\n6333: - Same threshold samples $T_i$ for each walker index $i$\n6334: - Same Gaussian jitters $\\zeta_i^x$ for position updates (when both walkers clone)\n6335: - Same rotation operators $R_i$ for velocity collisions (when both walkers participate in collisions)\n6336: \n6337: For any function $f: \\Sigma_N \\times \\Sigma_N \\to \\mathbb{R}$, the **coupled cloning expectation** is:\n6338: \n6339: $$\n6340: \\mathbb{E}_{\\text{clone}}[f(S'_1, S'_2) \\mid S_1, S_2] := \\mathbb{E}[f(S'_1, S'_2) \\mid S_1, S_2, \\text{coupling}]",
      "metadata": {
        "label": "def-coupled-cloning-expectation"
      },
      "section": "## 10.2. The Coupled Expectation Framework",
      "references": [],
      "raw_directive": "6324: To analyze the drift of the Lyapunov function components, we work with two copies of the swarm evolving under synchronous coupling.\n6325: \n6326: :::{prf:definition} Coupled Cloning Expectation\n6327: :label: def-coupled-cloning-expectation\n6328: \n6329: Consider two swarms $(S_1, S_2)$ in the coupled state space. Let $(S'_1, S'_2)$ be the output swarms after applying $\\Psi_{\\text{clone}}$ to each independently, using **synchronous coupling** of all randomness:\n6330: \n6331: - Same PRNG seeds for companion selection\n6332: - Same pairing algorithm random choices\n6333: - Same threshold samples $T_i$ for each walker index $i$\n6334: - Same Gaussian jitters $\\zeta_i^x$ for position updates (when both walkers clone)\n6335: - Same rotation operators $R_i$ for velocity collisions (when both walkers participate in collisions)\n6336: \n6337: For any function $f: \\Sigma_N \\times \\Sigma_N \\to \\mathbb{R}$, the **coupled cloning expectation** is:\n6338: \n6339: $$\n6340: \\mathbb{E}_{\\text{clone}}[f(S'_1, S'_2) \\mid S_1, S_2] := \\mathbb{E}[f(S'_1, S'_2) \\mid S_1, S_2, \\text{coupling}]\n6341: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 16,
        "chapter_file": "chapter_16.json",
        "section_id": "## 10.2. The Coupled Expectation Framework"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-boundary-potential-recall",
      "title": "Boundary Potential Component (Recall)",
      "start_line": 7047,
      "end_line": 7065,
      "header_lines": [
        7048
      ],
      "content_start": 7050,
      "content_end": 7064,
      "content": "7050: :label: def-boundary-potential-recall\n7051: \n7052: From {prf:ref}`def-full-synergistic-lyapunov-function`, the boundary potential is:\n7053: \n7054: $$\n7055: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n7056: $$\n7057: \n7058: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function satisfying:\n7059: \n7060: 1. **Interior safety:** $\\varphi_{\\text{barrier}}(x) = 0$ for $x$ in the safe interior region (distance $> \\delta_{\\text{safe}}$ from boundary)\n7061: \n7062: 2. **Boundary growth:** $\\varphi_{\\text{barrier}}(x) \\to \\infty$ as $x \\to \\partial \\mathcal{X}_{\\text{valid}}$\n7063: \n7064: 3. **Smoothness:** $\\varphi_{\\text{barrier}} \\in C^2(\\mathcal{X}_{\\text{valid}})$ with bounded derivatives in the interior",
      "metadata": {
        "label": "def-boundary-potential-recall"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [
        "def-full-synergistic-lyapunov-function",
        "prop-barrier-existence"
      ],
      "raw_directive": "7047: ### 11.2.1. The Barrier Function\n7048: \n7049: :::{prf:definition} Boundary Potential Component (Recall)\n7050: :label: def-boundary-potential-recall\n7051: \n7052: From {prf:ref}`def-full-synergistic-lyapunov-function`, the boundary potential is:\n7053: \n7054: $$\n7055: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n7056: $$\n7057: \n7058: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function satisfying:\n7059: \n7060: 1. **Interior safety:** $\\varphi_{\\text{barrier}}(x) = 0$ for $x$ in the safe interior region (distance $> \\delta_{\\text{safe}}$ from boundary)\n7061: \n7062: 2. **Boundary growth:** $\\varphi_{\\text{barrier}}(x) \\to \\infty$ as $x \\to \\partial \\mathcal{X}_{\\text{valid}}$\n7063: \n7064: 3. **Smoothness:** $\\varphi_{\\text{barrier}} \\in C^2(\\mathcal{X}_{\\text{valid}})$ with bounded derivatives in the interior\n7065: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 23,
        "chapter_file": "chapter_23.json",
        "section_id": "## 11.2. The Boundary Barrier and Fitness Gradient"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-boundary-exposed-set",
      "title": "The Boundary-Exposed Set",
      "start_line": 7255,
      "end_line": 7272,
      "header_lines": [
        7256
      ],
      "content_start": 7258,
      "content_end": 7271,
      "content": "7258: :label: def-boundary-exposed-set\n7259: \n7260: For a swarm $S$ and a threshold $\\phi_{\\text{thresh}} > 0$, the **boundary-exposed set** is:\n7261: \n7262: $$\n7263: \\mathcal{E}_{\\text{boundary}}(S) := \\{i \\in \\mathcal{A}(S) : \\varphi_{\\text{barrier}}(x_i) > \\phi_{\\text{thresh}}\\}\n7264: $$\n7265: \n7266: These are alive walkers whose barrier penalty exceeds the threshold, indicating dangerous proximity to the boundary.\n7267: \n7268: The **boundary-exposed mass** is:\n7269: \n7270: $$\n7271: M_{\\text{boundary}}(S) := \\frac{1}{N} \\sum_{i \\in \\mathcal{E}_{\\text{boundary}}(S)} \\varphi_{\\text{barrier}}(x_i)",
      "metadata": {
        "label": "def-boundary-exposed-set"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7255: We now formalize the set of walkers that are in danger due to boundary proximity.\n7256: \n7257: :::{prf:definition} The Boundary-Exposed Set\n7258: :label: def-boundary-exposed-set\n7259: \n7260: For a swarm $S$ and a threshold $\\phi_{\\text{thresh}} > 0$, the **boundary-exposed set** is:\n7261: \n7262: $$\n7263: \\mathcal{E}_{\\text{boundary}}(S) := \\{i \\in \\mathcal{A}(S) : \\varphi_{\\text{barrier}}(x_i) > \\phi_{\\text{thresh}}\\}\n7264: $$\n7265: \n7266: These are alive walkers whose barrier penalty exceeds the threshold, indicating dangerous proximity to the boundary.\n7267: \n7268: The **boundary-exposed mass** is:\n7269: \n7270: $$\n7271: M_{\\text{boundary}}(S) := \\frac{1}{N} \\sum_{i \\in \\mathcal{E}_{\\text{boundary}}(S)} \\varphi_{\\text{barrier}}(x_i)\n7272: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "03_cloning",
        "chapter_index": 23,
        "chapter_file": "chapter_23.json",
        "section_id": "## 11.2. The Boundary Barrier and Fitness Gradient"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-algorithmic-force",
      "title": "Algorithmic Force",
      "start_line": 13,
      "end_line": 28,
      "header_lines": [
        14
      ],
      "content_start": 16,
      "content_end": 27,
      "content": "16: :label: def-cg-algorithmic-force\n17: \n18: For walker $i$ undergoing geometric ascent ({prf:ref}`def-cg-ascent-operator`), the **algorithmic force** is\n19: \n20: $$\n21: F_i := \\eta \\cdot H_{\\Phi}(x_i)^{-1} \\Delta x_i \\in \\mathbb{R}^{d}\n22: $$\n23: \n24: where:\n25: - $\\Delta x_i = x_{j^*(i)} - x_i$ is the displacement toward the best companion\n26: - $H_{\\Phi}(x_i)^{-1}$ is the inverse Hessian (exists by {prf:ref}`def-cg-fitness-landscape`)\n27: - $\\eta \\in (0,1]$ is the step size parameter",
      "metadata": {
        "label": "def-cg-algorithmic-force"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [
        "def-cg-ascent-operator",
        "def-cg-fitness-landscape"
      ],
      "raw_directive": "13: Before constructing gauge fields, we identify the fundamental geometric quantities available from the Crystalline Gas dynamics.\n14: \n15: :::{prf:definition} Algorithmic Force\n16: :label: def-cg-algorithmic-force\n17: \n18: For walker $i$ undergoing geometric ascent ({prf:ref}`def-cg-ascent-operator`), the **algorithmic force** is\n19: \n20: $$\n21: F_i := \\eta \\cdot H_{\\Phi}(x_i)^{-1} \\Delta x_i \\in \\mathbb{R}^{d}\n22: $$\n23: \n24: where:\n25: - $\\Delta x_i = x_{j^*(i)} - x_i$ is the displacement toward the best companion\n26: - $H_{\\Phi}(x_i)^{-1}$ is the inverse Hessian (exists by {prf:ref}`def-cg-fitness-landscape`)\n27: - $\\eta \\in (0,1]$ is the step size parameter\n28: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-momentum",
      "title": "Momentum and Phase Space Structure",
      "start_line": 30,
      "end_line": 38,
      "header_lines": [
        31
      ],
      "content_start": 33,
      "content_end": 37,
      "content": "33: :label: def-cg-momentum\n34: \n35: For walker $i$ with velocity $v_i \\in \\mathbb{R}^{d}$, define:\n36: - **Momentum:** $p_i := m v_i \\in \\mathbb{R}^{d}$ where $m$ is the effective walker mass (set $m=1$ without loss of generality)\n37: - **Phase space state:** $(x_i, v_i) \\in \\Omega = \\mathbb{R}^{d} \\times \\mathbb{R}^{d}$",
      "metadata": {
        "label": "def-cg-momentum"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [
        "def-cg-thermal-operator"
      ],
      "raw_directive": "30: :::\n31: \n32: :::{prf:definition} Momentum and Phase Space Structure\n33: :label: def-cg-momentum\n34: \n35: For walker $i$ with velocity $v_i \\in \\mathbb{R}^{d}$, define:\n36: - **Momentum:** $p_i := m v_i \\in \\mathbb{R}^{d}$ where $m$ is the effective walker mass (set $m=1$ without loss of generality)\n37: - **Phase space state:** $(x_i, v_i) \\in \\Omega = \\mathbb{R}^{d} \\times \\mathbb{R}^{d}$\n38: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-companion-direction",
      "title": "Companion Direction Vector",
      "start_line": 40,
      "end_line": 63,
      "header_lines": [
        41
      ],
      "content_start": 43,
      "content_end": 62,
      "content": "43: :label: def-cg-companion-direction\n44: \n45: For walker $i$ with companion $j^*(i)$ (from {prf:ref}`def-cg-ascent-operator`), define:\n46: - **Direction vector:**\n47: \n48: $$\n49: \\hat{r}_{i,j^*(i)} := \\frac{x_{j^*(i)} - x_i}{\\|x_{j^*(i)} - x_i\\|} \\in S^{d-1}\n50: $$\n51: \n52: - **Companion distance:**\n53: \n54: $$\n55: d_{i,j^*(i)} := \\|x_{j^*(i)} - x_i\\|\n56: $$\n57: \n58: - **Fitness score:**\n59: \n60: $$\n61: S_{\\text{ascent}}(i \\to j^*(i)) := \\frac{\\Phi(x_{j^*(i)}) - \\Phi(x_i)}{\\Phi(x_i) + \\varepsilon_{\\text{reg}}}\n62: $$",
      "metadata": {
        "label": "def-cg-companion-direction"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [
        "def-cg-ascent-operator"
      ],
      "raw_directive": "40: :::\n41: \n42: :::{prf:definition} Companion Direction Vector\n43: :label: def-cg-companion-direction\n44: \n45: For walker $i$ with companion $j^*(i)$ (from {prf:ref}`def-cg-ascent-operator`), define:\n46: - **Direction vector:**\n47: \n48: $$\n49: \\hat{r}_{i,j^*(i)} := \\frac{x_{j^*(i)} - x_i}{\\|x_{j^*(i)} - x_i\\|} \\in S^{d-1}\n50: $$\n51: \n52: - **Companion distance:**\n53: \n54: $$\n55: d_{i,j^*(i)} := \\|x_{j^*(i)} - x_i\\|\n56: $$\n57: \n58: - **Fitness score:**\n59: \n60: $$\n61: S_{\\text{ascent}}(i \\to j^*(i)) := \\frac{\\Phi(x_{j^*(i)}) - \\Phi(x_i)}{\\Phi(x_i) + \\varepsilon_{\\text{reg}}}\n62: $$\n63: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-force-momentum-tensor",
      "title": "Force-Momentum Tensor",
      "start_line": 85,
      "end_line": 101,
      "header_lines": [
        86
      ],
      "content_start": 88,
      "content_end": 100,
      "content": "88: :label: def-cg-force-momentum-tensor\n89: \n90: For walker $i$ with force $F_i \\in \\mathbb{R}^{3}$ and momentum $p_i \\in \\mathbb{R}^{3}$, define the **outer product tensor**:\n91: \n92: $$\n93: T_i := F_i \\otimes p_i \\in \\mathbb{R}^{3 \\times 3}\n94: $$\n95: \n96: with components:\n97: \n98: $$\n99: (T_i)_{ab} = (F_i)_a \\cdot (p_i)_b \\quad \\text{for } a,b \\in \\{1,2,3\\}\n100: $$",
      "metadata": {
        "label": "def-cg-force-momentum-tensor"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "85: We now construct the **SU(3) color gauge field** (8 gluons) from the tensor product of force and momentum.\n86: \n87: :::{prf:definition} Force-Momentum Tensor\n88: :label: def-cg-force-momentum-tensor\n89: \n90: For walker $i$ with force $F_i \\in \\mathbb{R}^{3}$ and momentum $p_i \\in \\mathbb{R}^{3}$, define the **outer product tensor**:\n91: \n92: $$\n93: T_i := F_i \\otimes p_i \\in \\mathbb{R}^{3 \\times 3}\n94: $$\n95: \n96: with components:\n97: \n98: $$\n99: (T_i)_{ab} = (F_i)_a \\cdot (p_i)_b \\quad \\text{for } a,b \\in \\{1,2,3\\}\n100: $$\n101: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-traceless-projection",
      "title": "Traceless Projection to SU(3)",
      "start_line": 103,
      "end_line": 117,
      "header_lines": [
        104
      ],
      "content_start": 106,
      "content_end": 116,
      "content": "106: :label: def-cg-traceless-projection\n107: \n108: To obtain an SU(3)-valued object (which must be traceless), we define:\n109: \n110: $$\n111: T_i^{\\text{traceless}} := T_i - \\frac{1}{3} \\text{Tr}(T_i) \\cdot I_3\n112: $$\n113: \n114: where:\n115: - $\\text{Tr}(T_i) = \\sum_{a=1}^{3} (T_i)_{aa} = F_i \\cdot p_i$ (dot product)\n116: - $I_3$ is the $3 \\times 3$ identity matrix",
      "metadata": {
        "label": "def-cg-traceless-projection"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "103: :::\n104: \n105: :::{prf:definition} Traceless Projection to SU(3)\n106: :label: def-cg-traceless-projection\n107: \n108: To obtain an SU(3)-valued object (which must be traceless), we define:\n109: \n110: $$\n111: T_i^{\\text{traceless}} := T_i - \\frac{1}{3} \\text{Tr}(T_i) \\cdot I_3\n112: $$\n113: \n114: where:\n115: - $\\text{Tr}(T_i) = \\sum_{a=1}^{3} (T_i)_{aa} = F_i \\cdot p_i$ (dot product)\n116: - $I_3$ is the $3 \\times 3$ identity matrix\n117: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-su3-gauge-field",
      "title": "SU(3) Color Gauge Field (Gluons)",
      "start_line": 157,
      "end_line": 176,
      "header_lines": [
        158
      ],
      "content_start": 160,
      "content_end": 175,
      "content": "160: :label: def-cg-su3-gauge-field\n161: \n162: The **SU(3) color gauge potential** for the Crystalline Gas is defined as the Lie-algebra-valued 1-form:\n163: \n164: $$\n165: \\mathcal{A}_{\\mu}^{\\text{color}}(x) := \\sum_{a=1}^{8} A_{\\mu}^a(x) \\cdot \\lambda^a \\in \\mathfrak{su}(3) \\otimes T^*M\n166: $$\n167: \n168: where the individual gluon field components are:\n169: \n170: $$\n171: A_{\\mu}^a(x) := \\partial_{\\mu} \\varphi^a(x)\n172: $$\n173: \n174: Here:\n175: - $\\varphi^a(x)$ is the spatial field obtained by interpolating the discrete walker phases $\\varphi_i^a$",
      "metadata": {
        "label": "def-cg-su3-gauge-field"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "157: :::\n158: \n159: :::{prf:definition} SU(3) Color Gauge Field (Gluons)\n160: :label: def-cg-su3-gauge-field\n161: \n162: The **SU(3) color gauge potential** for the Crystalline Gas is defined as the Lie-algebra-valued 1-form:\n163: \n164: $$\n165: \\mathcal{A}_{\\mu}^{\\text{color}}(x) := \\sum_{a=1}^{8} A_{\\mu}^a(x) \\cdot \\lambda^a \\in \\mathfrak{su}(3) \\otimes T^*M\n166: $$\n167: \n168: where the individual gluon field components are:\n169: \n170: $$\n171: A_{\\mu}^a(x) := \\partial_{\\mu} \\varphi^a(x)\n172: $$\n173: \n174: Here:\n175: - $\\varphi^a(x)$ is the spatial field obtained by interpolating the discrete walker phases $\\varphi_i^a$\n176: - $\\partial_{\\mu}$ denotes spacetime derivative ($\\mu \\in \\{0,1,2,3\\}$)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-su2-phases",
      "title": "SU(2) Isospin Phases from Direction Vector",
      "start_line": 275,
      "end_line": 295,
      "header_lines": [
        276
      ],
      "content_start": 278,
      "content_end": 294,
      "content": "278: :label: def-cg-su2-phases\n279: \n280: For walker $i$ with companion direction $\\hat{r}_{i,j^*(i)} \\in S^{2}$ and fitness score $S_{\\text{ascent}}(i \\to j^*(i))$, define the **three SU(2) isospin phases**:\n281: \n282: $$\n283: \\varphi_i^{(1)} := S_{\\text{ascent}} \\cdot \\hat{r}_x\n284: $$\n285: \n286: $$\n287: \\varphi_i^{(2)} := S_{\\text{ascent}} \\cdot \\hat{r}_y\n288: $$\n289: \n290: $$\n291: \\varphi_i^{(3)} := S_{\\text{ascent}} \\cdot \\hat{r}_z\n292: $$\n293: \n294: where $\\hat{r} = (\\hat{r}_x, \\hat{r}_y, \\hat{r}_z)$ are the Cartesian components of the unit direction vector.",
      "metadata": {
        "label": "def-cg-su2-phases"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "275: We now construct the **SU(2) weak gauge field** (W bosons and Z boson before mixing) from the geometric direction to the companion.\n276: \n277: :::{prf:definition} SU(2) Isospin Phases from Direction Vector\n278: :label: def-cg-su2-phases\n279: \n280: For walker $i$ with companion direction $\\hat{r}_{i,j^*(i)} \\in S^{2}$ and fitness score $S_{\\text{ascent}}(i \\to j^*(i))$, define the **three SU(2) isospin phases**:\n281: \n282: $$\n283: \\varphi_i^{(1)} := S_{\\text{ascent}} \\cdot \\hat{r}_x\n284: $$\n285: \n286: $$\n287: \\varphi_i^{(2)} := S_{\\text{ascent}} \\cdot \\hat{r}_y\n288: $$\n289: \n290: $$\n291: \\varphi_i^{(3)} := S_{\\text{ascent}} \\cdot \\hat{r}_z\n292: $$\n293: \n294: where $\\hat{r} = (\\hat{r}_x, \\hat{r}_y, \\hat{r}_z)$ are the Cartesian components of the unit direction vector.\n295: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-su2-gauge-field",
      "title": "SU(2) Weak Gauge Field",
      "start_line": 329,
      "end_line": 353,
      "header_lines": [
        330
      ],
      "content_start": 332,
      "content_end": 352,
      "content": "332: :label: def-cg-su2-gauge-field\n333: \n334: The **SU(2) weak gauge potential** for the Crystalline Gas is:\n335: \n336: $$\n337: \\mathcal{W}_{\\mu}(x) := \\sum_{a=1}^{3} W_{\\mu}^a(x) \\cdot \\tau^a \\in \\mathfrak{su}(2) \\otimes T^*M\n338: $$\n339: \n340: where the individual weak boson field components are:\n341: \n342: $$\n343: W_{\\mu}^a(x) := \\partial_{\\mu} \\varphi^{(a)}(x) = \\partial_{\\mu} [S_{\\text{ascent}}(x) \\cdot \\hat{r}^a(x)]\n344: $$\n345: \n346: Expanding:\n347: \n348: $$\n349: W_{\\mu}^a = \\hat{r}^a \\cdot \\partial_{\\mu} S_{\\text{ascent}} + S_{\\text{ascent}} \\cdot \\partial_{\\mu} \\hat{r}^a\n350: $$\n351: \n352: The 3 components correspond to:",
      "metadata": {
        "label": "def-cg-su2-gauge-field"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "329: :::\n330: \n331: :::{prf:definition} SU(2) Weak Gauge Field\n332: :label: def-cg-su2-gauge-field\n333: \n334: The **SU(2) weak gauge potential** for the Crystalline Gas is:\n335: \n336: $$\n337: \\mathcal{W}_{\\mu}(x) := \\sum_{a=1}^{3} W_{\\mu}^a(x) \\cdot \\tau^a \\in \\mathfrak{su}(2) \\otimes T^*M\n338: $$\n339: \n340: where the individual weak boson field components are:\n341: \n342: $$\n343: W_{\\mu}^a(x) := \\partial_{\\mu} \\varphi^{(a)}(x) = \\partial_{\\mu} [S_{\\text{ascent}}(x) \\cdot \\hat{r}^a(x)]\n344: $$\n345: \n346: Expanding:\n347: \n348: $$\n349: W_{\\mu}^a = \\hat{r}^a \\cdot \\partial_{\\mu} S_{\\text{ascent}} + S_{\\text{ascent}} \\cdot \\partial_{\\mu} \\hat{r}^a\n350: $$\n351: \n352: The 3 components correspond to:\n353: - $W_{\\mu}^1, W_{\\mu}^2$: combine to form $W_{\\mu}^{\\pm} = (W_{\\mu}^1 \\mp i W_{\\mu}^2)/\\sqrt{2}$ (charged W bosons)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-u1-phase",
      "title": "U(1) Hypercharge Phase from Fitness",
      "start_line": 409,
      "end_line": 430,
      "header_lines": [
        410
      ],
      "content_start": 412,
      "content_end": 429,
      "content": "412: :label: def-cg-u1-phase\n413: \n414: For walker $i$ with fitness $\\Phi(x_i)$, define the **hypercharge phase**:\n415: \n416: $$\n417: \\varphi_i^{(Y)} := \\Phi(x_i)\n418: $$\n419: \n420: Alternatively, for better normalization, use the **regularized fitness**:\n421: \n422: $$\n423: \\varphi_i^{(Y)} := \\frac{\\Phi(x_i) - \\langle \\Phi \\rangle}{\\sigma_{\\Phi}} + \\eta\n424: $$\n425: \n426: where:\n427: - $\\langle \\Phi \\rangle$ is the mean fitness over all walkers\n428: - $\\sigma_{\\Phi}$ is the standard deviation\n429: - $\\eta > 0$ is a small regularization constant",
      "metadata": {
        "label": "def-cg-u1-phase"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "409: Finally, we construct the **U(1) hypercharge gauge field** from a scalar quantity. In the Fragile Gas, this came from distance to a random companion. For the Crystalline Gas (which has no random selection), we use the **fitness landscape value** itself.\n410: \n411: :::{prf:definition} U(1) Hypercharge Phase from Fitness\n412: :label: def-cg-u1-phase\n413: \n414: For walker $i$ with fitness $\\Phi(x_i)$, define the **hypercharge phase**:\n415: \n416: $$\n417: \\varphi_i^{(Y)} := \\Phi(x_i)\n418: $$\n419: \n420: Alternatively, for better normalization, use the **regularized fitness**:\n421: \n422: $$\n423: \\varphi_i^{(Y)} := \\frac{\\Phi(x_i) - \\langle \\Phi \\rangle}{\\sigma_{\\Phi}} + \\eta\n424: $$\n425: \n426: where:\n427: - $\\langle \\Phi \\rangle$ is the mean fitness over all walkers\n428: - $\\sigma_{\\Phi}$ is the standard deviation\n429: - $\\eta > 0$ is a small regularization constant\n430: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-u1-gauge-field",
      "title": "U(1) Hypercharge Gauge Field",
      "start_line": 432,
      "end_line": 452,
      "header_lines": [
        433
      ],
      "content_start": 435,
      "content_end": 451,
      "content": "435: :label: def-cg-u1-gauge-field\n436: \n437: The **U(1) hypercharge gauge potential** is:\n438: \n439: $$\n440: A_{\\mu}^{(Y)}(x) := \\partial_{\\mu} \\varphi^{(Y)}(x) = \\partial_{\\mu} \\Phi(x)\n441: $$\n442: \n443: Using the regularized version:\n444: \n445: $$\n446: A_{\\mu}^{(Y)}(x) = \\frac{1}{\\sigma_{\\Phi}} \\partial_{\\mu} \\Phi(x)\n447: $$\n448: \n449: Since this is U(1) (abelian), there is no commutator term in the field strength:\n450: \n451: $$",
      "metadata": {
        "label": "def-cg-u1-gauge-field"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "432: :::\n433: \n434: :::{prf:definition} U(1) Hypercharge Gauge Field\n435: :label: def-cg-u1-gauge-field\n436: \n437: The **U(1) hypercharge gauge potential** is:\n438: \n439: $$\n440: A_{\\mu}^{(Y)}(x) := \\partial_{\\mu} \\varphi^{(Y)}(x) = \\partial_{\\mu} \\Phi(x)\n441: $$\n442: \n443: Using the regularized version:\n444: \n445: $$\n446: A_{\\mu}^{(Y)}(x) = \\frac{1}{\\sigma_{\\Phi}} \\partial_{\\mu} \\Phi(x)\n447: $$\n448: \n449: Since this is U(1) (abelian), there is no commutator term in the field strength:\n450: \n451: $$\n452: F_{\\mu\\nu}^{(Y)} = \\partial_{\\mu} A_{\\nu}^{(Y)} - \\partial_{\\nu} A_{\\mu}^{(Y)}",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-gauge-transformation",
      "title": "Local Gauge Transformation",
      "start_line": 573,
      "end_line": 600,
      "header_lines": [
        574
      ],
      "content_start": 576,
      "content_end": 599,
      "content": "576: :label: def-cg-gauge-transformation\n577: \n578: A **local gauge transformation** is a spacetime-dependent group element:\n579: \n580: $$\n581: g(x) \\in G_{\\text{gauge}} = \\text{SU}(3) \\times \\text{SU}(2) \\times \\text{U}(1)\n582: $$\n583: \n584: Under such a transformation:\n585: \n586: **SU(3) color:**\n587: $$\n588: c(x) \\to U_3(x) c(x), \\quad U_3 \\in \\text{SU}(3)\n589: $$\n590: \n591: **SU(2) weak isospin:**\n592: $$\n593: \\psi_L(x) \\to U_2(x) \\psi_L(x), \\quad U_2 \\in \\text{SU}(2)\n594: $$\n595: \n596: **U(1) hypercharge:**\n597: $$\n598: \\psi(x) \\to e^{i Y \\alpha(x)} \\psi(x), \\quad \\alpha(x) \\in \\mathbb{R}\n599: $$",
      "metadata": {
        "label": "def-cg-gauge-transformation"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "573: To verify that these are genuine gauge fields, we must show they transform correctly under local gauge transformations.\n574: \n575: :::{prf:definition} Local Gauge Transformation\n576: :label: def-cg-gauge-transformation\n577: \n578: A **local gauge transformation** is a spacetime-dependent group element:\n579: \n580: $$\n581: g(x) \\in G_{\\text{gauge}} = \\text{SU}(3) \\times \\text{SU}(2) \\times \\text{U}(1)\n582: $$\n583: \n584: Under such a transformation:\n585: \n586: **SU(3) color:**\n587: $$\n588: c(x) \\to U_3(x) c(x), \\quad U_3 \\in \\text{SU}(3)\n589: $$\n590: \n591: **SU(2) weak isospin:**\n592: $$\n593: \\psi_L(x) \\to U_2(x) \\psi_L(x), \\quad U_2 \\in \\text{SU}(2)\n594: $$\n595: \n596: **U(1) hypercharge:**\n597: $$\n598: \\psi(x) \\to e^{i Y \\alpha(x)} \\psi(x), \\quad \\alpha(x) \\in \\mathbb{R}\n599: $$\n600: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-field-strength",
      "title": "Field Strength Tensors",
      "start_line": 700,
      "end_line": 725,
      "header_lines": [
        701
      ],
      "content_start": 703,
      "content_end": 724,
      "content": "703: :label: def-cg-field-strength\n704: \n705: For each gauge group, the **field strength tensor** (curvature) is:\n706: \n707: **SU(3)_c:**\n708: $$\n709: F_{\\mu\\nu}^a = \\partial_{\\mu} A_{\\nu}^a - \\partial_{\\nu} A_{\\mu}^a + g_s \\sum_{bc} f^{abc} A_{\\mu}^b A_{\\nu}^c\n710: $$\n711: \n712: where $f^{abc}$ are the SU(3) structure constants.\n713: \n714: **SU(2)_L:**\n715: $$\n716: W_{\\mu\\nu}^a = \\partial_{\\mu} W_{\\nu}^a - \\partial_{\\nu} W_{\\mu}^a + g_2 \\sum_{bc} \\varepsilon^{abc} W_{\\mu}^b W_{\\nu}^c\n717: $$\n718: \n719: where $\\varepsilon^{abc}$ is the Levi-Civita symbol (SU(2) structure constants).\n720: \n721: **U(1)_Y:**\n722: $$\n723: F_{\\mu\\nu}^{(Y)} = \\partial_{\\mu} A_{\\nu}^{(Y)} - \\partial_{\\nu} A_{\\mu}^{(Y)}\n724: $$",
      "metadata": {
        "label": "def-cg-field-strength"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "700: Having established the gauge field structure, we now verify that the system satisfies the **Yang-Mills equations** at equilibrium.\n701: \n702: :::{prf:definition} Field Strength Tensors\n703: :label: def-cg-field-strength\n704: \n705: For each gauge group, the **field strength tensor** (curvature) is:\n706: \n707: **SU(3)_c:**\n708: $$\n709: F_{\\mu\\nu}^a = \\partial_{\\mu} A_{\\nu}^a - \\partial_{\\nu} A_{\\mu}^a + g_s \\sum_{bc} f^{abc} A_{\\mu}^b A_{\\nu}^c\n710: $$\n711: \n712: where $f^{abc}$ are the SU(3) structure constants.\n713: \n714: **SU(2)_L:**\n715: $$\n716: W_{\\mu\\nu}^a = \\partial_{\\mu} W_{\\nu}^a - \\partial_{\\nu} W_{\\mu}^a + g_2 \\sum_{bc} \\varepsilon^{abc} W_{\\mu}^b W_{\\nu}^c\n717: $$\n718: \n719: where $\\varepsilon^{abc}$ is the Levi-Civita symbol (SU(2) structure constants).\n720: \n721: **U(1)_Y:**\n722: $$\n723: F_{\\mu\\nu}^{(Y)} = \\partial_{\\mu} A_{\\nu}^{(Y)} - \\partial_{\\nu} A_{\\mu}^{(Y)}\n724: $$\n725: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cg-yang-mills-equations",
      "title": "Yang-Mills Equations",
      "start_line": 727,
      "end_line": 749,
      "header_lines": [
        728
      ],
      "content_start": 730,
      "content_end": 748,
      "content": "730: :label: def-cg-yang-mills-equations\n731: \n732: The **Yang-Mills equations** with matter source $J^{\\mu}$ are:\n733: \n734: $$\n735: D_{\\mu} F^{\\mu\\nu} = J^{\\nu}\n736: $$\n737: \n738: where $D_{\\mu}$ is the **gauge-covariant derivative**:\n739: \n740: $$\n741: D_{\\mu} = \\partial_{\\mu} + i g_s \\sum_a A_{\\mu}^a \\lambda^a + i g_2 \\sum_a W_{\\mu}^a \\tau^a + i g_1 A_{\\mu}^{(Y)} Y\n742: $$\n743: \n744: For a **pure gauge theory** (no matter), the source vanishes:\n745: \n746: $$\n747: J^{\\mu} = 0 \\implies D_{\\mu} F^{\\mu\\nu} = 0\n748: $$",
      "metadata": {
        "label": "def-cg-yang-mills-equations"
      },
      "section": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics",
      "references": [],
      "raw_directive": "727: :::\n728: \n729: :::{prf:definition} Yang-Mills Equations\n730: :label: def-cg-yang-mills-equations\n731: \n732: The **Yang-Mills equations** with matter source $J^{\\mu}$ are:\n733: \n734: $$\n735: D_{\\mu} F^{\\mu\\nu} = J^{\\nu}\n736: $$\n737: \n738: where $D_{\\mu}$ is the **gauge-covariant derivative**:\n739: \n740: $$\n741: D_{\\mu} = \\partial_{\\mu} + i g_s \\sum_a A_{\\mu}^a \\lambda^a + i g_2 \\sum_a W_{\\mu}^a \\tau^a + i g_1 A_{\\mu}^{(Y)} Y\n742: $$\n743: \n744: For a **pure gauge theory** (no matter), the source vanishes:\n745: \n746: $$\n747: J^{\\mu} = 0 \\implies D_{\\mu} F^{\\mu\\nu} = 0\n748: $$\n749: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_rigorous_gauge_symmetry_emergence",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## 4. Emergence of SU(2) × SU(3) Gauge Symmetry and Pure Yang-Mills Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-target-complement",
      "title": "Target Set and Complement",
      "start_line": 144,
      "end_line": 179,
      "header_lines": [
        145
      ],
      "content_start": 147,
      "content_end": 178,
      "content": "147: :label: def-target-complement\n148: \n149: For a swarm $S_k$ with alive set $\\mathcal{A}_k$, define:\n150: \n151: **Target Set** (from [03_cloning](03_cloning), Section 8.2):\n152: \n153: $$\n154: I_k(\\varepsilon) := U_k \\cap H_k(\\varepsilon)\n155: \n156: $$\n157: where:\n158: - $U_k$ is the unfit set (Definition 7.6.1.0, line 4499): walkers with fitness $\\leq$ mean\n159: - $H_k(\\varepsilon)$ is the unified high-error set (Definition 6.3, line 2351): outlier clusters in phase space\n160: \n161: **Complement Set**:\n162: \n163: $$\n164: J_k(\\varepsilon) := \\mathcal{A}_k \\setminus I_k(\\varepsilon)\n165: \n166: $$\n167: \n168: **Population fractions**:\n169: \n170: $$\n171: f_I(\\varepsilon) := \\frac{|I_k|}{k}, \\quad f_J(\\varepsilon) := \\frac{|J_k|}{k} = 1 - f_I(\\varepsilon)\n172: \n173: $$\n174: \n175: **Guaranteed lower bound** (Theorem 7.6.1, line 4572):\n176: \n177: $$\n178: f_I(\\varepsilon) \\geq f_{UH}(\\varepsilon) > 0 \\quad \\text{(N-uniform)}",
      "metadata": {
        "label": "def-target-complement"
      },
      "section": "## 2. Cluster-Preserving Coupling",
      "references": [],
      "raw_directive": "144: We first recall the cluster-based partition from [03_cloning](03_cloning).\n145: \n146: :::{prf:definition} Target Set and Complement\n147: :label: def-target-complement\n148: \n149: For a swarm $S_k$ with alive set $\\mathcal{A}_k$, define:\n150: \n151: **Target Set** (from [03_cloning](03_cloning), Section 8.2):\n152: \n153: $$\n154: I_k(\\varepsilon) := U_k \\cap H_k(\\varepsilon)\n155: \n156: $$\n157: where:\n158: - $U_k$ is the unfit set (Definition 7.6.1.0, line 4499): walkers with fitness $\\leq$ mean\n159: - $H_k(\\varepsilon)$ is the unified high-error set (Definition 6.3, line 2351): outlier clusters in phase space\n160: \n161: **Complement Set**:\n162: \n163: $$\n164: J_k(\\varepsilon) := \\mathcal{A}_k \\setminus I_k(\\varepsilon)\n165: \n166: $$\n167: \n168: **Population fractions**:\n169: \n170: $$\n171: f_I(\\varepsilon) := \\frac{|I_k|}{k}, \\quad f_J(\\varepsilon) := \\frac{|J_k|}{k} = 1 - f_I(\\varepsilon)\n172: \n173: $$\n174: \n175: **Guaranteed lower bound** (Theorem 7.6.1, line 4572):\n176: \n177: $$\n178: f_I(\\varepsilon) \\geq f_{UH}(\\varepsilon) > 0 \\quad \\text{(N-uniform)}\n179: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Cluster-Preserving Coupling"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cluster-coupling",
      "title": "Cluster-Preserving Coupling",
      "start_line": 218,
      "end_line": 252,
      "header_lines": [
        219
      ],
      "content_start": 221,
      "content_end": 251,
      "content": "221: :label: def-cluster-coupling\n222: \n223: For two swarms $(S_1, S_2)$ with partitions $(I_1, J_1)$ and $(I_2, J_2)$, the **cluster-preserving coupling** evolves them to $(S_1', S_2')$ using the following procedure:\n224: \n225: **Step 1: Independent Cluster Partitions**\n226: \n227: For each swarm $k \\in \\{1, 2\\}$ independently:\n228: 1. Apply the clustering algorithm from Definition 6.3 in [03_cloning](03_cloning) with parameter $\\varepsilon$\n229: 2. Compute unfit set $U_k$ (walkers with $V_{k,i} \\leq \\mu_{V,k}$)\n230: 3. Form target set $I_k = U_k \\cap H_k(\\varepsilon)$ and complement $J_k$\n231: \n232: **Step 2: Population-Level Matching**\n233: \n234: Within each population pair $(I_1, I_2)$ and $(J_1, J_2)$:\n235: 1. Use any matching distribution (e.g., Gibbs, uniform, or optimal transport)\n236: 2. **Key**: We only care about **population-level expectations**, not individual matchings\n237: \n238: **Step 3: Shared Cloning Randomness**\n239: \n240: For each matched pair of walkers $(i_1, i_2)$:\n241: 1. Sample shared threshold: $T \\sim \\text{Uniform}(0, p_{\\max})$\n242: 2. Walker $i$ in swarm $k$ clones if $T < p_{k,i}$\n243: 3. If cloning, sample shared jitter: $\\zeta \\sim \\mathcal{N}(0, \\delta^2 I_d)$\n244: \n245: **Step 4: Update Positions**\n246: \n247: $$\n248: x'_{k,i} = \\begin{cases}\n249: x_{k, \\pi(i)} + \\zeta & \\text{if } T < p_{k,i} \\text{ (clone)} \\\\\n250: x_{k,i} & \\text{if } T \\geq p_{k,i} \\text{ (persist)}\n251: \\end{cases}",
      "metadata": {
        "label": "def-cluster-coupling"
      },
      "section": "## 2. Cluster-Preserving Coupling",
      "references": [],
      "raw_directive": "218: Instead of coupling individual walkers, we couple at the **population level**.\n219: \n220: :::{prf:definition} Cluster-Preserving Coupling\n221: :label: def-cluster-coupling\n222: \n223: For two swarms $(S_1, S_2)$ with partitions $(I_1, J_1)$ and $(I_2, J_2)$, the **cluster-preserving coupling** evolves them to $(S_1', S_2')$ using the following procedure:\n224: \n225: **Step 1: Independent Cluster Partitions**\n226: \n227: For each swarm $k \\in \\{1, 2\\}$ independently:\n228: 1. Apply the clustering algorithm from Definition 6.3 in [03_cloning](03_cloning) with parameter $\\varepsilon$\n229: 2. Compute unfit set $U_k$ (walkers with $V_{k,i} \\leq \\mu_{V,k}$)\n230: 3. Form target set $I_k = U_k \\cap H_k(\\varepsilon)$ and complement $J_k$\n231: \n232: **Step 2: Population-Level Matching**\n233: \n234: Within each population pair $(I_1, I_2)$ and $(J_1, J_2)$:\n235: 1. Use any matching distribution (e.g., Gibbs, uniform, or optimal transport)\n236: 2. **Key**: We only care about **population-level expectations**, not individual matchings\n237: \n238: **Step 3: Shared Cloning Randomness**\n239: \n240: For each matched pair of walkers $(i_1, i_2)$:\n241: 1. Sample shared threshold: $T \\sim \\text{Uniform}(0, p_{\\max})$\n242: 2. Walker $i$ in swarm $k$ clones if $T < p_{k,i}$\n243: 3. If cloning, sample shared jitter: $\\zeta \\sim \\mathcal{N}(0, \\delta^2 I_d)$\n244: \n245: **Step 4: Update Positions**\n246: \n247: $$\n248: x'_{k,i} = \\begin{cases}\n249: x_{k, \\pi(i)} + \\zeta & \\text{if } T < p_{k,i} \\text{ (clone)} \\\\\n250: x_{k,i} & \\text{if } T \\geq p_{k,i} \\text{ (persist)}\n251: \\end{cases}\n252: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Cluster-Preserving Coupling"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-synchronous-cloning-coupling",
      "title": "Synchronous Cloning Coupling for Two Swarms",
      "start_line": 346,
      "end_line": 399,
      "header_lines": [
        347
      ],
      "content_start": 349,
      "content_end": 398,
      "content": "349: :label: def-synchronous-cloning-coupling\n350: \n351: For two swarms $(S_1, S_2) \\in \\Sigma_N \\times \\Sigma_N$, the **synchronous cloning coupling** evolves them to $(S_1', S_2')$ using shared randomness:\n352: \n353: **Step 1: Sample Matching**\n354: \n355: Sample a single perfect matching $M$ from the Gibbs distribution based on swarm $S_1$'s algorithmic geometry:\n356: \n357: $$\n358: P(M \\mid S_1) = \\frac{W(M)}{Z}, \\quad W(M) = \\prod_{(i,j) \\in M} \\exp\\left(-\\frac{d_{\\text{alg}}(i,j)^2}{2\\varepsilon_d^2}\\right)\n359: $$\n360: \n361: where:\n362: - $d_{\\text{alg}}(i,j)$ is the algorithmic distance from Definition 2.3.1 in [01_fragile_gas_framework.md](01_fragile_gas_framework.md)\n363: - $Z = \\sum_{M' \\in \\mathcal{M}_N} W(M')$ is the partition function\n364: - $\\mathcal{M}_N$ is the set of all perfect matchings on $N$ walkers\n365: \n366: The matching defines a permutation $\\pi: \\{1,\\ldots,N\\} \\to \\{1,\\ldots,N\\}$ where walker $i$ pairs with companion $\\pi(i)$.\n367: \n368: **Step 2: Apply Same Permutation**\n369: \n370: Use the **same permutation** $\\pi$ for both swarms:\n371: - In $S_1$: walker $i$ compares fitness with companion $\\pi(i)$\n372: - In $S_2$: walker $i$ compares fitness with companion $\\pi(i)$\n373: \n374: **Step 3: Shared Cloning Thresholds**\n375: \n376: For each walker index $i \\in \\{1,\\ldots,N\\}$, sample a **shared random threshold**:\n377: \n378: $$\n379: T_i \\sim \\text{Uniform}(0, p_{\\max})\n380: $$\n381: \n382: Walker $i$ in swarm $k$ clones if $T_i < p_{k,i}$ where $p_{k,i}$ is the cloning probability in swarm $k$ (determined by fitness comparison with companion $\\pi(i)$).\n383: \n384: **Step 4: Shared Jitter**\n385: \n386: If walker $i$ clones in either swarm (or both), sample a **shared Gaussian jitter**:\n387: \n388: $$\n389: \\zeta_i \\sim \\mathcal{N}(0, \\delta^2 I_d)\n390: $$\n391: \n392: The post-cloning position is:\n393: \n394: $$\n395: x'_{k,i} = \\begin{cases}\n396: x_{k,\\pi(i)} + \\zeta_i & \\text{if } T_i < p_{k,i} \\text{ (clone)} \\\\\n397: x_{k,i} & \\text{if } T_i \\geq p_{k,i} \\text{ (persist)}\n398: \\end{cases}",
      "metadata": {
        "label": "def-synchronous-cloning-coupling"
      },
      "section": "## 1. Synchronous Coupling Construction",
      "references": [],
      "raw_directive": "346: ### 1.2. The Coupling Definition\n347: \n348: :::{prf:definition} Synchronous Cloning Coupling for Two Swarms\n349: :label: def-synchronous-cloning-coupling\n350: \n351: For two swarms $(S_1, S_2) \\in \\Sigma_N \\times \\Sigma_N$, the **synchronous cloning coupling** evolves them to $(S_1', S_2')$ using shared randomness:\n352: \n353: **Step 1: Sample Matching**\n354: \n355: Sample a single perfect matching $M$ from the Gibbs distribution based on swarm $S_1$'s algorithmic geometry:\n356: \n357: $$\n358: P(M \\mid S_1) = \\frac{W(M)}{Z}, \\quad W(M) = \\prod_{(i,j) \\in M} \\exp\\left(-\\frac{d_{\\text{alg}}(i,j)^2}{2\\varepsilon_d^2}\\right)\n359: $$\n360: \n361: where:\n362: - $d_{\\text{alg}}(i,j)$ is the algorithmic distance from Definition 2.3.1 in [01_fragile_gas_framework.md](01_fragile_gas_framework.md)\n363: - $Z = \\sum_{M' \\in \\mathcal{M}_N} W(M')$ is the partition function\n364: - $\\mathcal{M}_N$ is the set of all perfect matchings on $N$ walkers\n365: \n366: The matching defines a permutation $\\pi: \\{1,\\ldots,N\\} \\to \\{1,\\ldots,N\\}$ where walker $i$ pairs with companion $\\pi(i)$.\n367: \n368: **Step 2: Apply Same Permutation**\n369: \n370: Use the **same permutation** $\\pi$ for both swarms:\n371: - In $S_1$: walker $i$ compares fitness with companion $\\pi(i)$\n372: - In $S_2$: walker $i$ compares fitness with companion $\\pi(i)$\n373: \n374: **Step 3: Shared Cloning Thresholds**\n375: \n376: For each walker index $i \\in \\{1,\\ldots,N\\}$, sample a **shared random threshold**:\n377: \n378: $$\n379: T_i \\sim \\text{Uniform}(0, p_{\\max})\n380: $$\n381: \n382: Walker $i$ in swarm $k$ clones if $T_i < p_{k,i}$ where $p_{k,i}$ is the cloning probability in swarm $k$ (determined by fitness comparison with companion $\\pi(i)$).\n383: \n384: **Step 4: Shared Jitter**\n385: \n386: If walker $i$ clones in either swarm (or both), sample a **shared Gaussian jitter**:\n387: \n388: $$\n389: \\zeta_i \\sim \\mathcal{N}(0, \\delta^2 I_d)\n390: $$\n391: \n392: The post-cloning position is:\n393: \n394: $$\n395: x'_{k,i} = \\begin{cases}\n396: x_{k,\\pi(i)} + \\zeta_i & \\text{if } T_i < p_{k,i} \\text{ (clone)} \\\\\n397: x_{k,i} & \\text{if } T_i \\geq p_{k,i} \\text{ (persist)}\n398: \\end{cases}\n399: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction_ASSEMBLED",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. Synchronous Coupling Construction"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-case-a",
      "title": "Case A - Consistent Fitness Ordering",
      "start_line": 781,
      "end_line": 791,
      "header_lines": [
        782
      ],
      "content_start": 784,
      "content_end": 790,
      "content": "784: :label: def-case-a\n785: \n786: For a matched pair $(i, j)$ where $j = \\pi(i)$ from the synchronous coupling {prf:ref}`def-synchronous-cloning-coupling`, we say the pair exhibits **Case A (Consistent Fitness Ordering)** if both swarms have the same lower-fitness walker:\n787: \n788: $$\n789: V_{\\text{fit}, 1, i} \\leq V_{\\text{fit}, 1, j} \\quad \\text{AND} \\quad V_{\\text{fit}, 2, i} \\leq V_{\\text{fit}, 2, j}\n790: $$",
      "metadata": {
        "label": "def-case-a"
      },
      "section": "## 3. Case A: Consistent Fitness Ordering",
      "references": [
        "def-synchronous-cloning-coupling"
      ],
      "raw_directive": "781: ### 3.1. Setup and Case Definition\n782: \n783: :::{prf:definition} Case A - Consistent Fitness Ordering\n784: :label: def-case-a\n785: \n786: For a matched pair $(i, j)$ where $j = \\pi(i)$ from the synchronous coupling {prf:ref}`def-synchronous-cloning-coupling`, we say the pair exhibits **Case A (Consistent Fitness Ordering)** if both swarms have the same lower-fitness walker:\n787: \n788: $$\n789: V_{\\text{fit}, 1, i} \\leq V_{\\text{fit}, 1, j} \\quad \\text{AND} \\quad V_{\\text{fit}, 2, i} \\leq V_{\\text{fit}, 2, j}\n790: $$\n791: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction_ASSEMBLED",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 3. Case A: Consistent Fitness Ordering"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-w2-contraction-constants",
      "title": "Wasserstein Contraction Constants",
      "start_line": 2140,
      "end_line": 2160,
      "header_lines": [
        2141
      ],
      "content_start": 2143,
      "content_end": 2159,
      "content": "2143: :label: def-w2-contraction-constants\n2144: \n2145: The Wasserstein-2 contraction for the cloning operator is characterized by:\n2146: \n2147: $$\n2148: \\kappa_W := 1 - \\gamma_{\\text{pair}} = \\frac{p_u \\eta}{2} > 0\n2149: $$\n2150: \n2151: where:\n2152: - $p_u > 0$ is the uniform lower bound on cloning probability for unfit walkers (Lemma 8.3.2 in [03_cloning.md](03_cloning.md))\n2153: - $\\eta > 0$ is the Outlier Alignment constant (Lemma {prf:ref}`lem-outlier-alignment`)\n2154: \n2155: The additive constant is:\n2156: \n2157: $$\n2158: C_W := C_{\\text{pair}} = 4d\\delta^2\n2159: $$",
      "metadata": {
        "label": "def-w2-contraction-constants"
      },
      "section": "## 7. Integration Over Matching Distribution",
      "references": [
        "lem-outlier-alignment"
      ],
      "raw_directive": "2140: ### 7.2. Final Constants\n2141: \n2142: :::{prf:definition} Wasserstein Contraction Constants\n2143: :label: def-w2-contraction-constants\n2144: \n2145: The Wasserstein-2 contraction for the cloning operator is characterized by:\n2146: \n2147: $$\n2148: \\kappa_W := 1 - \\gamma_{\\text{pair}} = \\frac{p_u \\eta}{2} > 0\n2149: $$\n2150: \n2151: where:\n2152: - $p_u > 0$ is the uniform lower bound on cloning probability for unfit walkers (Lemma 8.3.2 in [03_cloning.md](03_cloning.md))\n2153: - $\\eta > 0$ is the Outlier Alignment constant (Lemma {prf:ref}`lem-outlier-alignment`)\n2154: \n2155: The additive constant is:\n2156: \n2157: $$\n2158: C_W := C_{\\text{pair}} = 4d\\delta^2\n2159: $$\n2160: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction_ASSEMBLED",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 7. Integration Over Matching Distribution"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-main-contraction-constant",
      "title": "Main Contraction Constant",
      "start_line": 2231,
      "end_line": 2283,
      "header_lines": [
        2232
      ],
      "content_start": 2234,
      "content_end": 2282,
      "content": "2234: :label: def-main-contraction-constant\n2235: \n2236: The contraction constant is:\n2237: $$\n2238: \\kappa_W := \\kappa_{\\text{pair}} = \\frac{1}{2} \\cdot \\frac{p_u \\eta_{\\text{geo}}}{2} \\cdot f_{UH}(\\varepsilon) \\cdot q_{\\min}(\\varepsilon)\n2239: $$\n2240: \n2241: where the factor of $1/2$ comes from Corollary 5.5 (large separation regime).\n2242: \n2243: **Component Definitions**:\n2244: \n2245: 1. **Minimum Survival Probability** $p_u$:\n2246:    $$\n2247:    p_u := \\exp(-\\beta \\Delta V_{\\max})\n2248:    $$\n2249:    where $\\Delta V_{\\max}$ is the maximum virtual reward difference across the swarm.\n2250:    - **Derivation**: Section 4.4, minimum Gibbs probability\n2251:    - **N-Dependence**: None (virtual rewards are bounded by axioms)\n2252:    - **Typical Value**: $e^{-10} \\approx 4.5 \\times 10^{-5}$ for $\\beta = 1$, $\\Delta V_{\\max} = 10$\n2253: \n2254: 2. **Geometric Efficiency** $\\eta_{\\text{geo}}$:\n2255:    $$\n2256:    \\eta_{\\text{geo}} := \\frac{c_0^2}{2(1 + 2c_H)^2}\n2257:    $$\n2258:    where:\n2259:    - $c_0$ is the projection constant from Lemma 4.3.7 (High-Error Projection): $R_H \\geq c_0 L - c_1$\n2260:    - $c_H$ is the high-error radius constant: $R_H \\leq c_H L$ (for large $L$)\n2261:    - **Derivation**: Lemma 4.3.7, combining projection bound with radius bound\n2262:    - **N-Dependence**: None (geometric constants)\n2263:    - **Typical Value**: For $c_0 = 0.5$, $c_H = 0.6$: $\\eta_{\\text{geo}} \\approx 0.025$\n2264: \n2265: 3. **Unfit-High-Error Overlap Fraction** $f_{UH}(\\varepsilon)$:\n2266:    $$\n2267:    f_{UH}(\\varepsilon) := \\frac{\\text{# walkers in } U_k \\cap H_k}{N}\n2268:    $$\n2269:    where $U_k$ is the set of unfit walkers (lower 50% fitness) and $H_k$ is the high-error set (pointing toward other swarm).\n2270:    - **Derivation**: Lemma 4.6, geometric separation argument\n2271:    - **Lower Bound**: $f_{UH}(\\varepsilon) \\geq \\varepsilon^2 / 4$ for geometric overlap parameter $\\varepsilon$\n2272:    - **N-Dependence**: None (fraction is $O(1)$ as $N \\to \\infty$)\n2273:    - **Typical Value**: For $\\varepsilon = 0.1$: $f_{UH} \\geq 0.0025$\n2274: \n2275: 4. **Minimum Gibbs Matching Probability** $q_{\\min}(\\varepsilon)$:\n2276:    $$\n2277:    q_{\\min}(\\varepsilon) := \\min_{i,j} \\frac{\\exp(-\\beta V_{\\text{fit},k,i}) \\exp(-\\beta V_{\\text{fit},\\ell,j})}{Z^2}\n2278:    $$\n2279:    where $Z = \\sum_{i=1}^N \\exp(-\\beta V_{\\text{fit},k,i})$ is the partition function.\n2280:    - **Derivation**: Section 1.2, Gibbs matching distribution\n2281:    - **Lower Bound**: $q_{\\min} \\geq \\frac{e^{-2\\beta V_{\\max}}}{N^2}$ but effective bound is $\\frac{e^{-2\\beta V_{\\max}}}{Z^2}$\n2282:    - **N-Dependence**: For fixed $\\beta$, $Z \\sim N$ and $q_{\\min} \\sim 1/N^2$, BUT this cancels in expectation over matching",
      "metadata": {
        "label": "def-main-contraction-constant"
      },
      "section": "## 8. Main Wasserstein-2 Contraction Theorem",
      "references": [],
      "raw_directive": "2231: #### 8.2.1. Contraction Constant $\\kappa_W$\n2232: \n2233: :::{prf:definition} Main Contraction Constant\n2234: :label: def-main-contraction-constant\n2235: \n2236: The contraction constant is:\n2237: $$\n2238: \\kappa_W := \\kappa_{\\text{pair}} = \\frac{1}{2} \\cdot \\frac{p_u \\eta_{\\text{geo}}}{2} \\cdot f_{UH}(\\varepsilon) \\cdot q_{\\min}(\\varepsilon)\n2239: $$\n2240: \n2241: where the factor of $1/2$ comes from Corollary 5.5 (large separation regime).\n2242: \n2243: **Component Definitions**:\n2244: \n2245: 1. **Minimum Survival Probability** $p_u$:\n2246:    $$\n2247:    p_u := \\exp(-\\beta \\Delta V_{\\max})\n2248:    $$\n2249:    where $\\Delta V_{\\max}$ is the maximum virtual reward difference across the swarm.\n2250:    - **Derivation**: Section 4.4, minimum Gibbs probability\n2251:    - **N-Dependence**: None (virtual rewards are bounded by axioms)\n2252:    - **Typical Value**: $e^{-10} \\approx 4.5 \\times 10^{-5}$ for $\\beta = 1$, $\\Delta V_{\\max} = 10$\n2253: \n2254: 2. **Geometric Efficiency** $\\eta_{\\text{geo}}$:\n2255:    $$\n2256:    \\eta_{\\text{geo}} := \\frac{c_0^2}{2(1 + 2c_H)^2}\n2257:    $$\n2258:    where:\n2259:    - $c_0$ is the projection constant from Lemma 4.3.7 (High-Error Projection): $R_H \\geq c_0 L - c_1$\n2260:    - $c_H$ is the high-error radius constant: $R_H \\leq c_H L$ (for large $L$)\n2261:    - **Derivation**: Lemma 4.3.7, combining projection bound with radius bound\n2262:    - **N-Dependence**: None (geometric constants)\n2263:    - **Typical Value**: For $c_0 = 0.5$, $c_H = 0.6$: $\\eta_{\\text{geo}} \\approx 0.025$\n2264: \n2265: 3. **Unfit-High-Error Overlap Fraction** $f_{UH}(\\varepsilon)$:\n2266:    $$\n2267:    f_{UH}(\\varepsilon) := \\frac{\\text{# walkers in } U_k \\cap H_k}{N}\n2268:    $$\n2269:    where $U_k$ is the set of unfit walkers (lower 50% fitness) and $H_k$ is the high-error set (pointing toward other swarm).\n2270:    - **Derivation**: Lemma 4.6, geometric separation argument\n2271:    - **Lower Bound**: $f_{UH}(\\varepsilon) \\geq \\varepsilon^2 / 4$ for geometric overlap parameter $\\varepsilon$\n2272:    - **N-Dependence**: None (fraction is $O(1)$ as $N \\to \\infty$)\n2273:    - **Typical Value**: For $\\varepsilon = 0.1$: $f_{UH} \\geq 0.0025$\n2274: \n2275: 4. **Minimum Gibbs Matching Probability** $q_{\\min}(\\varepsilon)$:\n2276:    $$\n2277:    q_{\\min}(\\varepsilon) := \\min_{i,j} \\frac{\\exp(-\\beta V_{\\text{fit},k,i}) \\exp(-\\beta V_{\\text{fit},\\ell,j})}{Z^2}\n2278:    $$\n2279:    where $Z = \\sum_{i=1}^N \\exp(-\\beta V_{\\text{fit},k,i})$ is the partition function.\n2280:    - **Derivation**: Section 1.2, Gibbs matching distribution\n2281:    - **Lower Bound**: $q_{\\min} \\geq \\frac{e^{-2\\beta V_{\\max}}}{N^2}$ but effective bound is $\\frac{e^{-2\\beta V_{\\max}}}{Z^2}$\n2282:    - **N-Dependence**: For fixed $\\beta$, $Z \\sim N$ and $q_{\\min} \\sim 1/N^2$, BUT this cancels in expectation over matching\n2283:    - **Typical Value**: For $\\beta = 1$, $V_{\\max} = 10$: $q_{\\min} \\geq e^{-20}/Z^2$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction_ASSEMBLED",
        "chapter_index": 10,
        "chapter_file": "chapter_10.json",
        "section_id": "## 8. Main Wasserstein-2 Contraction Theorem"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-noise-constant",
      "title": "Wasserstein Noise Constant",
      "start_line": 2293,
      "end_line": 2324,
      "header_lines": [
        2294
      ],
      "content_start": 2296,
      "content_end": 2323,
      "content": "2296: :label: def-noise-constant\n2297: \n2298: The noise constant is:\n2299: $$\n2300: C_W := 4d\\delta^2\n2301: $$\n2302: \n2303: where:\n2304: - $d$ is the state space dimension\n2305: - $\\delta$ is the jitter noise scale: $\\zeta_i \\sim \\mathcal{N}(0, \\delta^2 I_d)$\n2306: \n2307: **Derivation**: From the jitter step in the cloning operator:\n2308: $$\n2309: x'_{k,i} = \\begin{cases}\n2310: x_{k,i} + \\zeta_i & \\text{if } i \\text{ survives} \\\\\n2311: x_{k,j} + \\zeta_i & \\text{if } i \\text{ eliminated, replaced by } j\n2312: \\end{cases}\n2313: $$\n2314: \n2315: The jitter adds noise to both walkers in a pair:\n2316: $$\n2317: \\mathbb{E}[\\|(\\zeta_i - \\zeta_j)\\|^2] = \\mathbb{E}[\\|\\zeta_i\\|^2] + \\mathbb{E}[\\|\\zeta_j\\|^2] = 2d\\delta^2\n2318: $$\n2319: \n2320: For worst-case analysis (both walkers get independent jitter):\n2321: $$\n2322: C_W = 2 \\cdot 2d\\delta^2 = 4d\\delta^2\n2323: $$",
      "metadata": {
        "label": "def-noise-constant"
      },
      "section": "## 8. Main Wasserstein-2 Contraction Theorem",
      "references": [],
      "raw_directive": "2293: #### 8.2.2. Noise Constant $C_W$\n2294: \n2295: :::{prf:definition} Wasserstein Noise Constant\n2296: :label: def-noise-constant\n2297: \n2298: The noise constant is:\n2299: $$\n2300: C_W := 4d\\delta^2\n2301: $$\n2302: \n2303: where:\n2304: - $d$ is the state space dimension\n2305: - $\\delta$ is the jitter noise scale: $\\zeta_i \\sim \\mathcal{N}(0, \\delta^2 I_d)$\n2306: \n2307: **Derivation**: From the jitter step in the cloning operator:\n2308: $$\n2309: x'_{k,i} = \\begin{cases}\n2310: x_{k,i} + \\zeta_i & \\text{if } i \\text{ survives} \\\\\n2311: x_{k,j} + \\zeta_i & \\text{if } i \\text{ eliminated, replaced by } j\n2312: \\end{cases}\n2313: $$\n2314: \n2315: The jitter adds noise to both walkers in a pair:\n2316: $$\n2317: \\mathbb{E}[\\|(\\zeta_i - \\zeta_j)\\|^2] = \\mathbb{E}[\\|\\zeta_i\\|^2] + \\mathbb{E}[\\|\\zeta_j\\|^2] = 2d\\delta^2\n2318: $$\n2319: \n2320: For worst-case analysis (both walkers get independent jitter):\n2321: $$\n2322: C_W = 2 \\cdot 2d\\delta^2 = 4d\\delta^2\n2323: $$\n2324: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction_ASSEMBLED",
        "chapter_index": 10,
        "chapter_file": "chapter_10.json",
        "section_id": "## 8. Main Wasserstein-2 Contraction Theorem"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-separation-threshold",
      "title": "Asymptotic Separation Threshold",
      "start_line": 2330,
      "end_line": 2350,
      "header_lines": [
        2331
      ],
      "content_start": 2333,
      "content_end": 2349,
      "content": "2333: :label: def-separation-threshold\n2334: \n2335: The separation threshold $L_0(\\delta, \\varepsilon)$ is defined as:\n2336: $$\n2337: L_0 := \\max\\left(D_{\\min}, \\frac{2\\sqrt{d}\\delta}{\\sqrt{\\kappa_B f_{UH} q_{\\min}}}\\right)\n2338: $$\n2339: \n2340: where:\n2341: - $D_{\\min}$ is the minimum separation for geometric partition (from Axiom 3.3)\n2342: - The second term ensures Case A expansion is negligible: $\\varepsilon_A = 4d\\delta^2/L^2 < \\kappa_B f_{UH} q_{\\min}$\n2343: \n2344: **Physical Interpretation**: Below $L_0$, the swarms are too close for the geometric partition to be well-defined, or the noise $\\delta$ dominates over the geometric contraction. Above $L_0$, we enter the **asymptotic regime** where Wasserstein-2 contraction holds.\n2345: \n2346: **Typical Value**: For $d = 10$, $\\delta = 0.1$, $\\kappa_B = 0.01$, $f_{UH} = 0.0025$, $q_{\\min} = 0.001$:\n2347: $$\n2348: L_0 \\approx \\max\\left(D_{\\min}, \\frac{2\\sqrt{10} \\cdot 0.1}{\\sqrt{0.01 \\cdot 0.0025 \\cdot 0.001}}\\right) \\approx \\max(D_{\\min}, 126)\n2349: $$",
      "metadata": {
        "label": "def-separation-threshold"
      },
      "section": "## 8. Main Wasserstein-2 Contraction Theorem",
      "references": [],
      "raw_directive": "2330: #### 8.2.3. Separation Threshold $L_0$\n2331: \n2332: :::{prf:definition} Asymptotic Separation Threshold\n2333: :label: def-separation-threshold\n2334: \n2335: The separation threshold $L_0(\\delta, \\varepsilon)$ is defined as:\n2336: $$\n2337: L_0 := \\max\\left(D_{\\min}, \\frac{2\\sqrt{d}\\delta}{\\sqrt{\\kappa_B f_{UH} q_{\\min}}}\\right)\n2338: $$\n2339: \n2340: where:\n2341: - $D_{\\min}$ is the minimum separation for geometric partition (from Axiom 3.3)\n2342: - The second term ensures Case A expansion is negligible: $\\varepsilon_A = 4d\\delta^2/L^2 < \\kappa_B f_{UH} q_{\\min}$\n2343: \n2344: **Physical Interpretation**: Below $L_0$, the swarms are too close for the geometric partition to be well-defined, or the noise $\\delta$ dominates over the geometric contraction. Above $L_0$, we enter the **asymptotic regime** where Wasserstein-2 contraction holds.\n2345: \n2346: **Typical Value**: For $d = 10$, $\\delta = 0.1$, $\\kappa_B = 0.01$, $f_{UH} = 0.0025$, $q_{\\min} = 0.001$:\n2347: $$\n2348: L_0 \\approx \\max\\left(D_{\\min}, \\frac{2\\sqrt{10} \\cdot 0.1}{\\sqrt{0.01 \\cdot 0.0025 \\cdot 0.001}}\\right) \\approx \\max(D_{\\min}, 126)\n2349: $$\n2350: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "04_wasserstein_contraction_ASSEMBLED",
        "chapter_index": 10,
        "chapter_file": "chapter_10.json",
        "section_id": "## 8. Main Wasserstein-2 Contraction Theorem"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-kinetic-operator-stratonovich",
      "title": "The Kinetic Operator (Stratonovich Form)",
      "start_line": 176,
      "end_line": 210,
      "header_lines": [
        177
      ],
      "content_start": 179,
      "content_end": 209,
      "content": "179: :label: def-kinetic-operator-stratonovich\n180: \n181: The kinetic operator $\\Psi_{\\text{kin}}$ evolves the swarm for a time interval $\\tau > 0$ according to the coupled Stratonovich SDEs:\n182: \n183: $$\n184: \\begin{aligned}\n185: dx_t &= v_t \\, dt \\\\\n186: dv_t &= F(x_t) \\, dt - \\gamma(v_t - u(x_t)) \\, dt + \\Sigma(x_t, v_t) \\circ dW_t\n187: \\end{aligned}\n188: \n189: $$\n190: \n191: where:\n192: \n193: **Deterministic Terms:**\n194: - $F(x) = -\\nabla U(x)$: Force field from the **confining potential** $U: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$\n195: - $\\gamma > 0$: **Friction coefficient**\n196: - $u(x)$: **Local drift velocity** (typically $u \\equiv 0$ for simplicity)\n197: \n198: **Stochastic Term:**\n199: - $\\Sigma(x,v): \\mathcal{X}_{\\text{valid}} \\times \\mathbb{R}^d \\to \\mathbb{R}^{d \\times d}$: **Diffusion tensor**\n200: - $W_t$: Standard $d$-dimensional Brownian motion\n201: - $\\circ$: **Stratonovich product**\n202: \n203: **Boundary Condition:**\n204: After evolving for time $\\tau$, the walker status is updated:\n205: \n206: $$\n207: s_i^{(t+1)} = \\mathbf{1}_{\\mathcal{X}_{\\text{valid}}}(x_i(t+\\tau))\n208: \n209: $$",
      "metadata": {
        "label": "def-kinetic-operator-stratonovich"
      },
      "section": "## 3. The Kinetic Operator with Stratonovich Formulation",
      "references": [],
      "raw_directive": "176: ### 3.2. The Kinetic SDE\n177: \n178: :::{prf:definition} The Kinetic Operator (Stratonovich Form)\n179: :label: def-kinetic-operator-stratonovich\n180: \n181: The kinetic operator $\\Psi_{\\text{kin}}$ evolves the swarm for a time interval $\\tau > 0$ according to the coupled Stratonovich SDEs:\n182: \n183: $$\n184: \\begin{aligned}\n185: dx_t &= v_t \\, dt \\\\\n186: dv_t &= F(x_t) \\, dt - \\gamma(v_t - u(x_t)) \\, dt + \\Sigma(x_t, v_t) \\circ dW_t\n187: \\end{aligned}\n188: \n189: $$\n190: \n191: where:\n192: \n193: **Deterministic Terms:**\n194: - $F(x) = -\\nabla U(x)$: Force field from the **confining potential** $U: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$\n195: - $\\gamma > 0$: **Friction coefficient**\n196: - $u(x)$: **Local drift velocity** (typically $u \\equiv 0$ for simplicity)\n197: \n198: **Stochastic Term:**\n199: - $\\Sigma(x,v): \\mathcal{X}_{\\text{valid}} \\times \\mathbb{R}^d \\to \\mathbb{R}^{d \\times d}$: **Diffusion tensor**\n200: - $W_t$: Standard $d$-dimensional Brownian motion\n201: - $\\circ$: **Stratonovich product**\n202: \n203: **Boundary Condition:**\n204: After evolving for time $\\tau$, the walker status is updated:\n205: \n206: $$\n207: s_i^{(t+1)} = \\mathbf{1}_{\\mathcal{X}_{\\text{valid}}}(x_i(t+\\tau))\n208: \n209: $$\n210: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_kinetic_contraction",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Kinetic Operator with Stratonovich Formulation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-baoab-integrator",
      "title": "BAOAB Integrator for Stratonovich Langevin",
      "start_line": 482,
      "end_line": 531,
      "header_lines": [
        483
      ],
      "content_start": 485,
      "content_end": 530,
      "content": "485: :label: def-baoab-integrator\n486: \n487: The **BAOAB splitting scheme** (Leimkuhler & Matthews, 2013) is a symmetric, second-order accurate integrator for underdamped Langevin dynamics:\n488: \n489: **B-step (velocity drift from force):**\n490: \n491: $$\n492: v^{(1)} = v^{(0)} + \\frac{\\tau}{2} F(x^{(0)})\n493: \n494: $$\n495: \n496: **A-step (position update):**\n497: \n498: $$\n499: x^{(1)} = x^{(0)} + \\frac{\\tau}{2} v^{(1)}\n500: \n501: $$\n502: \n503: **O-step (Ornstein-Uhlenbeck for friction + noise):**\n504: \n505: $$\n506: v^{(2)} = e^{-\\gamma \\tau} v^{(1)} + \\sqrt{\\frac{\\sigma_v^2}{\\gamma}(1 - e^{-2\\gamma\\tau})} \\, \\xi\n507: \n508: $$\n509: \n510: where $\\xi \\sim \\mathcal{N}(0, I_d)$.\n511: \n512: **A-step (position update, continued):**\n513: \n514: $$\n515: x^{(2)} = x^{(1)} + \\frac{\\tau}{2} v^{(2)}\n516: \n517: $$\n518: \n519: **B-step (velocity drift, continued):**\n520: \n521: $$\n522: v^{(3)} = v^{(2)} + \\frac{\\tau}{2} F(x^{(2)})\n523: \n524: $$\n525: \n526: **Output:** $(x^{(2)}, v^{(3)})$\n527: \n528: **Advantages:**\n529: - Symplectic (preserves phase space volume)\n530: - Second-order accurate in $\\tau$",
      "metadata": {
        "label": "def-baoab-integrator"
      },
      "section": "## 3. The Kinetic Operator with Stratonovich Formulation",
      "references": [],
      "raw_directive": "482: For practical implementation, the Stratonovich SDE is discretized using splitting schemes.\n483: \n484: :::{prf:definition} BAOAB Integrator for Stratonovich Langevin\n485: :label: def-baoab-integrator\n486: \n487: The **BAOAB splitting scheme** (Leimkuhler & Matthews, 2013) is a symmetric, second-order accurate integrator for underdamped Langevin dynamics:\n488: \n489: **B-step (velocity drift from force):**\n490: \n491: $$\n492: v^{(1)} = v^{(0)} + \\frac{\\tau}{2} F(x^{(0)})\n493: \n494: $$\n495: \n496: **A-step (position update):**\n497: \n498: $$\n499: x^{(1)} = x^{(0)} + \\frac{\\tau}{2} v^{(1)}\n500: \n501: $$\n502: \n503: **O-step (Ornstein-Uhlenbeck for friction + noise):**\n504: \n505: $$\n506: v^{(2)} = e^{-\\gamma \\tau} v^{(1)} + \\sqrt{\\frac{\\sigma_v^2}{\\gamma}(1 - e^{-2\\gamma\\tau})} \\, \\xi\n507: \n508: $$\n509: \n510: where $\\xi \\sim \\mathcal{N}(0, I_d)$.\n511: \n512: **A-step (position update, continued):**\n513: \n514: $$\n515: x^{(2)} = x^{(1)} + \\frac{\\tau}{2} v^{(2)}\n516: \n517: $$\n518: \n519: **B-step (velocity drift, continued):**\n520: \n521: $$\n522: v^{(3)} = v^{(2)} + \\frac{\\tau}{2} F(x^{(2)})\n523: \n524: $$\n525: \n526: **Output:** $(x^{(2)}, v^{(3)})$\n527: \n528: **Advantages:**\n529: - Symplectic (preserves phase space volume)\n530: - Second-order accurate in $\\tau$\n531: - Correct invariant distribution in the $\\tau \\to 0$ limit",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_kinetic_contraction",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Kinetic Operator with Stratonovich Formulation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-hypocoercive-norm",
      "title": "The Hypocoercive Norm",
      "start_line": 1362,
      "end_line": 1394,
      "header_lines": [
        1363
      ],
      "content_start": 1365,
      "content_end": 1393,
      "content": "1365: :label: def-hypocoercive-norm\n1366: \n1367: For the coupled swarm state $(S_1, S_2)$, define the **hypocoercive norm squared** on the phase-space difference:\n1368: \n1369: $$\n1370: \\|\\!(\\Delta x, \\Delta v)\\!\\|_h^2 := \\|\\Delta x\\|^2 + \\lambda_v \\|\\Delta v\\|^2 + b \\langle \\Delta x, \\Delta v \\rangle\n1371: \n1372: $$\n1373: \n1374: where:\n1375: - $\\Delta x = x_1 - x_2$: Position difference\n1376: - $\\Delta v = v_1 - v_2$: Velocity difference\n1377: - $\\lambda_v > 0$: Velocity weight (of order $1/\\gamma$)\n1378: - $b \\in \\mathbb{R}$: Coupling coefficient (chosen appropriately)\n1379: \n1380: **For the empirical measures:** The hypocoercive Wasserstein distance is:\n1381: \n1382: $$\n1383: V_W(\\mu_1, \\mu_2) = W_h^2(\\mu_1, \\mu_2)\n1384: \n1385: $$\n1386: \n1387: where $W_h$ is the Wasserstein-2 distance with cost $\\|\\!(\\Delta x, \\Delta v)\\!\\|_h^2$.\n1388: \n1389: **Decomposition (from 03_cloning.md):**\n1390: \n1391: $$\n1392: V_W = V_{\\text{loc}} + V_{\\text{struct}}\n1393: ",
      "metadata": {
        "label": "def-hypocoercive-norm"
      },
      "section": "## 4. Hypocoercive Contraction of Inter-Swarm Error",
      "references": [],
      "raw_directive": "1362: To analyze hypocoercivity, we must work with a specially designed norm that couples position and velocity.\n1363: \n1364: :::{prf:definition} The Hypocoercive Norm\n1365: :label: def-hypocoercive-norm\n1366: \n1367: For the coupled swarm state $(S_1, S_2)$, define the **hypocoercive norm squared** on the phase-space difference:\n1368: \n1369: $$\n1370: \\|\\!(\\Delta x, \\Delta v)\\!\\|_h^2 := \\|\\Delta x\\|^2 + \\lambda_v \\|\\Delta v\\|^2 + b \\langle \\Delta x, \\Delta v \\rangle\n1371: \n1372: $$\n1373: \n1374: where:\n1375: - $\\Delta x = x_1 - x_2$: Position difference\n1376: - $\\Delta v = v_1 - v_2$: Velocity difference\n1377: - $\\lambda_v > 0$: Velocity weight (of order $1/\\gamma$)\n1378: - $b \\in \\mathbb{R}$: Coupling coefficient (chosen appropriately)\n1379: \n1380: **For the empirical measures:** The hypocoercive Wasserstein distance is:\n1381: \n1382: $$\n1383: V_W(\\mu_1, \\mu_2) = W_h^2(\\mu_1, \\mu_2)\n1384: \n1385: $$\n1386: \n1387: where $W_h$ is the Wasserstein-2 distance with cost $\\|\\!(\\Delta x, \\Delta v)\\!\\|_h^2$.\n1388: \n1389: **Decomposition (from 03_cloning.md):**\n1390: \n1391: $$\n1392: V_W = V_{\\text{loc}} + V_{\\text{struct}}\n1393: \n1394: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_kinetic_contraction",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Hypocoercive Contraction of Inter-Swarm Error"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-velocity-variance-recall",
      "title": "Velocity Variance Component (Recall)",
      "start_line": 1981,
      "end_line": 1994,
      "header_lines": [
        1982
      ],
      "content_start": 1984,
      "content_end": 1993,
      "content": "1984: :label: def-velocity-variance-recall\n1985: \n1986: From 03_cloning.md Definition 3.3.1, the velocity variance component of the Lyapunov function is:\n1987: \n1988: $$\n1989: V_{\\text{Var},v}(S_1, S_2) = \\frac{1}{N}\\sum_{k=1,2} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{v,k,i}\\|^2\n1990: \n1991: $$\n1992: \n1993: where $\\delta_{v,k,i} = v_{k,i} - \\mu_{v,k}$ is the centered velocity of walker $i$ in swarm $k$.",
      "metadata": {
        "label": "def-velocity-variance-recall"
      },
      "section": "## 5. Velocity Variance Dissipation via Langevin Friction",
      "references": [],
      "raw_directive": "1981: ### 5.2. Velocity Variance Definition (Recall)\n1982: \n1983: :::{prf:definition} Velocity Variance Component (Recall)\n1984: :label: def-velocity-variance-recall\n1985: \n1986: From 03_cloning.md Definition 3.3.1, the velocity variance component of the Lyapunov function is:\n1987: \n1988: $$\n1989: V_{\\text{Var},v}(S_1, S_2) = \\frac{1}{N}\\sum_{k=1,2} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{v,k,i}\\|^2\n1990: \n1991: $$\n1992: \n1993: where $\\delta_{v,k,i} = v_{k,i} - \\mu_{v,k}$ is the centered velocity of walker $i$ in swarm $k$.\n1994: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_kinetic_contraction",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. Velocity Variance Dissipation via Langevin Friction"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-positional-variance-recall",
      "title": "Positional Variance Component (Recall)",
      "start_line": 2387,
      "end_line": 2398,
      "header_lines": [
        2388
      ],
      "content_start": 2390,
      "content_end": 2397,
      "content": "2390: :label: def-positional-variance-recall\n2391: \n2392: From 03_cloning.md Definition 3.3.1:\n2393: \n2394: $$\n2395: V_{\\text{Var},x}(S_1, S_2) = \\frac{1}{N}\\sum_{k=1,2} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2\n2396: \n2397: $$",
      "metadata": {
        "label": "def-positional-variance-recall"
      },
      "section": "## 6. Positional Diffusion and Bounded Expansion",
      "references": [],
      "raw_directive": "2387: ### 6.2. Positional Variance (Recall)\n2388: \n2389: :::{prf:definition} Positional Variance Component (Recall)\n2390: :label: def-positional-variance-recall\n2391: \n2392: From 03_cloning.md Definition 3.3.1:\n2393: \n2394: $$\n2395: V_{\\text{Var},x}(S_1, S_2) = \\frac{1}{N}\\sum_{k=1,2} \\sum_{i \\in \\mathcal{A}(S_k)} \\|\\delta_{x,k,i}\\|^2\n2396: \n2397: $$\n2398: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_kinetic_contraction",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Positional Diffusion and Bounded Expansion"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-boundary-potential-recall",
      "title": "Boundary Potential (Recall)",
      "start_line": 2758,
      "end_line": 2771,
      "header_lines": [
        2759
      ],
      "content_start": 2761,
      "content_end": 2770,
      "content": "2761: :label: def-boundary-potential-recall\n2762: \n2763: From 03_cloning.md Definition 3.3.1:\n2764: \n2765: $$\n2766: W_b(S_1, S_2) = \\frac{1}{N}\\sum_{k=1,2} \\sum_{i \\in \\mathcal{A}(S_k)} \\varphi_{\\text{barrier}}(x_{k,i})\n2767: \n2768: $$\n2769: \n2770: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function that:",
      "metadata": {
        "label": "def-boundary-potential-recall"
      },
      "section": "## 7. Boundary Potential Contraction via Confining Potential",
      "references": [],
      "raw_directive": "2758: ### 7.2. Boundary Potential (Recall)\n2759: \n2760: :::{prf:definition} Boundary Potential (Recall)\n2761: :label: def-boundary-potential-recall\n2762: \n2763: From 03_cloning.md Definition 3.3.1:\n2764: \n2765: $$\n2766: W_b(S_1, S_2) = \\frac{1}{N}\\sum_{k=1,2} \\sum_{i \\in \\mathcal{A}(S_k)} \\varphi_{\\text{barrier}}(x_{k,i})\n2767: \n2768: $$\n2769: \n2770: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function that:\n2771: - Equals zero in the safe interior",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_kinetic_contraction",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. Boundary Potential Contraction via Confining Potential"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-os-reflection-operator",
      "title": "Euclidean Reflection Operator",
      "start_line": 9,
      "end_line": 25,
      "header_lines": [
        10
      ],
      "content_start": 12,
      "content_end": 24,
      "content": "12: :label: def-os-reflection-operator\n13: \n14: For a coordinate direction $\\mu \\in \\{0, 1, 2, 3\\}$, the **reflection operator** $\\theta_\\mu: \\mathbb{R}^4 \\to \\mathbb{R}^4$ is defined by:\n15: \n16: $$\n17: \\theta_\\mu(x^0, x^1, x^2, x^3) := (x^0, \\ldots, -x^\\mu, \\ldots, x^3)\n18: $$\n19: \n20: For the **time direction** (choosing $\\mu = 0$), we write:\n21: \n22: $$\n23: \\theta(x^0, \\vec{x}) := (-x^0, \\vec{x})\n24: $$",
      "metadata": {
        "label": "def-os-reflection-operator"
      },
      "section": "## OS2: Reflection Positivity",
      "references": [],
      "raw_directive": "9: ### Preliminary: Reflection Operator\n10: \n11: :::{prf:definition} Euclidean Reflection Operator\n12: :label: def-os-reflection-operator\n13: \n14: For a coordinate direction $\\mu \\in \\{0, 1, 2, 3\\}$, the **reflection operator** $\\theta_\\mu: \\mathbb{R}^4 \\to \\mathbb{R}^4$ is defined by:\n15: \n16: $$\n17: \\theta_\\mu(x^0, x^1, x^2, x^3) := (x^0, \\ldots, -x^\\mu, \\ldots, x^3)\n18: $$\n19: \n20: For the **time direction** (choosing $\\mu = 0$), we write:\n21: \n22: $$\n23: \\theta(x^0, \\vec{x}) := (-x^0, \\vec{x})\n24: $$\n25: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_osterwalder_schrader_verification",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## OS2: Reflection Positivity"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-os-half-space",
      "title": "Half-Space and Test Functions",
      "start_line": 27,
      "end_line": 37,
      "header_lines": [
        28
      ],
      "content_start": 30,
      "content_end": 36,
      "content": "30: :label: def-os-half-space\n31: \n32: The **time-positive half-space** is:\n33: \n34: $$\n35: \\mathcal{H}_+ := \\{x \\in \\mathbb{R}^4 : x^0 \\geq 0\\}\n36: $$",
      "metadata": {
        "label": "def-os-half-space"
      },
      "section": "## OS2: Reflection Positivity",
      "references": [],
      "raw_directive": "27: :::\n28: \n29: :::{prf:definition} Half-Space and Test Functions\n30: :label: def-os-half-space\n31: \n32: The **time-positive half-space** is:\n33: \n34: $$\n35: \\mathcal{H}_+ := \\{x \\in \\mathbb{R}^4 : x^0 \\geq 0\\}\n36: $$\n37: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_osterwalder_schrader_verification",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## OS2: Reflection Positivity"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-os-interaction-scale",
      "title": "Companion Interaction Scale",
      "start_line": 345,
      "end_line": 357,
      "header_lines": [
        346
      ],
      "content_start": 348,
      "content_end": 356,
      "content": "348: :label: def-os-interaction-scale\n349: \n350: The Crystalline Gas companion interaction kernel has a **scale parameter** $\\sigma > 0$:\n351: \n352: $$\n353: K(x, y) = \\exp\\left(-\\frac{\\|x - y\\|^2}{2\\sigma^2}\\right)\n354: $$\n355: \n356: This sets the **correlation length scale** for walker interactions:",
      "metadata": {
        "label": "def-os-interaction-scale"
      },
      "section": "## OS4: Clustering (Exponential Decay of Correlations)",
      "references": [],
      "raw_directive": "345: ### Gaussian Kernel Scale Parameter\n346: \n347: :::{prf:definition} Companion Interaction Scale\n348: :label: def-os-interaction-scale\n349: \n350: The Crystalline Gas companion interaction kernel has a **scale parameter** $\\sigma > 0$:\n351: \n352: $$\n353: K(x, y) = \\exp\\left(-\\frac{\\|x - y\\|^2}{2\\sigma^2}\\right)\n354: $$\n355: \n356: This sets the **correlation length scale** for walker interactions:\n357: - Walkers separated by $\\|x - y\\| \\ll \\sigma$ are **strongly coupled**",
      "_registry_context": {
        "stage": "directives",
        "document_id": "05_osterwalder_schrader_verification",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## OS4: Clustering (Exponential Decay of Correlations)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-full-lyapunov-recall",
      "title": "Synergistic Lyapunov Function (Recall)",
      "start_line": 227,
      "end_line": 241,
      "header_lines": [
        228
      ],
      "content_start": 230,
      "content_end": 240,
      "content": "230: :label: def-full-lyapunov-recall\n231: \n232: From 03_cloning.md Definition 3.3.1:\n233: \n234: $$\n235: V_{\\text{total}}(S_1, S_2) = V_W(S_1, S_2) + c_V V_{\\text{Var}}(S_1, S_2) + c_B W_b(S_1, S_2)\n236: $$\n237: \n238: where:\n239: - $V_W = V_{\\text{loc}} + V_{\\text{struct}}$: Inter-swarm error\n240: - $V_{\\text{Var}} = V_{\\text{Var},x} + V_{\\text{Var},v}$: Intra-swarm variance",
      "metadata": {
        "label": "def-full-lyapunov-recall"
      },
      "section": "## 3. Synergistic Composition and Foster-Lyapunov Condition",
      "references": [],
      "raw_directive": "227: ### 3.2. The Full Lyapunov Function (Recall)\n228: \n229: :::{prf:definition} Synergistic Lyapunov Function (Recall)\n230: :label: def-full-lyapunov-recall\n231: \n232: From 03_cloning.md Definition 3.3.1:\n233: \n234: $$\n235: V_{\\text{total}}(S_1, S_2) = V_W(S_1, S_2) + c_V V_{\\text{Var}}(S_1, S_2) + c_B W_b(S_1, S_2)\n236: $$\n237: \n238: where:\n239: - $V_W = V_{\\text{loc}} + V_{\\text{struct}}$: Inter-swarm error\n240: - $V_{\\text{Var}} = V_{\\text{Var},x} + V_{\\text{Var},v}$: Intra-swarm variance\n241: - $W_b$: Boundary potential",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. Synergistic Composition and Foster-Lyapunov Condition"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cemetery-state",
      "title": "The Cemetery State",
      "start_line": 576,
      "end_line": 591,
      "header_lines": [
        577
      ],
      "content_start": 579,
      "content_end": 590,
      "content": "579: :label: def-cemetery-state\n580: \n581: The **cemetery state** $\\dagger$ is the absorbing state where all walkers are dead:\n582: \n583: $$\\dagger := \\{(x_i, v_i, 0) : i = 1, \\ldots, N\\}$$\n584: \n585: Once the swarm enters this state, it remains there forever (no walkers to clone or evolve).\n586: \n587: **Extended State Space:**\n588: $$\\bar{\\Sigma}_N := \\Sigma_N \\cup \\{\\dagger\\}$$\n589: \n590: The Euclidean Gas is a **Markov chain on $\\bar{\\Sigma}_N$** with:",
      "metadata": {
        "label": "def-cemetery-state"
      },
      "section": "## 4. Main Convergence Theorem and Quasi-Stationary Distribution",
      "references": [],
      "raw_directive": "576: ### 4.2. The Cemetery State and Absorption\n577: \n578: :::{prf:definition} The Cemetery State\n579: :label: def-cemetery-state\n580: \n581: The **cemetery state** $\\dagger$ is the absorbing state where all walkers are dead:\n582: \n583: $$\\dagger := \\{(x_i, v_i, 0) : i = 1, \\ldots, N\\}$$\n584: \n585: Once the swarm enters this state, it remains there forever (no walkers to clone or evolve).\n586: \n587: **Extended State Space:**\n588: $$\\bar{\\Sigma}_N := \\Sigma_N \\cup \\{\\dagger\\}$$\n589: \n590: The Euclidean Gas is a **Markov chain on $\\bar{\\Sigma}_N$** with:\n591: - **Transient states:** All configurations with $|\\mathcal{A}(S)| \\geq 1$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Main Convergence Theorem and Quasi-Stationary Distribution"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-qsd",
      "title": "Quasi-Stationary Distribution (QSD)",
      "start_line": 611,
      "end_line": 625,
      "header_lines": [
        612
      ],
      "content_start": 614,
      "content_end": 624,
      "content": "614: :label: def-qsd\n615: \n616: A **quasi-stationary distribution** is a probability measure $\\nu_{\\text{QSD}}$ on the alive state space $\\Sigma_N^{\\text{alive}} := \\{S : |\\mathcal{A}(S)| \\geq 1\\}$ such that:\n617: \n618: $$\n619: P(S_{t+1} \\in A \\mid S_t \\sim \\nu_{\\text{QSD}}, \\text{not absorbed}) = \\nu_{\\text{QSD}}(A)\n620: $$\n621: \n622: for all measurable sets $A \\subseteq \\Sigma_N^{\\text{alive}}$.\n623: \n624: **Intuition:** $\\nu_{\\text{QSD}}$ is the \"equilibrium conditioned on survival.\" If the swarm starts from $\\nu_{\\text{QSD}}$ and survives for one more step, it remains distributed according to $\\nu_{\\text{QSD}}$.",
      "metadata": {
        "label": "def-qsd"
      },
      "section": "## 4. Main Convergence Theorem and Quasi-Stationary Distribution",
      "references": [],
      "raw_directive": "611: ### 4.3. Quasi-Stationary Distributions\n612: \n613: :::{prf:definition} Quasi-Stationary Distribution (QSD)\n614: :label: def-qsd\n615: \n616: A **quasi-stationary distribution** is a probability measure $\\nu_{\\text{QSD}}$ on the alive state space $\\Sigma_N^{\\text{alive}} := \\{S : |\\mathcal{A}(S)| \\geq 1\\}$ such that:\n617: \n618: $$\n619: P(S_{t+1} \\in A \\mid S_t \\sim \\nu_{\\text{QSD}}, \\text{not absorbed}) = \\nu_{\\text{QSD}}(A)\n620: $$\n621: \n622: for all measurable sets $A \\subseteq \\Sigma_N^{\\text{alive}}$.\n623: \n624: **Intuition:** $\\nu_{\\text{QSD}}$ is the \"equilibrium conditioned on survival.\" If the swarm starts from $\\nu_{\\text{QSD}}$ and survives for one more step, it remains distributed according to $\\nu_{\\text{QSD}}$.\n625: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Main Convergence Theorem and Quasi-Stationary Distribution"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-complete-parameter-space",
      "title": "Complete Parameter Space",
      "start_line": 2205,
      "end_line": 2238,
      "header_lines": [
        2206
      ],
      "content_start": 2208,
      "content_end": 2237,
      "content": "2208: :label: def-complete-parameter-space\n2209: \n2210: The Euclidean Gas algorithm is controlled by the parameter vector:\n2211: \n2212: $$\n2213: \\mathbf{P} = (\\lambda, \\sigma_x, \\alpha_{\\text{rest}}, \\lambda_{\\text{alg}}, \\epsilon_c, \\epsilon_d, \\gamma, \\sigma_v, \\tau, N, \\kappa_{\\text{wall}}, d_{\\text{safe}}) \\in \\mathbb{R}_{+}^{12}\n2214: $$\n2215: \n2216: where:\n2217: \n2218: **Cloning Operator Parameters:**\n2219: 1. $\\lambda \\in (0, 1]$ - **Cloning rate**: frequency of resampling events\n2220: 2. $\\sigma_x > 0$ - **Position jitter**: Gaussian noise variance added to cloned positions $x'_i = x_{c_i} + \\sigma_x \\zeta_i^x$\n2221: 3. $\\alpha_{\\text{rest}} \\in [0, 1]$ - **Restitution coefficient**: interpolates between perfectly inelastic ($\\alpha=0$) and perfectly elastic ($\\alpha=1$) velocity collisions\n2222: 4. $\\lambda_{\\text{alg}} \\geq 0$ - **Algorithmic distance weight**: controls velocity component in companion selection metric $d_{\\text{alg}}(i,j)^2 = \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2$\n2223: 5. $\\epsilon_c > 0$ - **Companion selection range**: softmax temperature for cloning companion pairing\n2224: 6. $\\epsilon_d > 0$ - **Diversity measurement range**: softmax temperature for diversity companion pairing\n2225: \n2226: **Langevin Dynamics Parameters:**\n2227: 7. $\\gamma > 0$ - **Friction coefficient**: velocity damping rate in Langevin equation\n2228: 8. $\\sigma_v > 0$ - **Velocity noise intensity**: thermal fluctuation strength\n2229: 9. $\\tau > 0$ - **Integration timestep**: BAOAB discretization parameter\n2230: \n2231: **System Parameters:**\n2232: 10. $N \\in \\mathbb{N}$ - **Swarm size**: number of walkers\n2233: 11. $\\kappa_{\\text{wall}} > 0$ - **Boundary potential stiffness**: confining force strength\n2234: 12. $d_{\\text{safe}} > 0$ - **Safe Harbor distance**: threshold for boundary danger zone\n2235: \n2236: **Landscape Parameters (given, not tunable):**\n2237: - $\\lambda_{\\min} > 0$ - minimum eigenvalue of Hessian $\\nabla^2 U(x)$",
      "metadata": {
        "label": "def-complete-parameter-space"
      },
      "section": "## 6. Spectral Analysis of Parameter Coupling",
      "references": [],
      "raw_directive": "2205: From the analysis in Chapter 7 and the cloning operator specification in 03_cloning.md, the **complete tunable parameter space** consists of:\n2206: \n2207: :::{prf:definition} Complete Parameter Space\n2208: :label: def-complete-parameter-space\n2209: \n2210: The Euclidean Gas algorithm is controlled by the parameter vector:\n2211: \n2212: $$\n2213: \\mathbf{P} = (\\lambda, \\sigma_x, \\alpha_{\\text{rest}}, \\lambda_{\\text{alg}}, \\epsilon_c, \\epsilon_d, \\gamma, \\sigma_v, \\tau, N, \\kappa_{\\text{wall}}, d_{\\text{safe}}) \\in \\mathbb{R}_{+}^{12}\n2214: $$\n2215: \n2216: where:\n2217: \n2218: **Cloning Operator Parameters:**\n2219: 1. $\\lambda \\in (0, 1]$ - **Cloning rate**: frequency of resampling events\n2220: 2. $\\sigma_x > 0$ - **Position jitter**: Gaussian noise variance added to cloned positions $x'_i = x_{c_i} + \\sigma_x \\zeta_i^x$\n2221: 3. $\\alpha_{\\text{rest}} \\in [0, 1]$ - **Restitution coefficient**: interpolates between perfectly inelastic ($\\alpha=0$) and perfectly elastic ($\\alpha=1$) velocity collisions\n2222: 4. $\\lambda_{\\text{alg}} \\geq 0$ - **Algorithmic distance weight**: controls velocity component in companion selection metric $d_{\\text{alg}}(i,j)^2 = \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2$\n2223: 5. $\\epsilon_c > 0$ - **Companion selection range**: softmax temperature for cloning companion pairing\n2224: 6. $\\epsilon_d > 0$ - **Diversity measurement range**: softmax temperature for diversity companion pairing\n2225: \n2226: **Langevin Dynamics Parameters:**\n2227: 7. $\\gamma > 0$ - **Friction coefficient**: velocity damping rate in Langevin equation\n2228: 8. $\\sigma_v > 0$ - **Velocity noise intensity**: thermal fluctuation strength\n2229: 9. $\\tau > 0$ - **Integration timestep**: BAOAB discretization parameter\n2230: \n2231: **System Parameters:**\n2232: 10. $N \\in \\mathbb{N}$ - **Swarm size**: number of walkers\n2233: 11. $\\kappa_{\\text{wall}} > 0$ - **Boundary potential stiffness**: confining force strength\n2234: 12. $d_{\\text{safe}} > 0$ - **Safe Harbor distance**: threshold for boundary danger zone\n2235: \n2236: **Landscape Parameters (given, not tunable):**\n2237: - $\\lambda_{\\min} > 0$ - minimum eigenvalue of Hessian $\\nabla^2 U(x)$\n2238: - $\\lambda_{\\max} > 0$ - maximum eigenvalue of Hessian $\\nabla^2 U(x)$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Spectral Analysis of Parameter Coupling"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-rate-sensitivity-matrix",
      "title": "Log-Sensitivity Matrix for Convergence Rates",
      "start_line": 2333,
      "end_line": 2351,
      "header_lines": [
        2334
      ],
      "content_start": 2336,
      "content_end": 2350,
      "content": "2336: :label: def-rate-sensitivity-matrix\n2337: \n2338: The **rate sensitivity matrix** $M_\\kappa \\in \\mathbb{R}^{4 \\times 12}$ is defined by:\n2339: \n2340: $$\n2341: (M_\\kappa)_{ij} = \\frac{\\partial \\log \\kappa_i}{\\partial \\log P_j}\\bigg|_{P_0}\n2342: $$\n2343: \n2344: where $\\kappa = (\\kappa_x, \\kappa_v, \\kappa_W, \\kappa_b)$ and $\\mathbf{P}$ is the parameter vector.\n2345: \n2346: **Physical meaning:** $(M_\\kappa)_{ij}$ is the **elasticity** of rate $i$ with respect to parameter $j$: a 1% increase in $P_j$ causes approximately $(M_\\kappa)_{ij}$% increase in $\\kappa_i$.\n2347: \n2348: **Small perturbation formula:**\n2349: \n2350: $$",
      "metadata": {
        "label": "def-rate-sensitivity-matrix"
      },
      "section": "## 6. Spectral Analysis of Parameter Coupling",
      "references": [],
      "raw_directive": "2333: #### 6.3.1. Rate Sensitivity Matrix $M_\\kappa$\n2334: \n2335: :::{prf:definition} Log-Sensitivity Matrix for Convergence Rates\n2336: :label: def-rate-sensitivity-matrix\n2337: \n2338: The **rate sensitivity matrix** $M_\\kappa \\in \\mathbb{R}^{4 \\times 12}$ is defined by:\n2339: \n2340: $$\n2341: (M_\\kappa)_{ij} = \\frac{\\partial \\log \\kappa_i}{\\partial \\log P_j}\\bigg|_{P_0}\n2342: $$\n2343: \n2344: where $\\kappa = (\\kappa_x, \\kappa_v, \\kappa_W, \\kappa_b)$ and $\\mathbf{P}$ is the parameter vector.\n2345: \n2346: **Physical meaning:** $(M_\\kappa)_{ij}$ is the **elasticity** of rate $i$ with respect to parameter $j$: a 1% increase in $P_j$ causes approximately $(M_\\kappa)_{ij}$% increase in $\\kappa_i$.\n2347: \n2348: **Small perturbation formula:**\n2349: \n2350: $$\n2351: \\frac{\\delta \\kappa_i}{\\kappa_i} \\approx \\sum_{j=1}^{12} (M_\\kappa)_{ij} \\frac{\\delta P_j}{P_j} + O(\\|\\delta \\mathbf{P}\\|^2)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Spectral Analysis of Parameter Coupling"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-equilibrium-sensitivity-matrix",
      "title": "Equilibrium Constant Sensitivity Matrix",
      "start_line": 2506,
      "end_line": 2514,
      "header_lines": [
        2507
      ],
      "content_start": 2509,
      "content_end": 2513,
      "content": "2509: :label: def-equilibrium-sensitivity-matrix\n2510: \n2511: $$\n2512: (M_C)_{ij} = \\frac{\\partial \\log C_i}{\\partial \\log P_j}\\bigg|_{P_0}\n2513: $$",
      "metadata": {
        "label": "def-equilibrium-sensitivity-matrix"
      },
      "section": "## 6. Spectral Analysis of Parameter Coupling",
      "references": [],
      "raw_directive": "2506: Similarly, we construct the matrix for equilibrium constants:\n2507: \n2508: :::{prf:definition} Equilibrium Constant Sensitivity Matrix\n2509: :label: def-equilibrium-sensitivity-matrix\n2510: \n2511: $$\n2512: (M_C)_{ij} = \\frac{\\partial \\log C_i}{\\partial \\log P_j}\\bigg|_{P_0}\n2513: $$\n2514: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Spectral Analysis of Parameter Coupling"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-parameter-optimization",
      "title": "Parameter Optimization Problem",
      "start_line": 2707,
      "end_line": 2735,
      "header_lines": [
        2708
      ],
      "content_start": 2710,
      "content_end": 2734,
      "content": "2710: :label: def-parameter-optimization\n2711: \n2712: $$\n2713: \\max_{\\mathbf{P} \\in \\mathbb{R}_{+}^{12}} \\kappa_{\\text{total}}(\\mathbf{P}) = \\max_{\\mathbf{P}} \\left[\\min(\\kappa_x, \\kappa_v, \\kappa_W, \\kappa_b) \\cdot (1 - \\epsilon_{\\text{coupling}}(\\mathbf{P}))\\right]\n2714: $$\n2715: \n2716: **Subject to:**\n2717: \n2718: 1. **Stability constraints:**\n2719:    $$\n2720:    \\gamma \\tau < 0.5, \\quad \\sqrt{\\lambda_{\\max}} \\tau < 1.0\n2721:    $$\n2722: \n2723: 2. **Feasibility constraints:**\n2724:    $$\n2725:    d_{\\text{safe}} > 3\\sqrt{C_x/\\kappa_x}, \\quad \\text{all } P_i > 0\n2726:    $$\n2727: \n2728: 3. **Cost budget** (optional):\n2729:    $$\n2730:    N \\leq N_{\\max}, \\quad \\lambda \\leq \\lambda_{\\max}\n2731:    $$\n2732: \n2733: 4. **Physical bounds:**\n2734:    $$",
      "metadata": {
        "label": "def-parameter-optimization"
      },
      "section": "## 6. Spectral Analysis of Parameter Coupling",
      "references": [],
      "raw_directive": "2707: #### 6.5.1. Optimization Problem Formulation\n2708: \n2709: :::{prf:definition} Parameter Optimization Problem\n2710: :label: def-parameter-optimization\n2711: \n2712: $$\n2713: \\max_{\\mathbf{P} \\in \\mathbb{R}_{+}^{12}} \\kappa_{\\text{total}}(\\mathbf{P}) = \\max_{\\mathbf{P}} \\left[\\min(\\kappa_x, \\kappa_v, \\kappa_W, \\kappa_b) \\cdot (1 - \\epsilon_{\\text{coupling}}(\\mathbf{P}))\\right]\n2714: $$\n2715: \n2716: **Subject to:**\n2717: \n2718: 1. **Stability constraints:**\n2719:    $$\n2720:    \\gamma \\tau < 0.5, \\quad \\sqrt{\\lambda_{\\max}} \\tau < 1.0\n2721:    $$\n2722: \n2723: 2. **Feasibility constraints:**\n2724:    $$\n2725:    d_{\\text{safe}} > 3\\sqrt{C_x/\\kappa_x}, \\quad \\text{all } P_i > 0\n2726:    $$\n2727: \n2728: 3. **Cost budget** (optional):\n2729:    $$\n2730:    N \\leq N_{\\max}, \\quad \\lambda \\leq \\lambda_{\\max}\n2731:    $$\n2732: \n2733: 4. **Physical bounds:**\n2734:    $$\n2735:    \\alpha_{\\text{rest}} \\in [0, 1]",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Spectral Analysis of Parameter Coupling"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-pareto-optimality",
      "title": "Pareto Optimality in Parameter Space",
      "start_line": 3411,
      "end_line": 3420,
      "header_lines": [
        3412
      ],
      "content_start": 3414,
      "content_end": 3419,
      "content": "3414: :label: def-pareto-optimality\n3415: \n3416: A parameter choice $\\mathbf{P}^*$ is **Pareto optimal** if there exists no other $\\mathbf{P}$ such that:\n3417: - $\\kappa_{\\text{total}}(\\mathbf{P}) \\geq \\kappa_{\\text{total}}(\\mathbf{P}^*)$ (at least as fast)\n3418: - $\\text{Cost}(\\mathbf{P}) \\leq \\text{Cost}(\\mathbf{P}^*)$ (at most as expensive)\n3419: - At least one inequality is strict",
      "metadata": {
        "label": "def-pareto-optimality"
      },
      "section": "## 6. Spectral Analysis of Parameter Coupling",
      "references": [],
      "raw_directive": "3411: When multiple objectives compete (speed vs. cost vs. robustness), compute the Pareto frontier.\n3412: \n3413: :::{prf:definition} Pareto Optimality in Parameter Space\n3414: :label: def-pareto-optimality\n3415: \n3416: A parameter choice $\\mathbf{P}^*$ is **Pareto optimal** if there exists no other $\\mathbf{P}$ such that:\n3417: - $\\kappa_{\\text{total}}(\\mathbf{P}) \\geq \\kappa_{\\text{total}}(\\mathbf{P}^*)$ (at least as fast)\n3418: - $\\text{Cost}(\\mathbf{P}) \\leq \\text{Cost}(\\mathbf{P}^*)$ (at most as expensive)\n3419: - At least one inequality is strict\n3420: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "06_convergence",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 6. Spectral Analysis of Parameter Coupling"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mean-field-phase-space",
      "title": "Phase Space",
      "start_line": 37,
      "end_line": 48,
      "header_lines": [
        38
      ],
      "content_start": 40,
      "content_end": 47,
      "content": "40: :label: def-mean-field-phase-space\n41: \n42: Let $X_{\\text{valid}} \\subset \\mathbb{R}^d$ be the bounded, convex domain with a $C^2$ boundary, and let $V_{\\text{alg}} := \\{v \\in \\mathbb{R}^d : \\|v\\| \\le V_{\\text{alg}}\\}$ be the closed ball of allowed velocities, as defined in the Euclidean Gas specification (*Chapter 2, Sec. 1.1*).\n43: \n44: The single-particle **phase space**, denoted $\\Omega$, is the Cartesian product of the valid position and velocity domains:\n45: \n46: $$\n47: \\Omega := X_{\\text{valid}} \\times V_{\\text{alg}}",
      "metadata": {
        "label": "def-mean-field-phase-space"
      },
      "section": "## 1. Foundations of the Mean-Field Model",
      "references": [],
      "raw_directive": "37: The single-particle **phase space** defines the complete set of possible kinematic states—position and velocity—that a particle can occupy. Its properties are not arbitrary but are a direct, faithful translation of the constraints imposed on the walkers in the discrete Euclidean Gas algorithm.\n38: \n39: :::{prf:definition} Phase Space\n40: :label: def-mean-field-phase-space\n41: \n42: Let $X_{\\text{valid}} \\subset \\mathbb{R}^d$ be the bounded, convex domain with a $C^2$ boundary, and let $V_{\\text{alg}} := \\{v \\in \\mathbb{R}^d : \\|v\\| \\le V_{\\text{alg}}\\}$ be the closed ball of allowed velocities, as defined in the Euclidean Gas specification (*Chapter 2, Sec. 1.1*).\n43: \n44: The single-particle **phase space**, denoted $\\Omega$, is the Cartesian product of the valid position and velocity domains:\n45: \n46: $$\n47: \\Omega := X_{\\text{valid}} \\times V_{\\text{alg}}\n48: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## 1. Foundations of the Mean-Field Model"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-phase-space-density",
      "title": "Phase-Space Density",
      "start_line": 59,
      "end_line": 79,
      "header_lines": [
        60
      ],
      "content_start": 62,
      "content_end": 78,
      "content": "62: :label: def-phase-space-density\n63: \n64: The state of the swarm's **alive population** at time $t \\ge 0$ is described by the **phase-space sub-probability density** $f: [0, \\infty) \\times \\Omega \\to [0, \\infty)$. For any time $t$, $f(t, \\cdot, \\cdot)$ is a function on the phase space such that for any measurable subset $A \\subseteq \\Omega$, the mass of alive walkers in $A$ is given by the integral:\n65: \n66: $$\n67: \\text{Alive mass in } A = \\int_A f(t, z) dz.\n68: $$\n69: \n70: Just as integrating a city's population density over a neighborhood gives the number of people living there, integrating $f$ over a region of phase space gives the fraction of alive walkers expected to be in that region.\n71: \n72: The integral of this density gives the total mass of alive walkers, $m_a(t)$:\n73: \n74: $$\n75: m_a(t) := \\int_{\\Omega} f(t,x,v)\\,\\mathrm{d}x\\,\\mathrm{d}v \\le 1\n76: $$\n77: \n78: The mass of dead walkers is then given by $m_d(t) = 1 - m_a(t)$. The evolution of the system will be described by a coupled system for $f(t,z)$ and $m_d(t)$ that conserves the total mass $m_a(t) + m_d(t) = 1$.",
      "metadata": {
        "label": "def-phase-space-density"
      },
      "section": "## 1. Foundations of the Mean-Field Model",
      "references": [],
      "raw_directive": "59: With the arena defined, we can now introduce the central object of our analysis. Instead of tracking individual walkers, we track the continuous density of the probability cloud, $f(t,x,v)$. A high value of $f$ at a point $(t,x,v)$ signifies a high concentration of probability mass, meaning it is more likely to find a particle with that position and velocity at that time.\n60: \n61: :::{prf:definition} Phase-Space Density\n62: :label: def-phase-space-density\n63: \n64: The state of the swarm's **alive population** at time $t \\ge 0$ is described by the **phase-space sub-probability density** $f: [0, \\infty) \\times \\Omega \\to [0, \\infty)$. For any time $t$, $f(t, \\cdot, \\cdot)$ is a function on the phase space such that for any measurable subset $A \\subseteq \\Omega$, the mass of alive walkers in $A$ is given by the integral:\n65: \n66: $$\n67: \\text{Alive mass in } A = \\int_A f(t, z) dz.\n68: $$\n69: \n70: Just as integrating a city's population density over a neighborhood gives the number of people living there, integrating $f$ over a region of phase space gives the fraction of alive walkers expected to be in that region.\n71: \n72: The integral of this density gives the total mass of alive walkers, $m_a(t)$:\n73: \n74: $$\n75: m_a(t) := \\int_{\\Omega} f(t,x,v)\\,\\mathrm{d}x\\,\\mathrm{d}v \\le 1\n76: $$\n77: \n78: The mass of dead walkers is then given by $m_d(t) = 1 - m_a(t)$. The evolution of the system will be described by a coupled system for $f(t,z)$ and $m_d(t)$ that conserves the total mass $m_a(t) + m_d(t) = 1$.\n79: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## 1. Foundations of the Mean-Field Model"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mean-field-moments",
      "title": "Mean-Field Statistical Moments",
      "start_line": 114,
      "end_line": 140,
      "header_lines": [
        115
      ],
      "content_start": 117,
      "content_end": 139,
      "content": "117: :label: def-mean-field-moments\n118: \n119: Let $f(t, \\cdot)$ be the phase-space density at time $t$, with total alive mass $m_a(t) = \\int_\\Omega f(t,z)\\,\\mathrm{d}z$. The statistical moments required for the standardization pipeline are defined as the following **functionals** of $f$. The notation $\\mu[f]$ emphasizes that these are numbers that depend on the entire *shape* of the function $f$.\n120: \n121: The moments are computed with respect to the **normalized density of the alive population**, which is $f(t,z) / m_a(t)$. This normalization is critical for ensuring the mean-field model is a faithful limit of the N-particle system, where statistics are computed by averaging over the $k$ alive walkers.\n122: \n123: *   **Reward Moments:** The mean reward, $\\mu_R[f]$, is computed as the expected value over the normalized alive population:\n124: \n125:     $$\n126:     \\mu_R[f](t) := \\int_{\\Omega} R(z) \\frac{f(t,z)}{m_a(t)}\\,\\mathrm dz\n127:     $$\n128: \n129:     $$\n130:     \\sigma_R^2[f](t) := \\int_{\\Omega} \\bigl(R(z) - \\mu_R[f](t)\\bigr)^2 \\frac{f(t,z)}{m_a(t)}\\,\\mathrm dz\n131:     $$\n132: \n133: *   **Distance Moments:** The mean distance is the expectation of the distance between two particles drawn independently from the normalized alive population:\n134: \n135:     $$\n136:     \\mu_D[f](t) := \\iint_{\\Omega \\times \\Omega} d_{\\mathcal{Y}}(\\varphi(z), \\varphi(z')) \\frac{f(t,z)}{m_a(t)} \\frac{f(t,z')}{m_a(t)}\\,\\mathrm dz\\,\\mathrm dz'\n137:     $$\n138: \n139:     $$",
      "metadata": {
        "label": "def-mean-field-moments"
      },
      "section": "## 1. Foundations of the Mean-Field Model",
      "references": [],
      "raw_directive": "114: In the N-particle system, measurements are aggregated by computing empirical statistics over the finite set of alive walkers. In the mean-field limit, these discrete sums are replaced by integrals over the phase-space density $f$.\n115: \n116: :::{prf:definition} Mean-Field Statistical Moments\n117: :label: def-mean-field-moments\n118: \n119: Let $f(t, \\cdot)$ be the phase-space density at time $t$, with total alive mass $m_a(t) = \\int_\\Omega f(t,z)\\,\\mathrm{d}z$. The statistical moments required for the standardization pipeline are defined as the following **functionals** of $f$. The notation $\\mu[f]$ emphasizes that these are numbers that depend on the entire *shape* of the function $f$.\n120: \n121: The moments are computed with respect to the **normalized density of the alive population**, which is $f(t,z) / m_a(t)$. This normalization is critical for ensuring the mean-field model is a faithful limit of the N-particle system, where statistics are computed by averaging over the $k$ alive walkers.\n122: \n123: *   **Reward Moments:** The mean reward, $\\mu_R[f]$, is computed as the expected value over the normalized alive population:\n124: \n125:     $$\n126:     \\mu_R[f](t) := \\int_{\\Omega} R(z) \\frac{f(t,z)}{m_a(t)}\\,\\mathrm dz\n127:     $$\n128: \n129:     $$\n130:     \\sigma_R^2[f](t) := \\int_{\\Omega} \\bigl(R(z) - \\mu_R[f](t)\\bigr)^2 \\frac{f(t,z)}{m_a(t)}\\,\\mathrm dz\n131:     $$\n132: \n133: *   **Distance Moments:** The mean distance is the expectation of the distance between two particles drawn independently from the normalized alive population:\n134: \n135:     $$\n136:     \\mu_D[f](t) := \\iint_{\\Omega \\times \\Omega} d_{\\mathcal{Y}}(\\varphi(z), \\varphi(z')) \\frac{f(t,z)}{m_a(t)} \\frac{f(t,z')}{m_a(t)}\\,\\mathrm dz\\,\\mathrm dz'\n137:     $$\n138: \n139:     $$\n140:     \\sigma_D^2[f](t) := \\iint_{\\Omega \\times \\Omega} \\bigl(d_{\\mathcal{Y}}(\\varphi(z), \\varphi(z')) - \\mu_D[f](t)\\bigr)^2 \\frac{f(t,z)}{m_a(t)} \\frac{f(t,z')}{m_a(t)}\\,\\mathrm dz\\,\\mathrm dz'",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## 1. Foundations of the Mean-Field Model"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mean-field-patched-std",
      "title": "Mean-Field Regularized Standard Deviation",
      "start_line": 174,
      "end_line": 183,
      "header_lines": [
        175
      ],
      "content_start": 177,
      "content_end": 182,
      "content": "177: :label: def-mean-field-patched-std\n178: \n179: The **Mean-Field Regularized Standard Deviations** are functionals of the density $f$, obtained by applying the `Regularized Standard Deviation` function from the abstract framework (*Chapter 1, Def. 11.1.2*) to the mean-field variance functionals:\n180: \n181: $$\n182: \\widehat{\\sigma}_R[f](t) := \\sigma\\'_{\\text{reg}}(\\sigma_R^2[f](t)), \\qquad \\widehat{\\sigma}_D[f](t) := \\sigma\\'_{\\text{reg}}(\\sigma_D^2[f](t))",
      "metadata": {
        "label": "def-mean-field-patched-std"
      },
      "section": "## 1. Foundations of the Mean-Field Model",
      "references": [],
      "raw_directive": "174: To ensure the numerical stability and continuity guarantees of the N-particle algorithm are preserved, we must prevent the denominators in the standardization from approaching zero, especially when the swarm is highly converged (i.e., when the true variance $\\sigma^2[f]$ is close to zero). We achieve this by translating the exact same regularized standard deviation mechanism from `Chapter 1` to the mean-field level.\n175: \n176: :::{prf:definition} Mean-Field Regularized Standard Deviation\n177: :label: def-mean-field-patched-std\n178: \n179: The **Mean-Field Regularized Standard Deviations** are functionals of the density $f$, obtained by applying the `Regularized Standard Deviation` function from the abstract framework (*Chapter 1, Def. 11.1.2*) to the mean-field variance functionals:\n180: \n181: $$\n182: \\widehat{\\sigma}_R[f](t) := \\sigma\\'_{\\text{reg}}(\\sigma_R^2[f](t)), \\qquad \\widehat{\\sigma}_D[f](t) := \\sigma\\'_{\\text{reg}}(\\sigma_D^2[f](t))\n183: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## 1. Foundations of the Mean-Field Model"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mean-field-z-scores",
      "title": "Mean-Field Z-Scores",
      "start_line": 191,
      "end_line": 200,
      "header_lines": [
        192
      ],
      "content_start": 194,
      "content_end": 199,
      "content": "194: :label: def-mean-field-z-scores\n195: \n196: For a particle at state $z$ and a potential companion at state $z_c$, the mean-field Z-scores at time $t$ are defined using the density-dependent functionals derived in Section 1.2:\n197: \n198: $$\n199: \\widetilde{r}[f](z,t) := \\frac{R(z) - \\mu_R[f](t)}{\\widehat{\\sigma}_R[f](t)}, \\qquad \\widetilde{d}[f](z,z_c,t) := \\frac{d_{\\mathcal{Y}}(\\varphi(z),\\varphi(z_c)) - \\mu_D[f](t)}{\\widehat{\\sigma}_D[f](t)}",
      "metadata": {
        "label": "def-mean-field-z-scores"
      },
      "section": "## 1. Foundations of the Mean-Field Model",
      "references": [],
      "raw_directive": "191: We construct this potential in two steps, mirroring the discrete algorithm. First, we define the mean-field Z-scores, which standardize the raw measurements using the global, density-dependent moments. Second, we combine these scores to form the final, non-linear fitness potential.\n192: \n193: :::{prf:definition} Mean-Field Z-Scores\n194: :label: def-mean-field-z-scores\n195: \n196: For a particle at state $z$ and a potential companion at state $z_c$, the mean-field Z-scores at time $t$ are defined using the density-dependent functionals derived in Section 1.2:\n197: \n198: $$\n199: \\widetilde{r}[f](z,t) := \\frac{R(z) - \\mu_R[f](t)}{\\widehat{\\sigma}_R[f](t)}, \\qquad \\widetilde{d}[f](z,z_c,t) := \\frac{d_{\\mathcal{Y}}(\\varphi(z),\\varphi(z_c)) - \\mu_D[f](t)}{\\widehat{\\sigma}_D[f](t)}\n200: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## 1. Foundations of the Mean-Field Model"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-mean-field-fitness-potential",
      "title": "Mean-Field Fitness Potential",
      "start_line": 204,
      "end_line": 213,
      "header_lines": [
        205
      ],
      "content_start": 207,
      "content_end": 212,
      "content": "207: :label: def-mean-field-fitness-potential\n208: \n209: The **Mean-Field Fitness Potential**, denoted $V[f](z, z_c, t)$, is a functional of the density $f$ that determines the fitness of a particle at state $z$ relative to a companion at $z_c$. It is constructed by applying the canonical `Rescale Transformation` $g_A$ (*Chapter 1, Sec. 8*) to the mean-field Z-scores:\n210: \n211: $$\n212: V[f](z,z_c,t) := \\left(g_A(\\widetilde{d}[f](z,z_c,t)) + \\eta\\right)^{\\beta} \\cdot \\left(g_A(\\widetilde{r}[f](z,t)) + \\eta\\right)^{\\alpha}",
      "metadata": {
        "label": "def-mean-field-fitness-potential"
      },
      "section": "## 1. Foundations of the Mean-Field Model",
      "references": [],
      "raw_directive": "204: The final fitness potential combines the contributions from the reward and diversity channels multiplicatively. This structure allows the algorithm to balance the drive for high rewards (exploitation) with the need to maintain diversity (exploration). The potential is a **functional** of the density $f$, denoted $V[f]$, to emphasize that its value at a single point $(z,z_c)$ depends on the global shape of the entire probability distribution.\n205: \n206: :::{prf:definition} Mean-Field Fitness Potential\n207: :label: def-mean-field-fitness-potential\n208: \n209: The **Mean-Field Fitness Potential**, denoted $V[f](z, z_c, t)$, is a functional of the density $f$ that determines the fitness of a particle at state $z$ relative to a companion at $z_c$. It is constructed by applying the canonical `Rescale Transformation` $g_A$ (*Chapter 1, Sec. 8*) to the mean-field Z-scores:\n210: \n211: $$\n212: V[f](z,z_c,t) := \\left(g_A(\\widetilde{d}[f](z,z_c,t)) + \\eta\\right)^{\\beta} \\cdot \\left(g_A(\\widetilde{r}[f](z,t)) + \\eta\\right)^{\\alpha}\n213: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## 1. Foundations of the Mean-Field Model"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-baoab-update-rule",
      "title": "The BAOAB Update Rule",
      "start_line": 253,
      "end_line": 290,
      "header_lines": [
        254
      ],
      "content_start": 256,
      "content_end": 289,
      "content": "256: :label: def-baoab-update-rule\n257: \n258: For a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\tau$ is computed via the following five steps:\n259: \n260: 1.  **B-Step (Force Kick):** The velocity is updated with a half-step kick from the conservative force $F(x)$.\n261: \n262:     $$\n263:     v_{n+1/2}^{(1)} = v_n + \\frac{\\tau}{2m} F(x_n)\n264:     $$\n265: \n266: 2.  **A-Step (Position Drift):** The position is updated with a half-step drift using the new velocity.\n267: \n268:     $$\n269:     x_{n+1/2} = x_n + \\frac{\\tau}{2} v_{n+1/2}^{(1)}\n270:     $$\n271: \n272: 3.  **O-Step (Ornstein-Uhlenbeck):** The velocity is updated for a full timestep by exactly solving the Ornstein-Uhlenbeck process that combines friction and thermal noise. Let $u_{n+1/2} = u(x_{n+1/2})$ be the flow field evaluated at the midpoint.\n273: \n274:     $$\n275:     v_{n+1/2}^{(2)} = u_{n+1/2} + e^{-\\gamma_{\\mathrm{fric}}\\tau}\\left(v_{n+1/2}^{(1)} - u_{n+1/2}\\right) + \\sqrt{\\frac{\\Theta}{m}(1 - e^{-2\\gamma_{\\mathrm{fric}}\\tau})} \\cdot \\xi\n276:     $$\n277:     where $\\xi \\sim \\mathcal{N}(0, I_d)$ is a standard Gaussian random vector.\n278: \n279: 4.  **A-Step (Position Drift):** The position is updated with a final half-step drift.\n280: \n281:     $$\n282:     x_{n+1} = x_{n+1/2} + \\frac{\\tau}{2} v_{n+1/2}^{(2)}\n283:     $$\n284: \n285: 5.  **B-Step (Force Kick):** The velocity is updated with a final half-step kick using the force evaluated at the new position, $F(x_{n+1})$.\n286: \n287:     $$\n288:     v_{n+1} = v_{n+1/2}^{(2)} + \\frac{\\tau}{2m} F(x_{n+1})\n289:     $$",
      "metadata": {
        "label": "def-baoab-update-rule"
      },
      "section": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)",
      "references": [],
      "raw_directive": "253: where $W_t$ is a standard Wiener process and all parameters are as defined in the Euclidean Gas specification. The BAOAB method splits this SDE into analytically solvable parts and composes them symmetrically.\n254: \n255: :::{prf:definition} The BAOAB Update Rule\n256: :label: def-baoab-update-rule\n257: \n258: For a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\tau$ is computed via the following five steps:\n259: \n260: 1.  **B-Step (Force Kick):** The velocity is updated with a half-step kick from the conservative force $F(x)$.\n261: \n262:     $$\n263:     v_{n+1/2}^{(1)} = v_n + \\frac{\\tau}{2m} F(x_n)\n264:     $$\n265: \n266: 2.  **A-Step (Position Drift):** The position is updated with a half-step drift using the new velocity.\n267: \n268:     $$\n269:     x_{n+1/2} = x_n + \\frac{\\tau}{2} v_{n+1/2}^{(1)}\n270:     $$\n271: \n272: 3.  **O-Step (Ornstein-Uhlenbeck):** The velocity is updated for a full timestep by exactly solving the Ornstein-Uhlenbeck process that combines friction and thermal noise. Let $u_{n+1/2} = u(x_{n+1/2})$ be the flow field evaluated at the midpoint.\n273: \n274:     $$\n275:     v_{n+1/2}^{(2)} = u_{n+1/2} + e^{-\\gamma_{\\mathrm{fric}}\\tau}\\left(v_{n+1/2}^{(1)} - u_{n+1/2}\\right) + \\sqrt{\\frac{\\Theta}{m}(1 - e^{-2\\gamma_{\\mathrm{fric}}\\tau})} \\cdot \\xi\n276:     $$\n277:     where $\\xi \\sim \\mathcal{N}(0, I_d)$ is a standard Gaussian random vector.\n278: \n279: 4.  **A-Step (Position Drift):** The position is updated with a final half-step drift.\n280: \n281:     $$\n282:     x_{n+1} = x_{n+1/2} + \\frac{\\tau}{2} v_{n+1/2}^{(2)}\n283:     $$\n284: \n285: 5.  **B-Step (Force Kick):** The velocity is updated with a final half-step kick using the force evaluated at the new position, $F(x_{n+1})$.\n286: \n287:     $$\n288:     v_{n+1} = v_{n+1/2}^{(2)} + \\frac{\\tau}{2m} F(x_{n+1})\n289:     $$\n290: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-kinetic-generator",
      "title": "Kinetic Transport Operator",
      "start_line": 309,
      "end_line": 333,
      "header_lines": [
        310
      ],
      "content_start": 312,
      "content_end": 332,
      "content": "312: :label: def-kinetic-generator\n313: \n314: The kinetic evolution of a single alive walker $i$ is governed by the underdamped Langevin SDE on the phase space $\\Omega$:\n315: \n316: $$\n317: \\mathrm d x_i = v_i\\,\\mathrm dt,\\qquad\n318: \\mathrm d v_i = \\left(\\frac{1}{m}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\,\\mathrm dt \\;+\\; \\sigma_v\\,\\mathrm dW_t\n319: $$\n320: \n321: where $W_t$ is a standard $d$-dimensional Wiener process and the parameters are those of the Euclidean Gas. This SDE is subject to **reflecting boundary conditions** on both position and velocity:\n322: \n323: 1.  **Reflecting Position Boundary:** Trajectories reflect at the boundary $\\partial X_{\\text{valid}}$, ensuring no mass leaves the domain through kinetic transport. This models the pure kinetic portion of the dynamics with a simple, local boundary condition.\n324: 2.  **Reflecting Velocity Boundary:** The dynamics are constrained to the velocity ball $V_{\\text{alg}}$. This is modeled by a reflecting or squash boundary condition at $\\|v\\|=V_{\\text{alg}}$ that mirrors the action of the velocity cap $\\psi_v$.\n325: \n326: The infinitesimal generator for the N-particle system under this collection of independent SDEs is the **Fokker-Planck operator**, which acts on a test function $f$ on the swarm state space. For the set of alive walkers $\\mathcal{A}$, it is given by:\n327: \n328: $$\n329: \\boxed{\n330: \\mathcal{L}_{\\text{kin}} f = \\sum_{i\\in\\mathcal A}\\left[ v_i\\cdot\\nabla_{x_i} f + \\left(m^{-1}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\cdot\\nabla_{v_i} f + \\tfrac{\\sigma_v^2}{2}\\,\\Delta_{v_i} f\\right]\n331: }\n332: $$",
      "metadata": {
        "label": "def-kinetic-generator"
      },
      "section": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)",
      "references": [],
      "raw_directive": "309: Between cloning events and death/revival transitions, the state of each alive walker evolves according to a continuous stochastic process. The kinetic stage of the Euclidean Gas algorithm, as defined by the BAOAB integrator, is a discrete-time approximation of a specific underdamped Langevin stochastic differential equation (SDE). This SDE governs the diffusive part of the generator.\n310: \n311: :::{prf:definition} Kinetic Transport Operator\n312: :label: def-kinetic-generator\n313: \n314: The kinetic evolution of a single alive walker $i$ is governed by the underdamped Langevin SDE on the phase space $\\Omega$:\n315: \n316: $$\n317: \\mathrm d x_i = v_i\\,\\mathrm dt,\\qquad\n318: \\mathrm d v_i = \\left(\\frac{1}{m}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\,\\mathrm dt \\;+\\; \\sigma_v\\,\\mathrm dW_t\n319: $$\n320: \n321: where $W_t$ is a standard $d$-dimensional Wiener process and the parameters are those of the Euclidean Gas. This SDE is subject to **reflecting boundary conditions** on both position and velocity:\n322: \n323: 1.  **Reflecting Position Boundary:** Trajectories reflect at the boundary $\\partial X_{\\text{valid}}$, ensuring no mass leaves the domain through kinetic transport. This models the pure kinetic portion of the dynamics with a simple, local boundary condition.\n324: 2.  **Reflecting Velocity Boundary:** The dynamics are constrained to the velocity ball $V_{\\text{alg}}$. This is modeled by a reflecting or squash boundary condition at $\\|v\\|=V_{\\text{alg}}$ that mirrors the action of the velocity cap $\\psi_v$.\n325: \n326: The infinitesimal generator for the N-particle system under this collection of independent SDEs is the **Fokker-Planck operator**, which acts on a test function $f$ on the swarm state space. For the set of alive walkers $\\mathcal{A}$, it is given by:\n327: \n328: $$\n329: \\boxed{\n330: \\mathcal{L}_{\\text{kin}} f = \\sum_{i\\in\\mathcal A}\\left[ v_i\\cdot\\nabla_{x_i} f + \\left(m^{-1}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\cdot\\nabla_{v_i} f + \\tfrac{\\sigma_v^2}{2}\\,\\Delta_{v_i} f\\right]\n331: }\n332: $$\n333: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-killing-operator",
      "title": "Interior Killing Operator",
      "start_line": 358,
      "end_line": 374,
      "header_lines": [
        359
      ],
      "content_start": 361,
      "content_end": 373,
      "content": "361: :label: def-killing-operator\n362: \n363: Death is modeled by an **interior killing rate** $c: \\Omega \\to [0, \\infty)$, a smooth, non-negative function with the following properties:\n364: \n365: 1.  **Safety in the interior**: $c(z) = 0$ for all $z$ in a safe subset of $\\Omega$ away from the position boundary.\n366: 2.  **Activity near the boundary**: $c(z) > 0$ in a smooth transition layer near $\\partial X_{\\text{valid}} \\times V_{\\text{alg}}$.\n367: 3.  **Smoothness**: $c \\in C^\\infty(\\Omega)$ to ensure regularity of the PDE solutions.\n368: \n369: The killing operator removes mass from the alive density $f$ at a rate $c(z)f(z)$. The **total mass killed per unit time** is a functional of $f$:\n370: \n371: $$\n372: k_{\\text{killed}}[f](t) := \\int_{\\Omega} c(z) f(t,z) \\, \\mathrm{d}z\n373: $$",
      "metadata": {
        "label": "def-killing-operator"
      },
      "section": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)",
      "references": [],
      "raw_directive": "358: :::\n359: \n360: :::{prf:definition} Interior Killing Operator\n361: :label: def-killing-operator\n362: \n363: Death is modeled by an **interior killing rate** $c: \\Omega \\to [0, \\infty)$, a smooth, non-negative function with the following properties:\n364: \n365: 1.  **Safety in the interior**: $c(z) = 0$ for all $z$ in a safe subset of $\\Omega$ away from the position boundary.\n366: 2.  **Activity near the boundary**: $c(z) > 0$ in a smooth transition layer near $\\partial X_{\\text{valid}} \\times V_{\\text{alg}}$.\n367: 3.  **Smoothness**: $c \\in C^\\infty(\\Omega)$ to ensure regularity of the PDE solutions.\n368: \n369: The killing operator removes mass from the alive density $f$ at a rate $c(z)f(z)$. The **total mass killed per unit time** is a functional of $f$:\n370: \n371: $$\n372: k_{\\text{killed}}[f](t) := \\int_{\\Omega} c(z) f(t,z) \\, \\mathrm{d}z\n373: $$\n374: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-revival-operator",
      "title": "Revival Operator",
      "start_line": 376,
      "end_line": 401,
      "header_lines": [
        377
      ],
      "content_start": 379,
      "content_end": 400,
      "content": "379: :label: def-revival-operator\n380: \n381: Revival is modeled as a source term that re-injects mass from the dead population back into the alive population. The dead population acts as a reservoir from which revival occurs at a constant rate. Dead walkers are instantly revived by cloning from alive companions, so the spatial profile of the re-injected mass is simply **proportional to the current alive density**, mirroring the discrete algorithm's revival mechanism.\n382: \n383: The **Revival Operator** is defined as:\n384: \n385: $$\n386: B[f, m_d](t, z) := \\lambda_{\\text{revive}} \\cdot m_d(t) \\cdot \\frac{f(t,z)}{m_a(t)}\n387: $$\n388: \n389: where:\n390: *   $\\lambda_{\\text{revive}} > 0$ is the **revival rate**, a free parameter independent of the timestep (typical values: 0.1-5)\n391: *   $m_d(t) = 1 - m_a(t)$ is the current dead mass\n392: *   $f(t,z)/m_a(t)$ is the **normalized alive density** (the probability distribution over the alive population)\n393: \n394: This form directly translates the discrete algorithm: dead walkers select companions uniformly from the alive set and clone to their positions.\n395: \n396: **Key property**: The total mass revived per unit time is:\n397: \n398: $$\n399: \\int_{\\Omega} B[f, m_d](t,z)\\,\\mathrm{d}z = \\lambda_{\\text{revive}} \\cdot m_d(t)\n400: $$",
      "metadata": {
        "label": "def-revival-operator"
      },
      "section": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)",
      "references": [],
      "raw_directive": "376: :::\n377: \n378: :::{prf:definition} Revival Operator\n379: :label: def-revival-operator\n380: \n381: Revival is modeled as a source term that re-injects mass from the dead population back into the alive population. The dead population acts as a reservoir from which revival occurs at a constant rate. Dead walkers are instantly revived by cloning from alive companions, so the spatial profile of the re-injected mass is simply **proportional to the current alive density**, mirroring the discrete algorithm's revival mechanism.\n382: \n383: The **Revival Operator** is defined as:\n384: \n385: $$\n386: B[f, m_d](t, z) := \\lambda_{\\text{revive}} \\cdot m_d(t) \\cdot \\frac{f(t,z)}{m_a(t)}\n387: $$\n388: \n389: where:\n390: *   $\\lambda_{\\text{revive}} > 0$ is the **revival rate**, a free parameter independent of the timestep (typical values: 0.1-5)\n391: *   $m_d(t) = 1 - m_a(t)$ is the current dead mass\n392: *   $f(t,z)/m_a(t)$ is the **normalized alive density** (the probability distribution over the alive population)\n393: \n394: This form directly translates the discrete algorithm: dead walkers select companions uniformly from the alive set and clone to their positions.\n395: \n396: **Key property**: The total mass revived per unit time is:\n397: \n398: $$\n399: \\int_{\\Omega} B[f, m_d](t,z)\\,\\mathrm{d}z = \\lambda_{\\text{revive}} \\cdot m_d(t)\n400: $$\n401: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-cloning-generator",
      "title": "Internal Cloning Operator (Derived Form)",
      "start_line": 495,
      "end_line": 540,
      "header_lines": [
        496
      ],
      "content_start": 498,
      "content_end": 539,
      "content": "498: :label: def-cloning-generator\n499: \n500: The **Internal Cloning Operator**, $S[f]$, is the mean-field limit of the discrete cloning mechanism. It is a mass-neutral, non-local operator that decomposes into sink and source terms:\n501: \n502: $$\n503: S[f](t, z) = S_{\\text{src}}[f](t, z) - S_{\\text{sink}}[f](t, z)\n504: $$\n505: \n506: where:\n507: \n508: *   **Sink** (mass removed when walkers at $z$ clone away):\n509: \n510:     $$\n511:     S_{\\text{sink}}[f](t,z) = \\frac{1}{\\tau} f(t,z) \\int_{\\Omega} P_{\\text{clone}}[f/m_a](z, z_c) \\frac{f(t,z_c)}{m_a(t)} \\,\\mathrm{d}z_c\n512:     $$\n513: \n514: *   **Source** (mass gained when walkers from other states clone to $z$):\n515: \n516:     $$\n517:     S_{\\text{src}}[f](t,z) = \\frac{1}{\\tau m_a(t)} \\int_{\\Omega} \\int_{\\Omega} f(t,z_d) f(t,z_c) P_{\\text{clone}}[f/m_a](z_d, z_c) Q_{\\delta}(z \\mid z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c\n518:     $$\n519: \n520: Here:\n521: - $P_{\\text{clone}}[f/m_a](z_d, z_c)$ is the cloning probability depending on fitness values computed from the normalized alive density $f/m_a$\n522: - $Q_\\delta(z \\mid z_c)$ is the jitter kernel (Gaussian in position, delta in velocity)\n523: - $\\tau$ is the discrete timestep, and $1/\\tau$ converts per-step probabilities to continuous rates\n524: \n525: **Key property**: The operator is mass-neutral by construction. To verify, integrate over $\\Omega$:\n526: \n527: $$\n528: \\begin{aligned}\n529: \\int_{\\Omega} S[f](t,z)\\,\\mathrm{d}z &= \\int_{\\Omega} S_{\\text{src}}[f](t,z)\\,\\mathrm{d}z - \\int_{\\Omega} S_{\\text{sink}}[f](t,z)\\,\\mathrm{d}z \\\\\n530: &= \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) Q_\\delta(z \\mid z_c) \\,\\mathrm{d}z\\,\\mathrm{d}z_d\\,\\mathrm{d}z_c \\\\\n531: &\\quad - \\frac{1}{\\tau} \\int_{\\Omega} f(z) \\int_{\\Omega} P(z, z_c) \\frac{f(z_c)}{m_a} \\,\\mathrm{d}z_c\\,\\mathrm{d}z\n532: \\end{aligned}\n533: $$\n534: \n535: Using $\\int_\\Omega Q_\\delta(z \\mid z_c)\\,\\mathrm{d}z = 1$:\n536: \n537: $$\n538: = \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c - \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c = 0\n539: $$",
      "metadata": {
        "label": "def-cloning-generator"
      },
      "section": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)",
      "references": [],
      "raw_directive": "495: This is exactly the form of the cloning operator stated below.\n496: \n497: :::{prf:definition} Internal Cloning Operator (Derived Form)\n498: :label: def-cloning-generator\n499: \n500: The **Internal Cloning Operator**, $S[f]$, is the mean-field limit of the discrete cloning mechanism. It is a mass-neutral, non-local operator that decomposes into sink and source terms:\n501: \n502: $$\n503: S[f](t, z) = S_{\\text{src}}[f](t, z) - S_{\\text{sink}}[f](t, z)\n504: $$\n505: \n506: where:\n507: \n508: *   **Sink** (mass removed when walkers at $z$ clone away):\n509: \n510:     $$\n511:     S_{\\text{sink}}[f](t,z) = \\frac{1}{\\tau} f(t,z) \\int_{\\Omega} P_{\\text{clone}}[f/m_a](z, z_c) \\frac{f(t,z_c)}{m_a(t)} \\,\\mathrm{d}z_c\n512:     $$\n513: \n514: *   **Source** (mass gained when walkers from other states clone to $z$):\n515: \n516:     $$\n517:     S_{\\text{src}}[f](t,z) = \\frac{1}{\\tau m_a(t)} \\int_{\\Omega} \\int_{\\Omega} f(t,z_d) f(t,z_c) P_{\\text{clone}}[f/m_a](z_d, z_c) Q_{\\delta}(z \\mid z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c\n518:     $$\n519: \n520: Here:\n521: - $P_{\\text{clone}}[f/m_a](z_d, z_c)$ is the cloning probability depending on fitness values computed from the normalized alive density $f/m_a$\n522: - $Q_\\delta(z \\mid z_c)$ is the jitter kernel (Gaussian in position, delta in velocity)\n523: - $\\tau$ is the discrete timestep, and $1/\\tau$ converts per-step probabilities to continuous rates\n524: \n525: **Key property**: The operator is mass-neutral by construction. To verify, integrate over $\\Omega$:\n526: \n527: $$\n528: \\begin{aligned}\n529: \\int_{\\Omega} S[f](t,z)\\,\\mathrm{d}z &= \\int_{\\Omega} S_{\\text{src}}[f](t,z)\\,\\mathrm{d}z - \\int_{\\Omega} S_{\\text{sink}}[f](t,z)\\,\\mathrm{d}z \\\\\n530: &= \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) Q_\\delta(z \\mid z_c) \\,\\mathrm{d}z\\,\\mathrm{d}z_d\\,\\mathrm{d}z_c \\\\\n531: &\\quad - \\frac{1}{\\tau} \\int_{\\Omega} f(z) \\int_{\\Omega} P(z, z_c) \\frac{f(z_c)}{m_a} \\,\\mathrm{d}z_c\\,\\mathrm{d}z\n532: \\end{aligned}\n533: $$\n534: \n535: Using $\\int_\\Omega Q_\\delta(z \\mid z_c)\\,\\mathrm{d}z = 1$:\n536: \n537: $$\n538: = \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c - \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c = 0\n539: $$\n540: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-transport-operator",
      "title": "Transport Operator and Probability Flux",
      "start_line": 552,
      "end_line": 566,
      "header_lines": [
        553
      ],
      "content_start": 555,
      "content_end": 565,
      "content": "555: :label: def-transport-operator\n556: \n557: Let $L$ be the backward kinetic generator from Section 2.2. The **Transport Operator**, denoted $L^\\dagger$, is its formal $L^2$-adjoint, which acts on the density $f$. It can be written in conservative form as the negative divergence of a **probability flux vector** $J = (J_x, J_v)$:\n558: \n559: $$\n560: L^\\dagger f = -\\nabla \\cdot J[f] = -\\nabla_x \\cdot J_x[f] - \\nabla_v \\cdot J_v[f]\n561: $$\n562: \n563: where the components of the flux are:\n564: *   **Positional Flux ($J_x$):** $J_x[f] := v f - D_x \\nabla_x f$ (Advection + Fickian Diffusion)\n565: *   **Velocity Flux ($J_v$):** $J_v[f] := A_v f - D_v \\nabla_v f$ (Drift + Fickian Diffusion)",
      "metadata": {
        "label": "def-transport-operator"
      },
      "section": "## 3. The Mass-Conserving Forward Equation (PDE)",
      "references": [],
      "raw_directive": "552: The kinetic part of the evolution, described by the generator $\\mathcal{L}_{\\text{kin}}$, corresponds to a local transport of probability density via drift and diffusion. Its representation in the forward equation is given by the formal adjoint of $\\mathcal{L}_{\\text{kin}}$, which is the Fokker-Planck operator.\n553: \n554: :::{prf:definition} Transport Operator and Probability Flux\n555: :label: def-transport-operator\n556: \n557: Let $L$ be the backward kinetic generator from Section 2.2. The **Transport Operator**, denoted $L^\\dagger$, is its formal $L^2$-adjoint, which acts on the density $f$. It can be written in conservative form as the negative divergence of a **probability flux vector** $J = (J_x, J_v)$:\n558: \n559: $$\n560: L^\\dagger f = -\\nabla \\cdot J[f] = -\\nabla_x \\cdot J_x[f] - \\nabla_v \\cdot J_v[f]\n561: $$\n562: \n563: where the components of the flux are:\n564: *   **Positional Flux ($J_x$):** $J_x[f] := v f - D_x \\nabla_x f$ (Advection + Fickian Diffusion)\n565: *   **Velocity Flux ($J_v$):** $J_v[f] := A_v f - D_v \\nabla_v f$ (Drift + Fickian Diffusion)\n566: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "07_mean_field",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Mass-Conserving Forward Equation (PDE)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-sequence-of-qsds",
      "title": "Sequence of N-Particle QSDs and their Marginals",
      "start_line": 125,
      "end_line": 134,
      "header_lines": [
        126
      ],
      "content_start": 128,
      "content_end": 133,
      "content": "128: :label: def-sequence-of-qsds\n129: \n130: 1.  **The N-Particle Quasi-Stationary Distribution.** For each integer $N \\ge 2$, let $\\nu_N^{QSD} \\in \\mathcal{P}(\\Sigma_N)$ be the **unique Quasi-Stationary Distribution** for the N-particle Euclidean Gas, whose existence and uniqueness were established in `06_convergence.md`. This is a probability measure on the full N-particle state space $\\Sigma_N = (\\mathbb{R}^d \\times \\mathbb{R}^d \\times \\{0,1\\})^N$, describing the long-term statistical behavior of surviving swarm trajectories.\n131: \n132: 2.  **The First Marginal Measure.** Let $\\mu_N \\in \\mathcal{P}(\\Omega)$ be the **first marginal** of the N-particle measure $\\nu_N^{QSD}$. This measure represents the probability distribution of a single, typical particle (e.g., walker $i=1$) when the entire N-particle swarm is in its quasi-stationary equilibrium state. Formally, for any measurable set $A \\subseteq \\Omega$:\n133:     $$",
      "metadata": {
        "label": "def-sequence-of-qsds"
      },
      "section": "## 2. Formal Setup: The Sequence of N-Particle Stationary Measures",
      "references": [],
      "raw_directive": "125: The analysis in `06_convergence.md` established, via a Foster-Lyapunov drift condition, that for any fixed, finite number of walkers $N \\ge 2$, the Euclidean Gas Markov process converges exponentially fast to a unique statistical equilibrium, conditioned on survival. This foundational result provides us with a countably infinite sequence of well-defined N-particle stationary measures. Our strategy is to leverage this sequence to construct the stationary state of the continuous mean-field model. We begin by formally defining these measures.\n126: \n127: :::{prf:definition} Sequence of N-Particle QSDs and their Marginals\n128: :label: def-sequence-of-qsds\n129: \n130: 1.  **The N-Particle Quasi-Stationary Distribution.** For each integer $N \\ge 2$, let $\\nu_N^{QSD} \\in \\mathcal{P}(\\Sigma_N)$ be the **unique Quasi-Stationary Distribution** for the N-particle Euclidean Gas, whose existence and uniqueness were established in `06_convergence.md`. This is a probability measure on the full N-particle state space $\\Sigma_N = (\\mathbb{R}^d \\times \\mathbb{R}^d \\times \\{0,1\\})^N$, describing the long-term statistical behavior of surviving swarm trajectories.\n131: \n132: 2.  **The First Marginal Measure.** Let $\\mu_N \\in \\mathcal{P}(\\Omega)$ be the **first marginal** of the N-particle measure $\\nu_N^{QSD}$. This measure represents the probability distribution of a single, typical particle (e.g., walker $i=1$) when the entire N-particle swarm is in its quasi-stationary equilibrium state. Formally, for any measurable set $A \\subseteq \\Omega$:\n133:     $$\n134:     \\mu_N(A) := \\nu_N^{QSD}(\\{ S \\in \\Sigma_N \\mid (x_1, v_1) \\in A \\})",
      "_registry_context": {
        "stage": "directives",
        "document_id": "08_propagation_chaos",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Formal Setup: The Sequence of N-Particle Stationary Measures"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-uniqueness-weighted-sobolev-h1w",
      "title": "Weighted Sobolev Space $H^1_w(\\Omega)$",
      "start_line": 859,
      "end_line": 870,
      "header_lines": [
        860
      ],
      "content_start": 862,
      "content_end": 869,
      "content": "862: :label: def-uniqueness-weighted-sobolev-h1w\n863: \n864: Let $w(z) = w(x,v) = 1 + \\|x\\|^2 + \\|v\\|^2$ be a polynomial weight function. The weighted Sobolev space $H^1_w(\\Omega)$ consists of all measurable functions $\\rho: \\Omega \\to \\mathbb{R}_{\\ge 0}$ such that:\n865: \n866: $$\n867: \\|\\rho\\|_{H^1_w}^2 := \\int_{\\Omega} \\left[\\rho(z)^2 + \\|\\nabla_z \\rho(z)\\|^2\\right] w(z) \\, dz < \\infty\n868: \n869: $$",
      "metadata": {
        "label": "def-uniqueness-weighted-sobolev-h1w"
      },
      "section": "## **5. Uniqueness of the Weak Solution via Contraction Mapping**",
      "references": [],
      "raw_directive": "859: To prove uniqueness via contraction mapping, we must first establish the appropriate function space. Standard Sobolev spaces are insufficient because they do not control the tail behavior of probability densities on unbounded domains. We require a **weighted Sobolev space** that enforces both local regularity and decay at infinity.\n860: \n861: :::{prf:definition} Weighted Sobolev Space $H^1_w(\\Omega)$\n862: :label: def-uniqueness-weighted-sobolev-h1w\n863: \n864: Let $w(z) = w(x,v) = 1 + \\|x\\|^2 + \\|v\\|^2$ be a polynomial weight function. The weighted Sobolev space $H^1_w(\\Omega)$ consists of all measurable functions $\\rho: \\Omega \\to \\mathbb{R}_{\\ge 0}$ such that:\n865: \n866: $$\n867: \\|\\rho\\|_{H^1_w}^2 := \\int_{\\Omega} \\left[\\rho(z)^2 + \\|\\nabla_z \\rho(z)\\|^2\\right] w(z) \\, dz < \\infty\n868: \n869: $$\n870: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "08_propagation_chaos",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## **5. Uniqueness of the Weak Solution via Contraction Mapping**"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-sequence-of-qsds-summary",
      "title": "Sequence of N-Particle QSDs and their Marginals (Summary)",
      "start_line": 1949,
      "end_line": 1958,
      "header_lines": [
        1950
      ],
      "content_start": 1952,
      "content_end": 1957,
      "content": "1952: :label: def-sequence-of-qsds-summary\n1953: \n1954: 1.  **The N-Particle Quasi-Stationary Distribution.** For each integer $N \\ge 2$, let $\\nu_N^{QSD} \\in \\mathcal{P}(\\Sigma_N)$ be the **unique Quasi-Stationary Distribution** for the N-particle Euclidean Gas, whose existence and uniqueness were established in `06_convergence.md`. This is a probability measure on the full N-particle state space $\\Sigma_N = (\\Omega \\times \\{0,1\\})^N$, describing the long-term statistical behavior of surviving swarm trajectories.\n1955: \n1956: 2.  **The First Marginal Measure.** Let $\\mu_N \\in \\mathcal{P}(\\Omega)$ be the **first marginal** of the N-particle measure $\\nu_N^{QSD}$. This measure represents the probability distribution of a single, typical particle (e.g., walker $i=1$) when the entire N-particle swarm is in its quasi-stationary equilibrium state. Formally, for any measurable set $A \\subseteq \\Omega$:\n1957:     $$",
      "metadata": {
        "label": "def-sequence-of-qsds-summary"
      },
      "section": "## **6. Justification of the Mean-Field Model: Propagation of Chaos and the Thermodynamic Limit**",
      "references": [],
      "raw_directive": "1949: The foundation of our constructive proof is the sequence of well-behaved equilibria that exist for any finite number of walkers, $N$. We begin by formally defining these measures, which are the primary objects of our analysis.\n1950: \n1951: :::{prf:definition} Sequence of N-Particle QSDs and their Marginals (Summary)\n1952: :label: def-sequence-of-qsds-summary\n1953: \n1954: 1.  **The N-Particle Quasi-Stationary Distribution.** For each integer $N \\ge 2$, let $\\nu_N^{QSD} \\in \\mathcal{P}(\\Sigma_N)$ be the **unique Quasi-Stationary Distribution** for the N-particle Euclidean Gas, whose existence and uniqueness were established in `06_convergence.md`. This is a probability measure on the full N-particle state space $\\Sigma_N = (\\Omega \\times \\{0,1\\})^N$, describing the long-term statistical behavior of surviving swarm trajectories.\n1955: \n1956: 2.  **The First Marginal Measure.** Let $\\mu_N \\in \\mathcal{P}(\\Omega)$ be the **first marginal** of the N-particle measure $\\nu_N^{QSD}$. This measure represents the probability distribution of a single, typical particle (e.g., walker $i=1$) when the entire N-particle swarm is in its quasi-stationary equilibrium state. Formally, for any measurable set $A \\subseteq \\Omega$:\n1957:     $$\n1958:     \\mu_N(A) := \\nu_N^{QSD}(\\{ S \\in \\Sigma_N \\mid (x_1, v_1) \\in A \\})",
      "_registry_context": {
        "stage": "directives",
        "document_id": "08_propagation_chaos",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## **6. Justification of the Mean-Field Model: Propagation of Chaos and the Thermodynamic Limit**"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-relative-entropy",
      "title": "Relative Entropy and Fisher Information",
      "start_line": 234,
      "end_line": 257,
      "header_lines": [
        235
      ],
      "content_start": 237,
      "content_end": 256,
      "content": "237: :label: def-relative-entropy\n238: \n239: For probability measures $\\mu, \\pi$ on a measurable space $(\\mathcal{X}, \\mathcal{F})$ with $\\mu \\ll \\pi$, the **relative entropy** (KL-divergence) is:\n240: \n241: $$\n242: D_{\\text{KL}}(\\mu \\| \\pi) := \\int \\frac{d\\mu}{d\\pi} \\log \\frac{d\\mu}{d\\pi} \\, d\\pi = \\int \\log \\frac{d\\mu}{d\\pi} \\, d\\mu\n243: $$\n244: \n245: The **entropy** of a density $f$ with respect to $\\pi$ is:\n246: \n247: $$\n248: \\text{Ent}_\\pi(f) := \\int f \\log f \\, d\\pi - \\left(\\int f \\, d\\pi\\right) \\log \\left(\\int f \\, d\\pi\\right)\n249: $$\n250: \n251: For a probability density $\\rho = d\\mu/d\\pi$, we have $D_{\\text{KL}}(\\mu \\| \\pi) = \\text{Ent}_\\pi(\\rho)$.\n252: \n253: The **Fisher information** of $\\mu$ with respect to a diffusion generator $\\mathcal{L}$ is:\n254: \n255: $$\n256: I(\\mu \\| \\pi) := \\int \\left|\\nabla \\log \\frac{d\\mu}{d\\pi}\\right|^2 \\frac{d\\mu}{d\\pi} \\, d\\pi = 4 \\int \\left|\\nabla \\sqrt{\\frac{d\\mu}{d\\pi}}\\right|^2 d\\pi",
      "metadata": {
        "label": "def-relative-entropy"
      },
      "section": "## 1. Preliminaries and Functional Inequalities",
      "references": [],
      "raw_directive": "234: ### 1.1. Basic Definitions\n235: \n236: :::{prf:definition} Relative Entropy and Fisher Information\n237: :label: def-relative-entropy\n238: \n239: For probability measures $\\mu, \\pi$ on a measurable space $(\\mathcal{X}, \\mathcal{F})$ with $\\mu \\ll \\pi$, the **relative entropy** (KL-divergence) is:\n240: \n241: $$\n242: D_{\\text{KL}}(\\mu \\| \\pi) := \\int \\frac{d\\mu}{d\\pi} \\log \\frac{d\\mu}{d\\pi} \\, d\\pi = \\int \\log \\frac{d\\mu}{d\\pi} \\, d\\mu\n243: $$\n244: \n245: The **entropy** of a density $f$ with respect to $\\pi$ is:\n246: \n247: $$\n248: \\text{Ent}_\\pi(f) := \\int f \\log f \\, d\\pi - \\left(\\int f \\, d\\pi\\right) \\log \\left(\\int f \\, d\\pi\\right)\n249: $$\n250: \n251: For a probability density $\\rho = d\\mu/d\\pi$, we have $D_{\\text{KL}}(\\mu \\| \\pi) = \\text{Ent}_\\pi(\\rho)$.\n252: \n253: The **Fisher information** of $\\mu$ with respect to a diffusion generator $\\mathcal{L}$ is:\n254: \n255: $$\n256: I(\\mu \\| \\pi) := \\int \\left|\\nabla \\log \\frac{d\\mu}{d\\pi}\\right|^2 \\frac{d\\mu}{d\\pi} \\, d\\pi = 4 \\int \\left|\\nabla \\sqrt{\\frac{d\\mu}{d\\pi}}\\right|^2 d\\pi\n257: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 1. Preliminaries and Functional Inequalities"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-lsi-continuous",
      "title": "Logarithmic Sobolev Inequality (LSI)",
      "start_line": 259,
      "end_line": 276,
      "header_lines": [
        260
      ],
      "content_start": 262,
      "content_end": 275,
      "content": "262: :label: def-lsi-continuous\n263: \n264: A probability measure $\\pi$ on $\\mathbb{R}^d$ with generator $\\mathcal{L}$ satisfies a **logarithmic Sobolev inequality** with constant $C_{\\text{LSI}} > 0$ if for all smooth functions $f > 0$ with $\\int f^2 d\\pi = 1$:\n265: \n266: $$\n267: \\text{Ent}_\\pi(f^2) \\le 2C_{\\text{LSI}} \\cdot \\mathcal{E}(f, f)\n268: $$\n269: \n270: where $\\mathcal{E}(f, f) := -\\int f \\mathcal{L} f \\, d\\pi$ is the Dirichlet form.\n271: \n272: **Equivalent formulation:** For all $f > 0$:\n273: \n274: $$\n275: \\int f^2 \\log f^2 \\, d\\pi - \\left(\\int f^2 d\\pi\\right) \\log\\left(\\int f^2 d\\pi\\right) \\le 2C_{\\text{LSI}} \\int |\\nabla f|^2 \\, d\\pi",
      "metadata": {
        "label": "def-lsi-continuous"
      },
      "section": "## 1. Preliminaries and Functional Inequalities",
      "references": [],
      "raw_directive": "259: :::\n260: \n261: :::{prf:definition} Logarithmic Sobolev Inequality (LSI)\n262: :label: def-lsi-continuous\n263: \n264: A probability measure $\\pi$ on $\\mathbb{R}^d$ with generator $\\mathcal{L}$ satisfies a **logarithmic Sobolev inequality** with constant $C_{\\text{LSI}} > 0$ if for all smooth functions $f > 0$ with $\\int f^2 d\\pi = 1$:\n265: \n266: $$\n267: \\text{Ent}_\\pi(f^2) \\le 2C_{\\text{LSI}} \\cdot \\mathcal{E}(f, f)\n268: $$\n269: \n270: where $\\mathcal{E}(f, f) := -\\int f \\mathcal{L} f \\, d\\pi$ is the Dirichlet form.\n271: \n272: **Equivalent formulation:** For all $f > 0$:\n273: \n274: $$\n275: \\int f^2 \\log f^2 \\, d\\pi - \\left(\\int f^2 d\\pi\\right) \\log\\left(\\int f^2 d\\pi\\right) \\le 2C_{\\text{LSI}} \\int |\\nabla f|^2 \\, d\\pi\n276: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 1. Preliminaries and Functional Inequalities"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-discrete-lsi",
      "title": "Discrete-Time LSI",
      "start_line": 278,
      "end_line": 296,
      "header_lines": [
        279
      ],
      "content_start": 281,
      "content_end": 295,
      "content": "281: :label: def-discrete-lsi\n282: \n283: A Markov kernel $K: \\mathcal{X} \\to \\mathcal{P}(\\mathcal{X})$ with invariant measure $\\pi$ satisfies a **discrete-time LSI** with constant $C_{\\text{LSI}} > 0$ if for all functions $f: \\mathcal{X} \\to \\mathbb{R}_{>0}$:\n284: \n285: $$\n286: \\text{Ent}_\\pi(K f^2) \\le e^{-\\tau/C_{\\text{LSI}}} \\cdot \\text{Ent}_\\pi(f^2)\n287: $$\n288: \n289: where $(Kf)(x) := \\int f(y) K(x, dy)$ and $\\tau$ is the discrete time step.\n290: \n291: **Equivalent formulation via Dirichlet form:** For all $f$:\n292: \n293: $$\n294: \\text{Ent}_\\pi(f^2) \\le C_{\\text{LSI}} \\cdot \\mathcal{E}_K(f, f)\n295: $$",
      "metadata": {
        "label": "def-discrete-lsi"
      },
      "section": "## 1. Preliminaries and Functional Inequalities",
      "references": [],
      "raw_directive": "278: :::\n279: \n280: :::{prf:definition} Discrete-Time LSI\n281: :label: def-discrete-lsi\n282: \n283: A Markov kernel $K: \\mathcal{X} \\to \\mathcal{P}(\\mathcal{X})$ with invariant measure $\\pi$ satisfies a **discrete-time LSI** with constant $C_{\\text{LSI}} > 0$ if for all functions $f: \\mathcal{X} \\to \\mathbb{R}_{>0}$:\n284: \n285: $$\n286: \\text{Ent}_\\pi(K f^2) \\le e^{-\\tau/C_{\\text{LSI}}} \\cdot \\text{Ent}_\\pi(f^2)\n287: $$\n288: \n289: where $(Kf)(x) := \\int f(y) K(x, dy)$ and $\\tau$ is the discrete time step.\n290: \n291: **Equivalent formulation via Dirichlet form:** For all $f$:\n292: \n293: $$\n294: \\text{Ent}_\\pi(f^2) \\le C_{\\text{LSI}} \\cdot \\mathcal{E}_K(f, f)\n295: $$\n296: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 1. Preliminaries and Functional Inequalities"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-gibbs-kinetic",
      "title": "Target Gibbs Measure for Kinetic Dynamics",
      "start_line": 559,
      "end_line": 576,
      "header_lines": [
        560
      ],
      "content_start": 562,
      "content_end": 575,
      "content": "562: :label: def-gibbs-kinetic\n563: \n564: The **target Gibbs measure** for the kinetic dynamics is:\n565: \n566: $$\n567: d\\pi_{\\text{kin}}(x, v) = Z^{-1} \\exp\\left(-\\frac{U(x) + \\frac{1}{2}|v|^2}{\\theta}\\right) dx \\, dv\n568: $$\n569: \n570: where $\\theta = \\sigma^2/(2\\gamma)$ is the temperature (from fluctuation-dissipation theorem) and $Z$ is the normalization constant.\n571: \n572: For the harmonic potential:\n573: \n574: $$\n575: \\pi_{\\text{kin}} = \\mathcal{N}\\left(x^*, \\frac{\\theta}{\\kappa} I\\right) \\otimes \\mathcal{N}(0, \\theta I)",
      "metadata": {
        "label": "def-gibbs-kinetic"
      },
      "section": "## 2. The Hypoelliptic Kinetic Operator",
      "references": [],
      "raw_directive": "559: For simplicity, we consider the case $U(x) = \\frac{\\kappa}{2}|x - x^*|^2$ (harmonic confinement).\n560: \n561: :::{prf:definition} Target Gibbs Measure for Kinetic Dynamics\n562: :label: def-gibbs-kinetic\n563: \n564: The **target Gibbs measure** for the kinetic dynamics is:\n565: \n566: $$\n567: d\\pi_{\\text{kin}}(x, v) = Z^{-1} \\exp\\left(-\\frac{U(x) + \\frac{1}{2}|v|^2}{\\theta}\\right) dx \\, dv\n568: $$\n569: \n570: where $\\theta = \\sigma^2/(2\\gamma)$ is the temperature (from fluctuation-dissipation theorem) and $Z$ is the normalization constant.\n571: \n572: For the harmonic potential:\n573: \n574: $$\n575: \\pi_{\\text{kin}} = \\mathcal{N}\\left(x^*, \\frac{\\theta}{\\kappa} I\\right) \\otimes \\mathcal{N}(0, \\theta I)\n576: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 2. The Hypoelliptic Kinetic Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-hypocoercive-metric",
      "title": "Hypocoercive Metric and Modified Dirichlet Form",
      "start_line": 586,
      "end_line": 608,
      "header_lines": [
        587
      ],
      "content_start": 589,
      "content_end": 607,
      "content": "589: :label: def-hypocoercive-metric\n590: \n591: Following Villani (2009), we define the **hypocoercive metric** via an auxiliary operator\n592: \n593: $$\n594: A := \\nabla_v\n595: $$\n596: \n597: and coupling parameter $\\lambda > 0$. The **modified norm** is:\n598: \n599: $$\n600: \\|f\\|_{\\text{hypo}}^2 := \\|\\nabla_v f\\|_{L^2(\\pi)}^2 + \\lambda \\|\\nabla_x f\\|_{L^2(\\pi)}^2\n601: $$\n602: \n603: The **hypocoercive Dirichlet form** is:\n604: \n605: $$\n606: \\mathcal{E}_{\\text{hypo}}(f, f) := \\|\\nabla_v f\\|_{L^2(\\pi)}^2 + \\lambda \\|\\nabla_x f\\|_{L^2(\\pi)}^2 + 2\\mu \\langle \\nabla_v f, \\nabla_x f \\rangle_{L^2(\\pi)}\n607: $$",
      "metadata": {
        "label": "def-hypocoercive-metric"
      },
      "section": "## 2. The Hypoelliptic Kinetic Operator",
      "references": [],
      "raw_directive": "586: ### 2.2. The Hypocoercivity Framework\n587: \n588: :::{prf:definition} Hypocoercive Metric and Modified Dirichlet Form\n589: :label: def-hypocoercive-metric\n590: \n591: Following Villani (2009), we define the **hypocoercive metric** via an auxiliary operator\n592: \n593: $$\n594: A := \\nabla_v\n595: $$\n596: \n597: and coupling parameter $\\lambda > 0$. The **modified norm** is:\n598: \n599: $$\n600: \\|f\\|_{\\text{hypo}}^2 := \\|\\nabla_v f\\|_{L^2(\\pi)}^2 + \\lambda \\|\\nabla_x f\\|_{L^2(\\pi)}^2\n601: $$\n602: \n603: The **hypocoercive Dirichlet form** is:\n604: \n605: $$\n606: \\mathcal{E}_{\\text{hypo}}(f, f) := \\|\\nabla_v f\\|_{L^2(\\pi)}^2 + \\lambda \\|\\nabla_x f\\|_{L^2(\\pi)}^2 + 2\\mu \\langle \\nabla_v f, \\nabla_x f \\rangle_{L^2(\\pi)}\n607: $$\n608: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 2. The Hypoelliptic Kinetic Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-log-concavity-condition",
      "title": "Explicit Log-Concavity Condition",
      "start_line": 1047,
      "end_line": 1069,
      "header_lines": [
        1048
      ],
      "content_start": 1050,
      "content_end": 1068,
      "content": "1050: :label: def-log-concavity-condition\n1051: \n1052: For $\\rho_{\\text{QSD}}(x) \\propto \\sqrt{\\det g(x)} \\cdot \\exp(-U_{\\text{eff}}(x)/T)$ to be log-concave, we require:\n1053: \n1054: $$\n1055: \\nabla^2 \\left[\\frac{1}{2}\\log(\\det g(x)) - \\frac{U_{\\text{eff}}(x)}{T}\\right] \\preceq 0\n1056: $$\n1057: \n1058: (Hessian must be negative semi-definite).\n1059: \n1060: **Expanding the terms**:\n1061: \n1062: $$\n1063: \\nabla^2 \\log(\\rho_{\\text{QSD}}) = \\frac{1}{2}\\nabla^2 \\log(\\det(H(x) + \\epsilon_\\Sigma I)) - \\frac{1}{T}\\nabla^2(U(x) - \\epsilon_F V_{\\text{fit}}(x))\n1064: $$\n1065: \n1066: where:\n1067: - $H(x) = \\nabla^2 V_{\\text{fit}}(x)$ is the Hessian of the fitness potential\n1068: - $V_{\\text{fit}}(x)$ itself depends on reward $r(x)$ and swarm density via complex integral",
      "metadata": {
        "label": "def-log-concavity-condition"
      },
      "section": "## 3.5. Fundamental Axiom: Log-Concavity of the Quasi-Stationary Distribution (SUPERSEDED - Now Proven)",
      "references": [],
      "raw_directive": "1047: :::\n1048: \n1049: :::{prf:definition} Explicit Log-Concavity Condition\n1050: :label: def-log-concavity-condition\n1051: \n1052: For $\\rho_{\\text{QSD}}(x) \\propto \\sqrt{\\det g(x)} \\cdot \\exp(-U_{\\text{eff}}(x)/T)$ to be log-concave, we require:\n1053: \n1054: $$\n1055: \\nabla^2 \\left[\\frac{1}{2}\\log(\\det g(x)) - \\frac{U_{\\text{eff}}(x)}{T}\\right] \\preceq 0\n1056: $$\n1057: \n1058: (Hessian must be negative semi-definite).\n1059: \n1060: **Expanding the terms**:\n1061: \n1062: $$\n1063: \\nabla^2 \\log(\\rho_{\\text{QSD}}) = \\frac{1}{2}\\nabla^2 \\log(\\det(H(x) + \\epsilon_\\Sigma I)) - \\frac{1}{T}\\nabla^2(U(x) - \\epsilon_F V_{\\text{fit}}(x))\n1064: $$\n1065: \n1066: where:\n1067: - $H(x) = \\nabla^2 V_{\\text{fit}}(x)$ is the Hessian of the fitness potential\n1068: - $V_{\\text{fit}}(x)$ itself depends on reward $r(x)$ and swarm density via complex integral\n1069: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 3.5. Fundamental Axiom: Log-Concavity of the Quasi-Stationary Distribution (SUPERSEDED - Now Proven)"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-entropy-transport-lyapunov",
      "title": "Entropy-Transport Lyapunov Function",
      "start_line": 1431,
      "end_line": 1441,
      "header_lines": [
        1432
      ],
      "content_start": 1434,
      "content_end": 1440,
      "content": "1434: :label: def-entropy-transport-lyapunov\n1435: \n1436: For a probability measure $\\mu$ and target $\\pi$, define:\n1437: \n1438: $$\n1439: V(\\mu) := D_{\\text{KL}}(\\mu \\| \\pi) + c \\cdot W_2^2(\\mu, \\pi)\n1440: $$",
      "metadata": {
        "label": "def-entropy-transport-lyapunov"
      },
      "section": "## 5. The Composition Theorem: Entropy-Transport Lyapunov Function",
      "references": [],
      "raw_directive": "1431: The key innovation is to define a **joint Lyapunov function** combining entropy and Wasserstein distance.\n1432: \n1433: :::{prf:definition} Entropy-Transport Lyapunov Function\n1434: :label: def-entropy-transport-lyapunov\n1435: \n1436: For a probability measure $\\mu$ and target $\\pi$, define:\n1437: \n1438: $$\n1439: V(\\mu) := D_{\\text{KL}}(\\mu \\| \\pi) + c \\cdot W_2^2(\\mu, \\pi)\n1440: $$\n1441: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 10,
        "chapter_file": "chapter_10.json",
        "section_id": "## 5. The Composition Theorem: Entropy-Transport Lyapunov Function"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-discrete-dirichlet",
      "title": "Discrete Dirichlet Form",
      "start_line": 4108,
      "end_line": 4118,
      "header_lines": [
        4109
      ],
      "content_start": 4111,
      "content_end": 4117,
      "content": "4111: :label: def-discrete-dirichlet\n4112: \n4113: For a Markov operator $\\Psi$ with stationary distribution $\\pi$, define the discrete Dirichlet form:\n4114: \n4115: $$\n4116: \\mathcal{E}_{\\Psi}(f, f) := \\mathbb{E}_\\pi[(f - \\Psi f)^2]\n4117: $$",
      "metadata": {
        "label": "def-discrete-dirichlet"
      },
      "section": "## Step 4: Discrete-Time LSI Formulation",
      "references": [],
      "raw_directive": "4108: ## Step 4: Discrete-Time LSI Formulation\n4109: \n4110: :::{prf:definition} Discrete Dirichlet Form\n4111: :label: def-discrete-dirichlet\n4112: \n4113: For a Markov operator $\\Psi$ with stationary distribution $\\pi$, define the discrete Dirichlet form:\n4114: \n4115: $$\n4116: \\mathcal{E}_{\\Psi}(f, f) := \\mathbb{E}_\\pi[(f - \\Psi f)^2]\n4117: $$\n4118: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 65,
        "chapter_file": "chapter_65.json",
        "section_id": "## Step 4: Discrete-Time LSI Formulation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-status-metric",
      "title": "Discrete Status-Change Metric",
      "start_line": 5905,
      "end_line": 5921,
      "header_lines": [
        5906
      ],
      "content_start": 5908,
      "content_end": 5920,
      "content": "5908: :label: def-status-metric\n5909: \n5910: For two swarm states $\\mathcal{S}_1, \\mathcal{S}_2$ with the same number of walkers $N$, define:\n5911: \n5912: $$\n5913: d_{\\text{status}}(\\mathcal{S}_1, \\mathcal{S}_2) := n_c(\\mathcal{S}_1, \\mathcal{S}_2)\n5914: $$\n5915: \n5916: where $n_c$ is the **number of status changes**: the number of walker indices $i$ where walker $i$ has different alive/dead status in the two swarms.\n5917: \n5918: Equivalently, if $\\mathbf{s}_1, \\mathbf{s}_2 \\in \\{\\text{alive}, \\text{dead}\\}^N$ are the status vectors:\n5919: \n5920: $$",
      "metadata": {
        "label": "def-status-metric"
      },
      "section": "## Part 3: Dobrushin Contraction for the Full Dynamics",
      "references": [],
      "raw_directive": "5905: ### 3.2. The Discrete Status-Change Metric\n5906: \n5907: :::{prf:definition} Discrete Status-Change Metric\n5908: :label: def-status-metric\n5909: \n5910: For two swarm states $\\mathcal{S}_1, \\mathcal{S}_2$ with the same number of walkers $N$, define:\n5911: \n5912: $$\n5913: d_{\\text{status}}(\\mathcal{S}_1, \\mathcal{S}_2) := n_c(\\mathcal{S}_1, \\mathcal{S}_2)\n5914: $$\n5915: \n5916: where $n_c$ is the **number of status changes**: the number of walker indices $i$ where walker $i$ has different alive/dead status in the two swarms.\n5917: \n5918: Equivalently, if $\\mathbf{s}_1, \\mathbf{s}_2 \\in \\{\\text{alive}, \\text{dead}\\}^N$ are the status vectors:\n5919: \n5920: $$\n5921: d_{\\text{status}}(\\mathcal{S}_1, \\mathcal{S}_2) = \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_0 = \\sum_{i=1}^N \\mathbb{1}[\\mathbf{s}_{1,i} \\neq \\mathbf{s}_{2,i}]",
      "_registry_context": {
        "stage": "directives",
        "document_id": "09_kl_convergence",
        "chapter_index": 85,
        "chapter_file": "chapter_85.json",
        "section_id": "## Part 3: Dobrushin Contraction for the Full Dynamics"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-single-particle-marginal",
      "title": "Single-Particle Marginal",
      "start_line": 173,
      "end_line": 183,
      "header_lines": [
        174
      ],
      "content_start": 176,
      "content_end": 182,
      "content": "176: :label: def-single-particle-marginal\n177: \n178: The single-particle marginal of $\\pi_N$ is:\n179: \n180: $$\n181: \\mu_N(A) := \\pi_N(\\{(w_1, \\ldots, w_N) : w_1 \\in A\\})\n182: $$",
      "metadata": {
        "label": "def-single-particle-marginal"
      },
      "section": "## A1.1 QSD Structure: Exchangeability",
      "references": [],
      "raw_directive": "173: ### A1.1.3 Single-Particle Marginal\n174: \n175: :::{prf:definition} Single-Particle Marginal\n176: :label: def-single-particle-marginal\n177: \n178: The single-particle marginal of $\\pi_N$ is:\n179: \n180: $$\n181: \\mu_N(A) := \\pi_N(\\{(w_1, \\ldots, w_N) : w_1 \\in A\\})\n182: $$\n183: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "10_qsd_exchangeability_theory",
        "chapter_index": 0,
        "chapter_file": "chapter_0.json",
        "section_id": "## A1.1 QSD Structure: Exchangeability"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localization-kernel",
      "title": "Localization Kernel",
      "start_line": 156,
      "end_line": 179,
      "header_lines": [
        157
      ],
      "content_start": 159,
      "content_end": 178,
      "content": "159: :label: def-localization-kernel\n160: \n161: For a localization scale $\\rho > 0$, the **localization kernel** $K_\\rho: \\mathcal{X} \\times \\mathcal{X} \\to [0, 1]$ is a smooth, non-negative function satisfying:\n162: \n163: 1. **Normalization:** $\\int_{\\mathcal{X}} K_\\rho(x, x') \\, dx' = 1$ for all $x \\in \\mathcal{X}$\n164: \n165: 2. **Locality:** $K_\\rho(x, x') \\to 0$ rapidly as $\\|x - x'\\| \\gg \\rho$\n166: \n167: 3. **Symmetry:** $K_\\rho(x, x') = K_\\rho(x', x)$\n168: \n169: 4. **Limit Behavior:**\n170:    - As $\\rho \\to 0$: $K_\\rho(x, x') \\to \\delta(x - x')$ (hyper-local)\n171:    - As $\\rho \\to \\infty$: $K_\\rho(x, x') \\to 1/|\\mathcal{X}|$ (global)\n172: \n173: **Standard Example:** The Gaussian kernel\n174: \n175: $$\n176: K_\\rho(x, x') := \\frac{1}{Z_\\rho(x)} \\exp\\left(-\\frac{\\|x - x'\\|^2}{2\\rho^2}\\right)\n177: \n178: $$",
      "metadata": {
        "label": "def-localization-kernel"
      },
      "section": "## 1. The Unified Measurement Pipeline",
      "references": [],
      "raw_directive": "156: ### 1.0.2. The Localization Kernel\n157: \n158: :::{prf:definition} Localization Kernel\n159: :label: def-localization-kernel\n160: \n161: For a localization scale $\\rho > 0$, the **localization kernel** $K_\\rho: \\mathcal{X} \\times \\mathcal{X} \\to [0, 1]$ is a smooth, non-negative function satisfying:\n162: \n163: 1. **Normalization:** $\\int_{\\mathcal{X}} K_\\rho(x, x') \\, dx' = 1$ for all $x \\in \\mathcal{X}$\n164: \n165: 2. **Locality:** $K_\\rho(x, x') \\to 0$ rapidly as $\\|x - x'\\| \\gg \\rho$\n166: \n167: 3. **Symmetry:** $K_\\rho(x, x') = K_\\rho(x', x)$\n168: \n169: 4. **Limit Behavior:**\n170:    - As $\\rho \\to 0$: $K_\\rho(x, x') \\to \\delta(x - x')$ (hyper-local)\n171:    - As $\\rho \\to \\infty$: $K_\\rho(x, x') \\to 1/|\\mathcal{X}|$ (global)\n172: \n173: **Standard Example:** The Gaussian kernel\n174: \n175: $$\n176: K_\\rho(x, x') := \\frac{1}{Z_\\rho(x)} \\exp\\left(-\\frac{\\|x - x'\\|^2}{2\\rho^2}\\right)\n177: \n178: $$\n179: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. The Unified Measurement Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localized-mean-field-moments",
      "title": "Localized Mean-Field Moments",
      "start_line": 192,
      "end_line": 244,
      "header_lines": [
        193
      ],
      "content_start": 195,
      "content_end": 243,
      "content": "195: :label: def-localized-mean-field-moments\n196: \n197: For a probability distribution $f \\in \\mathcal{P}(\\mathcal{X} \\times \\mathbb{R}^d)$, measurement function $d: \\mathcal{X} \\to \\mathbb{R}$, and reference point $x \\in \\mathcal{X}$, the **ρ-localized statistical moments** are:\n198: \n199: **Localized Mean:**\n200: \n201: $$\n202: \\mu_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, d(x') \\, f(x', v) \\, dx' \\, dv\n203: \n204: $$\n205: \n206: **Localized Variance:**\n207: \n208: $$\n209: \\sigma^2_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, [d(x') - \\mu_\\rho[f, d, x]]^2 \\, f(x', v) \\, dx' \\, dv\n210: \n211: $$\n212: \n213: **For the N-Particle System:** The full swarm state consists of N walkers, but only the **alive walker set** $A_k \\subseteq \\{1, \\ldots, N\\}$ with $|A_k| = k$ participates in the statistical measurements and adaptive dynamics. We define:\n214: \n215: **Full Empirical Measure (all walkers, including dead):**\n216: \n217: $$\n218: f_N := \\frac{1}{N} \\sum_{i=1}^N \\delta_{(x_i, v_i)}\n219: \n220: $$\n221: \n222: This measure describes the complete N-particle state but is **not used** for computing adaptive statistics.\n223: \n224: **Alive-Walker Empirical Measure (only alive walkers):**\n225: \n226: $$\n227: f_k := \\frac{1}{k} \\sum_{i \\in A_k} \\delta_{(x_i, v_i)}\n228: \n229: $$\n230: \n231: This is the measure used for **all** statistical moments, fitness potentials, and adaptive forces. Substituting $f_k$ into the integral definitions above yields the discrete forms:\n232: \n233: $$\n234: \\mu_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, d(x_j), \\quad w_{ij}(\\rho) := \\frac{K_\\rho(x_i, x_j)}{\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)}\n235: \n236: $$\n237: \n238: $$\n239: \\sigma^2_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, [d(x_j) - \\mu_\\rho[f_k, d, x_i]]^2\n240: \n241: $$\n242: \n243: where $w_{ij}(\\rho)$ are the normalized localization weights. The normalization $\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)$ ensures $\\sum_{j \\in A_k} w_{ij}(\\rho) = 1$, making $\\mu_\\rho$ a convex combination over the alive swarm.",
      "metadata": {
        "label": "def-localized-mean-field-moments"
      },
      "section": "## 1. The Unified Measurement Pipeline",
      "references": [],
      "raw_directive": "192: ### 1.0.3. Unified Localized Statistical Moments\n193: \n194: :::{prf:definition} Localized Mean-Field Moments\n195: :label: def-localized-mean-field-moments\n196: \n197: For a probability distribution $f \\in \\mathcal{P}(\\mathcal{X} \\times \\mathbb{R}^d)$, measurement function $d: \\mathcal{X} \\to \\mathbb{R}$, and reference point $x \\in \\mathcal{X}$, the **ρ-localized statistical moments** are:\n198: \n199: **Localized Mean:**\n200: \n201: $$\n202: \\mu_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, d(x') \\, f(x', v) \\, dx' \\, dv\n203: \n204: $$\n205: \n206: **Localized Variance:**\n207: \n208: $$\n209: \\sigma^2_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, [d(x') - \\mu_\\rho[f, d, x]]^2 \\, f(x', v) \\, dx' \\, dv\n210: \n211: $$\n212: \n213: **For the N-Particle System:** The full swarm state consists of N walkers, but only the **alive walker set** $A_k \\subseteq \\{1, \\ldots, N\\}$ with $|A_k| = k$ participates in the statistical measurements and adaptive dynamics. We define:\n214: \n215: **Full Empirical Measure (all walkers, including dead):**\n216: \n217: $$\n218: f_N := \\frac{1}{N} \\sum_{i=1}^N \\delta_{(x_i, v_i)}\n219: \n220: $$\n221: \n222: This measure describes the complete N-particle state but is **not used** for computing adaptive statistics.\n223: \n224: **Alive-Walker Empirical Measure (only alive walkers):**\n225: \n226: $$\n227: f_k := \\frac{1}{k} \\sum_{i \\in A_k} \\delta_{(x_i, v_i)}\n228: \n229: $$\n230: \n231: This is the measure used for **all** statistical moments, fitness potentials, and adaptive forces. Substituting $f_k$ into the integral definitions above yields the discrete forms:\n232: \n233: $$\n234: \\mu_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, d(x_j), \\quad w_{ij}(\\rho) := \\frac{K_\\rho(x_i, x_j)}{\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)}\n235: \n236: $$\n237: \n238: $$\n239: \\sigma^2_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, [d(x_j) - \\mu_\\rho[f_k, d, x_i]]^2\n240: \n241: $$\n242: \n243: where $w_{ij}(\\rho)$ are the normalized localization weights. The normalization $\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)$ ensures $\\sum_{j \\in A_k} w_{ij}(\\rho) = 1$, making $\\mu_\\rho$ a convex combination over the alive swarm.\n244: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. The Unified Measurement Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-unified-z-score",
      "title": "Unified Localized Z-Score",
      "start_line": 281,
      "end_line": 317,
      "header_lines": [
        282
      ],
      "content_start": 284,
      "content_end": 316,
      "content": "284: :label: def-unified-z-score\n285: \n286: The **unified ρ-dependent Z-score** combines spatial localization with numerical regularization in three steps:\n287: \n288: **Step 1: Localized Standard Deviation**\n289: \n290: $$\n291: \\sigma_\\rho[f, d, x] := \\sqrt{\\sigma^2_\\rho[f, d, x]}\n292: \n293: $$\n294: \n295: **Step 2: Numerical Regularization (C¹ Smoothing)**\n296: \n297: $$\n298: \\sigma'_\\rho[f, d, x] := \\sigma'_{\\text{reg}}(\\sigma^2_\\rho[f, d, x])\n299: \n300: $$\n301: \n302: where $\\sigma'_{\\text{reg}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$ is the **C^∞ regularized standard deviation function** from `01_fractal_gas_framework.md` (Definition `def-statistical-properties-measurement`). This function is defined as $\\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}$, ensuring:\n303: - **C^∞ regularity**: $\\sigma'_{\\text{reg}}$ is infinitely differentiable everywhere\n304: - **Positive lower bound**: $\\sigma'_{\\text{reg}}(V) \\ge \\sigma'_{\\min} > 0$ for all $V \\ge 0$\n305: - **Global Lipschitz**: $|(\\sigma'_{\\text{reg}})'(V)| \\le L_{\\sigma'_{\\text{reg}}} = \\frac{1}{2\\sigma'_{\\min}}$ for all $V \\ge 0$\n306: \n307: **Step 3: Z-Score Construction**\n308: \n309: $$\n310: Z_\\rho[f, d, x] := \\frac{d(x) - \\mu_\\rho[f, d, x]}{\\sigma'_\\rho[f, d, x]}\n311: \n312: $$\n313: \n314: **Properties:**\n315: - **Boundedness:** If $d$ is bounded, then $Z_\\rho$ is uniformly bounded across all $f, x, \\rho$.\n316: - **Well-posedness:** The regularization ensures $Z_\\rho$ is always defined and finite.",
      "metadata": {
        "label": "def-unified-z-score"
      },
      "section": "## 1. The Unified Measurement Pipeline",
      "references": [],
      "raw_directive": "281: ### 1.0.4. The Unified Z-Score with Regularization\n282: \n283: :::{prf:definition} Unified Localized Z-Score\n284: :label: def-unified-z-score\n285: \n286: The **unified ρ-dependent Z-score** combines spatial localization with numerical regularization in three steps:\n287: \n288: **Step 1: Localized Standard Deviation**\n289: \n290: $$\n291: \\sigma_\\rho[f, d, x] := \\sqrt{\\sigma^2_\\rho[f, d, x]}\n292: \n293: $$\n294: \n295: **Step 2: Numerical Regularization (C¹ Smoothing)**\n296: \n297: $$\n298: \\sigma'_\\rho[f, d, x] := \\sigma'_{\\text{reg}}(\\sigma^2_\\rho[f, d, x])\n299: \n300: $$\n301: \n302: where $\\sigma'_{\\text{reg}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$ is the **C^∞ regularized standard deviation function** from `01_fractal_gas_framework.md` (Definition `def-statistical-properties-measurement`). This function is defined as $\\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}$, ensuring:\n303: - **C^∞ regularity**: $\\sigma'_{\\text{reg}}$ is infinitely differentiable everywhere\n304: - **Positive lower bound**: $\\sigma'_{\\text{reg}}(V) \\ge \\sigma'_{\\min} > 0$ for all $V \\ge 0$\n305: - **Global Lipschitz**: $|(\\sigma'_{\\text{reg}})'(V)| \\le L_{\\sigma'_{\\text{reg}}} = \\frac{1}{2\\sigma'_{\\min}}$ for all $V \\ge 0$\n306: \n307: **Step 3: Z-Score Construction**\n308: \n309: $$\n310: Z_\\rho[f, d, x] := \\frac{d(x) - \\mu_\\rho[f, d, x]}{\\sigma'_\\rho[f, d, x]}\n311: \n312: $$\n313: \n314: **Properties:**\n315: - **Boundedness:** If $d$ is bounded, then $Z_\\rho$ is uniformly bounded across all $f, x, \\rho$.\n316: - **Well-posedness:** The regularization ensures $Z_\\rho$ is always defined and finite.\n317: - **Localization:** For finite ρ, the Z-score measures relative quality compared to the *local neighborhood*.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. The Unified Measurement Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-hybrid-sde",
      "title": "The Adaptive Viscous Fluid SDE",
      "start_line": 382,
      "end_line": 445,
      "header_lines": [
        383
      ],
      "content_start": 385,
      "content_end": 444,
      "content": "385: :label: def-hybrid-sde\n386: \n387: The evolution of each walker $i \\in \\{1, \\dots, N\\}$ is governed by a coupled Stratonovich SDE on the phase space $\\mathcal{X} \\times \\mathbb{R}^d$:\n388: \n389: $$\n390: \\begin{aligned}\n391: dx_i &= v_i \\, dt \\\\\n392: dv_i &= \\left[ \\mathbf{F}_{\\text{stable}}(x_i) + \\mathbf{F}_{\\text{adapt}}(x_i, S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i \\right] dt + \\Sigma_{\\text{reg}}(x_i, S) \\circ dW_i\n393: \\end{aligned}\n394: \n395: $$\n396: \n397: where `S` denotes the full N-particle swarm state. The five components of the dynamics are defined as follows.\n398: \n399: **1. The Stability Force (`F_stable`):**\n400: The gradient of a static, globally confining potential `U(x)`.\n401: \n402: $$\n403: \\mathbf{F}_{\\text{stable}}(x_i) := -\\nabla U(x_i)\n404: \n405: $$\n406: \n407: *   **Role:** The unconditional anchor for stability. It provides a global restoring force that prevents the swarm from drifting to the boundary, guaranteeing recurrence. Its properties are defined by the **Axiom of a Globally Confining Potential** (Axiom 3.1.1).\n408: \n409: **2. The Adaptive Force (`F_adapt`):**\n410: The gradient of the mean-field fitness potential `V_fit[f_k, ρ]`, scaled by a small parameter `ε_F`.\n411: \n412: $$\n413: \\mathbf{F}_{\\text{adapt}}(x_i, S) := \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i)\n414: \n415: $$\n416: \n417: where $V_{\\text{fit}}[f_k, \\rho]$ is the fitness potential computed using the **alive-walker empirical measure** $f_k$ and a **finite localization scale ρ > 0** (see Definition {prf:ref}`def-localized-mean-field-fitness`).\n418: *   **Role:** Provides intelligent guidance, pushing walkers towards regions of higher fitness as perceived by their **local neighborhood**. The scale ρ controls the spatial extent of this neighborhood. Its properties are defined by the **Axiom of Bounded Adaptive Force** (Axiom 3.2.1).\n419: \n420: **3. The Viscous Force (`F_viscous`):**\n421: A non-local velocity-coupling term analogous to the viscosity term in the Navier-Stokes equations, scaled by a viscosity parameter `ν`. The coupling uses **row-normalized weights** to ensure N-uniform bounds.\n422: \n423: $$\n424: \\mathbf{F}_{\\text{viscous}}(x_i, S) := \\nu \\sum_{j \\neq i} \\frac{K(x_i - x_j)}{\\sum_{k \\neq i} K(x_i - x_k)} (v_j - v_i)\n425: \n426: $$\n427: \n428: where the normalization factor $\\deg(i) := \\sum_{k \\neq i} K(x_i - x_k)$ is the **local degree** of walker $i$ (total coupling weight to all neighbors).\n429: \n430: *   **Role:** Smoothes the velocity field, dissipates relative kinetic energy, and encourages coherent, fluid-like motion. The normalization ensures that the effective coupling strength is bounded independently of $N$, preventing the operator norm from growing with swarm size.\n431: *   **Interpretation:** Each neighbor $j$ contributes proportionally to its \"visibility weight\" $K(x_i - x_j)$ relative to the total visibility $\\deg(i)$. This produces a **weighted average** of velocity differences rather than a sum, analogous to SPH (Smoothed Particle Hydrodynamics) normalization.\n432: *   **Properties:** Defined by the **Axiom of a Well-Behaved Viscous Kernel** (Axiom 3.2.2).\n433: \n434: **4. The Bulk Friction (`-γv_i`):**\n435: A standard linear friction term with coefficient `γ > 0`.\n436: *   **Role:** Provides unconditional dissipation of kinetic energy, preventing kinetic explosion and ensuring the velocity distribution can thermalize.\n437: \n438: **5. The Regularized Adaptive Diffusion (`Σ_reg`):**\n439: The matrix square root of the regularized inverse Hessian of the **ρ-localized fitness potential**.\n440: \n441: $$\n442: \\Sigma_{\\text{reg}}(x_i, S) := \\left( \\nabla^2_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i) + \\epsilon_\\Sigma I \\right)^{-1/2}\n443: \n444: $$",
      "metadata": {
        "label": "def-hybrid-sde"
      },
      "section": "## 2. Formal Definition of the Hybrid SDE",
      "references": [
        "def-localized-mean-field-fitness"
      ],
      "raw_directive": "382: The central object of study is the following stochastic differential equation, which governs the evolution of each walker in the swarm.\n383: \n384: :::{prf:definition} The Adaptive Viscous Fluid SDE\n385: :label: def-hybrid-sde\n386: \n387: The evolution of each walker $i \\in \\{1, \\dots, N\\}$ is governed by a coupled Stratonovich SDE on the phase space $\\mathcal{X} \\times \\mathbb{R}^d$:\n388: \n389: $$\n390: \\begin{aligned}\n391: dx_i &= v_i \\, dt \\\\\n392: dv_i &= \\left[ \\mathbf{F}_{\\text{stable}}(x_i) + \\mathbf{F}_{\\text{adapt}}(x_i, S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i \\right] dt + \\Sigma_{\\text{reg}}(x_i, S) \\circ dW_i\n393: \\end{aligned}\n394: \n395: $$\n396: \n397: where `S` denotes the full N-particle swarm state. The five components of the dynamics are defined as follows.\n398: \n399: **1. The Stability Force (`F_stable`):**\n400: The gradient of a static, globally confining potential `U(x)`.\n401: \n402: $$\n403: \\mathbf{F}_{\\text{stable}}(x_i) := -\\nabla U(x_i)\n404: \n405: $$\n406: \n407: *   **Role:** The unconditional anchor for stability. It provides a global restoring force that prevents the swarm from drifting to the boundary, guaranteeing recurrence. Its properties are defined by the **Axiom of a Globally Confining Potential** (Axiom 3.1.1).\n408: \n409: **2. The Adaptive Force (`F_adapt`):**\n410: The gradient of the mean-field fitness potential `V_fit[f_k, ρ]`, scaled by a small parameter `ε_F`.\n411: \n412: $$\n413: \\mathbf{F}_{\\text{adapt}}(x_i, S) := \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i)\n414: \n415: $$\n416: \n417: where $V_{\\text{fit}}[f_k, \\rho]$ is the fitness potential computed using the **alive-walker empirical measure** $f_k$ and a **finite localization scale ρ > 0** (see Definition {prf:ref}`def-localized-mean-field-fitness`).\n418: *   **Role:** Provides intelligent guidance, pushing walkers towards regions of higher fitness as perceived by their **local neighborhood**. The scale ρ controls the spatial extent of this neighborhood. Its properties are defined by the **Axiom of Bounded Adaptive Force** (Axiom 3.2.1).\n419: \n420: **3. The Viscous Force (`F_viscous`):**\n421: A non-local velocity-coupling term analogous to the viscosity term in the Navier-Stokes equations, scaled by a viscosity parameter `ν`. The coupling uses **row-normalized weights** to ensure N-uniform bounds.\n422: \n423: $$\n424: \\mathbf{F}_{\\text{viscous}}(x_i, S) := \\nu \\sum_{j \\neq i} \\frac{K(x_i - x_j)}{\\sum_{k \\neq i} K(x_i - x_k)} (v_j - v_i)\n425: \n426: $$\n427: \n428: where the normalization factor $\\deg(i) := \\sum_{k \\neq i} K(x_i - x_k)$ is the **local degree** of walker $i$ (total coupling weight to all neighbors).\n429: \n430: *   **Role:** Smoothes the velocity field, dissipates relative kinetic energy, and encourages coherent, fluid-like motion. The normalization ensures that the effective coupling strength is bounded independently of $N$, preventing the operator norm from growing with swarm size.\n431: *   **Interpretation:** Each neighbor $j$ contributes proportionally to its \"visibility weight\" $K(x_i - x_j)$ relative to the total visibility $\\deg(i)$. This produces a **weighted average** of velocity differences rather than a sum, analogous to SPH (Smoothed Particle Hydrodynamics) normalization.\n432: *   **Properties:** Defined by the **Axiom of a Well-Behaved Viscous Kernel** (Axiom 3.2.2).\n433: \n434: **4. The Bulk Friction (`-γv_i`):**\n435: A standard linear friction term with coefficient `γ > 0`.\n436: *   **Role:** Provides unconditional dissipation of kinetic energy, preventing kinetic explosion and ensuring the velocity distribution can thermalize.\n437: \n438: **5. The Regularized Adaptive Diffusion (`Σ_reg`):**\n439: The matrix square root of the regularized inverse Hessian of the **ρ-localized fitness potential**.\n440: \n441: $$\n442: \\Sigma_{\\text{reg}}(x_i, S) := \\left( \\nabla^2_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i) + \\epsilon_\\Sigma I \\right)^{-1/2}\n443: \n444: $$\n445: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Formal Definition of the Hybrid SDE"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-regularized-hessian-tensor",
      "title": "Regularized Hessian Diffusion Tensor",
      "start_line": 451,
      "end_line": 472,
      "header_lines": [
        452
      ],
      "content_start": 454,
      "content_end": 471,
      "content": "454: :label: def-regularized-hessian-tensor\n455: \n456: Let `V_fit(S)` be the N-dimensional fitness potential vector, as defined in `03_cloning.md` (Def. 5.6.1). For each walker `i`, let `V_i(x_1, ..., x_N)` be its fitness potential, viewed as a function of all walker positions. Let `H_i(S) = ∇²_{x_i} V_i` be the Hessian of walker `i`'s fitness with respect to its own position.\n457: \n458: The **Regularized Adaptive Diffusion Tensor** for walker `i` is defined as:\n459: \n460: $$\n461: \\Sigma_{\\text{reg}}(x_i, S) := \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1/2}\n462: \n463: $$\n464: \n465: where `ε_Σ > 0` is a fixed, small **regularization constant**.\n466: \n467: The induced Riemannian metric for the kinetic dynamics is the inverse of the regularized Hessian:\n468: \n469: $$\n470: G_{\\text{reg}}(x_i, S) := \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1}\n471: ",
      "metadata": {
        "label": "def-regularized-hessian-tensor"
      },
      "section": "## 2. The Regularized Diffusion Tensor",
      "references": [],
      "raw_directive": "451: The most innovative component of this model is the adaptive diffusion tensor. This section formally defines it and explains the critical role of regularization.\n452: \n453: :::{prf:definition} Regularized Hessian Diffusion Tensor\n454: :label: def-regularized-hessian-tensor\n455: \n456: Let `V_fit(S)` be the N-dimensional fitness potential vector, as defined in `03_cloning.md` (Def. 5.6.1). For each walker `i`, let `V_i(x_1, ..., x_N)` be its fitness potential, viewed as a function of all walker positions. Let `H_i(S) = ∇²_{x_i} V_i` be the Hessian of walker `i`'s fitness with respect to its own position.\n457: \n458: The **Regularized Adaptive Diffusion Tensor** for walker `i` is defined as:\n459: \n460: $$\n461: \\Sigma_{\\text{reg}}(x_i, S) := \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1/2}\n462: \n463: $$\n464: \n465: where `ε_Σ > 0` is a fixed, small **regularization constant**.\n466: \n467: The induced Riemannian metric for the kinetic dynamics is the inverse of the regularized Hessian:\n468: \n469: $$\n470: G_{\\text{reg}}(x_i, S) := \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1}\n471: \n472: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 2. The Regularized Diffusion Tensor"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localized-mean-field-fitness",
      "title": "Localized Mean-Field Fitness Potential",
      "start_line": 492,
      "end_line": 522,
      "header_lines": [
        493
      ],
      "content_start": 495,
      "content_end": 521,
      "content": "495: :label: def-localized-mean-field-fitness\n496: \n497: The **ρ-localized mean-field fitness potential** $V_{\\text{fit}}[f, \\rho]: \\mathcal{X} \\to \\mathbb{R}$ for a walker at position $x \\in \\mathcal{X}$ is defined as:\n498: \n499: $$\n500: V_{\\text{fit}}[f, \\rho](x) := g_A\\left( Z_\\rho[f, d, x] \\right)\n501: \n502: $$\n503: \n504: where:\n505: \n506: 1.  **Rescale Function:** $g_A: \\mathbb{R} \\to [0, A]$ is a smooth, bounded, monotone increasing function (e.g., $g_A(z) = A/(1 + e^{-z})$).\n507: \n508: 2.  **Unified Z-Score:** $Z_\\rho[f, d, x]$ is the unified localized Z-score from Definition {prf:ref}`def-unified-z-score`, which combines:\n509:    - Localization via kernel $K_\\rho(x, x')$\n510:    - Statistical moments $\\mu_\\rho[f, d, x]$ and $\\sigma^2_\\rho[f, d, x]$ from Definition {prf:ref}`def-localized-mean-field-moments`\n511:    - Numerical regularization via $\\kappa_{\\text{var,min}}$\n512: \n513: 3.  **Measurement Function:** $d: \\mathcal{X} \\to \\mathbb{R}$ is a bounded measurement of local objective quality (e.g., reward, distance to target).\n514: \n515: **Properties:**\n516: - **ρ-Dependence:** The fitness explicitly depends on the localization scale ρ, which controls the spatial extent of statistical aggregation.\n517: - **Nonlocality:** For finite ρ, $V_{\\text{fit}}[f, \\rho](x)$ depends on the distribution $f$ within the ρ-neighborhood of $x$.\n518: - **Nonlinearity:** The functional is nonlinear in $f$ due to the Z-score's division by localized standard deviation.\n519: - **Boundedness:** $0 \\le V_{\\text{fit}}[f, \\rho](x) \\le A$ for all $x, f, \\rho$ by construction (due to bounded rescale and regularized Z-score).\n520: - **Smoothness:** $V_{\\text{fit}}[f, \\rho](x)$ is $C^\\infty$ in $x$ (provided $f$ is sufficiently regular) due to the smoothness of $g_A$, $K_\\rho$, and the regularization.\n521: - **Limiting Behavior:**",
      "metadata": {
        "label": "def-localized-mean-field-fitness"
      },
      "section": "## 2. The Regularized Diffusion Tensor",
      "references": [
        "def-unified-z-score",
        "def-localized-mean-field-moments"
      ],
      "raw_directive": "492: The adaptive force $\\mathbf{F}_{\\text{adapt}}$ and the regularized diffusion tensor $\\Sigma_{\\text{reg}}$ depend on the fitness potential $V_{\\text{fit}}[f, \\rho]$, which is a ρ-parameterized functional of the swarm state. This section connects the unified pipeline from Chapter 1 to the adaptive dynamics.\n493: \n494: :::{prf:definition} Localized Mean-Field Fitness Potential\n495: :label: def-localized-mean-field-fitness\n496: \n497: The **ρ-localized mean-field fitness potential** $V_{\\text{fit}}[f, \\rho]: \\mathcal{X} \\to \\mathbb{R}$ for a walker at position $x \\in \\mathcal{X}$ is defined as:\n498: \n499: $$\n500: V_{\\text{fit}}[f, \\rho](x) := g_A\\left( Z_\\rho[f, d, x] \\right)\n501: \n502: $$\n503: \n504: where:\n505: \n506: 1.  **Rescale Function:** $g_A: \\mathbb{R} \\to [0, A]$ is a smooth, bounded, monotone increasing function (e.g., $g_A(z) = A/(1 + e^{-z})$).\n507: \n508: 2.  **Unified Z-Score:** $Z_\\rho[f, d, x]$ is the unified localized Z-score from Definition {prf:ref}`def-unified-z-score`, which combines:\n509:    - Localization via kernel $K_\\rho(x, x')$\n510:    - Statistical moments $\\mu_\\rho[f, d, x]$ and $\\sigma^2_\\rho[f, d, x]$ from Definition {prf:ref}`def-localized-mean-field-moments`\n511:    - Numerical regularization via $\\kappa_{\\text{var,min}}$\n512: \n513: 3.  **Measurement Function:** $d: \\mathcal{X} \\to \\mathbb{R}$ is a bounded measurement of local objective quality (e.g., reward, distance to target).\n514: \n515: **Properties:**\n516: - **ρ-Dependence:** The fitness explicitly depends on the localization scale ρ, which controls the spatial extent of statistical aggregation.\n517: - **Nonlocality:** For finite ρ, $V_{\\text{fit}}[f, \\rho](x)$ depends on the distribution $f$ within the ρ-neighborhood of $x$.\n518: - **Nonlinearity:** The functional is nonlinear in $f$ due to the Z-score's division by localized standard deviation.\n519: - **Boundedness:** $0 \\le V_{\\text{fit}}[f, \\rho](x) \\le A$ for all $x, f, \\rho$ by construction (due to bounded rescale and regularized Z-score).\n520: - **Smoothness:** $V_{\\text{fit}}[f, \\rho](x)$ is $C^\\infty$ in $x$ (provided $f$ is sufficiently regular) due to the smoothness of $g_A$, $K_\\rho$, and the regularization.\n521: - **Limiting Behavior:**\n522:   - As $\\rho \\to \\infty$: Recovers the global fitness potential from `03_cloning.md`",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 2. The Regularized Diffusion Tensor"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-backbone-sde",
      "title": "The Backbone SDE",
      "start_line": 1085,
      "end_line": 1111,
      "header_lines": [
        1086
      ],
      "content_start": 1088,
      "content_end": 1110,
      "content": "1088: :label: def-backbone-sde\n1089: \n1090: The **backbone system** is obtained from the full Hybrid SDE ([](#def-hybrid-sde)) by setting all adaptive parameters to zero:\n1091: \n1092: $$\n1093: \\epsilon_F = 0, \\quad \\nu = 0, \\quad \\Sigma_{\\text{reg}}(x, S) = \\sigma I\n1094: \n1095: $$\n1096: \n1097: This yields the simplified SDE:\n1098: \n1099: $$\n1100: \\begin{aligned}\n1101: dx_i &= v_i \\, dt \\\\\n1102: dv_i &= \\left[ -\\nabla U(x_i) - \\gamma v_i \\right] dt + \\sigma \\, dW_i\n1103: \\end{aligned}\n1104: \n1105: $$\n1106: \n1107: The backbone is a **static underdamped Langevin equation** with:\n1108: - Globally confining potential $U(x)$\n1109: - Constant friction coefficient $\\gamma > 0$\n1110: - Constant isotropic diffusion $\\sigma > 0$",
      "metadata": {
        "label": "def-backbone-sde"
      },
      "section": "## 5. The Stable Backbone System",
      "references": [],
      "raw_directive": "1085: ### 5.1. Definition of the Backbone System\n1086: \n1087: :::{prf:definition} The Backbone SDE\n1088: :label: def-backbone-sde\n1089: \n1090: The **backbone system** is obtained from the full Hybrid SDE ([](#def-hybrid-sde)) by setting all adaptive parameters to zero:\n1091: \n1092: $$\n1093: \\epsilon_F = 0, \\quad \\nu = 0, \\quad \\Sigma_{\\text{reg}}(x, S) = \\sigma I\n1094: \n1095: $$\n1096: \n1097: This yields the simplified SDE:\n1098: \n1099: $$\n1100: \\begin{aligned}\n1101: dx_i &= v_i \\, dt \\\\\n1102: dv_i &= \\left[ -\\nabla U(x_i) - \\gamma v_i \\right] dt + \\sigma \\, dW_i\n1103: \\end{aligned}\n1104: \n1105: $$\n1106: \n1107: The backbone is a **static underdamped Langevin equation** with:\n1108: - Globally confining potential $U(x)$\n1109: - Constant friction coefficient $\\gamma > 0$\n1110: - Constant isotropic diffusion $\\sigma > 0$\n1111: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 5. The Stable Backbone System"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-strat-drift",
      "title": "Stratonovich Drift for the Hybrid System",
      "start_line": 1289,
      "end_line": 1331,
      "header_lines": [
        1290
      ],
      "content_start": 1292,
      "content_end": 1330,
      "content": "1292: :label: def-strat-drift\n1293: \n1294: For the Hybrid SDE with drift:\n1295: \n1296: $$\n1297: b_i(S) = -\\nabla U(x_i) + \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1298: \n1299: $$\n1300: \n1301: we define:\n1302: \n1303: **Backbone drift:**\n1304: \n1305: $$\n1306: A_{\\text{backbone}}(S) = \\sum_{i=1}^N \\left[ \\langle \\nabla_{x_i} V, v_i \\rangle + \\langle \\nabla_{v_i} V, -\\nabla U(x_i) - \\gamma v_i \\rangle \\right] + \\frac{1}{2} \\sigma^2 \\sum_{i=1}^N \\|\\nabla_{v_i} V\\|^2\n1307: \n1308: $$\n1309: \n1310: (This corresponds to $\\epsilon_F = 0$, $\\nu = 0$, $\\Sigma_{\\text{reg}} = \\sigma I$.)\n1311: \n1312: **Adaptive perturbation drift:**\n1313: \n1314: $$\n1315: A_{\\text{perturb}}(S) = \\sum_{i=1}^N \\langle \\nabla_{v_i} V, \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) \\rangle + A_{\\text{diff}}(S)\n1316: \n1317: $$\n1318: \n1319: where $A_{\\text{diff}}(S)$ is the additional drift from the state-dependent diffusion:\n1320: \n1321: $$\n1322: A_{\\text{diff}}(S) = \\frac{1}{2} \\sum_{i=1}^N \\sum_{j=1}^d \\left[ (\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i})(\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i} V) - \\sigma^2 \\|\\nabla_{v_i} V\\|^2 \\right]\n1323: \n1324: $$\n1325: \n1326: The total Stratonovich drift is:\n1327: \n1328: $$\n1329: A_{\\text{full}}(S) = A_{\\text{backbone}}(S) + A_{\\text{perturb}}(S)\n1330: ",
      "metadata": {
        "label": "def-strat-drift"
      },
      "section": "## 5.4. The Stratonovich Chain Rule and Drift Calculation",
      "references": [],
      "raw_directive": "1289: :::\n1290: \n1291: :::{prf:definition} Stratonovich Drift for the Hybrid System\n1292: :label: def-strat-drift\n1293: \n1294: For the Hybrid SDE with drift:\n1295: \n1296: $$\n1297: b_i(S) = -\\nabla U(x_i) + \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1298: \n1299: $$\n1300: \n1301: we define:\n1302: \n1303: **Backbone drift:**\n1304: \n1305: $$\n1306: A_{\\text{backbone}}(S) = \\sum_{i=1}^N \\left[ \\langle \\nabla_{x_i} V, v_i \\rangle + \\langle \\nabla_{v_i} V, -\\nabla U(x_i) - \\gamma v_i \\rangle \\right] + \\frac{1}{2} \\sigma^2 \\sum_{i=1}^N \\|\\nabla_{v_i} V\\|^2\n1307: \n1308: $$\n1309: \n1310: (This corresponds to $\\epsilon_F = 0$, $\\nu = 0$, $\\Sigma_{\\text{reg}} = \\sigma I$.)\n1311: \n1312: **Adaptive perturbation drift:**\n1313: \n1314: $$\n1315: A_{\\text{perturb}}(S) = \\sum_{i=1}^N \\langle \\nabla_{v_i} V, \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) \\rangle + A_{\\text{diff}}(S)\n1316: \n1317: $$\n1318: \n1319: where $A_{\\text{diff}}(S)$ is the additional drift from the state-dependent diffusion:\n1320: \n1321: $$\n1322: A_{\\text{diff}}(S) = \\frac{1}{2} \\sum_{i=1}^N \\sum_{j=1}^d \\left[ (\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i})(\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i} V) - \\sigma^2 \\|\\nabla_{v_i} V\\|^2 \\right]\n1323: \n1324: $$\n1325: \n1326: The total Stratonovich drift is:\n1327: \n1328: $$\n1329: A_{\\text{full}}(S) = A_{\\text{backbone}}(S) + A_{\\text{perturb}}(S)\n1330: \n1331: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 5.4. The Stratonovich Chain Rule and Drift Calculation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-n-particle-generator-lsi",
      "title": "The N-Particle Generator for the Adaptive System",
      "start_line": 1959,
      "end_line": 1993,
      "header_lines": [
        1960
      ],
      "content_start": 1962,
      "content_end": 1992,
      "content": "1962: :label: def-n-particle-generator-lsi\n1963: \n1964: The infinitesimal generator $\\mathcal{L}_N$ for the N-particle Geometric Viscous Fluid Model acts on sufficiently smooth test functions $f: (\\mathcal{X} \\times \\mathbb{R}^d)^N \\to \\mathbb{R}$ as:\n1965: \n1966: $$\n1967: \\mathcal{L}_N f = \\mathcal{L}_{\\text{kin},N} f + \\mathcal{L}_{\\text{clone},N} f\n1968: \n1969: $$\n1970: \n1971: where:\n1972: \n1973: **Kinetic Part:**\n1974: \n1975: $$\n1976: \\mathcal{L}_{\\text{kin},N} f = \\sum_{i=1}^N \\left[ v_i \\cdot \\nabla_{x_i} f + \\mathbf{F}_{\\text{total}}(x_i, S) \\cdot \\nabla_{v_i} f + \\frac{1}{2} \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla^2_{v_i} f \\right) \\right]\n1977: \n1978: $$\n1979: \n1980: with total force:\n1981: \n1982: $$\n1983: \\mathbf{F}_{\\text{total}}(x_i, S) = -\\nabla U(x_i) + \\epsilon_F \\nabla V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1984: \n1985: $$\n1986: \n1987: and regularized diffusion matrix:\n1988: \n1989: $$\n1990: D_{\\text{reg}}(x_i, S) = \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = (H_i(S) + \\epsilon_\\Sigma I)^{-1}\n1991: \n1992: $$",
      "metadata": {
        "label": "def-n-particle-generator-lsi"
      },
      "section": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening",
      "references": [],
      "raw_directive": "1959: Before stating the main theorem, we formally define the key mathematical objects for the LSI proof.\n1960: \n1961: :::{prf:definition} The N-Particle Generator for the Adaptive System\n1962: :label: def-n-particle-generator-lsi\n1963: \n1964: The infinitesimal generator $\\mathcal{L}_N$ for the N-particle Geometric Viscous Fluid Model acts on sufficiently smooth test functions $f: (\\mathcal{X} \\times \\mathbb{R}^d)^N \\to \\mathbb{R}$ as:\n1965: \n1966: $$\n1967: \\mathcal{L}_N f = \\mathcal{L}_{\\text{kin},N} f + \\mathcal{L}_{\\text{clone},N} f\n1968: \n1969: $$\n1970: \n1971: where:\n1972: \n1973: **Kinetic Part:**\n1974: \n1975: $$\n1976: \\mathcal{L}_{\\text{kin},N} f = \\sum_{i=1}^N \\left[ v_i \\cdot \\nabla_{x_i} f + \\mathbf{F}_{\\text{total}}(x_i, S) \\cdot \\nabla_{v_i} f + \\frac{1}{2} \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla^2_{v_i} f \\right) \\right]\n1977: \n1978: $$\n1979: \n1980: with total force:\n1981: \n1982: $$\n1983: \\mathbf{F}_{\\text{total}}(x_i, S) = -\\nabla U(x_i) + \\epsilon_F \\nabla V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1984: \n1985: $$\n1986: \n1987: and regularized diffusion matrix:\n1988: \n1989: $$\n1990: D_{\\text{reg}}(x_i, S) = \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = (H_i(S) + \\epsilon_\\Sigma I)^{-1}\n1991: \n1992: $$\n1993: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-entropy-fisher-lsi",
      "title": "Relative Entropy and Fisher Information",
      "start_line": 1995,
      "end_line": 2033,
      "header_lines": [
        1996
      ],
      "content_start": 1998,
      "content_end": 2032,
      "content": "1998: :label: def-entropy-fisher-lsi\n1999: \n2000: Let $\\mu$ and $\\nu$ be probability measures on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ with $\\mu \\ll \\nu$ (absolutely continuous). Denote the Radon-Nikodym derivative by $h = d\\mu/d\\nu$.\n2001: \n2002: 1. **Relative Entropy (Kullback-Leibler divergence):**\n2003: \n2004: $$\n2005: \\text{Ent}_\\nu(\\mu) := \\int h \\log h \\, d\\nu = \\int h \\log h \\, d\\nu\n2006: \n2007: $$\n2008: \n2009: For a function $f$, we define $\\text{Ent}_\\nu(f^2) := \\text{Ent}_\\nu(\\mu_f)$ where $d\\mu_f = f^2/\\int f^2 d\\nu \\, d\\nu$.\n2010: \n2011: 2. **Carré du Champ (Fisher Information):**\n2012: \n2013: $$\n2014: \\Gamma_N(f) := \\frac{1}{2} \\left( \\mathcal{L}_N(f^2) - 2f \\mathcal{L}_N f \\right)\n2015: \n2016: $$\n2017: \n2018: For the kinetic part with anisotropic diffusion $D_{\\text{reg}}$:\n2019: \n2020: $$\n2021: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\otimes \\nabla_{v_i} f \\right)\n2022: \n2023: $$\n2024: \n2025: This can be written more explicitly as:\n2026: \n2027: $$\n2028: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\left\\langle \\nabla_{v_i} f, D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\right\\rangle\n2029: \n2030: $$\n2031: \n2032: where the diffusion matrix $D_{\\text{reg}} = (H_i + \\epsilon_\\Sigma I)^{-1}$ is symmetric and positive definite by construction.",
      "metadata": {
        "label": "def-entropy-fisher-lsi"
      },
      "section": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening",
      "references": [],
      "raw_directive": "1995: :::\n1996: \n1997: :::{prf:definition} Relative Entropy and Fisher Information\n1998: :label: def-entropy-fisher-lsi\n1999: \n2000: Let $\\mu$ and $\\nu$ be probability measures on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ with $\\mu \\ll \\nu$ (absolutely continuous). Denote the Radon-Nikodym derivative by $h = d\\mu/d\\nu$.\n2001: \n2002: 1. **Relative Entropy (Kullback-Leibler divergence):**\n2003: \n2004: $$\n2005: \\text{Ent}_\\nu(\\mu) := \\int h \\log h \\, d\\nu = \\int h \\log h \\, d\\nu\n2006: \n2007: $$\n2008: \n2009: For a function $f$, we define $\\text{Ent}_\\nu(f^2) := \\text{Ent}_\\nu(\\mu_f)$ where $d\\mu_f = f^2/\\int f^2 d\\nu \\, d\\nu$.\n2010: \n2011: 2. **Carré du Champ (Fisher Information):**\n2012: \n2013: $$\n2014: \\Gamma_N(f) := \\frac{1}{2} \\left( \\mathcal{L}_N(f^2) - 2f \\mathcal{L}_N f \\right)\n2015: \n2016: $$\n2017: \n2018: For the kinetic part with anisotropic diffusion $D_{\\text{reg}}$:\n2019: \n2020: $$\n2021: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\otimes \\nabla_{v_i} f \\right)\n2022: \n2023: $$\n2024: \n2025: This can be written more explicitly as:\n2026: \n2027: $$\n2028: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\left\\langle \\nabla_{v_i} f, D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\right\\rangle\n2029: \n2030: $$\n2031: \n2032: where the diffusion matrix $D_{\\text{reg}} = (H_i + \\epsilon_\\Sigma I)^{-1}$ is symmetric and positive definite by construction.\n2033: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-lsi",
      "title": "Logarithmic Sobolev Inequality (LSI)",
      "start_line": 2035,
      "end_line": 2053,
      "header_lines": [
        2036
      ],
      "content_start": 2038,
      "content_end": 2052,
      "content": "2038: :label: def-lsi\n2039: \n2040: A probability measure $\\nu$ on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ satisfies a **Logarithmic Sobolev Inequality** with constant $C_{\\text{LSI}} > 0$ if for every sufficiently smooth function $f$:\n2041: \n2042: $$\n2043: \\text{Ent}_\\nu(f^2) \\le C_{\\text{LSI}} \\int \\Gamma_N(f) \\, d\\nu\n2044: \n2045: $$\n2046: \n2047: **Equivalent Formulation (Relative Entropy):** For probability measures $\\mu \\ll \\nu$ with density $h$:\n2048: \n2049: $$\n2050: \\int h \\log h \\, d\\nu \\le C_{\\text{LSI}} \\int \\frac{\\langle \\mathcal{A} h, \\mathcal{A} h \\rangle}{h} \\, d\\nu\n2051: \n2052: $$",
      "metadata": {
        "label": "def-lsi"
      },
      "section": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening",
      "references": [],
      "raw_directive": "2035: :::\n2036: \n2037: :::{prf:definition} Logarithmic Sobolev Inequality (LSI)\n2038: :label: def-lsi\n2039: \n2040: A probability measure $\\nu$ on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ satisfies a **Logarithmic Sobolev Inequality** with constant $C_{\\text{LSI}} > 0$ if for every sufficiently smooth function $f$:\n2041: \n2042: $$\n2043: \\text{Ent}_\\nu(f^2) \\le C_{\\text{LSI}} \\int \\Gamma_N(f) \\, d\\nu\n2044: \n2045: $$\n2046: \n2047: **Equivalent Formulation (Relative Entropy):** For probability measures $\\mu \\ll \\nu$ with density $h$:\n2048: \n2049: $$\n2050: \\int h \\log h \\, d\\nu \\le C_{\\text{LSI}} \\int \\frac{\\langle \\mathcal{A} h, \\mathcal{A} h \\rangle}{h} \\, d\\nu\n2051: \n2052: $$\n2053: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-microlocal",
      "title": "Microlocal Decomposition",
      "start_line": 2564,
      "end_line": 2572,
      "header_lines": [
        2565
      ],
      "content_start": 2567,
      "content_end": 2571,
      "content": "2567: :label: def-microlocal\n2568: \n2569: For any function $h = f / \\rho_{\\text{QSD}}$, define:\n2570: - **Hydrodynamic projection:** $\\Pi h(x) := \\int_{\\mathbb{R}^d} h(x, v) \\rho_{\\text{QSD}}(v | x) \\, dv$\n2571: - **Microscopic fluctuation:** $(I - \\Pi) h := h - \\Pi h$",
      "metadata": {
        "label": "def-microlocal"
      },
      "section": "## 9. Main Convergence Theorems and Physical Interpretation",
      "references": [],
      "raw_directive": "2564: **Step 2: Hypocoercive Decomposition**\n2565: \n2566: :::{prf:definition} Microlocal Decomposition\n2567: :label: def-microlocal\n2568: \n2569: For any function $h = f / \\rho_{\\text{QSD}}$, define:\n2570: - **Hydrodynamic projection:** $\\Pi h(x) := \\int_{\\mathbb{R}^d} h(x, v) \\rho_{\\text{QSD}}(v | x) \\, dv$\n2571: - **Microscopic fluctuation:** $(I - \\Pi) h := h - \\Pi h$\n2572: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 9. Main Convergence Theorems and Physical Interpretation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localization-kernel",
      "title": "Localization Kernel",
      "start_line": 155,
      "end_line": 177,
      "header_lines": [
        156
      ],
      "content_start": 158,
      "content_end": 176,
      "content": "158: :label: def-localization-kernel\n159: \n160: For a localization scale $\\rho > 0$, the **localization kernel** $K_\\rho: \\mathcal{X} \\times \\mathcal{X} \\to [0, 1]$ is a smooth, non-negative function satisfying:\n161: \n162: 1. **Normalization:** $\\int_{\\mathcal{X}} K_\\rho(x, x') \\, dx' = 1$ for all $x \\in \\mathcal{X}$\n163: \n164: 2. **Locality:** $K_\\rho(x, x') \\to 0$ rapidly as $\\|x - x'\\| \\gg \\rho$\n165: \n166: 3. **Symmetry:** $K_\\rho(x, x') = K_\\rho(x', x)$\n167: \n168: 4. **Limit Behavior:**\n169:    - As $\\rho \\to 0$: $K_\\rho(x, x') \\to \\delta(x - x')$ (hyper-local)\n170:    - As $\\rho \\to \\infty$: $K_\\rho(x, x') \\to 1/|\\mathcal{X}|$ (global)\n171: \n172: **Standard Example:** The Gaussian kernel\n173: \n174: $$\n175: K_\\rho(x, x') := \\frac{1}{Z_\\rho(x)} \\exp\\left(-\\frac{\\|x - x'\\|^2}{2\\rho^2}\\right)\n176: $$",
      "metadata": {
        "label": "def-localization-kernel"
      },
      "section": "## 1. The Unified Measurement Pipeline",
      "references": [],
      "raw_directive": "155: ### 1.0.2. The Localization Kernel\n156: \n157: :::{prf:definition} Localization Kernel\n158: :label: def-localization-kernel\n159: \n160: For a localization scale $\\rho > 0$, the **localization kernel** $K_\\rho: \\mathcal{X} \\times \\mathcal{X} \\to [0, 1]$ is a smooth, non-negative function satisfying:\n161: \n162: 1. **Normalization:** $\\int_{\\mathcal{X}} K_\\rho(x, x') \\, dx' = 1$ for all $x \\in \\mathcal{X}$\n163: \n164: 2. **Locality:** $K_\\rho(x, x') \\to 0$ rapidly as $\\|x - x'\\| \\gg \\rho$\n165: \n166: 3. **Symmetry:** $K_\\rho(x, x') = K_\\rho(x', x)$\n167: \n168: 4. **Limit Behavior:**\n169:    - As $\\rho \\to 0$: $K_\\rho(x, x') \\to \\delta(x - x')$ (hyper-local)\n170:    - As $\\rho \\to \\infty$: $K_\\rho(x, x') \\to 1/|\\mathcal{X}|$ (global)\n171: \n172: **Standard Example:** The Gaussian kernel\n173: \n174: $$\n175: K_\\rho(x, x') := \\frac{1}{Z_\\rho(x)} \\exp\\left(-\\frac{\\|x - x'\\|^2}{2\\rho^2}\\right)\n176: $$\n177: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. The Unified Measurement Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localized-mean-field-moments",
      "title": "Localized Mean-Field Moments",
      "start_line": 190,
      "end_line": 236,
      "header_lines": [
        191
      ],
      "content_start": 193,
      "content_end": 235,
      "content": "193: :label: def-localized-mean-field-moments\n194: \n195: For a probability distribution $f \\in \\mathcal{P}(\\mathcal{X} \\times \\mathbb{R}^d)$, measurement function $d: \\mathcal{X} \\to \\mathbb{R}$, and reference point $x \\in \\mathcal{X}$, the **ρ-localized statistical moments** are:\n196: \n197: **Localized Mean:**\n198: \n199: $$\n200: \\mu_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, d(x') \\, f(x', v) \\, dx' \\, dv\n201: $$\n202: \n203: **Localized Variance:**\n204: \n205: $$\n206: \\sigma^2_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, [d(x') - \\mu_\\rho[f, d, x]]^2 \\, f(x', v) \\, dx' \\, dv\n207: $$\n208: \n209: **For the N-Particle System:** The full swarm state consists of N walkers, but only the **alive walker set** $A_k \\subseteq \\{1, \\ldots, N\\}$ with $|A_k| = k$ participates in the statistical measurements and adaptive dynamics. We define:\n210: \n211: **Full Empirical Measure (all walkers, including dead):**\n212: \n213: $$\n214: f_N := \\frac{1}{N} \\sum_{i=1}^N \\delta_{(x_i, v_i)}\n215: $$\n216: \n217: This measure describes the complete N-particle state but is **not used** for computing adaptive statistics.\n218: \n219: **Alive-Walker Empirical Measure (only alive walkers):**\n220: \n221: $$\n222: f_k := \\frac{1}{k} \\sum_{i \\in A_k} \\delta_{(x_i, v_i)}\n223: $$\n224: \n225: This is the measure used for **all** statistical moments, fitness potentials, and adaptive forces. Substituting $f_k$ into the integral definitions above yields the discrete forms:\n226: \n227: $$\n228: \\mu_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, d(x_j), \\quad w_{ij}(\\rho) := \\frac{K_\\rho(x_i, x_j)}{\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)}\n229: $$\n230: \n231: $$\n232: \\sigma^2_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, [d(x_j) - \\mu_\\rho[f_k, d, x_i]]^2\n233: $$\n234: \n235: where $w_{ij}(\\rho)$ are the normalized localization weights. The normalization $\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)$ ensures $\\sum_{j \\in A_k} w_{ij}(\\rho) = 1$, making $\\mu_\\rho$ a convex combination over the alive swarm.",
      "metadata": {
        "label": "def-localized-mean-field-moments"
      },
      "section": "## 1. The Unified Measurement Pipeline",
      "references": [],
      "raw_directive": "190: ### 1.0.3. Unified Localized Statistical Moments\n191: \n192: :::{prf:definition} Localized Mean-Field Moments\n193: :label: def-localized-mean-field-moments\n194: \n195: For a probability distribution $f \\in \\mathcal{P}(\\mathcal{X} \\times \\mathbb{R}^d)$, measurement function $d: \\mathcal{X} \\to \\mathbb{R}$, and reference point $x \\in \\mathcal{X}$, the **ρ-localized statistical moments** are:\n196: \n197: **Localized Mean:**\n198: \n199: $$\n200: \\mu_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, d(x') \\, f(x', v) \\, dx' \\, dv\n201: $$\n202: \n203: **Localized Variance:**\n204: \n205: $$\n206: \\sigma^2_\\rho[f, d, x] := \\int_{\\mathcal{X} \\times \\mathbb{R}^d} K_\\rho(x, x') \\, [d(x') - \\mu_\\rho[f, d, x]]^2 \\, f(x', v) \\, dx' \\, dv\n207: $$\n208: \n209: **For the N-Particle System:** The full swarm state consists of N walkers, but only the **alive walker set** $A_k \\subseteq \\{1, \\ldots, N\\}$ with $|A_k| = k$ participates in the statistical measurements and adaptive dynamics. We define:\n210: \n211: **Full Empirical Measure (all walkers, including dead):**\n212: \n213: $$\n214: f_N := \\frac{1}{N} \\sum_{i=1}^N \\delta_{(x_i, v_i)}\n215: $$\n216: \n217: This measure describes the complete N-particle state but is **not used** for computing adaptive statistics.\n218: \n219: **Alive-Walker Empirical Measure (only alive walkers):**\n220: \n221: $$\n222: f_k := \\frac{1}{k} \\sum_{i \\in A_k} \\delta_{(x_i, v_i)}\n223: $$\n224: \n225: This is the measure used for **all** statistical moments, fitness potentials, and adaptive forces. Substituting $f_k$ into the integral definitions above yields the discrete forms:\n226: \n227: $$\n228: \\mu_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, d(x_j), \\quad w_{ij}(\\rho) := \\frac{K_\\rho(x_i, x_j)}{\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)}\n229: $$\n230: \n231: $$\n232: \\sigma^2_\\rho[f_k, d, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, [d(x_j) - \\mu_\\rho[f_k, d, x_i]]^2\n233: $$\n234: \n235: where $w_{ij}(\\rho)$ are the normalized localization weights. The normalization $\\sum_{\\ell \\in A_k} K_\\rho(x_i, x_\\ell)$ ensures $\\sum_{j \\in A_k} w_{ij}(\\rho) = 1$, making $\\mu_\\rho$ a convex combination over the alive swarm.\n236: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. The Unified Measurement Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-unified-z-score",
      "title": "Unified Localized Z-Score",
      "start_line": 271,
      "end_line": 304,
      "header_lines": [
        272
      ],
      "content_start": 274,
      "content_end": 303,
      "content": "274: :label: def-unified-z-score\n275: \n276: The **unified ρ-dependent Z-score** combines spatial localization with numerical regularization in three steps:\n277: \n278: **Step 1: Localized Standard Deviation**\n279: \n280: $$\n281: \\sigma_\\rho[f, d, x] := \\sqrt{\\sigma^2_\\rho[f, d, x]}\n282: $$\n283: \n284: **Step 2: Numerical Regularization (C¹ Smoothing)**\n285: \n286: $$\n287: \\sigma'_\\rho[f, d, x] := \\sigma'_{\\text{reg}}(\\sigma^2_\\rho[f, d, x])\n288: $$\n289: \n290: where $\\sigma'_{\\text{reg}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$ is the **C^∞ regularized standard deviation function** from `01_fractal_gas_framework.md` (Definition `def-statistical-properties-measurement`). This function is defined as $\\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}$, ensuring:\n291: - **C^∞ regularity**: $\\sigma'_{\\text{reg}}$ is infinitely differentiable everywhere\n292: - **Positive lower bound**: $\\sigma'_{\\text{reg}}(V) \\ge \\sigma'_{\\min} > 0$ for all $V \\ge 0$\n293: - **Global Lipschitz**: $|(\\sigma'_{\\text{reg}})'(V)| \\le L_{\\sigma'_{\\text{reg}}} = \\frac{1}{2\\sigma'_{\\min}}$ for all $V \\ge 0$\n294: \n295: **Step 3: Z-Score Construction**\n296: \n297: $$\n298: Z_\\rho[f, d, x] := \\frac{d(x) - \\mu_\\rho[f, d, x]}{\\sigma'_\\rho[f, d, x]}\n299: $$\n300: \n301: **Properties:**\n302: - **Boundedness:** If $d$ is bounded, then $Z_\\rho$ is uniformly bounded across all $f, x, \\rho$.\n303: - **Well-posedness:** The regularization ensures $Z_\\rho$ is always defined and finite.",
      "metadata": {
        "label": "def-unified-z-score"
      },
      "section": "## 1. The Unified Measurement Pipeline",
      "references": [],
      "raw_directive": "271: ### 1.0.4. The Unified Z-Score with Regularization\n272: \n273: :::{prf:definition} Unified Localized Z-Score\n274: :label: def-unified-z-score\n275: \n276: The **unified ρ-dependent Z-score** combines spatial localization with numerical regularization in three steps:\n277: \n278: **Step 1: Localized Standard Deviation**\n279: \n280: $$\n281: \\sigma_\\rho[f, d, x] := \\sqrt{\\sigma^2_\\rho[f, d, x]}\n282: $$\n283: \n284: **Step 2: Numerical Regularization (C¹ Smoothing)**\n285: \n286: $$\n287: \\sigma'_\\rho[f, d, x] := \\sigma'_{\\text{reg}}(\\sigma^2_\\rho[f, d, x])\n288: $$\n289: \n290: where $\\sigma'_{\\text{reg}}: \\mathbb{R}_{\\ge 0} \\to \\mathbb{R}_{>0}$ is the **C^∞ regularized standard deviation function** from `01_fractal_gas_framework.md` (Definition `def-statistical-properties-measurement`). This function is defined as $\\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}$, ensuring:\n291: - **C^∞ regularity**: $\\sigma'_{\\text{reg}}$ is infinitely differentiable everywhere\n292: - **Positive lower bound**: $\\sigma'_{\\text{reg}}(V) \\ge \\sigma'_{\\min} > 0$ for all $V \\ge 0$\n293: - **Global Lipschitz**: $|(\\sigma'_{\\text{reg}})'(V)| \\le L_{\\sigma'_{\\text{reg}}} = \\frac{1}{2\\sigma'_{\\min}}$ for all $V \\ge 0$\n294: \n295: **Step 3: Z-Score Construction**\n296: \n297: $$\n298: Z_\\rho[f, d, x] := \\frac{d(x) - \\mu_\\rho[f, d, x]}{\\sigma'_\\rho[f, d, x]}\n299: $$\n300: \n301: **Properties:**\n302: - **Boundedness:** If $d$ is bounded, then $Z_\\rho$ is uniformly bounded across all $f, x, \\rho$.\n303: - **Well-posedness:** The regularization ensures $Z_\\rho$ is always defined and finite.\n304: - **Localization:** For finite ρ, the Z-score measures relative quality compared to the *local neighborhood*.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. The Unified Measurement Pipeline"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-hybrid-sde",
      "title": "The Adaptive Viscous Fluid SDE",
      "start_line": 365,
      "end_line": 423,
      "header_lines": [
        366
      ],
      "content_start": 368,
      "content_end": 422,
      "content": "368: :label: def-hybrid-sde\n369: \n370: The evolution of each walker $i \\in \\{1, \\dots, N\\}$ is governed by a coupled Stratonovich SDE on the phase space $\\mathcal{X} \\times \\mathbb{R}^d$:\n371: \n372: $$\n373: \\begin{aligned}\n374: dx_i &= v_i \\, dt \\\\\n375: dv_i &= \\left[ \\mathbf{F}_{\\text{stable}}(x_i) + \\mathbf{F}_{\\text{adapt}}(x_i, S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i \\right] dt + \\Sigma_{\\text{reg}}(x_i, S) \\circ dW_i\n376: \\end{aligned}\n377: $$\n378: \n379: where `S` denotes the full N-particle swarm state. The five components of the dynamics are defined as follows.\n380: \n381: **1. The Stability Force (`F_stable`):**\n382: The gradient of a static, globally confining potential `U(x)`.\n383: \n384: $$\n385: \\mathbf{F}_{\\text{stable}}(x_i) := -\\nabla U(x_i)\n386: $$\n387: \n388: *   **Role:** The unconditional anchor for stability. It provides a global restoring force that prevents the swarm from drifting to the boundary, guaranteeing recurrence. Its properties are defined by the **Axiom of a Globally Confining Potential** (Axiom 3.1.1).\n389: \n390: **2. The Adaptive Force (`F_adapt`):**\n391: The gradient of the mean-field fitness potential `V_fit[f_k, ρ]`, scaled by a small parameter `ε_F`.\n392: \n393: $$\n394: \\mathbf{F}_{\\text{adapt}}(x_i, S) := \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i)\n395: $$\n396: \n397: where $V_{\\text{fit}}[f_k, \\rho]$ is the fitness potential computed using the **alive-walker empirical measure** $f_k$ and a **finite localization scale ρ > 0** (see Definition {prf:ref}`def-localized-mean-field-fitness`).\n398: *   **Role:** Provides intelligent guidance, pushing walkers towards regions of higher fitness as perceived by their **local neighborhood**. The scale ρ controls the spatial extent of this neighborhood. Its properties are defined by the **Axiom of Bounded Adaptive Force** (Axiom 3.2.1).\n399: \n400: **3. The Viscous Force (`F_viscous`):**\n401: A non-local velocity-coupling term analogous to the viscosity term in the Navier-Stokes equations, scaled by a viscosity parameter `ν`. The coupling uses **row-normalized weights** to ensure N-uniform bounds.\n402: \n403: $$\n404: \\mathbf{F}_{\\text{viscous}}(x_i, S) := \\nu \\sum_{j \\neq i} \\frac{K(x_i - x_j)}{\\sum_{k \\neq i} K(x_i - x_k)} (v_j - v_i)\n405: $$\n406: \n407: where the normalization factor $\\deg(i) := \\sum_{k \\neq i} K(x_i - x_k)$ is the **local degree** of walker $i$ (total coupling weight to all neighbors).\n408: \n409: *   **Role:** Smoothes the velocity field, dissipates relative kinetic energy, and encourages coherent, fluid-like motion. The normalization ensures that the effective coupling strength is bounded independently of $N$, preventing the operator norm from growing with swarm size.\n410: *   **Interpretation:** Each neighbor $j$ contributes proportionally to its \"visibility weight\" $K(x_i - x_j)$ relative to the total visibility $\\deg(i)$. This produces a **weighted average** of velocity differences rather than a sum, analogous to SPH (Smoothed Particle Hydrodynamics) normalization.\n411: *   **Properties:** Defined by the **Axiom of a Well-Behaved Viscous Kernel** (Axiom 3.2.2).\n412: \n413: **4. The Bulk Friction (`-γv_i`):**\n414: A standard linear friction term with coefficient `γ > 0`.\n415: *   **Role:** Provides unconditional dissipation of kinetic energy, preventing kinetic explosion and ensuring the velocity distribution can thermalize.\n416: \n417: **5. The Regularized Adaptive Diffusion (`Σ_reg`):**\n418: The matrix square root of the regularized inverse Hessian of the **ρ-localized fitness potential**.\n419: \n420: $$\n421: \\Sigma_{\\text{reg}}(x_i, S) := \\left( \\nabla^2_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i) + \\epsilon_\\Sigma I \\right)^{-1/2}\n422: $$",
      "metadata": {
        "label": "def-hybrid-sde"
      },
      "section": "## 2. Formal Definition of the Hybrid SDE",
      "references": [
        "def-localized-mean-field-fitness"
      ],
      "raw_directive": "365: The central object of study is the following stochastic differential equation, which governs the evolution of each walker in the swarm.\n366: \n367: :::{prf:definition} The Adaptive Viscous Fluid SDE\n368: :label: def-hybrid-sde\n369: \n370: The evolution of each walker $i \\in \\{1, \\dots, N\\}$ is governed by a coupled Stratonovich SDE on the phase space $\\mathcal{X} \\times \\mathbb{R}^d$:\n371: \n372: $$\n373: \\begin{aligned}\n374: dx_i &= v_i \\, dt \\\\\n375: dv_i &= \\left[ \\mathbf{F}_{\\text{stable}}(x_i) + \\mathbf{F}_{\\text{adapt}}(x_i, S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i \\right] dt + \\Sigma_{\\text{reg}}(x_i, S) \\circ dW_i\n376: \\end{aligned}\n377: $$\n378: \n379: where `S` denotes the full N-particle swarm state. The five components of the dynamics are defined as follows.\n380: \n381: **1. The Stability Force (`F_stable`):**\n382: The gradient of a static, globally confining potential `U(x)`.\n383: \n384: $$\n385: \\mathbf{F}_{\\text{stable}}(x_i) := -\\nabla U(x_i)\n386: $$\n387: \n388: *   **Role:** The unconditional anchor for stability. It provides a global restoring force that prevents the swarm from drifting to the boundary, guaranteeing recurrence. Its properties are defined by the **Axiom of a Globally Confining Potential** (Axiom 3.1.1).\n389: \n390: **2. The Adaptive Force (`F_adapt`):**\n391: The gradient of the mean-field fitness potential `V_fit[f_k, ρ]`, scaled by a small parameter `ε_F`.\n392: \n393: $$\n394: \\mathbf{F}_{\\text{adapt}}(x_i, S) := \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i)\n395: $$\n396: \n397: where $V_{\\text{fit}}[f_k, \\rho]$ is the fitness potential computed using the **alive-walker empirical measure** $f_k$ and a **finite localization scale ρ > 0** (see Definition {prf:ref}`def-localized-mean-field-fitness`).\n398: *   **Role:** Provides intelligent guidance, pushing walkers towards regions of higher fitness as perceived by their **local neighborhood**. The scale ρ controls the spatial extent of this neighborhood. Its properties are defined by the **Axiom of Bounded Adaptive Force** (Axiom 3.2.1).\n399: \n400: **3. The Viscous Force (`F_viscous`):**\n401: A non-local velocity-coupling term analogous to the viscosity term in the Navier-Stokes equations, scaled by a viscosity parameter `ν`. The coupling uses **row-normalized weights** to ensure N-uniform bounds.\n402: \n403: $$\n404: \\mathbf{F}_{\\text{viscous}}(x_i, S) := \\nu \\sum_{j \\neq i} \\frac{K(x_i - x_j)}{\\sum_{k \\neq i} K(x_i - x_k)} (v_j - v_i)\n405: $$\n406: \n407: where the normalization factor $\\deg(i) := \\sum_{k \\neq i} K(x_i - x_k)$ is the **local degree** of walker $i$ (total coupling weight to all neighbors).\n408: \n409: *   **Role:** Smoothes the velocity field, dissipates relative kinetic energy, and encourages coherent, fluid-like motion. The normalization ensures that the effective coupling strength is bounded independently of $N$, preventing the operator norm from growing with swarm size.\n410: *   **Interpretation:** Each neighbor $j$ contributes proportionally to its \"visibility weight\" $K(x_i - x_j)$ relative to the total visibility $\\deg(i)$. This produces a **weighted average** of velocity differences rather than a sum, analogous to SPH (Smoothed Particle Hydrodynamics) normalization.\n411: *   **Properties:** Defined by the **Axiom of a Well-Behaved Viscous Kernel** (Axiom 3.2.2).\n412: \n413: **4. The Bulk Friction (`-γv_i`):**\n414: A standard linear friction term with coefficient `γ > 0`.\n415: *   **Role:** Provides unconditional dissipation of kinetic energy, preventing kinetic explosion and ensuring the velocity distribution can thermalize.\n416: \n417: **5. The Regularized Adaptive Diffusion (`Σ_reg`):**\n418: The matrix square root of the regularized inverse Hessian of the **ρ-localized fitness potential**.\n419: \n420: $$\n421: \\Sigma_{\\text{reg}}(x_i, S) := \\left( \\nabla^2_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i) + \\epsilon_\\Sigma I \\right)^{-1/2}\n422: $$\n423: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Formal Definition of the Hybrid SDE"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-regularized-hessian-tensor",
      "title": "Regularized Hessian Diffusion Tensor",
      "start_line": 429,
      "end_line": 448,
      "header_lines": [
        430
      ],
      "content_start": 432,
      "content_end": 447,
      "content": "432: :label: def-regularized-hessian-tensor\n433: \n434: Let `V_fit(S)` be the N-dimensional fitness potential vector, as defined in `03_cloning.md` (Def. 5.6.1). For each walker `i`, let `V_i(x_1, ..., x_N)` be its fitness potential, viewed as a function of all walker positions. Let `H_i(S) = ∇²_{x_i} V_i` be the Hessian of walker `i`'s fitness with respect to its own position.\n435: \n436: The **Regularized Adaptive Diffusion Tensor** for walker `i` is defined as:\n437: \n438: $$\n439: \\Sigma_{\\text{reg}}(x_i, S) := \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1/2}\n440: $$\n441: \n442: where `ε_Σ > 0` is a fixed, small **regularization constant**.\n443: \n444: The induced Riemannian metric for the kinetic dynamics is the inverse of the regularized Hessian:\n445: \n446: $$\n447: G_{\\text{reg}}(x_i, S) := \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1}",
      "metadata": {
        "label": "def-regularized-hessian-tensor"
      },
      "section": "## 2. The Regularized Diffusion Tensor",
      "references": [],
      "raw_directive": "429: The most innovative component of this model is the adaptive diffusion tensor. This section formally defines it and explains the critical role of regularization.\n430: \n431: :::{prf:definition} Regularized Hessian Diffusion Tensor\n432: :label: def-regularized-hessian-tensor\n433: \n434: Let `V_fit(S)` be the N-dimensional fitness potential vector, as defined in `03_cloning.md` (Def. 5.6.1). For each walker `i`, let `V_i(x_1, ..., x_N)` be its fitness potential, viewed as a function of all walker positions. Let `H_i(S) = ∇²_{x_i} V_i` be the Hessian of walker `i`'s fitness with respect to its own position.\n435: \n436: The **Regularized Adaptive Diffusion Tensor** for walker `i` is defined as:\n437: \n438: $$\n439: \\Sigma_{\\text{reg}}(x_i, S) := \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1/2}\n440: $$\n441: \n442: where `ε_Σ > 0` is a fixed, small **regularization constant**.\n443: \n444: The induced Riemannian metric for the kinetic dynamics is the inverse of the regularized Hessian:\n445: \n446: $$\n447: G_{\\text{reg}}(x_i, S) := \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1}\n448: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 2. The Regularized Diffusion Tensor"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localized-mean-field-fitness",
      "title": "Localized Mean-Field Fitness Potential",
      "start_line": 468,
      "end_line": 497,
      "header_lines": [
        469
      ],
      "content_start": 471,
      "content_end": 496,
      "content": "471: :label: def-localized-mean-field-fitness\n472: \n473: The **ρ-localized mean-field fitness potential** $V_{\\text{fit}}[f, \\rho]: \\mathcal{X} \\to \\mathbb{R}$ for a walker at position $x \\in \\mathcal{X}$ is defined as:\n474: \n475: $$\n476: V_{\\text{fit}}[f, \\rho](x) := g_A\\left( Z_\\rho[f, d, x] \\right)\n477: $$\n478: \n479: where:\n480: \n481: 1.  **Rescale Function:** $g_A: \\mathbb{R} \\to [0, A]$ is a smooth, bounded, monotone increasing function (e.g., $g_A(z) = A/(1 + e^{-z})$).\n482: \n483: 2.  **Unified Z-Score:** $Z_\\rho[f, d, x]$ is the unified localized Z-score from Definition {prf:ref}`def-unified-z-score`, which combines:\n484:    - Localization via kernel $K_\\rho(x, x')$\n485:    - Statistical moments $\\mu_\\rho[f, d, x]$ and $\\sigma^2_\\rho[f, d, x]$ from Definition {prf:ref}`def-localized-mean-field-moments`\n486:    - Numerical regularization via $\\kappa_{\\text{var,min}}$\n487: \n488: 3.  **Measurement Function:** $d: \\mathcal{X} \\to \\mathbb{R}$ is a bounded measurement of local objective quality (e.g., reward, distance to target).\n489: \n490: **Properties:**\n491: - **ρ-Dependence:** The fitness explicitly depends on the localization scale ρ, which controls the spatial extent of statistical aggregation.\n492: - **Nonlocality:** For finite ρ, $V_{\\text{fit}}[f, \\rho](x)$ depends on the distribution $f$ within the ρ-neighborhood of $x$.\n493: - **Nonlinearity:** The functional is nonlinear in $f$ due to the Z-score's division by localized standard deviation.\n494: - **Boundedness:** $0 \\le V_{\\text{fit}}[f, \\rho](x) \\le A$ for all $x, f, \\rho$ by construction (due to bounded rescale and regularized Z-score).\n495: - **Smoothness:** $V_{\\text{fit}}[f, \\rho](x)$ is $C^\\infty$ in $x$ (provided $f$ is sufficiently regular) due to the smoothness of $g_A$, $K_\\rho$, and the regularization.\n496: - **Limiting Behavior:**",
      "metadata": {
        "label": "def-localized-mean-field-fitness"
      },
      "section": "## 2. The Regularized Diffusion Tensor",
      "references": [
        "def-unified-z-score",
        "def-localized-mean-field-moments"
      ],
      "raw_directive": "468: The adaptive force $\\mathbf{F}_{\\text{adapt}}$ and the regularized diffusion tensor $\\Sigma_{\\text{reg}}$ depend on the fitness potential $V_{\\text{fit}}[f, \\rho]$, which is a ρ-parameterized functional of the swarm state. This section connects the unified pipeline from Chapter 1 to the adaptive dynamics.\n469: \n470: :::{prf:definition} Localized Mean-Field Fitness Potential\n471: :label: def-localized-mean-field-fitness\n472: \n473: The **ρ-localized mean-field fitness potential** $V_{\\text{fit}}[f, \\rho]: \\mathcal{X} \\to \\mathbb{R}$ for a walker at position $x \\in \\mathcal{X}$ is defined as:\n474: \n475: $$\n476: V_{\\text{fit}}[f, \\rho](x) := g_A\\left( Z_\\rho[f, d, x] \\right)\n477: $$\n478: \n479: where:\n480: \n481: 1.  **Rescale Function:** $g_A: \\mathbb{R} \\to [0, A]$ is a smooth, bounded, monotone increasing function (e.g., $g_A(z) = A/(1 + e^{-z})$).\n482: \n483: 2.  **Unified Z-Score:** $Z_\\rho[f, d, x]$ is the unified localized Z-score from Definition {prf:ref}`def-unified-z-score`, which combines:\n484:    - Localization via kernel $K_\\rho(x, x')$\n485:    - Statistical moments $\\mu_\\rho[f, d, x]$ and $\\sigma^2_\\rho[f, d, x]$ from Definition {prf:ref}`def-localized-mean-field-moments`\n486:    - Numerical regularization via $\\kappa_{\\text{var,min}}$\n487: \n488: 3.  **Measurement Function:** $d: \\mathcal{X} \\to \\mathbb{R}$ is a bounded measurement of local objective quality (e.g., reward, distance to target).\n489: \n490: **Properties:**\n491: - **ρ-Dependence:** The fitness explicitly depends on the localization scale ρ, which controls the spatial extent of statistical aggregation.\n492: - **Nonlocality:** For finite ρ, $V_{\\text{fit}}[f, \\rho](x)$ depends on the distribution $f$ within the ρ-neighborhood of $x$.\n493: - **Nonlinearity:** The functional is nonlinear in $f$ due to the Z-score's division by localized standard deviation.\n494: - **Boundedness:** $0 \\le V_{\\text{fit}}[f, \\rho](x) \\le A$ for all $x, f, \\rho$ by construction (due to bounded rescale and regularized Z-score).\n495: - **Smoothness:** $V_{\\text{fit}}[f, \\rho](x)$ is $C^\\infty$ in $x$ (provided $f$ is sufficiently regular) due to the smoothness of $g_A$, $K_\\rho$, and the regularization.\n496: - **Limiting Behavior:**\n497:   - As $\\rho \\to \\infty$: Recovers the global fitness potential from `03_cloning.md`",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 2. The Regularized Diffusion Tensor"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-backbone-sde",
      "title": "The Backbone SDE",
      "start_line": 1003,
      "end_line": 1027,
      "header_lines": [
        1004
      ],
      "content_start": 1006,
      "content_end": 1026,
      "content": "1006: :label: def-backbone-sde\n1007: \n1008: The **backbone system** is obtained from the full Hybrid SDE ([](#def-hybrid-sde)) by setting all adaptive parameters to zero:\n1009: \n1010: $$\n1011: \\epsilon_F = 0, \\quad \\nu = 0, \\quad \\Sigma_{\\text{reg}}(x, S) = \\sigma I\n1012: $$\n1013: \n1014: This yields the simplified SDE:\n1015: \n1016: $$\n1017: \\begin{aligned}\n1018: dx_i &= v_i \\, dt \\\\\n1019: dv_i &= \\left[ -\\nabla U(x_i) - \\gamma v_i \\right] dt + \\sigma \\, dW_i\n1020: \\end{aligned}\n1021: $$\n1022: \n1023: The backbone is a **static underdamped Langevin equation** with:\n1024: - Globally confining potential $U(x)$\n1025: - Constant friction coefficient $\\gamma > 0$\n1026: - Constant isotropic diffusion $\\sigma > 0$",
      "metadata": {
        "label": "def-backbone-sde"
      },
      "section": "## 5. The Stable Backbone System",
      "references": [],
      "raw_directive": "1003: ### 5.1. Definition of the Backbone System\n1004: \n1005: :::{prf:definition} The Backbone SDE\n1006: :label: def-backbone-sde\n1007: \n1008: The **backbone system** is obtained from the full Hybrid SDE ([](#def-hybrid-sde)) by setting all adaptive parameters to zero:\n1009: \n1010: $$\n1011: \\epsilon_F = 0, \\quad \\nu = 0, \\quad \\Sigma_{\\text{reg}}(x, S) = \\sigma I\n1012: $$\n1013: \n1014: This yields the simplified SDE:\n1015: \n1016: $$\n1017: \\begin{aligned}\n1018: dx_i &= v_i \\, dt \\\\\n1019: dv_i &= \\left[ -\\nabla U(x_i) - \\gamma v_i \\right] dt + \\sigma \\, dW_i\n1020: \\end{aligned}\n1021: $$\n1022: \n1023: The backbone is a **static underdamped Langevin equation** with:\n1024: - Globally confining potential $U(x)$\n1025: - Constant friction coefficient $\\gamma > 0$\n1026: - Constant isotropic diffusion $\\sigma > 0$\n1027: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 5. The Stable Backbone System"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-strat-drift",
      "title": "Stratonovich Drift for the Hybrid System",
      "start_line": 1150,
      "end_line": 1187,
      "header_lines": [
        1151
      ],
      "content_start": 1153,
      "content_end": 1186,
      "content": "1153: :label: def-strat-drift\n1154: \n1155: For the Hybrid SDE with drift:\n1156: \n1157: $$\n1158: b_i(S) = -\\nabla U(x_i) + \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1159: $$\n1160: \n1161: we define:\n1162: \n1163: **Backbone drift:**\n1164: \n1165: $$\n1166: A_{\\text{backbone}}(S) = \\sum_{i=1}^N \\left[ \\langle \\nabla_{x_i} V, v_i \\rangle + \\langle \\nabla_{v_i} V, -\\nabla U(x_i) - \\gamma v_i \\rangle \\right] + \\frac{1}{2} \\sigma^2 \\sum_{i=1}^N \\|\\nabla_{v_i} V\\|^2\n1167: $$\n1168: \n1169: (This corresponds to $\\epsilon_F = 0$, $\\nu = 0$, $\\Sigma_{\\text{reg}} = \\sigma I$.)\n1170: \n1171: **Adaptive perturbation drift:**\n1172: \n1173: $$\n1174: A_{\\text{perturb}}(S) = \\sum_{i=1}^N \\langle \\nabla_{v_i} V, \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) \\rangle + A_{\\text{diff}}(S)\n1175: $$\n1176: \n1177: where $A_{\\text{diff}}(S)$ is the additional drift from the state-dependent diffusion:\n1178: \n1179: $$\n1180: A_{\\text{diff}}(S) = \\frac{1}{2} \\sum_{i=1}^N \\sum_{j=1}^d \\left[ (\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i})(\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i} V) - \\sigma^2 \\|\\nabla_{v_i} V\\|^2 \\right]\n1181: $$\n1182: \n1183: The total Stratonovich drift is:\n1184: \n1185: $$\n1186: A_{\\text{full}}(S) = A_{\\text{backbone}}(S) + A_{\\text{perturb}}(S)",
      "metadata": {
        "label": "def-strat-drift"
      },
      "section": "## 5.4. The Stratonovich Chain Rule and Drift Calculation",
      "references": [],
      "raw_directive": "1150: :::\n1151: \n1152: :::{prf:definition} Stratonovich Drift for the Hybrid System\n1153: :label: def-strat-drift\n1154: \n1155: For the Hybrid SDE with drift:\n1156: \n1157: $$\n1158: b_i(S) = -\\nabla U(x_i) + \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1159: $$\n1160: \n1161: we define:\n1162: \n1163: **Backbone drift:**\n1164: \n1165: $$\n1166: A_{\\text{backbone}}(S) = \\sum_{i=1}^N \\left[ \\langle \\nabla_{x_i} V, v_i \\rangle + \\langle \\nabla_{v_i} V, -\\nabla U(x_i) - \\gamma v_i \\rangle \\right] + \\frac{1}{2} \\sigma^2 \\sum_{i=1}^N \\|\\nabla_{v_i} V\\|^2\n1167: $$\n1168: \n1169: (This corresponds to $\\epsilon_F = 0$, $\\nu = 0$, $\\Sigma_{\\text{reg}} = \\sigma I$.)\n1170: \n1171: **Adaptive perturbation drift:**\n1172: \n1173: $$\n1174: A_{\\text{perturb}}(S) = \\sum_{i=1}^N \\langle \\nabla_{v_i} V, \\epsilon_F \\nabla_{x_i} V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) \\rangle + A_{\\text{diff}}(S)\n1175: $$\n1176: \n1177: where $A_{\\text{diff}}(S)$ is the additional drift from the state-dependent diffusion:\n1178: \n1179: $$\n1180: A_{\\text{diff}}(S) = \\frac{1}{2} \\sum_{i=1}^N \\sum_{j=1}^d \\left[ (\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i})(\\sigma_{ij}^{\\text{reg}} \\cdot \\nabla_{v_i} V) - \\sigma^2 \\|\\nabla_{v_i} V\\|^2 \\right]\n1181: $$\n1182: \n1183: The total Stratonovich drift is:\n1184: \n1185: $$\n1186: A_{\\text{full}}(S) = A_{\\text{backbone}}(S) + A_{\\text{perturb}}(S)\n1187: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 5.4. The Stratonovich Chain Rule and Drift Calculation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-n-particle-generator-lsi",
      "title": "The N-Particle Generator for the Adaptive System",
      "start_line": 1742,
      "end_line": 1772,
      "header_lines": [
        1743
      ],
      "content_start": 1745,
      "content_end": 1771,
      "content": "1745: :label: def-n-particle-generator-lsi\n1746: \n1747: The infinitesimal generator $\\mathcal{L}_N$ for the N-particle Geometric Viscous Fluid Model acts on sufficiently smooth test functions $f: (\\mathcal{X} \\times \\mathbb{R}^d)^N \\to \\mathbb{R}$ as:\n1748: \n1749: $$\n1750: \\mathcal{L}_N f = \\mathcal{L}_{\\text{kin},N} f + \\mathcal{L}_{\\text{clone},N} f\n1751: $$\n1752: \n1753: where:\n1754: \n1755: **Kinetic Part:**\n1756: \n1757: $$\n1758: \\mathcal{L}_{\\text{kin},N} f = \\sum_{i=1}^N \\left[ v_i \\cdot \\nabla_{x_i} f + \\mathbf{F}_{\\text{total}}(x_i, S) \\cdot \\nabla_{v_i} f + \\frac{1}{2} \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla^2_{v_i} f \\right) \\right]\n1759: $$\n1760: \n1761: with total force:\n1762: \n1763: $$\n1764: \\mathbf{F}_{\\text{total}}(x_i, S) = -\\nabla U(x_i) + \\epsilon_F \\nabla V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1765: $$\n1766: \n1767: and regularized diffusion matrix:\n1768: \n1769: $$\n1770: D_{\\text{reg}}(x_i, S) = \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = (H_i(S) + \\epsilon_\\Sigma I)^{-1}\n1771: $$",
      "metadata": {
        "label": "def-n-particle-generator-lsi"
      },
      "section": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening",
      "references": [],
      "raw_directive": "1742: Before stating the main theorem, we formally define the key mathematical objects for the LSI proof.\n1743: \n1744: :::{prf:definition} The N-Particle Generator for the Adaptive System\n1745: :label: def-n-particle-generator-lsi\n1746: \n1747: The infinitesimal generator $\\mathcal{L}_N$ for the N-particle Geometric Viscous Fluid Model acts on sufficiently smooth test functions $f: (\\mathcal{X} \\times \\mathbb{R}^d)^N \\to \\mathbb{R}$ as:\n1748: \n1749: $$\n1750: \\mathcal{L}_N f = \\mathcal{L}_{\\text{kin},N} f + \\mathcal{L}_{\\text{clone},N} f\n1751: $$\n1752: \n1753: where:\n1754: \n1755: **Kinetic Part:**\n1756: \n1757: $$\n1758: \\mathcal{L}_{\\text{kin},N} f = \\sum_{i=1}^N \\left[ v_i \\cdot \\nabla_{x_i} f + \\mathbf{F}_{\\text{total}}(x_i, S) \\cdot \\nabla_{v_i} f + \\frac{1}{2} \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla^2_{v_i} f \\right) \\right]\n1759: $$\n1760: \n1761: with total force:\n1762: \n1763: $$\n1764: \\mathbf{F}_{\\text{total}}(x_i, S) = -\\nabla U(x_i) + \\epsilon_F \\nabla V_{\\text{fit}}(S) + \\mathbf{F}_{\\text{viscous}}(x_i, S) - \\gamma v_i\n1765: $$\n1766: \n1767: and regularized diffusion matrix:\n1768: \n1769: $$\n1770: D_{\\text{reg}}(x_i, S) = \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = (H_i(S) + \\epsilon_\\Sigma I)^{-1}\n1771: $$\n1772: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-entropy-fisher-lsi",
      "title": "Relative Entropy and Fisher Information",
      "start_line": 1774,
      "end_line": 1808,
      "header_lines": [
        1775
      ],
      "content_start": 1777,
      "content_end": 1807,
      "content": "1777: :label: def-entropy-fisher-lsi\n1778: \n1779: Let $\\mu$ and $\\nu$ be probability measures on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ with $\\mu \\ll \\nu$ (absolutely continuous). Denote the Radon-Nikodym derivative by $h = d\\mu/d\\nu$.\n1780: \n1781: 1. **Relative Entropy (Kullback-Leibler divergence):**\n1782: \n1783: $$\n1784: \\text{Ent}_\\nu(\\mu) := \\int h \\log h \\, d\\nu = \\int h \\log h \\, d\\nu\n1785: $$\n1786: \n1787: For a function $f$, we define $\\text{Ent}_\\nu(f^2) := \\text{Ent}_\\nu(\\mu_f)$ where $d\\mu_f = f^2/\\int f^2 d\\nu \\, d\\nu$.\n1788: \n1789: 2. **Carré du Champ (Fisher Information):**\n1790: \n1791: $$\n1792: \\Gamma_N(f) := \\frac{1}{2} \\left( \\mathcal{L}_N(f^2) - 2f \\mathcal{L}_N f \\right)\n1793: $$\n1794: \n1795: For the kinetic part with anisotropic diffusion $D_{\\text{reg}}$:\n1796: \n1797: $$\n1798: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\otimes \\nabla_{v_i} f \\right)\n1799: $$\n1800: \n1801: This can be written more explicitly as:\n1802: \n1803: $$\n1804: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\left\\langle \\nabla_{v_i} f, D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\right\\rangle\n1805: $$\n1806: \n1807: where the diffusion matrix $D_{\\text{reg}} = (H_i + \\epsilon_\\Sigma I)^{-1}$ is symmetric and positive definite by construction.",
      "metadata": {
        "label": "def-entropy-fisher-lsi"
      },
      "section": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening",
      "references": [],
      "raw_directive": "1774: :::\n1775: \n1776: :::{prf:definition} Relative Entropy and Fisher Information\n1777: :label: def-entropy-fisher-lsi\n1778: \n1779: Let $\\mu$ and $\\nu$ be probability measures on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ with $\\mu \\ll \\nu$ (absolutely continuous). Denote the Radon-Nikodym derivative by $h = d\\mu/d\\nu$.\n1780: \n1781: 1. **Relative Entropy (Kullback-Leibler divergence):**\n1782: \n1783: $$\n1784: \\text{Ent}_\\nu(\\mu) := \\int h \\log h \\, d\\nu = \\int h \\log h \\, d\\nu\n1785: $$\n1786: \n1787: For a function $f$, we define $\\text{Ent}_\\nu(f^2) := \\text{Ent}_\\nu(\\mu_f)$ where $d\\mu_f = f^2/\\int f^2 d\\nu \\, d\\nu$.\n1788: \n1789: 2. **Carré du Champ (Fisher Information):**\n1790: \n1791: $$\n1792: \\Gamma_N(f) := \\frac{1}{2} \\left( \\mathcal{L}_N(f^2) - 2f \\mathcal{L}_N f \\right)\n1793: $$\n1794: \n1795: For the kinetic part with anisotropic diffusion $D_{\\text{reg}}$:\n1796: \n1797: $$\n1798: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\text{Tr}\\left( D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\otimes \\nabla_{v_i} f \\right)\n1799: $$\n1800: \n1801: This can be written more explicitly as:\n1802: \n1803: $$\n1804: \\Gamma_N(f) = \\frac{1}{2} \\sum_{i=1}^N \\left\\langle \\nabla_{v_i} f, D_{\\text{reg}}(x_i, S) \\nabla_{v_i} f \\right\\rangle\n1805: $$\n1806: \n1807: where the diffusion matrix $D_{\\text{reg}} = (H_i + \\epsilon_\\Sigma I)^{-1}$ is symmetric and positive definite by construction.\n1808: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-lsi",
      "title": "Logarithmic Sobolev Inequality (LSI)",
      "start_line": 1810,
      "end_line": 1826,
      "header_lines": [
        1811
      ],
      "content_start": 1813,
      "content_end": 1825,
      "content": "1813: :label: def-lsi\n1814: \n1815: A probability measure $\\nu$ on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ satisfies a **Logarithmic Sobolev Inequality** with constant $C_{\\text{LSI}} > 0$ if for every sufficiently smooth function $f$:\n1816: \n1817: $$\n1818: \\text{Ent}_\\nu(f^2) \\le C_{\\text{LSI}} \\int \\Gamma_N(f) \\, d\\nu\n1819: $$\n1820: \n1821: **Equivalent Formulation (Relative Entropy):** For probability measures $\\mu \\ll \\nu$ with density $h$:\n1822: \n1823: $$\n1824: \\int h \\log h \\, d\\nu \\le C_{\\text{LSI}} \\int \\frac{\\langle \\mathcal{A} h, \\mathcal{A} h \\rangle}{h} \\, d\\nu\n1825: $$",
      "metadata": {
        "label": "def-lsi"
      },
      "section": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening",
      "references": [],
      "raw_directive": "1810: :::\n1811: \n1812: :::{prf:definition} Logarithmic Sobolev Inequality (LSI)\n1813: :label: def-lsi\n1814: \n1815: A probability measure $\\nu$ on $(\\mathcal{X} \\times \\mathbb{R}^d)^N$ satisfies a **Logarithmic Sobolev Inequality** with constant $C_{\\text{LSI}} > 0$ if for every sufficiently smooth function $f$:\n1816: \n1817: $$\n1818: \\text{Ent}_\\nu(f^2) \\le C_{\\text{LSI}} \\int \\Gamma_N(f) \\, d\\nu\n1819: $$\n1820: \n1821: **Equivalent Formulation (Relative Entropy):** For probability measures $\\mu \\ll \\nu$ with density $h$:\n1822: \n1823: $$\n1824: \\int h \\log h \\, d\\nu \\le C_{\\text{LSI}} \\int \\frac{\\langle \\mathcal{A} h, \\mathcal{A} h \\rangle}{h} \\, d\\nu\n1825: $$\n1826: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 8. The Logarithmic Sobolev Inequality: A Conjectured Strengthening"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-microlocal",
      "title": "Microlocal Decomposition",
      "start_line": 2288,
      "end_line": 2296,
      "header_lines": [
        2289
      ],
      "content_start": 2291,
      "content_end": 2295,
      "content": "2291: :label: def-microlocal\n2292: \n2293: For any function $h = f / \\rho_{\\text{QSD}}$, define:\n2294: - **Hydrodynamic projection:** $\\Pi h(x) := \\int_{\\mathbb{R}^d} h(x, v) \\rho_{\\text{QSD}}(v | x) \\, dv$\n2295: - **Microscopic fluctuation:** $(I - \\Pi) h := h - \\Pi h$",
      "metadata": {
        "label": "def-microlocal"
      },
      "section": "## 9. Main Convergence Theorems and Physical Interpretation",
      "references": [],
      "raw_directive": "2288: **Step 2: Hypocoercive Decomposition**\n2289: \n2290: :::{prf:definition} Microlocal Decomposition\n2291: :label: def-microlocal\n2292: \n2293: For any function $h = f / \\rho_{\\text{QSD}}$, define:\n2294: - **Hydrodynamic projection:** $\\Pi h(x) := \\int_{\\mathbb{R}^d} h(x, v) \\rho_{\\text{QSD}}(v | x) \\, dv$\n2295: - **Microscopic fluctuation:** $(I - \\Pi) h := h - \\Pi h$\n2296: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_geometric_gas",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 9. Main Convergence Theorems and Physical Interpretation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-hk-metric-intro",
      "title": "Additive Hellinger-Kantorovich Metric for the Fragile Gas",
      "start_line": 34,
      "end_line": 59,
      "header_lines": [
        35
      ],
      "content_start": 37,
      "content_end": 58,
      "content": "37: :label: def-hk-metric-intro\n38: \n39: For sub-probability measures $\\mu_1, \\mu_2$ on $(\\mathcal{X}, d)$, we define the **additive Hellinger-Kantorovich distance**:\n40: \n41: $$\n42: d_{HK}^2(\\mu_1, \\mu_2) := d_H^2(\\mu_1, \\mu_2) + W_2^2(\\tilde{\\mu}_1, \\tilde{\\mu}_2)\n43: \n44: $$\n45: \n46: where:\n47: - $d_H^2(\\mu_1, \\mu_2) = \\int (\\sqrt{f_1} - \\sqrt{f_2})^2 d\\lambda$ is the Hellinger distance ($f_i = d\\mu_i/d\\lambda$)\n48: - $W_2^2(\\tilde{\\mu}_1, \\tilde{\\mu}_2)$ is the Wasserstein-2 distance between normalizations $\\tilde{\\mu}_i = \\mu_i/\\|\\mu_i\\|$\n49: \n50: **Relationship to the Canonical HK Metric**: The canonical Hellinger-Kantorovich metric (Liero et al. 2018) uses a cone-geometry construction that couples mass variation and transport through optimal couplings on the extended space. Our additive form is a **simplification** that decouples these components.\n51: \n52: **Justification for the Fragile Gas**: This simplified metric is well-suited for the Fragile Gas because:\n53: \n54: 1. **Decoupled Dynamics**: The algorithm has **spatially decoupled** mass and transport mechanisms. Mass changes occur through revival (uniform over dead walkers) and cloning (based on fitness, but with Gaussian jitter), while transport happens via Langevin diffusion.\n55: \n56: 2. **Modular Analysis**: The additive form enables a **three-lemma decomposition** ({prf:ref}`lem-mass-contraction-revival-death`, {prf:ref}`lem-structural-variance-contraction`, {prf:ref}`lem-kinetic-hellinger-contraction`) where each component is analyzed separately with clear physical interpretation.\n57: \n58: 3. **Upper Bound Property**: For measures with comparable mass ($|k_1 - k_2| \\ll \\sqrt{k_1 k_2}$), the additive form provides an upper bound on the canonical HK distance (Kondratyev, Monsaingeon, Vorotnikov, *Calc. Var.* 2016).",
      "metadata": {
        "label": "def-hk-metric-intro"
      },
      "section": "## 1. Introduction",
      "references": [
        "lem-mass-contraction-revival-death",
        "lem-structural-variance-contraction",
        "lem-kinetic-hellinger-contraction"
      ],
      "raw_directive": "34: The Hellinger-Kantorovich metric is a development in optimal transport theory (Liero, Mielke, Savaré, *Invent. Math.* 2018) that unifies two classical distances: the **Wasserstein metric** (spatial displacement) and the **Hellinger distance** (mass and shape changes).\n35: \n36: :::{prf:definition} Additive Hellinger-Kantorovich Metric for the Fragile Gas\n37: :label: def-hk-metric-intro\n38: \n39: For sub-probability measures $\\mu_1, \\mu_2$ on $(\\mathcal{X}, d)$, we define the **additive Hellinger-Kantorovich distance**:\n40: \n41: $$\n42: d_{HK}^2(\\mu_1, \\mu_2) := d_H^2(\\mu_1, \\mu_2) + W_2^2(\\tilde{\\mu}_1, \\tilde{\\mu}_2)\n43: \n44: $$\n45: \n46: where:\n47: - $d_H^2(\\mu_1, \\mu_2) = \\int (\\sqrt{f_1} - \\sqrt{f_2})^2 d\\lambda$ is the Hellinger distance ($f_i = d\\mu_i/d\\lambda$)\n48: - $W_2^2(\\tilde{\\mu}_1, \\tilde{\\mu}_2)$ is the Wasserstein-2 distance between normalizations $\\tilde{\\mu}_i = \\mu_i/\\|\\mu_i\\|$\n49: \n50: **Relationship to the Canonical HK Metric**: The canonical Hellinger-Kantorovich metric (Liero et al. 2018) uses a cone-geometry construction that couples mass variation and transport through optimal couplings on the extended space. Our additive form is a **simplification** that decouples these components.\n51: \n52: **Justification for the Fragile Gas**: This simplified metric is well-suited for the Fragile Gas because:\n53: \n54: 1. **Decoupled Dynamics**: The algorithm has **spatially decoupled** mass and transport mechanisms. Mass changes occur through revival (uniform over dead walkers) and cloning (based on fitness, but with Gaussian jitter), while transport happens via Langevin diffusion.\n55: \n56: 2. **Modular Analysis**: The additive form enables a **three-lemma decomposition** ({prf:ref}`lem-mass-contraction-revival-death`, {prf:ref}`lem-structural-variance-contraction`, {prf:ref}`lem-kinetic-hellinger-contraction`) where each component is analyzed separately with clear physical interpretation.\n57: \n58: 3. **Upper Bound Property**: For measures with comparable mass ($|k_1 - k_2| \\ll \\sqrt{k_1 k_2}$), the additive form provides an upper bound on the canonical HK distance (Kondratyev, Monsaingeon, Vorotnikov, *Calc. Var.* 2016).\n59: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "11_hk_convergence",
        "chapter_index": 1,
        "chapter_file": "chapter_1.json",
        "section_id": "## 1. Introduction"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-swarm-config-space",
      "title": "Swarm Configuration Space",
      "start_line": 84,
      "end_line": 107,
      "header_lines": [
        85
      ],
      "content_start": 87,
      "content_end": 106,
      "content": "87: :label: def-swarm-config-space\n88: \n89: The **full swarm configuration space** is:\n90: \n91: $$\n92: \\Sigma_N^{\\text{full}} = (\\mathcal{X} \\times \\mathcal{V} \\times \\{0,1\\})^N\n93: \n94: $$\n95: \n96: where:\n97: - $\\mathcal{X} \\subset \\mathbb{R}^d$ is the position state space (Valid Domain)\n98: - $\\mathcal{V} = \\{v \\in \\mathbb{R}^d : \\|v\\| \\le V_{\\text{alg}}\\}$ is the velocity ball\n99: - $\\{0,1\\}$ encodes the alive/dead status\n100: \n101: The **alive subspace** is:\n102: \n103: $$\n104: \\Sigma_N^{\\text{alive}} = \\{\\mathcal{S} \\in \\Sigma_N^{\\text{full}} : |\\mathcal{A}(\\mathcal{S})| \\ge 1\\}\n105: \n106: $$",
      "metadata": {
        "label": "def-swarm-config-space"
      },
      "section": "## 2. Foundational Definitions",
      "references": [],
      "raw_directive": "84: We work with the Geometric Gas as defined in `07_geometric_gas.md`, with swarm state space:\n85: \n86: :::{prf:definition} Swarm Configuration Space\n87: :label: def-swarm-config-space\n88: \n89: The **full swarm configuration space** is:\n90: \n91: $$\n92: \\Sigma_N^{\\text{full}} = (\\mathcal{X} \\times \\mathcal{V} \\times \\{0,1\\})^N\n93: \n94: $$\n95: \n96: where:\n97: - $\\mathcal{X} \\subset \\mathbb{R}^d$ is the position state space (Valid Domain)\n98: - $\\mathcal{V} = \\{v \\in \\mathbb{R}^d : \\|v\\| \\le V_{\\text{alg}}\\}$ is the velocity ball\n99: - $\\{0,1\\}$ encodes the alive/dead status\n100: \n101: The **alive subspace** is:\n102: \n103: $$\n104: \\Sigma_N^{\\text{alive}} = \\{\\mathcal{S} \\in \\Sigma_N^{\\text{full}} : |\\mathcal{A}(\\mathcal{S})| \\ge 1\\}\n105: \n106: $$\n107: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "12_symmetries_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Foundational Definitions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-algorithmic-projection-space",
      "title": "Algorithmic Projection Space",
      "start_line": 109,
      "end_line": 129,
      "header_lines": [
        110
      ],
      "content_start": 112,
      "content_end": 128,
      "content": "112: :label: def-algorithmic-projection-space\n113: \n114: The **algorithmic space** $\\mathcal{Y} \\subset \\mathbb{R}^m$ is the range of the projection map $\\varphi: \\mathcal{X} \\times \\mathcal{V} \\to \\mathbb{R}^m$.\n115: \n116: For the canonical Geometric Gas with velocity weighting $\\lambda_v > 0$:\n117: \n118: $$\n119: \\varphi(x, v) = (x, \\lambda_v v) \\in \\mathbb{R}^d \\times \\mathbb{R}^d = \\mathbb{R}^{2d}\n120: \n121: $$\n122: \n123: Thus $m = 2d$ and $\\mathcal{Y} = \\mathcal{X} \\times \\lambda_v \\mathcal{V}$.\n124: \n125: The algorithmic metric is the **Sasaki metric**:\n126: \n127: $$\n128: d_{\\mathcal{Y}}^2(\\varphi(x_1, v_1), \\varphi(x_2, v_2)) = \\|x_1 - x_2\\|^2 + \\lambda_v^2 \\|v_1 - v_2\\|^2",
      "metadata": {
        "label": "def-algorithmic-projection-space"
      },
      "section": "## 2. Foundational Definitions",
      "references": [],
      "raw_directive": "109: :::\n110: \n111: :::{prf:definition} Algorithmic Projection Space\n112: :label: def-algorithmic-projection-space\n113: \n114: The **algorithmic space** $\\mathcal{Y} \\subset \\mathbb{R}^m$ is the range of the projection map $\\varphi: \\mathcal{X} \\times \\mathcal{V} \\to \\mathbb{R}^m$.\n115: \n116: For the canonical Geometric Gas with velocity weighting $\\lambda_v > 0$:\n117: \n118: $$\n119: \\varphi(x, v) = (x, \\lambda_v v) \\in \\mathbb{R}^d \\times \\mathbb{R}^d = \\mathbb{R}^{2d}\n120: \n121: $$\n122: \n123: Thus $m = 2d$ and $\\mathcal{Y} = \\mathcal{X} \\times \\lambda_v \\mathcal{V}$.\n124: \n125: The algorithmic metric is the **Sasaki metric**:\n126: \n127: $$\n128: d_{\\mathcal{Y}}^2(\\varphi(x_1, v_1), \\varphi(x_2, v_2)) = \\|x_1 - x_2\\|^2 + \\lambda_v^2 \\|v_1 - v_2\\|^2\n129: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "12_symmetries_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Foundational Definitions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-symmetry-transformation",
      "title": "Symmetry Transformation",
      "start_line": 133,
      "end_line": 149,
      "header_lines": [
        134
      ],
      "content_start": 136,
      "content_end": 148,
      "content": "136: :label: def-symmetry-transformation\n137: \n138: A **symmetry** of a dynamical system $\\mathcal{S}_{t+1} \\sim \\Psi(\\mathcal{S}_t, \\cdot)$ is a transformation $T: \\Sigma_N \\to \\Sigma_N$ such that:\n139: \n140: $$\n141: T(\\mathcal{S}_{t+1}) \\sim \\Psi(T(\\mathcal{S}_t), \\cdot)\n142: \n143: $$\n144: \n145: in distribution. That is, applying $T$ before or after the dynamics gives statistically equivalent outcomes.\n146: \n147: **Types of symmetries:**\n148: 1. **Exact symmetry**: The transition kernel is invariant: $\\Psi(T(\\mathcal{S}), \\cdot) = \\Psi(\\mathcal{S}, \\cdot) \\circ T^{-1}$",
      "metadata": {
        "label": "def-symmetry-transformation"
      },
      "section": "## 2. Foundational Definitions",
      "references": [],
      "raw_directive": "133: ### 2.2. Symmetry Groups: Definitions\n134: \n135: :::{prf:definition} Symmetry Transformation\n136: :label: def-symmetry-transformation\n137: \n138: A **symmetry** of a dynamical system $\\mathcal{S}_{t+1} \\sim \\Psi(\\mathcal{S}_t, \\cdot)$ is a transformation $T: \\Sigma_N \\to \\Sigma_N$ such that:\n139: \n140: $$\n141: T(\\mathcal{S}_{t+1}) \\sim \\Psi(T(\\mathcal{S}_t), \\cdot)\n142: \n143: $$\n144: \n145: in distribution. That is, applying $T$ before or after the dynamics gives statistically equivalent outcomes.\n146: \n147: **Types of symmetries:**\n148: 1. **Exact symmetry**: The transition kernel is invariant: $\\Psi(T(\\mathcal{S}), \\cdot) = \\Psi(\\mathcal{S}, \\cdot) \\circ T^{-1}$\n149: 2. **Statistical symmetry**: The quasi-stationary distribution (QSD) is invariant: $T_* \\pi_{\\text{QSD}} = \\pi_{\\text{QSD}}$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "12_symmetries_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Foundational Definitions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-permutation-group",
      "title": "Permutation Group",
      "start_line": 151,
      "end_line": 162,
      "header_lines": [
        152
      ],
      "content_start": 154,
      "content_end": 161,
      "content": "154: :label: def-permutation-group\n155: \n156: The **symmetric group** $S_N$ acts on $\\Sigma_N$ by permuting walker indices. For $\\sigma \\in S_N$:\n157: \n158: $$\n159: \\sigma(\\mathcal{S}) = ((x_{\\sigma(1)}, v_{\\sigma(1)}, s_{\\sigma(1)}), \\ldots, (x_{\\sigma(N)}, v_{\\sigma(N)}, s_{\\sigma(N)}))\n160: \n161: $$",
      "metadata": {
        "label": "def-permutation-group"
      },
      "section": "## 2. Foundational Definitions",
      "references": [],
      "raw_directive": "151: :::\n152: \n153: :::{prf:definition} Permutation Group\n154: :label: def-permutation-group\n155: \n156: The **symmetric group** $S_N$ acts on $\\Sigma_N$ by permuting walker indices. For $\\sigma \\in S_N$:\n157: \n158: $$\n159: \\sigma(\\mathcal{S}) = ((x_{\\sigma(1)}, v_{\\sigma(1)}, s_{\\sigma(1)}), \\ldots, (x_{\\sigma(N)}, v_{\\sigma(N)}, s_{\\sigma(N)}))\n160: \n161: $$\n162: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "12_symmetries_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Foundational Definitions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-euclidean-group-actions",
      "title": "Euclidean Group Actions",
      "start_line": 164,
      "end_line": 184,
      "header_lines": [
        165
      ],
      "content_start": 167,
      "content_end": 183,
      "content": "167: :label: def-euclidean-group-actions\n168: \n169: The **Euclidean group** $E(d) = \\mathbb{R}^d \\rtimes O(d)$ acts on $\\mathcal{X} \\times \\mathcal{V}$.\n170: \n171: **Translation subgroup** $\\mathbb{R}^d$: For $a \\in \\mathbb{R}^d$,\n172: \n173: $$\n174: T_a(x, v, s) = (x + a, v, s)\n175: \n176: $$\n177: \n178: **Rotation subgroup** $SO(d)$: For $R \\in SO(d)$,\n179: \n180: $$\n181: R(x, v, s) = (Rx, Rv, s)\n182: \n183: $$",
      "metadata": {
        "label": "def-euclidean-group-actions"
      },
      "section": "## 2. Foundational Definitions",
      "references": [],
      "raw_directive": "164: :::\n165: \n166: :::{prf:definition} Euclidean Group Actions\n167: :label: def-euclidean-group-actions\n168: \n169: The **Euclidean group** $E(d) = \\mathbb{R}^d \\rtimes O(d)$ acts on $\\mathcal{X} \\times \\mathcal{V}$.\n170: \n171: **Translation subgroup** $\\mathbb{R}^d$: For $a \\in \\mathbb{R}^d$,\n172: \n173: $$\n174: T_a(x, v, s) = (x + a, v, s)\n175: \n176: $$\n177: \n178: **Rotation subgroup** $SO(d)$: For $R \\in SO(d)$,\n179: \n180: $$\n181: R(x, v, s) = (Rx, Rv, s)\n182: \n183: $$\n184: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "12_symmetries_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Foundational Definitions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-rho-fitness-potential",
      "title": "ρ-Localized Fitness Potential",
      "start_line": 190,
      "end_line": 210,
      "header_lines": [
        191
      ],
      "content_start": 193,
      "content_end": 209,
      "content": "193: :label: def-rho-fitness-potential\n194: \n195: For localization scale $\\rho > 0$, the fitness potential at walker $i$ is:\n196: \n197: $$\n198: V_{\\text{fit}}[f_k, \\rho](x_i, v_i) = \\eta^{\\alpha + \\beta} \\exp\\left(\\alpha Z_\\rho[f_k, R, (x_i, v_i)] + \\beta Z_\\rho[f_k, d, (x_i, v_i)]\\right)\n199: \n200: $$\n201: \n202: where:\n203: - $f_k = \\frac{1}{k}\\sum_{j \\in A_k} \\delta_{(x_j, v_j)}$ is the empirical measure over alive walkers\n204: - $Z_\\rho[f_k, Q, z]$ is the localized Z-score:\n205: \n206: $$\n207: Z_\\rho[f_k, Q, z] = \\frac{Q(z) - \\mu_\\rho[f_k, Q, z]}{\\sigma'_\\rho[f_k, Q, z]}\n208: \n209: $$",
      "metadata": {
        "label": "def-rho-fitness-potential"
      },
      "section": "## 2. Foundational Definitions",
      "references": [],
      "raw_directive": "190: The adaptive mechanisms depend critically on the **ρ-localized fitness potential** from `07_geometric_gas.md`:\n191: \n192: :::{prf:definition} ρ-Localized Fitness Potential\n193: :label: def-rho-fitness-potential\n194: \n195: For localization scale $\\rho > 0$, the fitness potential at walker $i$ is:\n196: \n197: $$\n198: V_{\\text{fit}}[f_k, \\rho](x_i, v_i) = \\eta^{\\alpha + \\beta} \\exp\\left(\\alpha Z_\\rho[f_k, R, (x_i, v_i)] + \\beta Z_\\rho[f_k, d, (x_i, v_i)]\\right)\n199: \n200: $$\n201: \n202: where:\n203: - $f_k = \\frac{1}{k}\\sum_{j \\in A_k} \\delta_{(x_j, v_j)}$ is the empirical measure over alive walkers\n204: - $Z_\\rho[f_k, Q, z]$ is the localized Z-score:\n205: \n206: $$\n207: Z_\\rho[f_k, Q, z] = \\frac{Q(z) - \\mu_\\rho[f_k, Q, z]}{\\sigma'_\\rho[f_k, Q, z]}\n208: \n209: $$\n210: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "12_symmetries_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Foundational Definitions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-emergent-metric",
      "title": "Emergent Riemannian Metric",
      "start_line": 212,
      "end_line": 237,
      "header_lines": [
        213
      ],
      "content_start": 215,
      "content_end": 236,
      "content": "215: :label: def-emergent-metric\n216: \n217: The **emergent metric** is the regularized Hessian of the fitness potential:\n218: \n219: $$\n220: g(x_i, S) = H_i(S) + \\epsilon_\\Sigma I\n221: \n222: $$\n223: \n224: where:\n225: \n226: $$\n227: H_i(S) = \\nabla^2_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i, v_i)\n228: \n229: $$\n230: \n231: The **adaptive diffusion tensor** is:\n232: \n233: $$\n234: D_{\\text{reg}}(x_i, S) = g(x_i, S)^{-1}\n235: \n236: $$",
      "metadata": {
        "label": "def-emergent-metric"
      },
      "section": "## 2. Foundational Definitions",
      "references": [],
      "raw_directive": "212: :::\n213: \n214: :::{prf:definition} Emergent Riemannian Metric\n215: :label: def-emergent-metric\n216: \n217: The **emergent metric** is the regularized Hessian of the fitness potential:\n218: \n219: $$\n220: g(x_i, S) = H_i(S) + \\epsilon_\\Sigma I\n221: \n222: $$\n223: \n224: where:\n225: \n226: $$\n227: H_i(S) = \\nabla^2_{x_i} V_{\\text{fit}}[f_k, \\rho](x_i, v_i)\n228: \n229: $$\n230: \n231: The **adaptive diffusion tensor** is:\n232: \n233: $$\n234: D_{\\text{reg}}(x_i, S) = g(x_i, S)^{-1}\n235: \n236: $$\n237: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "12_symmetries_geometric_gas",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Foundational Definitions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-effective-counts-two-scales",
      "title": "Effective Interaction Counts (Two Scales)",
      "start_line": 173,
      "end_line": 224,
      "header_lines": [
        174
      ],
      "content_start": 176,
      "content_end": 223,
      "content": "176: :label: def-effective-counts-two-scales\n177: \n178: **1. Softmax Effective Companions** (scale $\\varepsilon_c$):\n179: $$\n180: k_{\\text{eff}}^{(\\varepsilon_c)}(i) := \\left|\\left\\{\\ell \\in \\mathcal{A} : d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}^{(\\varepsilon_c)}\\right\\}\\right|\n181: $$\n182: \n183: where:\n184: $$\n185: R_{\\text{eff}}^{(\\varepsilon_c)} = \\varepsilon_c \\sqrt{C_{\\text{comp}}^2 + 2\\log(k^2)}\n186: $$\n187: \n188: **Scaling**:\n189: $$\n190: k_{\\text{eff}}^{(\\varepsilon_c)}(i) = O(\\rho_{\\max} \\cdot \\varepsilon_c^{2d} \\cdot (\\log k)^d)\n191: $$\n192: \n193: **Properties**:\n194: - Grows logarithmically with $k$\n195: - NOT k-uniform\n196: - Controls softmax companion sums over $\\ell$\n197: \n198: **2. Localization Effective Neighbors** (scale $\\rho$):\n199: $$\n200: k_{\\text{eff}}^{(\\rho)}(i) := \\left|\\left\\{j \\in \\mathcal{A} : d_{\\text{alg}}(i,j) \\leq R_{\\text{eff}}^{(\\rho)}\\right\\}\\right|\n201: $$\n202: \n203: where:\n204: $$\n205: R_{\\text{eff}}^{(\\rho)} = C_\\rho \\cdot \\rho\n206: $$\n207: \n208: for some constant $C_\\rho$ independent of $k$.\n209: \n210: **Scaling**:\n211: $$\n212: k_{\\text{eff}}^{(\\rho)}(i) = O(\\rho_{\\max} \\cdot \\rho^{2d})\n213: $$\n214: \n215: \n216: **Explicit bound**: The effective neighbor count satisfies:\n217: $$\n218: k_{\\text{eff}}^{(\\rho)}(i) \\leq C_{\\text{vol}} \\rho_{\\max} \\rho^{2d}\n219: $$\n220: \n221: where $C_{\\text{vol}} = \\pi^d / \\Gamma(d+1)$ is the volume of the unit ball in $\\mathbb{R}^{2d}$ (phase space).\n222: **Properties**:\n223: - Independent of $k$",
      "metadata": {
        "label": "def-effective-counts-two-scales"
      },
      "section": "## 1. Introduction",
      "references": [],
      "raw_directive": "173: The Geometric Gas fitness potential involves **two distinct spatial scales** with separate effective interaction counts. It is crucial to distinguish these to understand which bounds are k-uniform.\n174: \n175: :::{prf:definition} Effective Interaction Counts (Two Scales)\n176: :label: def-effective-counts-two-scales\n177: \n178: **1. Softmax Effective Companions** (scale $\\varepsilon_c$):\n179: $$\n180: k_{\\text{eff}}^{(\\varepsilon_c)}(i) := \\left|\\left\\{\\ell \\in \\mathcal{A} : d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}^{(\\varepsilon_c)}\\right\\}\\right|\n181: $$\n182: \n183: where:\n184: $$\n185: R_{\\text{eff}}^{(\\varepsilon_c)} = \\varepsilon_c \\sqrt{C_{\\text{comp}}^2 + 2\\log(k^2)}\n186: $$\n187: \n188: **Scaling**:\n189: $$\n190: k_{\\text{eff}}^{(\\varepsilon_c)}(i) = O(\\rho_{\\max} \\cdot \\varepsilon_c^{2d} \\cdot (\\log k)^d)\n191: $$\n192: \n193: **Properties**:\n194: - Grows logarithmically with $k$\n195: - NOT k-uniform\n196: - Controls softmax companion sums over $\\ell$\n197: \n198: **2. Localization Effective Neighbors** (scale $\\rho$):\n199: $$\n200: k_{\\text{eff}}^{(\\rho)}(i) := \\left|\\left\\{j \\in \\mathcal{A} : d_{\\text{alg}}(i,j) \\leq R_{\\text{eff}}^{(\\rho)}\\right\\}\\right|\n201: $$\n202: \n203: where:\n204: $$\n205: R_{\\text{eff}}^{(\\rho)} = C_\\rho \\cdot \\rho\n206: $$\n207: \n208: for some constant $C_\\rho$ independent of $k$.\n209: \n210: **Scaling**:\n211: $$\n212: k_{\\text{eff}}^{(\\rho)}(i) = O(\\rho_{\\max} \\cdot \\rho^{2d})\n213: $$\n214: \n215: \n216: **Explicit bound**: The effective neighbor count satisfies:\n217: $$\n218: k_{\\text{eff}}^{(\\rho)}(i) \\leq C_{\\text{vol}} \\rho_{\\max} \\rho^{2d}\n219: $$\n220: \n221: where $C_{\\text{vol}} = \\pi^d / \\Gamma(d+1)$ is the volume of the unit ball in $\\mathbb{R}^{2d}$ (phase space).\n222: **Properties**:\n223: - Independent of $k$\n224: - **k-uniform** ✓",
      "_registry_context": {
        "stage": "directives",
        "document_id": "13_geometric_gas_c3_regularity",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. Introduction"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-reg-std-implementation",
      "title": "Regularized Standard Deviation (Implementation)",
      "start_line": 2393,
      "end_line": 2418,
      "header_lines": [
        2394
      ],
      "content_start": 2395,
      "content_end": 2417,
      "content": "2395: :::{prf:definition} Regularized Standard Deviation (Implementation)\n2396: :label: def-reg-std-implementation\n2397: $$\n2398: \\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}\n2399: $$\n2400: \n2401: where $\\sigma'_{\\min} = \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}$ with:\n2402: - $\\kappa_{\\text{var,min}} > 0$: Variance floor threshold (typical value: $10^{-8}$ to $10^{-6}$)\n2403: - $\\varepsilon_{\\text{std}} > 0$: Numerical stability parameter (typical value: $10^{-6}$ to $10^{-4}$)\n2404: \n2405: **Derivative bounds:**\n2406: $$\n2407: \\begin{align}\n2408: L_{\\sigma'_{\\text{reg}}} &= \\frac{1}{2\\sigma'_{\\min}} \\\\\n2409: L_{\\sigma''_{\\text{reg}}} &= \\frac{1}{4\\sigma'^3_{\\min}} \\\\\n2410: L_{\\sigma'''_{\\text{reg}}} &= \\frac{3}{8\\sigma'^5_{\\min}}\n2411: \\end{align}\n2412: $$\n2413: \n2414: **Example values** (with $\\kappa_{\\text{var,min}} = 10^{-6}$, $\\varepsilon_{\\text{std}} = 10^{-4}$):\n2415: - $\\sigma'_{\\min} \\approx 3.16 \\times 10^{-4}$\n2416: - $L_{\\sigma'_{\\text{reg}}} \\approx 1581.1$\n2417: - $L_{\\sigma''_{\\text{reg}}} \\approx 2.50 \\times 10^{10}$",
      "metadata": {
        "label": "def-reg-std-implementation"
      },
      "section": "## 12. Conclusion and Future Directions",
      "references": [],
      "raw_directive": "2393: For implementation, we provide the explicit formulas resulting from the regularized standard deviation construction:\n2394: \n2395: :::{prf:definition} Regularized Standard Deviation (Implementation)\n2396: :label: def-reg-std-implementation\n2397: $$\n2398: \\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}\n2399: $$\n2400: \n2401: where $\\sigma'_{\\min} = \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}$ with:\n2402: - $\\kappa_{\\text{var,min}} > 0$: Variance floor threshold (typical value: $10^{-8}$ to $10^{-6}$)\n2403: - $\\varepsilon_{\\text{std}} > 0$: Numerical stability parameter (typical value: $10^{-6}$ to $10^{-4}$)\n2404: \n2405: **Derivative bounds:**\n2406: $$\n2407: \\begin{align}\n2408: L_{\\sigma'_{\\text{reg}}} &= \\frac{1}{2\\sigma'_{\\min}} \\\\\n2409: L_{\\sigma''_{\\text{reg}}} &= \\frac{1}{4\\sigma'^3_{\\min}} \\\\\n2410: L_{\\sigma'''_{\\text{reg}}} &= \\frac{3}{8\\sigma'^5_{\\min}}\n2411: \\end{align}\n2412: $$\n2413: \n2414: **Example values** (with $\\kappa_{\\text{var,min}} = 10^{-6}$, $\\varepsilon_{\\text{std}} = 10^{-4}$):\n2415: - $\\sigma'_{\\min} \\approx 3.16 \\times 10^{-4}$\n2416: - $L_{\\sigma'_{\\text{reg}}} \\approx 1581.1$\n2417: - $L_{\\sigma''_{\\text{reg}}} \\approx 2.50 \\times 10^{10}$\n2418: - $L_{\\sigma'''_{\\text{reg}}} \\approx 1.19 \\times 10^{17}$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "13_geometric_gas_c3_regularity",
        "chapter_index": 13,
        "chapter_file": "chapter_13.json",
        "section_id": "## 12. Conclusion and Future Directions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-reg-std-implementation",
      "title": "Regularized Standard Deviation (Implementation)",
      "start_line": 1652,
      "end_line": 1679,
      "header_lines": [
        1653
      ],
      "content_start": 1655,
      "content_end": 1678,
      "content": "1655: :label: def-reg-std-implementation\n1656: \n1657: $$\n1658: \\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}\n1659: $$\n1660: \n1661: where $\\sigma'_{\\min} = \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}$ with:\n1662: - $\\kappa_{\\text{var,min}} > 0$: Variance floor threshold (typical value: $10^{-8}$ to $10^{-6}$)\n1663: - $\\varepsilon_{\\text{std}} > 0$: Numerical stability parameter (typical value: $10^{-6}$ to $10^{-4}$)\n1664: \n1665: **Derivative bounds:**\n1666: \n1667: $$\n1668: \\begin{align}\n1669: L_{\\sigma'_{\\text{reg}}} &= \\frac{1}{2\\sigma'_{\\min}} \\\\\n1670: L_{\\sigma''_{\\text{reg}}} &= \\frac{1}{4\\sigma'^3_{\\min}} \\\\\n1671: L_{\\sigma'''_{\\text{reg}}} &= \\frac{3}{8\\sigma'^5_{\\min}}\n1672: \\end{align}\n1673: $$\n1674: \n1675: **Example values** (with $\\kappa_{\\text{var,min}} = 10^{-6}$, $\\varepsilon_{\\text{std}} = 10^{-4}$):\n1676: - $\\sigma'_{\\min} \\approx 3.16 \\times 10^{-4}$\n1677: - $L_{\\sigma'_{\\text{reg}}} \\approx 1581.1$\n1678: - $L_{\\sigma''_{\\text{reg}}} \\approx 2.50 \\times 10^{10}$",
      "metadata": {
        "label": "def-reg-std-implementation"
      },
      "section": "## 12. Conclusion and Future Directions",
      "references": [],
      "raw_directive": "1652: For implementation, we provide the explicit formulas resulting from the regularized standard deviation construction:\n1653: \n1654: :::{prf:definition} Regularized Standard Deviation (Implementation)\n1655: :label: def-reg-std-implementation\n1656: \n1657: $$\n1658: \\sigma'_{\\text{reg}}(V) = \\sqrt{V + \\sigma'^2_{\\min}}\n1659: $$\n1660: \n1661: where $\\sigma'_{\\min} = \\sqrt{\\kappa_{\\text{var,min}} + \\varepsilon_{\\text{std}}^2}$ with:\n1662: - $\\kappa_{\\text{var,min}} > 0$: Variance floor threshold (typical value: $10^{-8}$ to $10^{-6}$)\n1663: - $\\varepsilon_{\\text{std}} > 0$: Numerical stability parameter (typical value: $10^{-6}$ to $10^{-4}$)\n1664: \n1665: **Derivative bounds:**\n1666: \n1667: $$\n1668: \\begin{align}\n1669: L_{\\sigma'_{\\text{reg}}} &= \\frac{1}{2\\sigma'_{\\min}} \\\\\n1670: L_{\\sigma''_{\\text{reg}}} &= \\frac{1}{4\\sigma'^3_{\\min}} \\\\\n1671: L_{\\sigma'''_{\\text{reg}}} &= \\frac{3}{8\\sigma'^5_{\\min}}\n1672: \\end{align}\n1673: $$\n1674: \n1675: **Example values** (with $\\kappa_{\\text{var,min}} = 10^{-6}$, $\\varepsilon_{\\text{std}} = 10^{-4}$):\n1676: - $\\sigma'_{\\min} \\approx 3.16 \\times 10^{-4}$\n1677: - $L_{\\sigma'_{\\text{reg}}} \\approx 1581.1$\n1678: - $L_{\\sigma''_{\\text{reg}}} \\approx 2.50 \\times 10^{10}$\n1679: - $L_{\\sigma'''_{\\text{reg}}} \\approx 1.19 \\times 10^{17}$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "13_geometric_gas_c3_regularity",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 12. Conclusion and Future Directions"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-effective-counts-two-scales",
      "title": "Effective Interaction Counts (Two Scales)",
      "start_line": 145,
      "end_line": 201,
      "header_lines": [
        146
      ],
      "content_start": 148,
      "content_end": 200,
      "content": "148: :label: def-effective-counts-two-scales\n149: \n150: **1. Softmax Effective Companions** (scale $\\varepsilon_c$):\n151: \n152: $$\n153: k_{\\text{eff}}^{(\\varepsilon_c)}(i) := \\left|\\left\\{\\ell \\in \\mathcal{A} : d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}^{(\\varepsilon_c)}\\right\\}\\right|\n154: \n155: $$\n156: \n157: where:\n158: \n159: $$\n160: R_{\\text{eff}}^{(\\varepsilon_c)} = \\varepsilon_c \\sqrt{C_{\\text{comp}}^2 + 2\\log(k^2)}\n161: \n162: $$\n163: \n164: **Scaling**:\n165: \n166: $$\n167: k_{\\text{eff}}^{(\\varepsilon_c)}(i) = O(\\rho_{\\max} \\cdot \\varepsilon_c^{2d} \\cdot (\\log k)^d)\n168: \n169: $$\n170: \n171: **Properties**:\n172: - Grows logarithmically with $k$\n173: - NOT k-uniform\n174: - Controls softmax companion sums over $\\ell$\n175: \n176: **2. Localization Effective Neighbors** (scale $\\rho$):\n177: \n178: $$\n179: k_{\\text{eff}}^{(\\rho)}(i) := \\left|\\left\\{j \\in \\mathcal{A} : d_{\\text{alg}}(i,j) \\leq R_{\\text{eff}}^{(\\rho)}\\right\\}\\right|\n180: \n181: $$\n182: \n183: where:\n184: \n185: $$\n186: R_{\\text{eff}}^{(\\rho)} = C_\\rho \\cdot \\rho\n187: \n188: $$\n189: \n190: for some constant $C_\\rho$ independent of $k$.\n191: \n192: **Scaling**:\n193: \n194: $$\n195: k_{\\text{eff}}^{(\\rho)}(i) = O(\\rho_{\\max} \\cdot \\rho^{2d})\n196: \n197: $$\n198: \n199: **Properties**:\n200: - Independent of $k$",
      "metadata": {
        "label": "def-effective-counts-two-scales"
      },
      "section": "## 1. Introduction",
      "references": [],
      "raw_directive": "145: The Geometric Gas fitness potential involves **two distinct spatial scales** with separate effective interaction counts. It is crucial to distinguish these to understand which bounds are k-uniform.\n146: \n147: :::{prf:definition} Effective Interaction Counts (Two Scales)\n148: :label: def-effective-counts-two-scales\n149: \n150: **1. Softmax Effective Companions** (scale $\\varepsilon_c$):\n151: \n152: $$\n153: k_{\\text{eff}}^{(\\varepsilon_c)}(i) := \\left|\\left\\{\\ell \\in \\mathcal{A} : d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}^{(\\varepsilon_c)}\\right\\}\\right|\n154: \n155: $$\n156: \n157: where:\n158: \n159: $$\n160: R_{\\text{eff}}^{(\\varepsilon_c)} = \\varepsilon_c \\sqrt{C_{\\text{comp}}^2 + 2\\log(k^2)}\n161: \n162: $$\n163: \n164: **Scaling**:\n165: \n166: $$\n167: k_{\\text{eff}}^{(\\varepsilon_c)}(i) = O(\\rho_{\\max} \\cdot \\varepsilon_c^{2d} \\cdot (\\log k)^d)\n168: \n169: $$\n170: \n171: **Properties**:\n172: - Grows logarithmically with $k$\n173: - NOT k-uniform\n174: - Controls softmax companion sums over $\\ell$\n175: \n176: **2. Localization Effective Neighbors** (scale $\\rho$):\n177: \n178: $$\n179: k_{\\text{eff}}^{(\\rho)}(i) := \\left|\\left\\{j \\in \\mathcal{A} : d_{\\text{alg}}(i,j) \\leq R_{\\text{eff}}^{(\\rho)}\\right\\}\\right|\n180: \n181: $$\n182: \n183: where:\n184: \n185: $$\n186: R_{\\text{eff}}^{(\\rho)} = C_\\rho \\cdot \\rho\n187: \n188: $$\n189: \n190: for some constant $C_\\rho$ independent of $k$.\n191: \n192: **Scaling**:\n193: \n194: $$\n195: k_{\\text{eff}}^{(\\rho)}(i) = O(\\rho_{\\max} \\cdot \\rho^{2d})\n196: \n197: $$\n198: \n199: **Properties**:\n200: - Independent of $k$\n201: - **k-uniform** ✓",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. Introduction"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-smooth-phase-space-partition-full",
      "title": "Smooth Phase-Space Partition",
      "start_line": 1104,
      "end_line": 1133,
      "header_lines": [
        1105
      ],
      "content_start": 1107,
      "content_end": 1132,
      "content": "1107: :label: def-smooth-phase-space-partition-full\n1108: \n1109: Fix a clustering scale $\\varepsilon_c > 0$ and cluster centers $\\{(y_m, u_m)\\}_{m=1}^M$ in phase space.\n1110: \n1111: A **smooth partition of unity** is a collection of functions $\\{\\psi_m : \\mathcal{X} \\times \\mathbb{R}^d \\to [0,1]\\}_{m=1}^M$ satisfying:\n1112: \n1113: 1. **Partition identity**:\n1114: \n1115: $$\n1116: \\sum_{m=1}^M \\psi_m(x, v) = 1 \\quad \\text{for all } (x, v) \\in \\mathcal{X} \\times \\mathbb{R}^d\n1117: \n1118: $$\n1119: \n1120: 2. **Smoothness**: Each $\\psi_m \\in C^\\infty$ with bounded derivatives:\n1121: \n1122: $$\n1123: \\|\\nabla^n \\psi_m\\|_\\infty \\leq C_{\\psi,n} \\cdot \\varepsilon_c^{-n} \\quad \\text{for all } n \\geq 0\n1124: \n1125: $$\n1126: \n1127: 3. **Localization**: Each $\\psi_m$ has support concentrated near cluster $m$:\n1128: \n1129: $$\n1130: \\psi_m(x, v) = 0 \\quad \\text{when } d_{\\text{alg}}((x,v), (y_m, u_m)) > 2\\varepsilon_c\n1131: \n1132: $$",
      "metadata": {
        "label": "def-smooth-phase-space-partition-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [],
      "raw_directive": "1104: We construct a **smooth partition of unity** on phase space that avoids the discontinuity problems of hard clustering.\n1105: \n1106: :::{prf:definition} Smooth Phase-Space Partition\n1107: :label: def-smooth-phase-space-partition-full\n1108: \n1109: Fix a clustering scale $\\varepsilon_c > 0$ and cluster centers $\\{(y_m, u_m)\\}_{m=1}^M$ in phase space.\n1110: \n1111: A **smooth partition of unity** is a collection of functions $\\{\\psi_m : \\mathcal{X} \\times \\mathbb{R}^d \\to [0,1]\\}_{m=1}^M$ satisfying:\n1112: \n1113: 1. **Partition identity**:\n1114: \n1115: $$\n1116: \\sum_{m=1}^M \\psi_m(x, v) = 1 \\quad \\text{for all } (x, v) \\in \\mathcal{X} \\times \\mathbb{R}^d\n1117: \n1118: $$\n1119: \n1120: 2. **Smoothness**: Each $\\psi_m \\in C^\\infty$ with bounded derivatives:\n1121: \n1122: $$\n1123: \\|\\nabla^n \\psi_m\\|_\\infty \\leq C_{\\psi,n} \\cdot \\varepsilon_c^{-n} \\quad \\text{for all } n \\geq 0\n1124: \n1125: $$\n1126: \n1127: 3. **Localization**: Each $\\psi_m$ has support concentrated near cluster $m$:\n1128: \n1129: $$\n1130: \\psi_m(x, v) = 0 \\quad \\text{when } d_{\\text{alg}}((x,v), (y_m, u_m)) > 2\\varepsilon_c\n1131: \n1132: $$\n1133: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-soft-cluster-membership-full",
      "title": "Soft Cluster Membership Weights",
      "start_line": 1244,
      "end_line": 1258,
      "header_lines": [
        1245
      ],
      "content_start": 1247,
      "content_end": 1257,
      "content": "1247: :label: def-soft-cluster-membership-full\n1248: \n1249: For walker $j \\in \\mathcal{A}$, define its **soft membership** in cluster $m$ as:\n1250: \n1251: $$\n1252: \\alpha_{j,m} = \\psi_m(x_j, v_j) \\in [0, 1]\n1253: \n1254: $$\n1255: \n1256: This satisfies:\n1257: - $\\sum_{m=1}^M \\alpha_{j,m} = 1$ (walker belongs to all clusters with fractional weights)",
      "metadata": {
        "label": "def-soft-cluster-membership-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [],
      "raw_directive": "1244: ### 3.2 Cluster Assignment via Soft Membership\n1245: \n1246: :::{prf:definition} Soft Cluster Membership Weights\n1247: :label: def-soft-cluster-membership-full\n1248: \n1249: For walker $j \\in \\mathcal{A}$, define its **soft membership** in cluster $m$ as:\n1250: \n1251: $$\n1252: \\alpha_{j,m} = \\psi_m(x_j, v_j) \\in [0, 1]\n1253: \n1254: $$\n1255: \n1256: This satisfies:\n1257: - $\\sum_{m=1}^M \\alpha_{j,m} = 1$ (walker belongs to all clusters with fractional weights)\n1258: - $\\alpha_{j,m} \\geq 1/2$ if $d_{\\text{alg}}(j, m) \\leq \\varepsilon_c/2$ (strong membership near center)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-effective-cluster-population-full",
      "title": "Effective Cluster Population",
      "start_line": 1264,
      "end_line": 1275,
      "header_lines": [
        1265
      ],
      "content_start": 1267,
      "content_end": 1274,
      "content": "1267: :label: def-effective-cluster-population-full\n1268: \n1269: The **effective number of walkers** in cluster $m$ is:\n1270: \n1271: $$\n1272: k_m^{\\text{eff}} = \\sum_{j \\in \\mathcal{A}} \\alpha_{j,m} = \\sum_{j \\in \\mathcal{A}} \\psi_m(x_j, v_j)\n1273: \n1274: $$",
      "metadata": {
        "label": "def-effective-cluster-population-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [],
      "raw_directive": "1264: ### 3.3 Effective Cluster Size\n1265: \n1266: :::{prf:definition} Effective Cluster Population\n1267: :label: def-effective-cluster-population-full\n1268: \n1269: The **effective number of walkers** in cluster $m$ is:\n1270: \n1271: $$\n1272: k_m^{\\text{eff}} = \\sum_{j \\in \\mathcal{A}} \\alpha_{j,m} = \\sum_{j \\in \\mathcal{A}} \\psi_m(x_j, v_j)\n1273: \n1274: $$\n1275: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-diversity-pairing-cinf",
      "title": "Sequential Stochastic Greedy Pairing (From 03_cloning.md)",
      "start_line": 2360,
      "end_line": 2377,
      "header_lines": [
        2361
      ],
      "content_start": 2363,
      "content_end": 2376,
      "content": "2363: :label: def-diversity-pairing-cinf\n2364: \n2365: From Definition 5.1.2 in `docs/source/1_euclidean_gas/03_cloning.md`:\n2366: \n2367: **Inputs**: Alive walkers $\\mathcal{A}_t = \\{w_1, \\ldots, w_k\\}$, interaction range $\\varepsilon_d > 0$\n2368: \n2369: **Operation** (Algorithm 5.1):\n2370: 1. Initialize unpaired set $U \\leftarrow \\mathcal{A}_t$, empty companion map $c$\n2371: 2. While $|U| > 1$:\n2372:    - Select walker $i$ from $U$, remove from $U$\n2373:    - For each $j \\in U$, compute weight: $w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)$\n2374:    - Sample companion $c_i$ from softmax distribution: $P(j) = w_{ij} / \\sum_{\\ell \\in U} w_{i\\ell}$\n2375:    - Remove $c_i$ from $U$\n2376:    - Set bidirectional pairing: $c(i) \\leftarrow c_i$ and $c(c_i) \\leftarrow i$",
      "metadata": {
        "label": "def-diversity-pairing-cinf"
      },
      "section": "## 5.6 Diversity Pairing Mechanism Analysis",
      "references": [],
      "raw_directive": "2360: ### 5.6.1 Diversity Pairing Definition\n2361: \n2362: :::{prf:definition} Sequential Stochastic Greedy Pairing (From 03_cloning.md)\n2363: :label: def-diversity-pairing-cinf\n2364: \n2365: From Definition 5.1.2 in `docs/source/1_euclidean_gas/03_cloning.md`:\n2366: \n2367: **Inputs**: Alive walkers $\\mathcal{A}_t = \\{w_1, \\ldots, w_k\\}$, interaction range $\\varepsilon_d > 0$\n2368: \n2369: **Operation** (Algorithm 5.1):\n2370: 1. Initialize unpaired set $U \\leftarrow \\mathcal{A}_t$, empty companion map $c$\n2371: 2. While $|U| > 1$:\n2372:    - Select walker $i$ from $U$, remove from $U$\n2373:    - For each $j \\in U$, compute weight: $w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)$\n2374:    - Sample companion $c_i$ from softmax distribution: $P(j) = w_{ij} / \\sum_{\\ell \\in U} w_{i\\ell}$\n2375:    - Remove $c_i$ from $U$\n2376:    - Set bidirectional pairing: $c(i) \\leftarrow c_i$ and $c(c_i) \\leftarrow i$\n2377: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 5.6 Diversity Pairing Mechanism Analysis"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-idealized-pairing-cinf",
      "title": "Idealized Spatially-Aware Pairing (From 03_cloning.md)",
      "start_line": 2379,
      "end_line": 2399,
      "header_lines": [
        2380
      ],
      "content_start": 2382,
      "content_end": 2398,
      "content": "2382: :label: def-idealized-pairing-cinf\n2383: \n2384: From Definition 5.1.1 in `03_cloning.md`:\n2385: \n2386: The idealized model assigns probability to each perfect matching $M \\in \\mathcal{M}_k$ via:\n2387: \n2388: $$\n2389: P_{\\text{ideal}}(M | S) = \\frac{W(M)}{\\sum_{M' \\in \\mathcal{M}_k} W(M')}\n2390: \n2391: $$\n2392: \n2393: where the matching quality is:\n2394: \n2395: $$\n2396: W(M) := \\prod_{(i,j) \\in M} \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)\n2397: \n2398: $$",
      "metadata": {
        "label": "def-idealized-pairing-cinf"
      },
      "section": "## 5.6 Diversity Pairing Mechanism Analysis",
      "references": [],
      "raw_directive": "2379: :::\n2380: \n2381: :::{prf:definition} Idealized Spatially-Aware Pairing (From 03_cloning.md)\n2382: :label: def-idealized-pairing-cinf\n2383: \n2384: From Definition 5.1.1 in `03_cloning.md`:\n2385: \n2386: The idealized model assigns probability to each perfect matching $M \\in \\mathcal{M}_k$ via:\n2387: \n2388: $$\n2389: P_{\\text{ideal}}(M | S) = \\frac{W(M)}{\\sum_{M' \\in \\mathcal{M}_k} W(M')}\n2390: \n2391: $$\n2392: \n2393: where the matching quality is:\n2394: \n2395: $$\n2396: W(M) := \\prod_{(i,j) \\in M} \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)\n2397: \n2398: $$\n2399: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 5.6 Diversity Pairing Mechanism Analysis"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-qsd-adaptive",
      "title": "Quasi-Stationary Distribution (QSD)",
      "start_line": 323,
      "end_line": 332,
      "header_lines": [
        324
      ],
      "content_start": 326,
      "content_end": 331,
      "content": "326: :label: def-qsd-adaptive\n327: \n328: A probability measure $\\pi_N$ on $\\Sigma_N$ is a **quasi-stationary distribution** for the Geometric Gas if:\n329: \n330: 1. **Invariance:** $\\mathcal{L}^* \\pi_N = 0$ (where $\\mathcal{L}^*$ is the adjoint in $L^2(\\Sigma_N, \\text{vol})$)\n331: 2. **Ergodicity:** $\\pi_N$ is the unique such invariant measure",
      "metadata": {
        "label": "def-qsd-adaptive"
      },
      "section": "## 3. Mathematical Preliminaries",
      "references": [],
      "raw_directive": "323: ### 3.3. The Quasi-Stationary Distribution (QSD)\n324: \n325: :::{prf:definition} Quasi-Stationary Distribution (QSD)\n326: :label: def-qsd-adaptive\n327: \n328: A probability measure $\\pi_N$ on $\\Sigma_N$ is a **quasi-stationary distribution** for the Geometric Gas if:\n329: \n330: 1. **Invariance:** $\\mathcal{L}^* \\pi_N = 0$ (where $\\mathcal{L}^*$ is the adjoint in $L^2(\\Sigma_N, \\text{vol})$)\n331: 2. **Ergodicity:** $\\pi_N$ is the unique such invariant measure\n332: 3. **Attraction:** For any initial $\\mu_0 \\in \\mathcal{P}(\\Sigma_N)$, $\\mu_t \\to \\pi_N$ as $t \\to \\infty$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "15_geometric_gas_lsi_proof",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Mathematical Preliminaries"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-lsi-adaptive",
      "title": "Log-Sobolev Inequality",
      "start_line": 344,
      "end_line": 357,
      "header_lines": [
        345
      ],
      "content_start": 347,
      "content_end": 356,
      "content": "347: :label: def-lsi-adaptive\n348: \n349: A probability measure $\\mu$ on $\\Sigma_N$ satisfies a **Log-Sobolev Inequality** with constant $C_{\\text{LSI}} > 0$ if, for all smooth $f: \\Sigma_N \\to \\mathbb{R}_+$ with $\\int f^2 d\\mu = 1$:\n350: \n351: $$\n352: \\text{Ent}_\\mu(f^2) \\leq C_{\\text{LSI}} \\int \\Gamma_{\\Sigma_{\\text{reg}}}(f, f) \\, d\\mu\n353: $$\n354: \n355: where:\n356: - **Entropy functional:** $\\text{Ent}_\\mu(f^2) := \\int f^2 \\log(f^2) d\\mu$",
      "metadata": {
        "label": "def-lsi-adaptive"
      },
      "section": "## 3. Mathematical Preliminaries",
      "references": [],
      "raw_directive": "344: ### 3.4. Log-Sobolev Inequality (LSI)\n345: \n346: :::{prf:definition} Log-Sobolev Inequality\n347: :label: def-lsi-adaptive\n348: \n349: A probability measure $\\mu$ on $\\Sigma_N$ satisfies a **Log-Sobolev Inequality** with constant $C_{\\text{LSI}} > 0$ if, for all smooth $f: \\Sigma_N \\to \\mathbb{R}_+$ with $\\int f^2 d\\mu = 1$:\n350: \n351: $$\n352: \\text{Ent}_\\mu(f^2) \\leq C_{\\text{LSI}} \\int \\Gamma_{\\Sigma_{\\text{reg}}}(f, f) \\, d\\mu\n353: $$\n354: \n355: where:\n356: - **Entropy functional:** $\\text{Ent}_\\mu(f^2) := \\int f^2 \\log(f^2) d\\mu$\n357: - **Carré du champ operator:** $\\Gamma_{\\Sigma_{\\text{reg}}}(f, f) := \\frac{1}{2} \\sum_{i=1}^N \\|\\Sigma_{\\text{reg}}(x_i, S) \\nabla_{v_i} f\\|^2$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "15_geometric_gas_lsi_proof",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Mathematical Preliminaries"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-revival-operator-formal",
      "title": "Mean-Field Revival Operator (Formal)",
      "start_line": 445,
      "end_line": 463,
      "header_lines": [
        446
      ],
      "content_start": 448,
      "content_end": 462,
      "content": "448: :label: def-revival-operator-formal\n449: \n450: The **revival operator** $\\mathcal{R}: \\mathcal{P}(\\Omega) \\times [0,1] \\to \\mathcal{M}^+(\\Omega)$ (where $\\mathcal{M}^+$ denotes non-negative measures) is defined by:\n451: \n452: $$\n453: \\mathcal{R}[\\rho, m_d](x,v) := \\lambda_{\\text{revive}} \\cdot m_d \\cdot \\frac{\\rho(x,v)}{\\|\\rho\\|_{L^1}}\n454: \n455: $$\n456: \n457: where $\\|\\rho\\|_{L^1} = \\int_\\Omega \\rho(x,v) \\, dx dv$ is the total alive mass.\n458: \n459: **Properties**:\n460: 1. **Mass injection**: $\\int_\\Omega \\mathcal{R}[\\rho, m_d] = \\lambda_{\\text{revive}} m_d$ (transfers mass from dead to alive)\n461: 2. **Proportionality**: Revival samples proportionally to current alive density\n462: 3. **Normalization**: The factor $1/\\|\\rho\\|_{L^1}$ ensures the distribution shape is preserved",
      "metadata": {
        "label": "def-revival-operator-formal"
      },
      "section": "## 1. Rigorous Formulation of the Mean-Field Revival Operator",
      "references": [],
      "raw_directive": "445: ### 1.2. Revival Operator Definition\n446: \n447: :::{prf:definition} Mean-Field Revival Operator (Formal)\n448: :label: def-revival-operator-formal\n449: \n450: The **revival operator** $\\mathcal{R}: \\mathcal{P}(\\Omega) \\times [0,1] \\to \\mathcal{M}^+(\\Omega)$ (where $\\mathcal{M}^+$ denotes non-negative measures) is defined by:\n451: \n452: $$\n453: \\mathcal{R}[\\rho, m_d](x,v) := \\lambda_{\\text{revive}} \\cdot m_d \\cdot \\frac{\\rho(x,v)}{\\|\\rho\\|_{L^1}}\n454: \n455: $$\n456: \n457: where $\\|\\rho\\|_{L^1} = \\int_\\Omega \\rho(x,v) \\, dx dv$ is the total alive mass.\n458: \n459: **Properties**:\n460: 1. **Mass injection**: $\\int_\\Omega \\mathcal{R}[\\rho, m_d] = \\lambda_{\\text{revive}} m_d$ (transfers mass from dead to alive)\n461: 2. **Proportionality**: Revival samples proportionally to current alive density\n462: 3. **Normalization**: The factor $1/\\|\\rho\\|_{L^1}$ ensures the distribution shape is preserved\n463: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 1. Rigorous Formulation of the Mean-Field Revival Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-combined-jump-operator",
      "title": "Combined Jump Operator",
      "start_line": 482,
      "end_line": 498,
      "header_lines": [
        483
      ],
      "content_start": 485,
      "content_end": 497,
      "content": "485: :label: def-combined-jump-operator\n486: \n487: Define the **jump operator** $\\mathcal{J}: \\mathcal{P}(\\Omega) \\to \\mathcal{P}(\\Omega)$ that acts over a small time interval $\\Delta t$:\n488: \n489: $$\n490: \\mathcal{J}(\\rho) := (1 - \\int_\\Omega \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t) \\cdot \\frac{\\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t}{\\text{(normalization)}} + \\mathcal{R}[\\rho, m_d] \\cdot \\Delta t\n491: \n492: $$\n493: \n494: This operator:\n495: 1. **Removes mass** via killing: $\\rho \\mapsto \\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t$\n496: 2. **Adds mass** via revival: Injects $\\mathcal{R}[\\rho, m_d] \\cdot \\Delta t$\n497: 3. **Conserves total mass**: $\\int \\mathcal{J}(\\rho) = \\int \\rho$ (in the two-population model)",
      "metadata": {
        "label": "def-combined-jump-operator"
      },
      "section": "## 1. Rigorous Formulation of the Mean-Field Revival Operator",
      "references": [],
      "raw_directive": "482: For the discrete-time analysis, we consider the **composed** operator that handles both killing and revival in one time step $\\Delta t$:\n483: \n484: :::{prf:definition} Combined Jump Operator\n485: :label: def-combined-jump-operator\n486: \n487: Define the **jump operator** $\\mathcal{J}: \\mathcal{P}(\\Omega) \\to \\mathcal{P}(\\Omega)$ that acts over a small time interval $\\Delta t$:\n488: \n489: $$\n490: \\mathcal{J}(\\rho) := (1 - \\int_\\Omega \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t) \\cdot \\frac{\\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t}{\\text{(normalization)}} + \\mathcal{R}[\\rho, m_d] \\cdot \\Delta t\n491: \n492: $$\n493: \n494: This operator:\n495: 1. **Removes mass** via killing: $\\rho \\mapsto \\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t$\n496: 2. **Adds mass** via revival: Injects $\\mathcal{R}[\\rho, m_d] \\cdot \\Delta t$\n497: 3. **Conserves total mass**: $\\int \\mathcal{J}(\\rho) = \\int \\rho$ (in the two-population model)\n498: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 1. Rigorous Formulation of the Mean-Field Revival Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-qsd-mean-field",
      "title": "Quasi-Stationary Distribution (QSD)",
      "start_line": 1435,
      "end_line": 1444,
      "header_lines": [
        1436
      ],
      "content_start": 1438,
      "content_end": 1443,
      "content": "1438: :label: def-qsd-mean-field\n1439: \n1440: A probability measure $\\rho_\\infty \\in \\mathcal{P}(\\Omega)$ is a **quasi-stationary distribution** for the mean-field generator $\\mathcal{L}$ if:\n1441: \n1442: 1. **Stationarity**: $\\mathcal{L}[\\rho_\\infty] = 0$\n1443: 2. **Normalization**: $\\|\\rho_\\infty\\|_{L^1} = M_\\infty < 1$ (mass less than 1 due to killing)",
      "metadata": {
        "label": "def-qsd-mean-field"
      },
      "section": "## 0. Problem Setup",
      "references": [],
      "raw_directive": "1435: ### 0.2. Definition of QSD\n1436: \n1437: :::{prf:definition} Quasi-Stationary Distribution (QSD)\n1438: :label: def-qsd-mean-field\n1439: \n1440: A probability measure $\\rho_\\infty \\in \\mathcal{P}(\\Omega)$ is a **quasi-stationary distribution** for the mean-field generator $\\mathcal{L}$ if:\n1441: \n1442: 1. **Stationarity**: $\\mathcal{L}[\\rho_\\infty] = 0$\n1443: 2. **Normalization**: $\\|\\rho_\\infty\\|_{L^1} = M_\\infty < 1$ (mass less than 1 due to killing)\n1444: 3. **Support**: $\\text{supp}(\\rho_\\infty) \\subseteq \\Omega$ (concentrated on alive region)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 14,
        "chapter_file": "chapter_14.json",
        "section_id": "## 0. Problem Setup"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-modified-fisher",
      "title": "Modified Fisher Information",
      "start_line": 3943,
      "end_line": 3954,
      "header_lines": [
        3944
      ],
      "content_start": 3946,
      "content_end": 3953,
      "content": "3946: :label: def-modified-fisher\n3947: \n3948: For a parameter $\\theta > 0$, the **modified Fisher information** is:\n3949: \n3950: $$\n3951: I_\\theta(\\rho) := I_v(\\rho) + \\theta I_x(\\rho) = \\int_\\Omega \\rho \\left(|\\nabla_v \\log \\rho|^2 + \\theta |\\nabla_x \\log \\rho|^2\\right) dx dv\n3952: \n3953: $$",
      "metadata": {
        "label": "def-modified-fisher"
      },
      "section": "## 1. Modified Fisher Information and Auxiliary Functional",
      "references": [],
      "raw_directive": "3943: Following hypocoercivity theory, we introduce a **weighted combination**:\n3944: \n3945: :::{prf:definition} Modified Fisher Information\n3946: :label: def-modified-fisher\n3947: \n3948: For a parameter $\\theta > 0$, the **modified Fisher information** is:\n3949: \n3950: $$\n3951: I_\\theta(\\rho) := I_v(\\rho) + \\theta I_x(\\rho) = \\int_\\Omega \\rho \\left(|\\nabla_v \\log \\rho|^2 + \\theta |\\nabla_x \\log \\rho|^2\\right) dx dv\n3952: \n3953: $$\n3954: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 27,
        "chapter_file": "chapter_27.json",
        "section_id": "## 1. Modified Fisher Information and Auxiliary Functional"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-revival-operator-formal",
      "title": "Mean-Field Revival Operator (Formal)",
      "start_line": 438,
      "end_line": 455,
      "header_lines": [
        439
      ],
      "content_start": 441,
      "content_end": 454,
      "content": "441: :label: def-revival-operator-formal\n442: \n443: The **revival operator** $\\mathcal{R}: \\mathcal{P}(\\Omega) \\times [0,1] \\to \\mathcal{M}^+(\\Omega)$ (where $\\mathcal{M}^+$ denotes non-negative measures) is defined by:\n444: \n445: $$\n446: \\mathcal{R}[\\rho, m_d](x,v) := \\lambda_{\\text{revive}} \\cdot m_d \\cdot \\frac{\\rho(x,v)}{\\|\\rho\\|_{L^1}}\n447: $$\n448: \n449: where $\\|\\rho\\|_{L^1} = \\int_\\Omega \\rho(x,v) \\, dx dv$ is the total alive mass.\n450: \n451: **Properties**:\n452: 1. **Mass injection**: $\\int_\\Omega \\mathcal{R}[\\rho, m_d] = \\lambda_{\\text{revive}} m_d$ (transfers mass from dead to alive)\n453: 2. **Proportionality**: Revival samples proportionally to current alive density\n454: 3. **Normalization**: The factor $1/\\|\\rho\\|_{L^1}$ ensures the distribution shape is preserved",
      "metadata": {
        "label": "def-revival-operator-formal"
      },
      "section": "## 1. Rigorous Formulation of the Mean-Field Revival Operator",
      "references": [],
      "raw_directive": "438: ### 1.2. Revival Operator Definition\n439: \n440: :::{prf:definition} Mean-Field Revival Operator (Formal)\n441: :label: def-revival-operator-formal\n442: \n443: The **revival operator** $\\mathcal{R}: \\mathcal{P}(\\Omega) \\times [0,1] \\to \\mathcal{M}^+(\\Omega)$ (where $\\mathcal{M}^+$ denotes non-negative measures) is defined by:\n444: \n445: $$\n446: \\mathcal{R}[\\rho, m_d](x,v) := \\lambda_{\\text{revive}} \\cdot m_d \\cdot \\frac{\\rho(x,v)}{\\|\\rho\\|_{L^1}}\n447: $$\n448: \n449: where $\\|\\rho\\|_{L^1} = \\int_\\Omega \\rho(x,v) \\, dx dv$ is the total alive mass.\n450: \n451: **Properties**:\n452: 1. **Mass injection**: $\\int_\\Omega \\mathcal{R}[\\rho, m_d] = \\lambda_{\\text{revive}} m_d$ (transfers mass from dead to alive)\n453: 2. **Proportionality**: Revival samples proportionally to current alive density\n454: 3. **Normalization**: The factor $1/\\|\\rho\\|_{L^1}$ ensures the distribution shape is preserved\n455: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 1. Rigorous Formulation of the Mean-Field Revival Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-combined-jump-operator",
      "title": "Combined Jump Operator",
      "start_line": 474,
      "end_line": 489,
      "header_lines": [
        475
      ],
      "content_start": 477,
      "content_end": 488,
      "content": "477: :label: def-combined-jump-operator\n478: \n479: Define the **jump operator** $\\mathcal{J}: \\mathcal{P}(\\Omega) \\to \\mathcal{P}(\\Omega)$ that acts over a small time interval $\\Delta t$:\n480: \n481: $$\n482: \\mathcal{J}(\\rho) := (1 - \\int_\\Omega \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t) \\cdot \\frac{\\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t}{\\text{(normalization)}} + \\mathcal{R}[\\rho, m_d] \\cdot \\Delta t\n483: $$\n484: \n485: This operator:\n486: 1. **Removes mass** via killing: $\\rho \\mapsto \\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t$\n487: 2. **Adds mass** via revival: Injects $\\mathcal{R}[\\rho, m_d] \\cdot \\Delta t$\n488: 3. **Conserves total mass**: $\\int \\mathcal{J}(\\rho) = \\int \\rho$ (in the two-population model)",
      "metadata": {
        "label": "def-combined-jump-operator"
      },
      "section": "## 1. Rigorous Formulation of the Mean-Field Revival Operator",
      "references": [],
      "raw_directive": "474: For the discrete-time analysis, we consider the **composed** operator that handles both killing and revival in one time step $\\Delta t$:\n475: \n476: :::{prf:definition} Combined Jump Operator\n477: :label: def-combined-jump-operator\n478: \n479: Define the **jump operator** $\\mathcal{J}: \\mathcal{P}(\\Omega) \\to \\mathcal{P}(\\Omega)$ that acts over a small time interval $\\Delta t$:\n480: \n481: $$\n482: \\mathcal{J}(\\rho) := (1 - \\int_\\Omega \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t) \\cdot \\frac{\\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t}{\\text{(normalization)}} + \\mathcal{R}[\\rho, m_d] \\cdot \\Delta t\n483: $$\n484: \n485: This operator:\n486: 1. **Removes mass** via killing: $\\rho \\mapsto \\rho - \\kappa_{\\text{kill}} \\rho \\cdot \\Delta t$\n487: 2. **Adds mass** via revival: Injects $\\mathcal{R}[\\rho, m_d] \\cdot \\Delta t$\n488: 3. **Conserves total mass**: $\\int \\mathcal{J}(\\rho) = \\int \\rho$ (in the two-population model)\n489: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 1. Rigorous Formulation of the Mean-Field Revival Operator"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-qsd-mean-field",
      "title": "Quasi-Stationary Distribution (QSD)",
      "start_line": 1083,
      "end_line": 1092,
      "header_lines": [
        1084
      ],
      "content_start": 1086,
      "content_end": 1091,
      "content": "1086: :label: def-qsd-mean-field\n1087: \n1088: A probability measure $\\rho_\\infty \\in \\mathcal{P}(\\Omega)$ is a **quasi-stationary distribution** for the mean-field generator $\\mathcal{L}$ if:\n1089: \n1090: 1. **Stationarity**: $\\mathcal{L}[\\rho_\\infty] = 0$\n1091: 2. **Normalization**: $\\|\\rho_\\infty\\|_{L^1} = M_\\infty < 1$ (mass less than 1 due to killing)",
      "metadata": {
        "label": "def-qsd-mean-field"
      },
      "section": "## 0. Problem Setup",
      "references": [],
      "raw_directive": "1083: ### 0.2. Definition of QSD\n1084: \n1085: :::{prf:definition} Quasi-Stationary Distribution (QSD)\n1086: :label: def-qsd-mean-field\n1087: \n1088: A probability measure $\\rho_\\infty \\in \\mathcal{P}(\\Omega)$ is a **quasi-stationary distribution** for the mean-field generator $\\mathcal{L}$ if:\n1089: \n1090: 1. **Stationarity**: $\\mathcal{L}[\\rho_\\infty] = 0$\n1091: 2. **Normalization**: $\\|\\rho_\\infty\\|_{L^1} = M_\\infty < 1$ (mass less than 1 due to killing)\n1092: 3. **Support**: $\\text{supp}(\\rho_\\infty) \\subseteq \\Omega$ (concentrated on alive region)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 14,
        "chapter_file": "chapter_14.json",
        "section_id": "## 0. Problem Setup"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-modified-fisher",
      "title": "Modified Fisher Information",
      "start_line": 3334,
      "end_line": 3344,
      "header_lines": [
        3335
      ],
      "content_start": 3337,
      "content_end": 3343,
      "content": "3337: :label: def-modified-fisher\n3338: \n3339: For a parameter $\\theta > 0$, the **modified Fisher information** is:\n3340: \n3341: $$\n3342: I_\\theta(\\rho) := I_v(\\rho) + \\theta I_x(\\rho) = \\int_\\Omega \\rho \\left(|\\nabla_v \\log \\rho|^2 + \\theta |\\nabla_x \\log \\rho|^2\\right) dx dv\n3343: $$",
      "metadata": {
        "label": "def-modified-fisher"
      },
      "section": "## 1. Modified Fisher Information and Auxiliary Functional",
      "references": [],
      "raw_directive": "3334: Following hypocoercivity theory, we introduce a **weighted combination**:\n3335: \n3336: :::{prf:definition} Modified Fisher Information\n3337: :label: def-modified-fisher\n3338: \n3339: For a parameter $\\theta > 0$, the **modified Fisher information** is:\n3340: \n3341: $$\n3342: I_\\theta(\\rho) := I_v(\\rho) + \\theta I_x(\\rho) = \\int_\\Omega \\rho \\left(|\\nabla_v \\log \\rho|^2 + \\theta |\\nabla_x \\log \\rho|^2\\right) dx dv\n3343: $$\n3344: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "16_convergence_mean_field",
        "chapter_index": 27,
        "chapter_file": "chapter_27.json",
        "section_id": "## 1. Modified Fisher Information and Auxiliary Functional"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-d-adaptive-diffusion",
      "title": "Adaptive Diffusion Tensor (from `11_geometric_gas.md`)",
      "start_line": 303,
      "end_line": 323,
      "header_lines": [
        304
      ],
      "content_start": 306,
      "content_end": 322,
      "content": "306: :label: def-d-adaptive-diffusion\n307: \n308: For a swarm state $S = \\{(x_i, v_i, s_i)\\}_{i=1}^N$, the **adaptive diffusion tensor** for walker $i$ is:\n309: \n310: $$\n311: \\Sigma_{\\text{reg}}(x_i, S) = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1/2}\n312: $$\n313: \n314: where:\n315: - $H_i(S) = \\nabla^2_{x_i} V_{\\text{fit}}(S)$ is the Hessian of the fitness potential with respect to walker $i$'s position\n316: - $\\epsilon_\\Sigma > 0$ is the **regularization parameter**\n317: - The matrix square root is the unique symmetric positive definite square root\n318: \n319: The induced **diffusion matrix** (covariance of the noise) is:\n320: \n321: $$\n322: D_{\\text{reg}}(x_i, S) = \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1}",
      "metadata": {
        "label": "def-d-adaptive-diffusion"
      },
      "section": "## 3. The Emergent Geometry Framework",
      "references": [],
      "raw_directive": "303: The Geometric Gas introduces geometry through its noise structure.\n304: \n305: :::{prf:definition} Adaptive Diffusion Tensor (from `11_geometric_gas.md`)\n306: :label: def-d-adaptive-diffusion\n307: \n308: For a swarm state $S = \\{(x_i, v_i, s_i)\\}_{i=1}^N$, the **adaptive diffusion tensor** for walker $i$ is:\n309: \n310: $$\n311: \\Sigma_{\\text{reg}}(x_i, S) = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1/2}\n312: $$\n313: \n314: where:\n315: - $H_i(S) = \\nabla^2_{x_i} V_{\\text{fit}}(S)$ is the Hessian of the fitness potential with respect to walker $i$'s position\n316: - $\\epsilon_\\Sigma > 0$ is the **regularization parameter**\n317: - The matrix square root is the unique symmetric positive definite square root\n318: \n319: The induced **diffusion matrix** (covariance of the noise) is:\n320: \n321: $$\n322: D_{\\text{reg}}(x_i, S) = \\Sigma_{\\text{reg}}(x_i, S) \\Sigma_{\\text{reg}}(x_i, S)^T = \\left( H_i(S) + \\epsilon_\\Sigma I \\right)^{-1}\n323: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Emergent Geometry Framework"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-d-kinetic-operator-adaptive",
      "title": "Kinetic Operator with Adaptive Diffusion",
      "start_line": 516,
      "end_line": 555,
      "header_lines": [
        517
      ],
      "content_start": 519,
      "content_end": 554,
      "content": "519: :label: def-d-kinetic-operator-adaptive\n520: \n521: The kinetic operator $\\Psi_{\\text{kin}}$ evolves the swarm for time $\\tau$ according to:\n522: \n523: $$\n524: \\begin{aligned}\n525: dx_i &= v_i \\, dt \\\\\n526: dv_i &= \\left[ F(x_i) - \\gamma v_i \\right] dt + \\Sigma_{\\text{reg}}(x_i, S) \\circ dW_i\n527: \\end{aligned}\n528: $$\n529: \n530: where:\n531: - $F(x) = -\\nabla U(x)$ is the force from the confining potential (Axiom 1.3.1 from `../1_euclidean_gas/06_convergence.md`)\n532: - $\\gamma > 0$ is the friction coefficient\n533: - $W_i$ are independent standard Brownian motions\n534: - $\\circ$ denotes the **Stratonovich product** (not Itô)\n535: \n536: **Why Stratonovich**: The Stratonovich formulation is essential for manifold/geometric settings because:\n537: 1. **Chain rule works**: Stratonovich SDEs transform naturally under coordinate changes\n538: 2. **Geometric invariance**: The diffusion $(H + \\epsilon_\\Sigma I)^{-1/2}$ represents intrinsic geometry\n539: 3. **No spurious drift**: Itô would add correction terms $\\frac{1}{2}\\sum_j (D_x\\Sigma_{\\text{reg}}^{(\\cdot,j)})\\Sigma_{\\text{reg}}^{(\\cdot,j)}$ that obscure the physics\n540: \n541: **Generator and Discretization Convention**: We present the SDE in Stratonovich form for geometric clarity. However:\n542: - **For proofs**: The infinitesimal generator $\\mathcal{L}$ uses the **Itô form** with Itô drift:\n543: \n544: $$\n545: b_{\\text{It\\hat{o}}}(x,v,S) = [F(x) - \\gamma v] + \\frac{1}{2}\\sum_{j=1}^d (D_x\\Sigma_{\\text{reg}}^{(\\cdot,j)}(x,S))\\Sigma_{\\text{reg}}^{(\\cdot,j)}(x,S)\n546: $$\n547: \n548:   where $\\Sigma_{\\text{reg}}^{(\\cdot,j)}$ is the $j$-th column and $D_x$ is the Jacobian w.r.t. $x$.\n549: \n550: - **For discretization**: To properly simulate this SDE, we use either:\n551:   - **Heun's method** (stochastic midpoint) for the Stratonovich form, or\n552:   - **Euler-Maruyama** on the Itô form (with the corrected drift above)\n553: \n554: Note: Direct application of Euler-Maruyama to the Stratonovich form is inconsistent and should be avoided.",
      "metadata": {
        "label": "def-d-kinetic-operator-adaptive"
      },
      "section": "## 3. The Emergent Geometry Framework",
      "references": [],
      "raw_directive": "516: The kinetic operator evolves walkers according to underdamped Langevin dynamics with the adaptive diffusion.\n517: \n518: :::{prf:definition} Kinetic Operator with Adaptive Diffusion\n519: :label: def-d-kinetic-operator-adaptive\n520: \n521: The kinetic operator $\\Psi_{\\text{kin}}$ evolves the swarm for time $\\tau$ according to:\n522: \n523: $$\n524: \\begin{aligned}\n525: dx_i &= v_i \\, dt \\\\\n526: dv_i &= \\left[ F(x_i) - \\gamma v_i \\right] dt + \\Sigma_{\\text{reg}}(x_i, S) \\circ dW_i\n527: \\end{aligned}\n528: $$\n529: \n530: where:\n531: - $F(x) = -\\nabla U(x)$ is the force from the confining potential (Axiom 1.3.1 from `../1_euclidean_gas/06_convergence.md`)\n532: - $\\gamma > 0$ is the friction coefficient\n533: - $W_i$ are independent standard Brownian motions\n534: - $\\circ$ denotes the **Stratonovich product** (not Itô)\n535: \n536: **Why Stratonovich**: The Stratonovich formulation is essential for manifold/geometric settings because:\n537: 1. **Chain rule works**: Stratonovich SDEs transform naturally under coordinate changes\n538: 2. **Geometric invariance**: The diffusion $(H + \\epsilon_\\Sigma I)^{-1/2}$ represents intrinsic geometry\n539: 3. **No spurious drift**: Itô would add correction terms $\\frac{1}{2}\\sum_j (D_x\\Sigma_{\\text{reg}}^{(\\cdot,j)})\\Sigma_{\\text{reg}}^{(\\cdot,j)}$ that obscure the physics\n540: \n541: **Generator and Discretization Convention**: We present the SDE in Stratonovich form for geometric clarity. However:\n542: - **For proofs**: The infinitesimal generator $\\mathcal{L}$ uses the **Itô form** with Itô drift:\n543: \n544: $$\n545: b_{\\text{It\\hat{o}}}(x,v,S) = [F(x) - \\gamma v] + \\frac{1}{2}\\sum_{j=1}^d (D_x\\Sigma_{\\text{reg}}^{(\\cdot,j)}(x,S))\\Sigma_{\\text{reg}}^{(\\cdot,j)}(x,S)\n546: $$\n547: \n548:   where $\\Sigma_{\\text{reg}}^{(\\cdot,j)}$ is the $j$-th column and $D_x$ is the Jacobian w.r.t. $x$.\n549: \n550: - **For discretization**: To properly simulate this SDE, we use either:\n551:   - **Heun's method** (stochastic midpoint) for the Stratonovich form, or\n552:   - **Euler-Maruyama** on the Itô form (with the corrected drift above)\n553: \n554: Note: Direct application of Euler-Maruyama to the Stratonovich form is inconsistent and should be avoided.\n555: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 3. The Emergent Geometry Framework"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-d-coupled-state",
      "title": "Coupled Swarm State",
      "start_line": 734,
      "end_line": 744,
      "header_lines": [
        735
      ],
      "content_start": 737,
      "content_end": 743,
      "content": "737: :label: def-d-coupled-state\n738: \n739: A **coupled swarm state** consists of two independent swarms evolving under the same transition kernel:\n740: \n741: $$\n742: (S_1, S_2) \\in (\\mathcal{X} \\times \\mathbb{R}^d \\times \\{0,1\\})^{2N}\n743: $$",
      "metadata": {
        "label": "def-d-coupled-state"
      },
      "section": "## 4. Main Theorem and Proof Strategy",
      "references": [],
      "raw_directive": "734: To prove geometric ergodicity, we must show that **two independent copies** of the swarm converge to each other. This requires a Lyapunov function on the **coupled state space**.\n735: \n736: :::{prf:definition} Coupled Swarm State\n737: :label: def-d-coupled-state\n738: \n739: A **coupled swarm state** consists of two independent swarms evolving under the same transition kernel:\n740: \n741: $$\n742: (S_1, S_2) \\in (\\mathcal{X} \\times \\mathbb{R}^d \\times \\{0,1\\})^{2N}\n743: $$\n744: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Main Theorem and Proof Strategy"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-d-coupled-lyapunov",
      "title": "Coupled Lyapunov Function (from `../1_euclidean_gas/03_cloning.md` and `../1_euclidean_gas/06_convergence.md`)",
      "start_line": 746,
      "end_line": 789,
      "header_lines": [
        747,
        786
      ],
      "content_start": 749,
      "content_end": 788,
      "content": "749: :label: def-d-coupled-lyapunov\n750: \n751: The **total Lyapunov function** is:\n752: \n753: $$\n754: V_{\\text{total}}(S_1, S_2) = c_V V_{\\text{inter}}(S_1, S_2) + c_B V_{\\text{boundary}}(S_1, S_2)\n755: $$\n756: \n757: where $c_V, c_B > 0$ are **coupling constants** to be chosen.\n758: \n759: **Inter-Swarm Component:**\n760: \n761: $$\n762: V_{\\text{inter}}(S_1, S_2) = V_W(S_1, S_2) + V_{\\text{Var},x}(S_1, S_2) + V_{\\text{Var},v}(S_1, S_2)\n763: $$\n764: \n765: where:\n766: \n767: **1. Wasserstein-2 Distance** (with hypocoercive cost):\n768: \n769: $$\n770: V_W(S_1, S_2) = W_h^2(\\mu_1, \\mu_2)\n771: $$\n772: \n773: where $\\mu_k$ is the empirical measure of alive walkers in swarm $k$, and $W_h$ is the Wasserstein-2 distance with respect to the **hypocoercive norm** (defined in Section 3.2):\n774: \n775: $$\n776: \\|((\\Delta x, \\Delta v))\\|_h^2 = \\|\\Delta x\\|^2 + \\lambda_v \\|\\Delta v\\|^2 + b \\langle \\Delta x, \\Delta v \\rangle\n777: $$\n778: \n779: **2. Position Variance Sum:**\n780: \n781: $$\n782: V_{\\text{Var},x}(S_1, S_2) = V_{\\text{Var},x}(S_1) + V_{\\text{Var},x}(S_2)\n783: $$\n784: \n785: where $V_{\\text{Var},x}(S_k) = \\frac{1}{N} \\sum_{i: s_{k,i}=1} \\|x_{k,i} - \\bar{x}_k\\|^2$.\n786: \n787: :::{admonition} Normalization by $N$ (not $N_{\\text{alive}}$)\n788: :class: note",
      "metadata": {
        "label": "def-d-coupled-lyapunov",
        "class": "note"
      },
      "section": "## 4. Main Theorem and Proof Strategy",
      "references": [],
      "raw_directive": "746: :::\n747: \n748: :::{prf:definition} Coupled Lyapunov Function (from `../1_euclidean_gas/03_cloning.md` and `../1_euclidean_gas/06_convergence.md`)\n749: :label: def-d-coupled-lyapunov\n750: \n751: The **total Lyapunov function** is:\n752: \n753: $$\n754: V_{\\text{total}}(S_1, S_2) = c_V V_{\\text{inter}}(S_1, S_2) + c_B V_{\\text{boundary}}(S_1, S_2)\n755: $$\n756: \n757: where $c_V, c_B > 0$ are **coupling constants** to be chosen.\n758: \n759: **Inter-Swarm Component:**\n760: \n761: $$\n762: V_{\\text{inter}}(S_1, S_2) = V_W(S_1, S_2) + V_{\\text{Var},x}(S_1, S_2) + V_{\\text{Var},v}(S_1, S_2)\n763: $$\n764: \n765: where:\n766: \n767: **1. Wasserstein-2 Distance** (with hypocoercive cost):\n768: \n769: $$\n770: V_W(S_1, S_2) = W_h^2(\\mu_1, \\mu_2)\n771: $$\n772: \n773: where $\\mu_k$ is the empirical measure of alive walkers in swarm $k$, and $W_h$ is the Wasserstein-2 distance with respect to the **hypocoercive norm** (defined in Section 3.2):\n774: \n775: $$\n776: \\|((\\Delta x, \\Delta v))\\|_h^2 = \\|\\Delta x\\|^2 + \\lambda_v \\|\\Delta v\\|^2 + b \\langle \\Delta x, \\Delta v \\rangle\n777: $$\n778: \n779: **2. Position Variance Sum:**\n780: \n781: $$\n782: V_{\\text{Var},x}(S_1, S_2) = V_{\\text{Var},x}(S_1) + V_{\\text{Var},x}(S_2)\n783: $$\n784: \n785: where $V_{\\text{Var},x}(S_k) = \\frac{1}{N} \\sum_{i: s_{k,i}=1} \\|x_{k,i} - \\bar{x}_k\\|^2$.\n786: \n787: :::{admonition} Normalization by $N$ (not $N_{\\text{alive}}$)\n788: :class: note\n789: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Main Theorem and Proof Strategy"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-d-hypocoercive-norm",
      "title": "Hypocoercive Norm (from `../1_euclidean_gas/06_convergence.md`)",
      "start_line": 1220,
      "end_line": 1236,
      "header_lines": [
        1221
      ],
      "content_start": 1223,
      "content_end": 1235,
      "content": "1223: :label: def-d-hypocoercive-norm\n1224: \n1225: For phase-space differences $(\\Delta x, \\Delta v) \\in \\mathbb{R}^{2d}$, the **hypocoercive norm squared** is:\n1226: \n1227: $$\n1228: \\|(\\Delta x, \\Delta v)\\|_h^2 = \\|\\Delta x\\|^2 + \\lambda_v \\|\\Delta v\\|^2 + b \\langle \\Delta x, \\Delta v \\rangle\n1229: $$\n1230: \n1231: where:\n1232: - $\\lambda_v > 0$: Velocity weight (typically $\\lambda_v \\sim 1/\\gamma$)\n1233: - $b \\in \\mathbb{R}$: Coupling coefficient (chosen for optimal contraction)\n1234: \n1235: **Positive definiteness**: Requires $\\lambda_v > b^2/4$.",
      "metadata": {
        "label": "def-d-hypocoercive-norm"
      },
      "section": "## 5. Anisotropic Kinetic Operator Analysis",
      "references": [],
      "raw_directive": "1220: #### 3.2.1. The Hypocoercive Norm (Review)\n1221: \n1222: :::{prf:definition} Hypocoercive Norm (from `../1_euclidean_gas/06_convergence.md`)\n1223: :label: def-d-hypocoercive-norm\n1224: \n1225: For phase-space differences $(\\Delta x, \\Delta v) \\in \\mathbb{R}^{2d}$, the **hypocoercive norm squared** is:\n1226: \n1227: $$\n1228: \\|(\\Delta x, \\Delta v)\\|_h^2 = \\|\\Delta x\\|^2 + \\lambda_v \\|\\Delta v\\|^2 + b \\langle \\Delta x, \\Delta v \\rangle\n1229: $$\n1230: \n1231: where:\n1232: - $\\lambda_v > 0$: Velocity weight (typically $\\lambda_v \\sim 1/\\gamma$)\n1233: - $b \\in \\mathbb{R}$: Coupling coefficient (chosen for optimal contraction)\n1234: \n1235: **Positive definiteness**: Requires $\\lambda_v > b^2/4$.\n1236: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 5. Anisotropic Kinetic Operator Analysis"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-fitness-algorithmic",
      "title": "Fitness Potential Construction (Algorithmic Specification)",
      "start_line": 2757,
      "end_line": 2812,
      "header_lines": [
        2758
      ],
      "content_start": 2760,
      "content_end": 2811,
      "content": "2760: :label: def-fitness-algorithmic\n2761: \n2762: For a swarm state $S = \\{(x_i, v_i, s_i)\\}_{i=1}^N$ with alive walkers $A_k = \\{i : s_i = \\text{alive}\\}$, the fitness potential at position $x \\in \\mathcal{X}$ is constructed through the following pipeline:\n2763: \n2764: **Step 1: Measurement Function.** Given a measurement function $d: \\mathcal{X} \\to \\mathbb{R}$ (e.g., reward, diversity score), evaluate:\n2765: \n2766: $$\n2767: d_i = d(x_i) \\quad \\text{for all } i \\in A_k\n2768: $$\n2769: \n2770: **Step 2: Localization Weights.** For localization scale $\\rho > 0$ and localization kernel $K_\\rho(x, x') = \\frac{1}{Z_K(x, \\rho)} \\exp\\left(-\\frac{\\|x - x'\\|^2}{2\\rho^2}\\right)$, compute normalized weights:\n2771: \n2772: $$\n2773: w_{ij}(\\rho) = \\frac{K_\\rho(x, x_j)}{\\sum_{\\ell \\in A_k} K_\\rho(x, x_\\ell)}\n2774: $$\n2775: \n2776: where the normalization ensures $\\sum_{j \\in A_k} w_{ij}(\\rho) = 1$.\n2777: \n2778: **Step 3: Localized Moments.** Compute the ρ-localized mean and variance at position $x$:\n2779: \n2780: $$\n2781: \\mu_\\rho[f_k, d, x] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, d_j\n2782: $$\n2783: \n2784: $$\n2785: \\sigma^2_\\rho[f_k, d, x] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, (d_j - \\mu_\\rho[f_k, d, x])^2\n2786: $$\n2787: \n2788: **Step 4: Regularized Standard Deviation.** Apply numerical regularization using a C¹-smooth patching function:\n2789: \n2790: $$\n2791: \\sigma'_\\rho[f_k, d, x] = \\sigma\\'_{\\text{reg}}\\left(\\sqrt{\\sigma^2_\\rho[f_k, d, x]}\\right)\n2792: $$\n2793: \n2794: where $\\sigma\\'_{\\text{reg}}: [0, \\infty) \\to [\\kappa_{\\text{var,min}}, \\infty)$ is a C¹-smooth function (see Definition {prf:ref}`def-unified-z-score` in `11_geometric_gas.md`) that:\n2795: - Equals $\\kappa_{\\text{var,min}}$ for $\\sigma \\le \\kappa_{\\text{var,min}} - \\delta$\n2796: - Smoothly transitions through a polynomial patch in $[\\kappa_{\\text{var,min}} - \\delta, \\kappa_{\\text{var,min}} + \\delta]$\n2797: - Equals the identity $\\sigma$ for $\\sigma \\ge \\kappa_{\\text{var,min}} + \\delta$\n2798: \n2799: This ensures $V_{\\text{fit}}$ is C² everywhere, as required for the Hessian to be well-defined.\n2800: \n2801: **Step 5: Localized Z-Score.** Compute the standardized measurement:\n2802: \n2803: $$\n2804: Z_\\rho[f_k, d, x] = \\frac{d(x) - \\mu_\\rho[f_k, d, x]}{\\sigma'_\\rho[f_k, d, x]}\n2805: $$\n2806: \n2807: **Step 6: Rescale to Bounded Potential.** Apply a smooth, monotone, bounded rescale function $g_A: \\mathbb{R} \\to [0, A]$ (e.g., $g_A(z) = \\frac{A}{1 + e^{-z}}$):\n2808: \n2809: $$\n2810: V_{\\text{fit}}[f_k, \\rho](x) = g_A\\left(Z_\\rho[f_k, d, x]\\right)\n2811: $$",
      "metadata": {
        "label": "def-fitness-algorithmic"
      },
      "section": "## 11. Explicit Derivation of the Emergent Metric from Algorithmic Parameters",
      "references": [
        "def-unified-z-score"
      ],
      "raw_directive": "2757: We begin with the algorithmic construction of the fitness potential.\n2758: \n2759: :::{prf:definition} Fitness Potential Construction (Algorithmic Specification)\n2760: :label: def-fitness-algorithmic\n2761: \n2762: For a swarm state $S = \\{(x_i, v_i, s_i)\\}_{i=1}^N$ with alive walkers $A_k = \\{i : s_i = \\text{alive}\\}$, the fitness potential at position $x \\in \\mathcal{X}$ is constructed through the following pipeline:\n2763: \n2764: **Step 1: Measurement Function.** Given a measurement function $d: \\mathcal{X} \\to \\mathbb{R}$ (e.g., reward, diversity score), evaluate:\n2765: \n2766: $$\n2767: d_i = d(x_i) \\quad \\text{for all } i \\in A_k\n2768: $$\n2769: \n2770: **Step 2: Localization Weights.** For localization scale $\\rho > 0$ and localization kernel $K_\\rho(x, x') = \\frac{1}{Z_K(x, \\rho)} \\exp\\left(-\\frac{\\|x - x'\\|^2}{2\\rho^2}\\right)$, compute normalized weights:\n2771: \n2772: $$\n2773: w_{ij}(\\rho) = \\frac{K_\\rho(x, x_j)}{\\sum_{\\ell \\in A_k} K_\\rho(x, x_\\ell)}\n2774: $$\n2775: \n2776: where the normalization ensures $\\sum_{j \\in A_k} w_{ij}(\\rho) = 1$.\n2777: \n2778: **Step 3: Localized Moments.** Compute the ρ-localized mean and variance at position $x$:\n2779: \n2780: $$\n2781: \\mu_\\rho[f_k, d, x] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, d_j\n2782: $$\n2783: \n2784: $$\n2785: \\sigma^2_\\rho[f_k, d, x] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\, (d_j - \\mu_\\rho[f_k, d, x])^2\n2786: $$\n2787: \n2788: **Step 4: Regularized Standard Deviation.** Apply numerical regularization using a C¹-smooth patching function:\n2789: \n2790: $$\n2791: \\sigma'_\\rho[f_k, d, x] = \\sigma\\'_{\\text{reg}}\\left(\\sqrt{\\sigma^2_\\rho[f_k, d, x]}\\right)\n2792: $$\n2793: \n2794: where $\\sigma\\'_{\\text{reg}}: [0, \\infty) \\to [\\kappa_{\\text{var,min}}, \\infty)$ is a C¹-smooth function (see Definition {prf:ref}`def-unified-z-score` in `11_geometric_gas.md`) that:\n2795: - Equals $\\kappa_{\\text{var,min}}$ for $\\sigma \\le \\kappa_{\\text{var,min}} - \\delta$\n2796: - Smoothly transitions through a polynomial patch in $[\\kappa_{\\text{var,min}} - \\delta, \\kappa_{\\text{var,min}} + \\delta]$\n2797: - Equals the identity $\\sigma$ for $\\sigma \\ge \\kappa_{\\text{var,min}} + \\delta$\n2798: \n2799: This ensures $V_{\\text{fit}}$ is C² everywhere, as required for the Hessian to be well-defined.\n2800: \n2801: **Step 5: Localized Z-Score.** Compute the standardized measurement:\n2802: \n2803: $$\n2804: Z_\\rho[f_k, d, x] = \\frac{d(x) - \\mu_\\rho[f_k, d, x]}{\\sigma'_\\rho[f_k, d, x]}\n2805: $$\n2806: \n2807: **Step 6: Rescale to Bounded Potential.** Apply a smooth, monotone, bounded rescale function $g_A: \\mathbb{R} \\to [0, A]$ (e.g., $g_A(z) = \\frac{A}{1 + e^{-z}}$):\n2808: \n2809: $$\n2810: V_{\\text{fit}}[f_k, \\rho](x) = g_A\\left(Z_\\rho[f_k, d, x]\\right)\n2811: $$\n2812: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 11. Explicit Derivation of the Emergent Metric from Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-metric-explicit",
      "title": "Emergent Riemannian Metric (Explicit Construction)",
      "start_line": 3001,
      "end_line": 3027,
      "header_lines": [
        3002
      ],
      "content_start": 3004,
      "content_end": 3026,
      "content": "3004: :label: def-metric-explicit\n3005: \n3006: For a walker at position $x$ in swarm state $S$, the **emergent Riemannian metric** is defined as:\n3007: \n3008: $$\n3009: g(x, S) = H(x, S) + \\epsilon_\\Sigma I\n3010: $$\n3011: \n3012: where:\n3013: - $H(x, S) = \\nabla^2_x V_{\\text{fit}}[f_k, \\rho](x)$ is the Hessian from {prf:ref}`thm-explicit-hessian`\n3014: - $\\epsilon_\\Sigma > 0$ is the **regularization parameter**\n3015: - $I$ is the $d \\times d$ identity matrix\n3016: \n3017: The corresponding **diffusion tensor** (inverse of the metric) is:\n3018: \n3019: $$\n3020: D_{\\text{reg}}(x, S) = g(x, S)^{-1} = \\left(H(x, S) + \\epsilon_\\Sigma I\\right)^{-1}\n3021: $$\n3022: \n3023: and the **diffusion coefficient matrix** used in the SDE is:\n3024: \n3025: $$\n3026: \\Sigma_{\\text{reg}}(x, S) = D_{\\text{reg}}(x, S)^{1/2} = \\left(H(x, S) + \\epsilon_\\Sigma I\\right)^{-1/2}",
      "metadata": {
        "label": "def-metric-explicit"
      },
      "section": "## 11. Explicit Derivation of the Emergent Metric from Algorithmic Parameters",
      "references": [
        "thm-explicit-hessian"
      ],
      "raw_directive": "3001: The Hessian alone may not be positive definite (e.g., at saddle points or in flat regions). The regularization ensures well-posedness.\n3002: \n3003: :::{prf:definition} Emergent Riemannian Metric (Explicit Construction)\n3004: :label: def-metric-explicit\n3005: \n3006: For a walker at position $x$ in swarm state $S$, the **emergent Riemannian metric** is defined as:\n3007: \n3008: $$\n3009: g(x, S) = H(x, S) + \\epsilon_\\Sigma I\n3010: $$\n3011: \n3012: where:\n3013: - $H(x, S) = \\nabla^2_x V_{\\text{fit}}[f_k, \\rho](x)$ is the Hessian from {prf:ref}`thm-explicit-hessian`\n3014: - $\\epsilon_\\Sigma > 0$ is the **regularization parameter**\n3015: - $I$ is the $d \\times d$ identity matrix\n3016: \n3017: The corresponding **diffusion tensor** (inverse of the metric) is:\n3018: \n3019: $$\n3020: D_{\\text{reg}}(x, S) = g(x, S)^{-1} = \\left(H(x, S) + \\epsilon_\\Sigma I\\right)^{-1}\n3021: $$\n3022: \n3023: and the **diffusion coefficient matrix** used in the SDE is:\n3024: \n3025: $$\n3026: \\Sigma_{\\text{reg}}(x, S) = D_{\\text{reg}}(x, S)^{1/2} = \\left(H(x, S) + \\epsilon_\\Sigma I\\right)^{-1/2}\n3027: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 11. Explicit Derivation of the Emergent Metric from Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-emergent-manifold",
      "title": "Emergent Riemannian Manifold",
      "start_line": 3234,
      "end_line": 3271,
      "header_lines": [
        3235
      ],
      "content_start": 3237,
      "content_end": 3270,
      "content": "3237: :label: def-emergent-manifold\n3238: \n3239: The metric $g(x, S)$ from {prf:ref}`def-metric-explicit` endows the state space $\\mathcal{X}$ with the structure of a **Riemannian manifold** $(\\mathcal{X}, g_S)$, where the metric depends parametrically on the swarm state $S$.\n3240: \n3241: **Geometric Quantities:**\n3242: \n3243: **1. Metric Tensor (Index Form):**\n3244: \n3245: $$\n3246: g_{ab}(x, S) = \\left[\\nabla^2_x V_{\\text{fit}}[f_k, \\rho](x)\\right]_{ab} + \\epsilon_\\Sigma \\delta_{ab}\n3247: $$\n3248: \n3249: **2. Inverse Metric (Contravariant Tensor):**\n3250: \n3251: $$\n3252: g^{ab}(x, S) = \\left[\\left(\\nabla^2_x V_{\\text{fit}}[f_k, \\rho](x) + \\epsilon_\\Sigma I\\right)^{-1}\\right]_{ab}\n3253: $$\n3254: \n3255: **3. Volume Element:** The Riemannian volume measure is:\n3256: \n3257: $$\n3258: d\\text{Vol}_g = \\sqrt{\\det g(x, S)} \\, dx\n3259: $$\n3260: \n3261: **4. Geodesic Equation:** Curves $\\gamma(t)$ that minimize length satisfy:\n3262: \n3263: $$\n3264: \\frac{d^2 \\gamma^a}{dt^2} + \\Gamma^a_{bc}(x, S) \\frac{d\\gamma^b}{dt} \\frac{d\\gamma^c}{dt} = 0\n3265: $$\n3266: \n3267: where $\\Gamma^a_{bc}$ are the **Christoffel symbols** computed from $g$ via:\n3268: \n3269: $$\n3270: \\Gamma^a_{bc} = \\frac{1}{2} g^{ad} \\left(\\frac{\\partial g_{db}}{\\partial x^c} + \\frac{\\partial g_{dc}}{\\partial x^b} - \\frac{\\partial g_{bc}}{\\partial x^d}\\right)",
      "metadata": {
        "label": "def-emergent-manifold"
      },
      "section": "## 11. Explicit Derivation of the Emergent Metric from Algorithmic Parameters",
      "references": [
        "def-metric-explicit"
      ],
      "raw_directive": "3234: With the metric explicitly constructed, we can characterize the induced geometric structure.\n3235: \n3236: :::{prf:definition} Emergent Riemannian Manifold\n3237: :label: def-emergent-manifold\n3238: \n3239: The metric $g(x, S)$ from {prf:ref}`def-metric-explicit` endows the state space $\\mathcal{X}$ with the structure of a **Riemannian manifold** $(\\mathcal{X}, g_S)$, where the metric depends parametrically on the swarm state $S$.\n3240: \n3241: **Geometric Quantities:**\n3242: \n3243: **1. Metric Tensor (Index Form):**\n3244: \n3245: $$\n3246: g_{ab}(x, S) = \\left[\\nabla^2_x V_{\\text{fit}}[f_k, \\rho](x)\\right]_{ab} + \\epsilon_\\Sigma \\delta_{ab}\n3247: $$\n3248: \n3249: **2. Inverse Metric (Contravariant Tensor):**\n3250: \n3251: $$\n3252: g^{ab}(x, S) = \\left[\\left(\\nabla^2_x V_{\\text{fit}}[f_k, \\rho](x) + \\epsilon_\\Sigma I\\right)^{-1}\\right]_{ab}\n3253: $$\n3254: \n3255: **3. Volume Element:** The Riemannian volume measure is:\n3256: \n3257: $$\n3258: d\\text{Vol}_g = \\sqrt{\\det g(x, S)} \\, dx\n3259: $$\n3260: \n3261: **4. Geodesic Equation:** Curves $\\gamma(t)$ that minimize length satisfy:\n3262: \n3263: $$\n3264: \\frac{d^2 \\gamma^a}{dt^2} + \\Gamma^a_{bc}(x, S) \\frac{d\\gamma^b}{dt} \\frac{d\\gamma^c}{dt} = 0\n3265: $$\n3266: \n3267: where $\\Gamma^a_{bc}$ are the **Christoffel symbols** computed from $g$ via:\n3268: \n3269: $$\n3270: \\Gamma^a_{bc} = \\frac{1}{2} g^{ad} \\left(\\frac{\\partial g_{db}}{\\partial x^c} + \\frac{\\partial g_{dc}}{\\partial x^b} - \\frac{\\partial g_{bc}}{\\partial x^d}\\right)\n3271: $$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "18_emergent_geometry",
        "chapter_index": 11,
        "chapter_file": "chapter_11.json",
        "section_id": "## 11. Explicit Derivation of the Emergent Metric from Algorithmic Parameters"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-simplified-measurement-cinf",
      "title": "Simplified Measurement Function",
      "start_line": 203,
      "end_line": 215,
      "header_lines": [
        204
      ],
      "content_start": 206,
      "content_end": 214,
      "content": "206: :label: def-simplified-measurement-cinf\n207: \n208: The **simplified measurement function** d: X → ℝ depends only on position. We assume d ∈ C∞(X) with bounded derivatives:\n209: \n210: $$\n211: \\sup_{x \\in X} \\|\\nabla^m d(x)\\| \\leq C_d^{(m)} < \\infty \\quad \\forall m \\geq 0\n212: $$\n213: \n214: **Examples**: Distance to target set d(x) = dist(x, T) (smoothed), reward landscape d(x) = R(x), entropy proxy d(x) = -log π_ref(x).",
      "metadata": {
        "label": "def-simplified-measurement-cinf"
      },
      "section": "## 2. Mathematical Framework and Notation",
      "references": [],
      "raw_directive": "203: - **Empirical measure**: f_k = (1/k) ∑_{j ∈ A_k} δ_{x_j}\n204: \n205: :::{prf:definition} Simplified Measurement Function\n206: :label: def-simplified-measurement-cinf\n207: \n208: The **simplified measurement function** d: X → ℝ depends only on position. We assume d ∈ C∞(X) with bounded derivatives:\n209: \n210: $$\n211: \\sup_{x \\in X} \\|\\nabla^m d(x)\\| \\leq C_d^{(m)} < \\infty \\quad \\forall m \\geq 0\n212: $$\n213: \n214: **Examples**: Distance to target set d(x) = dist(x, T) (smoothed), reward landscape d(x) = R(x), entropy proxy d(x) = -log π_ref(x).\n215: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "19_geometric_gas_cinf_regularity_simplified",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Mathematical Framework and Notation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localization-kernel-cinf",
      "title": "Localization Kernel",
      "start_line": 221,
      "end_line": 243,
      "header_lines": [
        222
      ],
      "content_start": 224,
      "content_end": 242,
      "content": "224: :label: def-localization-kernel-cinf\n225: \n226: The **Gaussian localization kernel**:\n227: \n228: $$\n229: K_\\rho(r) = \\exp\\left(-\\frac{r^2}{2\\rho^2}\\right)\n230: $$\n231: \n232: is real analytic with Hermite polynomial derivatives:\n233: \n234: $$\n235: \\frac{d^m}{dr^m} K_\\rho(r) = H_m\\left(\\frac{r}{\\rho}\\right) \\cdot \\rho^{-m} \\cdot K_\\rho(r)\n236: $$\n237: \n238: Derivative bounds:\n239: \n240: $$\n241: \\left| \\frac{d^m}{dr^m} K_\\rho(r) \\right| \\leq C_{\\text{Herm}} \\cdot m! \\cdot \\rho^{-m} \\cdot \\exp\\left(-\\frac{r^2}{4\\rho^2}\\right)\n242: $$",
      "metadata": {
        "label": "def-localization-kernel-cinf"
      },
      "section": "## 2. Mathematical Framework and Notation",
      "references": [],
      "raw_directive": "221: The fitness potential is computed through a six-stage pipeline:\n222: \n223: :::{prf:definition} Localization Kernel\n224: :label: def-localization-kernel-cinf\n225: \n226: The **Gaussian localization kernel**:\n227: \n228: $$\n229: K_\\rho(r) = \\exp\\left(-\\frac{r^2}{2\\rho^2}\\right)\n230: $$\n231: \n232: is real analytic with Hermite polynomial derivatives:\n233: \n234: $$\n235: \\frac{d^m}{dr^m} K_\\rho(r) = H_m\\left(\\frac{r}{\\rho}\\right) \\cdot \\rho^{-m} \\cdot K_\\rho(r)\n236: $$\n237: \n238: Derivative bounds:\n239: \n240: $$\n241: \\left| \\frac{d^m}{dr^m} K_\\rho(r) \\right| \\leq C_{\\text{Herm}} \\cdot m! \\cdot \\rho^{-m} \\cdot \\exp\\left(-\\frac{r^2}{4\\rho^2}\\right)\n242: $$\n243: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "19_geometric_gas_cinf_regularity_simplified",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Mathematical Framework and Notation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-localization-weights-cinf",
      "title": "Localization Weights",
      "start_line": 245,
      "end_line": 265,
      "header_lines": [
        246
      ],
      "content_start": 248,
      "content_end": 264,
      "content": "248: :label: def-localization-weights-cinf\n249: \n250: Unnormalized weight:\n251: \n252: $$\n253: \\tilde{w}_{ij}(\\rho) = K_\\rho(d(x_i)) \\cdot K_\\rho(\\|x_i - x_j\\|)\n254: $$\n255: \n256: Normalized weight:\n257: \n258: $$\n259: w_{ij}(\\rho) = \\frac{\\tilde{w}_{ij}(\\rho)}{\\sum_{\\ell \\in A_k} \\tilde{w}_{i\\ell}(\\rho)}\n260: $$\n261: \n262: Normalization condition:\n263: \n264: $$",
      "metadata": {
        "label": "def-localization-weights-cinf"
      },
      "section": "## 2. Mathematical Framework and Notation",
      "references": [],
      "raw_directive": "245: :::\n246: \n247: :::{prf:definition} Localization Weights\n248: :label: def-localization-weights-cinf\n249: \n250: Unnormalized weight:\n251: \n252: $$\n253: \\tilde{w}_{ij}(\\rho) = K_\\rho(d(x_i)) \\cdot K_\\rho(\\|x_i - x_j\\|)\n254: $$\n255: \n256: Normalized weight:\n257: \n258: $$\n259: w_{ij}(\\rho) = \\frac{\\tilde{w}_{ij}(\\rho)}{\\sum_{\\ell \\in A_k} \\tilde{w}_{i\\ell}(\\rho)}\n260: $$\n261: \n262: Normalization condition:\n263: \n264: $$\n265: \\sum_{j \\in A_k} w_{ij}(\\rho) = 1 \\quad \\text{(identically for all } x_i, S, \\rho \\text{)}",
      "_registry_context": {
        "stage": "directives",
        "document_id": "19_geometric_gas_cinf_regularity_simplified",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Mathematical Framework and Notation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-pipeline-cinf",
      "title": "Localized Moments, Regularized Std Dev, Z-Score, Fitness Potential",
      "start_line": 267,
      "end_line": 300,
      "header_lines": [
        268
      ],
      "content_start": 270,
      "content_end": 299,
      "content": "270: :label: def-pipeline-cinf\n271: \n272: **Localized mean**:\n273: \n274: $$\n275: \\mu_\\rho[f_k, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\cdot d(x_j)\n276: $$\n277: \n278: **Localized variance**:\n279: \n280: $$\n281: \\sigma^2_\\rho[f_k, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\cdot (d(x_j) - \\mu_\\rho)^2\n282: $$\n283: \n284: **Regularized standard deviation**: σ'_reg: ℝ_{≥0} → [ε_σ, ∞) satisfying:\n285: 1. σ'_reg ∈ C∞ with bounded derivatives: sup_{σ²} |d^m σ'_reg / d(σ²)^m| ≤ C_{σ',m}\n286: 2. σ'_reg(σ²) ≥ ε_σ > 0 (prevents division by zero)\n287: 3. σ'_reg(σ²) ~ √(σ²) as σ² → ∞\n288: \n289: **Z-score**:\n290: \n291: $$\n292: Z_\\rho[f_k, d, x_i] = \\frac{d(x_i) - \\mu_\\rho[f_k, x_i]}{\\sigma'_{\\text{reg}}(\\sigma^2_\\rho[f_k, x_i])}\n293: $$\n294: \n295: **Fitness potential**:\n296: \n297: $$\n298: V_{\\text{fit}}[f_k, \\rho](x_i) = g_A(Z_\\rho[f_k, d, x_i])\n299: $$",
      "metadata": {
        "label": "def-pipeline-cinf"
      },
      "section": "## 2. Mathematical Framework and Notation",
      "references": [],
      "raw_directive": "267: :::\n268: \n269: :::{prf:definition} Localized Moments, Regularized Std Dev, Z-Score, Fitness Potential\n270: :label: def-pipeline-cinf\n271: \n272: **Localized mean**:\n273: \n274: $$\n275: \\mu_\\rho[f_k, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\cdot d(x_j)\n276: $$\n277: \n278: **Localized variance**:\n279: \n280: $$\n281: \\sigma^2_\\rho[f_k, x_i] = \\sum_{j \\in A_k} w_{ij}(\\rho) \\cdot (d(x_j) - \\mu_\\rho)^2\n282: $$\n283: \n284: **Regularized standard deviation**: σ'_reg: ℝ_{≥0} → [ε_σ, ∞) satisfying:\n285: 1. σ'_reg ∈ C∞ with bounded derivatives: sup_{σ²} |d^m σ'_reg / d(σ²)^m| ≤ C_{σ',m}\n286: 2. σ'_reg(σ²) ≥ ε_σ > 0 (prevents division by zero)\n287: 3. σ'_reg(σ²) ~ √(σ²) as σ² → ∞\n288: \n289: **Z-score**:\n290: \n291: $$\n292: Z_\\rho[f_k, d, x_i] = \\frac{d(x_i) - \\mu_\\rho[f_k, x_i]}{\\sigma'_{\\text{reg}}(\\sigma^2_\\rho[f_k, x_i])}\n293: $$\n294: \n295: **Fitness potential**:\n296: \n297: $$\n298: V_{\\text{fit}}[f_k, \\rho](x_i) = g_A(Z_\\rho[f_k, d, x_i])\n299: $$\n300: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "19_geometric_gas_cinf_regularity_simplified",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 2. Mathematical Framework and Notation"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-gevrey-class-cinf",
      "title": "Gevrey Classes",
      "start_line": 749,
      "end_line": 763,
      "header_lines": [
        750
      ],
      "content_start": 752,
      "content_end": 762,
      "content": "752: :label: def-gevrey-class-cinf\n753: \n754: A function f: U → ℝ (U ⊆ ℝ^d open) belongs to **Gevrey class G^s** (s ≥ 1) if for every compact K ⊆ U, there exist C_K, A_K > 0 such that:\n755: \n756: $$\n757: \\sup_{x \\in K} \\|\\nabla^m f(x)\\| \\leq C_K \\cdot A_K^m \\cdot (m!)^s \\quad \\forall m \\geq 0\n758: $$\n759: \n760: **Special cases**:\n761: - s < 1: Real analytic (convergent Taylor series)\n762: - s = 1: **Gevrey-1** (borderline, \"analytic-Gevrey\")",
      "metadata": {
        "label": "def-gevrey-class-cinf"
      },
      "section": "## 7. Gevrey-1 Classification",
      "references": [],
      "raw_directive": "749: ## 7. Gevrey-1 Classification\n750: \n751: :::{prf:definition} Gevrey Classes\n752: :label: def-gevrey-class-cinf\n753: \n754: A function f: U → ℝ (U ⊆ ℝ^d open) belongs to **Gevrey class G^s** (s ≥ 1) if for every compact K ⊆ U, there exist C_K, A_K > 0 such that:\n755: \n756: $$\n757: \\sup_{x \\in K} \\|\\nabla^m f(x)\\| \\leq C_K \\cdot A_K^m \\cdot (m!)^s \\quad \\forall m \\geq 0\n758: $$\n759: \n760: **Special cases**:\n761: - s < 1: Real analytic (convergent Taylor series)\n762: - s = 1: **Gevrey-1** (borderline, \"analytic-Gevrey\")\n763: - s > 1: Smooth but not analytic",
      "_registry_context": {
        "stage": "directives",
        "document_id": "19_geometric_gas_cinf_regularity_simplified",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 7. Gevrey-1 Classification"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-adaptive-generator-cinf",
      "title": "Adaptive Langevin Generator",
      "start_line": 822,
      "end_line": 838,
      "header_lines": [
        823
      ],
      "content_start": 825,
      "content_end": 837,
      "content": "825: :label: def-adaptive-generator-cinf\n826: \n827: The **infinitesimal generator** of the adaptive Langevin dynamics on extended state w = (x, v):\n828: \n829: $$\n830: \\mathcal{L} f(x, v) = v \\cdot \\nabla_x f + [-\\nabla U(x) - \\epsilon_F \\nabla V_{\\text{fit}}(x) - \\gamma v] \\cdot \\nabla_v f + \\frac{\\gamma}{2\\beta} \\Delta_v f\n831: $$\n832: \n833: where:\n834: - U(x): confining potential (backbone)\n835: - ε_F ∇V_fit(x): adaptive force\n836: - γ: friction\n837: - Δ_v: velocity Laplacian (thermal noise)",
      "metadata": {
        "label": "def-adaptive-generator-cinf"
      },
      "section": "## 8. Spectral Implications: Essential Self-Adjointness",
      "references": [],
      "raw_directive": "822: ## 8. Spectral Implications: Essential Self-Adjointness\n823: \n824: :::{prf:definition} Adaptive Langevin Generator\n825: :label: def-adaptive-generator-cinf\n826: \n827: The **infinitesimal generator** of the adaptive Langevin dynamics on extended state w = (x, v):\n828: \n829: $$\n830: \\mathcal{L} f(x, v) = v \\cdot \\nabla_x f + [-\\nabla U(x) - \\epsilon_F \\nabla V_{\\text{fit}}(x) - \\gamma v] \\cdot \\nabla_v f + \\frac{\\gamma}{2\\beta} \\Delta_v f\n831: $$\n832: \n833: where:\n834: - U(x): confining potential (backbone)\n835: - ε_F ∇V_fit(x): adaptive force\n836: - γ: friction\n837: - Δ_v: velocity Laplacian (thermal noise)\n838: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "19_geometric_gas_cinf_regularity_simplified",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 8. Spectral Implications: Essential Self-Adjointness"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-effective-counts-two-scales",
      "title": "Effective Interaction Counts (Two Scales)",
      "start_line": 191,
      "end_line": 241,
      "header_lines": [
        192
      ],
      "content_start": 194,
      "content_end": 240,
      "content": "194: :label: def-effective-counts-two-scales\n195: \n196: **1. Softmax Effective Companions** (scale $\\varepsilon_c$):\n197: \n198: $$\n199: k_{\\text{eff}}^{(\\varepsilon_c)}(i) := \\left|\\left\\{\\ell \\in \\mathcal{A} : d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}^{(\\varepsilon_c)}\\right\\}\\right|\n200: $$\n201: \n202: where:\n203: \n204: $$\n205: R_{\\text{eff}}^{(\\varepsilon_c)} = \\varepsilon_c \\sqrt{C_{\\text{comp}}^2 + 2\\log(k^2)}\n206: $$\n207: \n208: **Scaling**:\n209: \n210: $$\n211: k_{\\text{eff}}^{(\\varepsilon_c)}(i) = O(\\rho_{\\max} \\cdot \\varepsilon_c^{2d} \\cdot (\\log k)^d)\n212: $$\n213: \n214: **Properties**:\n215: - Grows logarithmically with $k$\n216: - NOT k-uniform\n217: - Controls softmax companion sums over $\\ell$\n218: \n219: **2. Localization Effective Neighbors** (scale $\\rho$):\n220: \n221: $$\n222: k_{\\text{eff}}^{(\\rho)}(i) := \\left|\\left\\{j \\in \\mathcal{A} : d_{\\text{alg}}(i,j) \\leq R_{\\text{eff}}^{(\\rho)}\\right\\}\\right|\n223: $$\n224: \n225: where:\n226: \n227: $$\n228: R_{\\text{eff}}^{(\\rho)} = C_\\rho \\cdot \\rho\n229: $$\n230: \n231: for some constant $C_\\rho$ independent of $k$.\n232: \n233: **Scaling**:\n234: \n235: $$\n236: k_{\\text{eff}}^{(\\rho)}(i) = O(\\rho_{\\max} \\cdot \\rho^{2d})\n237: $$\n238: \n239: **Properties**:\n240: - Independent of $k$",
      "metadata": {
        "label": "def-effective-counts-two-scales"
      },
      "section": "## 1. Introduction",
      "references": [],
      "raw_directive": "191: The Geometric Gas fitness potential involves **two distinct spatial scales** with separate effective interaction counts. It is crucial to distinguish these to understand which bounds are k-uniform.\n192: \n193: :::{prf:definition} Effective Interaction Counts (Two Scales)\n194: :label: def-effective-counts-two-scales\n195: \n196: **1. Softmax Effective Companions** (scale $\\varepsilon_c$):\n197: \n198: $$\n199: k_{\\text{eff}}^{(\\varepsilon_c)}(i) := \\left|\\left\\{\\ell \\in \\mathcal{A} : d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}^{(\\varepsilon_c)}\\right\\}\\right|\n200: $$\n201: \n202: where:\n203: \n204: $$\n205: R_{\\text{eff}}^{(\\varepsilon_c)} = \\varepsilon_c \\sqrt{C_{\\text{comp}}^2 + 2\\log(k^2)}\n206: $$\n207: \n208: **Scaling**:\n209: \n210: $$\n211: k_{\\text{eff}}^{(\\varepsilon_c)}(i) = O(\\rho_{\\max} \\cdot \\varepsilon_c^{2d} \\cdot (\\log k)^d)\n212: $$\n213: \n214: **Properties**:\n215: - Grows logarithmically with $k$\n216: - NOT k-uniform\n217: - Controls softmax companion sums over $\\ell$\n218: \n219: **2. Localization Effective Neighbors** (scale $\\rho$):\n220: \n221: $$\n222: k_{\\text{eff}}^{(\\rho)}(i) := \\left|\\left\\{j \\in \\mathcal{A} : d_{\\text{alg}}(i,j) \\leq R_{\\text{eff}}^{(\\rho)}\\right\\}\\right|\n223: $$\n224: \n225: where:\n226: \n227: $$\n228: R_{\\text{eff}}^{(\\rho)} = C_\\rho \\cdot \\rho\n229: $$\n230: \n231: for some constant $C_\\rho$ independent of $k$.\n232: \n233: **Scaling**:\n234: \n235: $$\n236: k_{\\text{eff}}^{(\\rho)}(i) = O(\\rho_{\\max} \\cdot \\rho^{2d})\n237: $$\n238: \n239: **Properties**:\n240: - Independent of $k$\n241: - **k-uniform** ✓",
      "_registry_context": {
        "stage": "directives",
        "document_id": "20_geometric_gas_cinf_regularity_full",
        "chapter_index": 2,
        "chapter_file": "chapter_2.json",
        "section_id": "## 1. Introduction"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-smooth-phase-space-partition-full",
      "title": "Smooth Phase-Space Partition",
      "start_line": 1128,
      "end_line": 1157,
      "header_lines": [
        1129
      ],
      "content_start": 1131,
      "content_end": 1156,
      "content": "1131: :label: def-smooth-phase-space-partition-full\n1132: \n1133: Fix a clustering scale $\\varepsilon_c > 0$ and cluster centers $\\{(y_m, u_m)\\}_{m=1}^M$ in phase space.\n1134: \n1135: A **smooth partition of unity** is a collection of functions $\\{\\psi_m : \\mathcal{X} \\times \\mathbb{R}^d \\to [0,1]\\}_{m=1}^M$ satisfying:\n1136: \n1137: 1. **Partition identity**:\n1138: \n1139: $$\n1140: \\sum_{m=1}^M \\psi_m(x, v) = 1 \\quad \\text{for all } (x, v) \\in \\mathcal{X} \\times \\mathbb{R}^d\n1141: \n1142: $$\n1143: \n1144: 2. **Smoothness**: Each $\\psi_m \\in C^\\infty$ with bounded derivatives:\n1145: \n1146: $$\n1147: \\|\\nabla^n \\psi_m\\|_\\infty \\leq C_{\\psi,n} \\cdot \\varepsilon_c^{-n} \\quad \\text{for all } n \\geq 0\n1148: \n1149: $$\n1150: \n1151: 3. **Localization**: Each $\\psi_m$ has support concentrated near cluster $m$:\n1152: \n1153: $$\n1154: \\psi_m(x, v) = 0 \\quad \\text{when } d_{\\text{alg}}((x,v), (y_m, u_m)) > 2\\varepsilon_c\n1155: \n1156: $$",
      "metadata": {
        "label": "def-smooth-phase-space-partition-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [],
      "raw_directive": "1128: We construct a **smooth partition of unity** on phase space that avoids the discontinuity problems of hard clustering.\n1129: \n1130: :::{prf:definition} Smooth Phase-Space Partition\n1131: :label: def-smooth-phase-space-partition-full\n1132: \n1133: Fix a clustering scale $\\varepsilon_c > 0$ and cluster centers $\\{(y_m, u_m)\\}_{m=1}^M$ in phase space.\n1134: \n1135: A **smooth partition of unity** is a collection of functions $\\{\\psi_m : \\mathcal{X} \\times \\mathbb{R}^d \\to [0,1]\\}_{m=1}^M$ satisfying:\n1136: \n1137: 1. **Partition identity**:\n1138: \n1139: $$\n1140: \\sum_{m=1}^M \\psi_m(x, v) = 1 \\quad \\text{for all } (x, v) \\in \\mathcal{X} \\times \\mathbb{R}^d\n1141: \n1142: $$\n1143: \n1144: 2. **Smoothness**: Each $\\psi_m \\in C^\\infty$ with bounded derivatives:\n1145: \n1146: $$\n1147: \\|\\nabla^n \\psi_m\\|_\\infty \\leq C_{\\psi,n} \\cdot \\varepsilon_c^{-n} \\quad \\text{for all } n \\geq 0\n1148: \n1149: $$\n1150: \n1151: 3. **Localization**: Each $\\psi_m$ has support concentrated near cluster $m$:\n1152: \n1153: $$\n1154: \\psi_m(x, v) = 0 \\quad \\text{when } d_{\\text{alg}}((x,v), (y_m, u_m)) > 2\\varepsilon_c\n1155: \n1156: $$\n1157: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "20_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-soft-cluster-membership-full",
      "title": "Soft Cluster Membership Weights",
      "start_line": 1266,
      "end_line": 1280,
      "header_lines": [
        1267
      ],
      "content_start": 1269,
      "content_end": 1279,
      "content": "1269: :label: def-soft-cluster-membership-full\n1270: \n1271: For walker $j \\in \\mathcal{A}$, define its **soft membership** in cluster $m$ as:\n1272: \n1273: $$\n1274: \\alpha_{j,m} = \\psi_m(x_j, v_j) \\in [0, 1]\n1275: \n1276: $$\n1277: \n1278: This satisfies:\n1279: - $\\sum_{m=1}^M \\alpha_{j,m} = 1$ (walker belongs to all clusters with fractional weights)",
      "metadata": {
        "label": "def-soft-cluster-membership-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [],
      "raw_directive": "1266: ### 3.2 Cluster Assignment via Soft Membership\n1267: \n1268: :::{prf:definition} Soft Cluster Membership Weights\n1269: :label: def-soft-cluster-membership-full\n1270: \n1271: For walker $j \\in \\mathcal{A}$, define its **soft membership** in cluster $m$ as:\n1272: \n1273: $$\n1274: \\alpha_{j,m} = \\psi_m(x_j, v_j) \\in [0, 1]\n1275: \n1276: $$\n1277: \n1278: This satisfies:\n1279: - $\\sum_{m=1}^M \\alpha_{j,m} = 1$ (walker belongs to all clusters with fractional weights)\n1280: - $\\alpha_{j,m} \\geq 1/2$ if $d_{\\text{alg}}(j, m) \\leq \\varepsilon_c/2$ (strong membership near center)",
      "_registry_context": {
        "stage": "directives",
        "document_id": "20_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-effective-cluster-population-full",
      "title": "Effective Cluster Population",
      "start_line": 1286,
      "end_line": 1297,
      "header_lines": [
        1287
      ],
      "content_start": 1289,
      "content_end": 1296,
      "content": "1289: :label: def-effective-cluster-population-full\n1290: \n1291: The **effective number of walkers** in cluster $m$ is:\n1292: \n1293: $$\n1294: k_m^{\\text{eff}} = \\sum_{j \\in \\mathcal{A}} \\alpha_{j,m} = \\sum_{j \\in \\mathcal{A}} \\psi_m(x_j, v_j)\n1295: \n1296: $$",
      "metadata": {
        "label": "def-effective-cluster-population-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [],
      "raw_directive": "1286: ### 3.3 Effective Cluster Size\n1287: \n1288: :::{prf:definition} Effective Cluster Population\n1289: :label: def-effective-cluster-population-full\n1290: \n1291: The **effective number of walkers** in cluster $m$ is:\n1292: \n1293: $$\n1294: k_m^{\\text{eff}} = \\sum_{j \\in \\mathcal{A}} \\alpha_{j,m} = \\sum_{j \\in \\mathcal{A}} \\psi_m(x_j, v_j)\n1295: \n1296: $$\n1297: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "20_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-diversity-pairing-cinf",
      "title": "Sequential Stochastic Greedy Pairing (From 03_cloning.md)",
      "start_line": 2183,
      "end_line": 2200,
      "header_lines": [
        2184
      ],
      "content_start": 2186,
      "content_end": 2199,
      "content": "2186: :label: def-diversity-pairing-cinf\n2187: \n2188: From Definition 5.1.2 in `docs/source/1_euclidean_gas/03_cloning.md`:\n2189: \n2190: **Inputs**: Alive walkers $\\mathcal{A}_t = \\{w_1, \\ldots, w_k\\}$, interaction range $\\varepsilon_d > 0$\n2191: \n2192: **Operation** (Algorithm 5.1):\n2193: 1. Initialize unpaired set $U \\leftarrow \\mathcal{A}_t$, empty companion map $c$\n2194: 2. While $|U| > 1$:\n2195:    - Select walker $i$ from $U$, remove from $U$\n2196:    - For each $j \\in U$, compute weight: $w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)$\n2197:    - Sample companion $c_i$ from softmax distribution: $P(j) = w_{ij} / \\sum_{\\ell \\in U} w_{i\\ell}$\n2198:    - Remove $c_i$ from $U$\n2199:    - Set bidirectional pairing: $c(i) \\leftarrow c_i$ and $c(c_i) \\leftarrow i$",
      "metadata": {
        "label": "def-diversity-pairing-cinf"
      },
      "section": "## 5.6 Diversity Pairing Mechanism Analysis",
      "references": [],
      "raw_directive": "2183: ### 5.6.1 Diversity Pairing Definition\n2184: \n2185: :::{prf:definition} Sequential Stochastic Greedy Pairing (From 03_cloning.md)\n2186: :label: def-diversity-pairing-cinf\n2187: \n2188: From Definition 5.1.2 in `docs/source/1_euclidean_gas/03_cloning.md`:\n2189: \n2190: **Inputs**: Alive walkers $\\mathcal{A}_t = \\{w_1, \\ldots, w_k\\}$, interaction range $\\varepsilon_d > 0$\n2191: \n2192: **Operation** (Algorithm 5.1):\n2193: 1. Initialize unpaired set $U \\leftarrow \\mathcal{A}_t$, empty companion map $c$\n2194: 2. While $|U| > 1$:\n2195:    - Select walker $i$ from $U$, remove from $U$\n2196:    - For each $j \\in U$, compute weight: $w_{ij} := \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)$\n2197:    - Sample companion $c_i$ from softmax distribution: $P(j) = w_{ij} / \\sum_{\\ell \\in U} w_{i\\ell}$\n2198:    - Remove $c_i$ from $U$\n2199:    - Set bidirectional pairing: $c(i) \\leftarrow c_i$ and $c(c_i) \\leftarrow i$\n2200: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "20_geometric_gas_cinf_regularity_full",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 5.6 Diversity Pairing Mechanism Analysis"
      }
    },
    {
      "directive_type": "definition",
      "label": "def-idealized-pairing-cinf",
      "title": "Idealized Spatially-Aware Pairing (From 03_cloning.md)",
      "start_line": 2202,
      "end_line": 2222,
      "header_lines": [
        2203
      ],
      "content_start": 2205,
      "content_end": 2221,
      "content": "2205: :label: def-idealized-pairing-cinf\n2206: \n2207: From Definition 5.1.1 in `03_cloning.md`:\n2208: \n2209: The idealized model assigns probability to each perfect matching $M \\in \\mathcal{M}_k$ via:\n2210: \n2211: $$\n2212: P_{\\text{ideal}}(M | S) = \\frac{W(M)}{\\sum_{M' \\in \\mathcal{M}_k} W(M')}\n2213: \n2214: $$\n2215: \n2216: where the matching quality is:\n2217: \n2218: $$\n2219: W(M) := \\prod_{(i,j) \\in M} \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)\n2220: \n2221: $$",
      "metadata": {
        "label": "def-idealized-pairing-cinf"
      },
      "section": "## 5.6 Diversity Pairing Mechanism Analysis",
      "references": [],
      "raw_directive": "2202: :::\n2203: \n2204: :::{prf:definition} Idealized Spatially-Aware Pairing (From 03_cloning.md)\n2205: :label: def-idealized-pairing-cinf\n2206: \n2207: From Definition 5.1.1 in `03_cloning.md`:\n2208: \n2209: The idealized model assigns probability to each perfect matching $M \\in \\mathcal{M}_k$ via:\n2210: \n2211: $$\n2212: P_{\\text{ideal}}(M | S) = \\frac{W(M)}{\\sum_{M' \\in \\mathcal{M}_k} W(M')}\n2213: \n2214: $$\n2215: \n2216: where the matching quality is:\n2217: \n2218: $$\n2219: W(M) := \\prod_{(i,j) \\in M} \\exp\\left(-\\frac{d_{\\text{alg}}(i, j)^2}{2\\varepsilon_d^2}\\right)\n2220: \n2221: $$\n2222: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "20_geometric_gas_cinf_regularity_full",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 5.6 Diversity Pairing Mechanism Analysis"
      }
    }
  ]
}