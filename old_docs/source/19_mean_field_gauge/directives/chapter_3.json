{
  "chapter_index": 3,
  "section_id": "## 3. Spatial Symmetries: Translation and Rotation",
  "directive_count": 7,
  "hints": [
    {
      "directive_type": "theorem",
      "label": "thm-spatial-translation-conditions",
      "title": "Conditions for Spatial Translation Symmetry",
      "start_line": 438,
      "end_line": 478,
      "header_lines": [
        439
      ],
      "content_start": 441,
      "content_end": 477,
      "content": "441: :label: thm-spatial-translation-conditions\n442: \n443: Spatial translation $g_s^{(x)}(x, v) = (x + s e_i, v)$ (for unit vector $e_i$) is a symmetry of the McKean-Vlasov system **if and only if** all of the following hold:\n444: \n445: **T1. Potential is Translation-Invariant:**\n446: \n447: $$\n448: U(x + se_i) = U(x) \\quad \\text{for all } x \\in \\mathcal{X}_{\\text{valid}}, s \\in \\mathbb{R}\n449: $$\n450: \n451: This implies $\\nabla U \\cdot e_i = 0$ (force has no component in direction $e_i$).\n452: \n453: **T2. Domain is Unbounded in Direction $e_i$:**\n454: \n455: $$\n456: \\mathcal{X}_{\\text{valid}} + se_i \\subseteq \\mathcal{X}_{\\text{valid}} \\quad \\text{for all } s\n457: $$\n458: \n459: (Otherwise boundary effects break translation)\n460: \n461: **T3. Killing Rate is Translation-Invariant:**\n462: \n463: $$\n464: c(x + se_i, v) = c(x, v)\n465: $$\n466: \n467: **T4. Revival Distribution is Translation-Invariant:**\n468: \n469: $$\n470: f_{\\text{init}}(x + se_i, v) = f_{\\text{init}}(x, v)\n471: $$\n472: \n473: **T5. Fitness Functional is Translation-Equivariant:**\n474: \n475: $$\n476: V_{\\text{fit}}[(g_s^{(x)})_* f](x + se_i, v) = V_{\\text{fit}}[f](x, v)\n477: $$",
      "metadata": {
        "label": "thm-spatial-translation-conditions"
      },
      "section": "## 3. Spatial Symmetries: Translation and Rotation",
      "raw_directive": "438: ### 3.1. Spatial Translation\n439: \n440: :::{prf:theorem} Conditions for Spatial Translation Symmetry\n441: :label: thm-spatial-translation-conditions\n442: \n443: Spatial translation $g_s^{(x)}(x, v) = (x + s e_i, v)$ (for unit vector $e_i$) is a symmetry of the McKean-Vlasov system **if and only if** all of the following hold:\n444: \n445: **T1. Potential is Translation-Invariant:**\n446: \n447: $$\n448: U(x + se_i) = U(x) \\quad \\text{for all } x \\in \\mathcal{X}_{\\text{valid}}, s \\in \\mathbb{R}\n449: $$\n450: \n451: This implies $\\nabla U \\cdot e_i = 0$ (force has no component in direction $e_i$).\n452: \n453: **T2. Domain is Unbounded in Direction $e_i$:**\n454: \n455: $$\n456: \\mathcal{X}_{\\text{valid}} + se_i \\subseteq \\mathcal{X}_{\\text{valid}} \\quad \\text{for all } s\n457: $$\n458: \n459: (Otherwise boundary effects break translation)\n460: \n461: **T3. Killing Rate is Translation-Invariant:**\n462: \n463: $$\n464: c(x + se_i, v) = c(x, v)\n465: $$\n466: \n467: **T4. Revival Distribution is Translation-Invariant:**\n468: \n469: $$\n470: f_{\\text{init}}(x + se_i, v) = f_{\\text{init}}(x, v)\n471: $$\n472: \n473: **T5. Fitness Functional is Translation-Equivariant:**\n474: \n475: $$\n476: V_{\\text{fit}}[(g_s^{(x)})_* f](x + se_i, v) = V_{\\text{fit}}[f](x, v)\n477: $$\n478: "
    },
    {
      "directive_type": "proof",
      "label": "unlabeled-proof-45",
      "title": null,
      "start_line": 480,
      "end_line": 546,
      "header_lines": [],
      "content_start": 481,
      "content_end": 545,
      "content": "481: \n482: :::{prf:proof}\n483: We must verify that each operator in $\\mathcal{L}[f] = L^\\dagger f - cf + B[f, m_d] + S[f]$ commutes with the push-forward $(g_s^{(x)})_*$.\n484: \n485: **Step 1: Kinetic Transport $L^\\dagger$.**\n486: \n487: The Fokker-Planck operator is:\n488: \n489: $$\n490: L^\\dagger f = -\\nabla_x \\cdot (vf) - \\nabla_v \\cdot (F(x)f) + \\gamma \\nabla_v \\cdot (vf) + \\frac{\\sigma_v^2}{2}\\Delta_v f\n491: $$\n492: \n493: Under translation $\\tilde{f}(x, v) = f(x - se_i, v)$:\n494: \n495: $$\n496: \\nabla_x \\cdot (v \\tilde{f}) = \\nabla_x \\cdot (v f(x - se_i, v)) = (\\nabla_x \\cdot (vf))(x - se_i, v)\n497: $$\n498: \n499: Similarly for velocity derivatives (unchanged since translation is in $x$ only).\n500: \n501: The force term requires:\n502: \n503: $$\n504: \\nabla_v \\cdot (F(x) \\tilde{f}) = \\nabla_v \\cdot (F(x) f(x - se_i, v))\n505: $$\n506: \n507: For this to equal $(\\nabla_v \\cdot (F f))(x - se_i, v)$, we need:\n508: \n509: $$\n510: F(x) = F(x - se_i) \\quad \\Rightarrow \\quad F \\text{ constant in direction } e_i\n511: $$\n512: \n513: which is **T1** (since $F = -\\nabla U$).\n514: \n515: **Step 2: Killing Operator $c(z)f$.**\n516: \n517: Requires $c(x + se_i, v) = c(x, v)$, which is **T3**.\n518: \n519: **Step 3: Revival Operator $B[f, m_d]$.**\n520: \n521: $$\n522: B[\\tilde{f}, m_d](x, v) = \\lambda_{\\text{rev}} m_d f_{\\text{init}}(x, v)\n523: $$\n524: \n525: For commutation, we need $f_{\\text{init}}$ to be translation-invariant (**T4**).\n526: \n527: **Step 4: Cloning Operator $S[f]$.**\n528: \n529: This is the most subtle. $S[f]$ depends on $V_{\\text{fit}}[f]$, which involves **global integrals** (moments). Translation-invariance of $V_{\\text{fit}}$ requires that these moments transform correctly.\n530: \n531: If $\\tilde{f}(x, v) = f(x - se_i, v)$, then:\n532: \n533: $$\n534: \\mu_R[\\tilde{f}] = \\int R(x, v) f(x - se_i, v) dx dv = \\int R(x + se_i, v) f(x, v) dx dv\n535: $$\n536: \n537: For $\\mu_R[\\tilde{f}] = \\mu_R[f]$, we need $R(x + se_i, v) = R(x, v)$ (reward translation-invariant).\n538: \n539: Similar requirements hold for $\\sigma_R, \\mu_D, \\sigma_D$.\n540: \n541: This is encapsulated in **T5**: the fitness functional must be **equivariant** under the density push-forward.\n542: \n543: **Step 5: Domain Constraint.**\n544: \n545: If $\\mathcal{X}_{\\text{valid}}$ is **bounded**, the boundary $\\partial \\mathcal{X}_{\\text{valid}}$ breaks translation symmetry. Requirement **T2** ensures no boundary.",
      "metadata": {},
      "section": "## 3. Spatial Symmetries: Translation and Rotation",
      "raw_directive": "480: :::\n481: \n482: :::{prf:proof}\n483: We must verify that each operator in $\\mathcal{L}[f] = L^\\dagger f - cf + B[f, m_d] + S[f]$ commutes with the push-forward $(g_s^{(x)})_*$.\n484: \n485: **Step 1: Kinetic Transport $L^\\dagger$.**\n486: \n487: The Fokker-Planck operator is:\n488: \n489: $$\n490: L^\\dagger f = -\\nabla_x \\cdot (vf) - \\nabla_v \\cdot (F(x)f) + \\gamma \\nabla_v \\cdot (vf) + \\frac{\\sigma_v^2}{2}\\Delta_v f\n491: $$\n492: \n493: Under translation $\\tilde{f}(x, v) = f(x - se_i, v)$:\n494: \n495: $$\n496: \\nabla_x \\cdot (v \\tilde{f}) = \\nabla_x \\cdot (v f(x - se_i, v)) = (\\nabla_x \\cdot (vf))(x - se_i, v)\n497: $$\n498: \n499: Similarly for velocity derivatives (unchanged since translation is in $x$ only).\n500: \n501: The force term requires:\n502: \n503: $$\n504: \\nabla_v \\cdot (F(x) \\tilde{f}) = \\nabla_v \\cdot (F(x) f(x - se_i, v))\n505: $$\n506: \n507: For this to equal $(\\nabla_v \\cdot (F f))(x - se_i, v)$, we need:\n508: \n509: $$\n510: F(x) = F(x - se_i) \\quad \\Rightarrow \\quad F \\text{ constant in direction } e_i\n511: $$\n512: \n513: which is **T1** (since $F = -\\nabla U$).\n514: \n515: **Step 2: Killing Operator $c(z)f$.**\n516: \n517: Requires $c(x + se_i, v) = c(x, v)$, which is **T3**.\n518: \n519: **Step 3: Revival Operator $B[f, m_d]$.**\n520: \n521: $$\n522: B[\\tilde{f}, m_d](x, v) = \\lambda_{\\text{rev}} m_d f_{\\text{init}}(x, v)\n523: $$\n524: \n525: For commutation, we need $f_{\\text{init}}$ to be translation-invariant (**T4**).\n526: \n527: **Step 4: Cloning Operator $S[f]$.**\n528: \n529: This is the most subtle. $S[f]$ depends on $V_{\\text{fit}}[f]$, which involves **global integrals** (moments). Translation-invariance of $V_{\\text{fit}}$ requires that these moments transform correctly.\n530: \n531: If $\\tilde{f}(x, v) = f(x - se_i, v)$, then:\n532: \n533: $$\n534: \\mu_R[\\tilde{f}] = \\int R(x, v) f(x - se_i, v) dx dv = \\int R(x + se_i, v) f(x, v) dx dv\n535: $$\n536: \n537: For $\\mu_R[\\tilde{f}] = \\mu_R[f]$, we need $R(x + se_i, v) = R(x, v)$ (reward translation-invariant).\n538: \n539: Similar requirements hold for $\\sigma_R, \\mu_D, \\sigma_D$.\n540: \n541: This is encapsulated in **T5**: the fitness functional must be **equivariant** under the density push-forward.\n542: \n543: **Step 5: Domain Constraint.**\n544: \n545: If $\\mathcal{X}_{\\text{valid}}$ is **bounded**, the boundary $\\partial \\mathcal{X}_{\\text{valid}}$ breaks translation symmetry. Requirement **T2** ensures no boundary.\n546: "
    },
    {
      "directive_type": "corollary",
      "label": "cor-no-spatial-translation",
      "title": "Generic Breaking of Spatial Translation",
      "start_line": 548,
      "end_line": 556,
      "header_lines": [
        549
      ],
      "content_start": 551,
      "content_end": 555,
      "content": "551: :label: cor-no-spatial-translation\n552: \n553: For the Adaptive Gas with:\n554: - Bounded domain $\\mathcal{X}_{\\text{valid}}$ (violates **T2**)\n555: - Confining potential $U(x)$ with $\\langle x, \\nabla U \\rangle > 0$ (violates **T1**)",
      "metadata": {
        "label": "cor-no-spatial-translation"
      },
      "section": "## 3. Spatial Symmetries: Translation and Rotation",
      "raw_directive": "548: :::\n549: \n550: :::{prf:corollary} Generic Breaking of Spatial Translation\n551: :label: cor-no-spatial-translation\n552: \n553: For the Adaptive Gas with:\n554: - Bounded domain $\\mathcal{X}_{\\text{valid}}$ (violates **T2**)\n555: - Confining potential $U(x)$ with $\\langle x, \\nabla U \\rangle > 0$ (violates **T1**)\n556: "
    },
    {
      "directive_type": "remark",
      "label": "unlabeled-remark-123",
      "title": "Physical Interpretation",
      "start_line": 558,
      "end_line": 570,
      "header_lines": [
        559
      ],
      "content_start": 561,
      "content_end": 569,
      "content": "561: :class: note\n562: \n563: The **absence** of spatial translation symmetry is physically meaningful:\n564: \n565: - The confining potential $U(x)$ creates a **preferred location** (the minimum of $U$)\n566: - The bounded domain $\\mathcal{X}_{\\text{valid}}$ creates **boundary effects**\n567: - The fitness landscape (if non-uniform) creates **spatial heterogeneity**\n568: \n569: These features are essential for the algorithm's ability to **localize** around high-reward regions.",
      "metadata": {
        "class": "note"
      },
      "section": "## 3. Spatial Symmetries: Translation and Rotation",
      "raw_directive": "558: :::\n559: \n560: :::{prf:remark} Physical Interpretation\n561: :class: note\n562: \n563: The **absence** of spatial translation symmetry is physically meaningful:\n564: \n565: - The confining potential $U(x)$ creates a **preferred location** (the minimum of $U$)\n566: - The bounded domain $\\mathcal{X}_{\\text{valid}}$ creates **boundary effects**\n567: - The fitness landscape (if non-uniform) creates **spatial heterogeneity**\n568: \n569: These features are essential for the algorithm's ability to **localize** around high-reward regions.\n570: "
    },
    {
      "directive_type": "theorem",
      "label": "thm-rotational-symmetry-conditions",
      "title": "Conditions for Rotational Symmetry",
      "start_line": 574,
      "end_line": 620,
      "header_lines": [
        575
      ],
      "content_start": 577,
      "content_end": 619,
      "content": "577: :label: thm-rotational-symmetry-conditions\n578: \n579: Consider a rotation $R_\\theta \\in SO(d)$ about an axis. Rotational symmetry holds **if and only if:**\n580: \n581: **R1. Potential is Spherically Symmetric:**\n582: \n583: $$\n584: U(R_\\theta x) = U(x) \\quad \\text{for all } x, \\theta\n585: $$\n586: \n587: Equivalently: $U(x) = U(\\|x\\|)$ (depends only on radius).\n588: \n589: **R2. Domain is Rotationally Symmetric:**\n590: \n591: $$\n592: R_\\theta \\mathcal{X}_{\\text{valid}} = \\mathcal{X}_{\\text{valid}}\n593: $$\n594: \n595: (e.g., $\\mathcal{X}_{\\text{valid}}$ is a ball)\n596: \n597: **R3. Killing Rate is Rotationally Invariant:**\n598: \n599: $$\n600: c(R_\\theta x, R_\\theta v) = c(x, v)\n601: $$\n602: \n603: **R4. Revival Distribution is Rotationally Invariant:**\n604: \n605: $$\n606: f_{\\text{init}}(R_\\theta x, R_\\theta v) = f_{\\text{init}}(x, v)\n607: $$\n608: \n609: **R5. Reward Function is Rotationally Invariant:**\n610: \n611: $$\n612: R(R_\\theta x, R_\\theta v) = R(x, v)\n613: $$\n614: \n615: **R6. Algorithmic Distance Respects Rotation:**\n616: \n617: The projection $\\varphi: \\mathcal{X} \\to \\mathcal{Y}$ and metric $d_\\mathcal{Y}$ must satisfy:\n618: \n619: $$",
      "metadata": {
        "label": "thm-rotational-symmetry-conditions"
      },
      "section": "## 3. Spatial Symmetries: Translation and Rotation",
      "raw_directive": "574: ### 3.2. Rotational Symmetry\n575: \n576: :::{prf:theorem} Conditions for Rotational Symmetry\n577: :label: thm-rotational-symmetry-conditions\n578: \n579: Consider a rotation $R_\\theta \\in SO(d)$ about an axis. Rotational symmetry holds **if and only if:**\n580: \n581: **R1. Potential is Spherically Symmetric:**\n582: \n583: $$\n584: U(R_\\theta x) = U(x) \\quad \\text{for all } x, \\theta\n585: $$\n586: \n587: Equivalently: $U(x) = U(\\|x\\|)$ (depends only on radius).\n588: \n589: **R2. Domain is Rotationally Symmetric:**\n590: \n591: $$\n592: R_\\theta \\mathcal{X}_{\\text{valid}} = \\mathcal{X}_{\\text{valid}}\n593: $$\n594: \n595: (e.g., $\\mathcal{X}_{\\text{valid}}$ is a ball)\n596: \n597: **R3. Killing Rate is Rotationally Invariant:**\n598: \n599: $$\n600: c(R_\\theta x, R_\\theta v) = c(x, v)\n601: $$\n602: \n603: **R4. Revival Distribution is Rotationally Invariant:**\n604: \n605: $$\n606: f_{\\text{init}}(R_\\theta x, R_\\theta v) = f_{\\text{init}}(x, v)\n607: $$\n608: \n609: **R5. Reward Function is Rotationally Invariant:**\n610: \n611: $$\n612: R(R_\\theta x, R_\\theta v) = R(x, v)\n613: $$\n614: \n615: **R6. Algorithmic Distance Respects Rotation:**\n616: \n617: The projection $\\varphi: \\mathcal{X} \\to \\mathcal{Y}$ and metric $d_\\mathcal{Y}$ must satisfy:\n618: \n619: $$\n620: d_\\mathcal{Y}(\\varphi(R_\\theta x_1), \\varphi(R_\\theta x_2)) = d_\\mathcal{Y}(\\varphi(x_1), \\varphi(x_2))"
    },
    {
      "directive_type": "proof",
      "label": "unlabeled-proof-187",
      "title": null,
      "start_line": 622,
      "end_line": 634,
      "header_lines": [],
      "content_start": 623,
      "content_end": 633,
      "content": "623: \n624: :::{prf:proof}\n625: Similar to the translation case, but now the transformation acts on both position and velocity:\n626: \n627: $$\n628: g_\\theta(x, v) = (R_\\theta x, R_\\theta v)\n629: $$\n630: \n631: The kinetic operator commutes if $U$ is spherically symmetric (**R1**).\n632: \n633: The fitness functional respects rotation if both the reward $R$ (**R5**) and the diversity measure (through $d_\\mathcal{Y}$, **R6**) are rotationally invariant.",
      "metadata": {},
      "section": "## 3. Spatial Symmetries: Translation and Rotation",
      "raw_directive": "622: :::\n623: \n624: :::{prf:proof}\n625: Similar to the translation case, but now the transformation acts on both position and velocity:\n626: \n627: $$\n628: g_\\theta(x, v) = (R_\\theta x, R_\\theta v)\n629: $$\n630: \n631: The kinetic operator commutes if $U$ is spherically symmetric (**R1**).\n632: \n633: The fitness functional respects rotation if both the reward $R$ (**R5**) and the diversity measure (through $d_\\mathcal{Y}$, **R6**) are rotationally invariant.\n634: "
    },
    {
      "directive_type": "example",
      "label": "unlabeled-example-201",
      "title": "Harmonic Potential and Rotation",
      "start_line": 636,
      "end_line": 658,
      "header_lines": [
        637
      ],
      "content_start": 639,
      "content_end": 657,
      "content": "639: :class: tip\n640: \n641: If the confining potential is **isotropic harmonic**:\n642: \n643: $$\n644: U(x) = \\frac{1}{2}\\omega^2 \\|x\\|^2\n645: $$\n646: \n647: then **R1** is satisfied ($U(R_\\theta x) = \\frac{1}{2}\\omega^2 \\|R_\\theta x\\|^2 = \\frac{1}{2}\\omega^2 \\|x\\|^2$).\n648: \n649: If additionally $\\mathcal{X}_{\\text{valid}} = B_R(0)$ (ball), $R = R(\\|v\\|)$ (speed-dependent reward), and $\\varphi$ is the identity map, then **all conditions hold** and the system has **full $SO(d)$ rotational symmetry**.\n650: \n651: **Conserved Quantity (Noether):**\n652: \n653: Angular momentum:\n654: \n655: $$\n656: \\mathbf{L}[f] = \\int_\\Omega (x \\times v) f(x, v) dx dv\n657: $$",
      "metadata": {
        "class": "tip"
      },
      "section": "## 3. Spatial Symmetries: Translation and Rotation",
      "raw_directive": "636: :::\n637: \n638: :::{prf:example} Harmonic Potential and Rotation\n639: :class: tip\n640: \n641: If the confining potential is **isotropic harmonic**:\n642: \n643: $$\n644: U(x) = \\frac{1}{2}\\omega^2 \\|x\\|^2\n645: $$\n646: \n647: then **R1** is satisfied ($U(R_\\theta x) = \\frac{1}{2}\\omega^2 \\|R_\\theta x\\|^2 = \\frac{1}{2}\\omega^2 \\|x\\|^2$).\n648: \n649: If additionally $\\mathcal{X}_{\\text{valid}} = B_R(0)$ (ball), $R = R(\\|v\\|)$ (speed-dependent reward), and $\\varphi$ is the identity map, then **all conditions hold** and the system has **full $SO(d)$ rotational symmetry**.\n650: \n651: **Conserved Quantity (Noether):**\n652: \n653: Angular momentum:\n654: \n655: $$\n656: \\mathbf{L}[f] = \\int_\\Omega (x \\times v) f(x, v) dx dv\n657: $$\n658: "
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}