<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 500" width="700" height="500">
  <!-- Title -->
  <text x="350" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Order-Invariant Functionals
  </text>

  <!-- Hasse diagram of causal order -->
  <g transform="translate(100, 80)">
    <!-- Level 0 (root) -->
    <circle cx="200" cy="0" r="10" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
    <text x="200" y="-15" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2c3e50">root</text>

    <!-- Level 1 -->
    <circle cx="100" cy="80" r="10" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
    <text x="100" y="65" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">e₀</text>

    <circle cx="200" cy="80" r="10" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
    <text x="200" y="65" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">e₁</text>

    <circle cx="300" cy="80" r="10" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
    <text x="300" y="65" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">e₂</text>

    <!-- Level 2 -->
    <circle cx="80" cy="160" r="10" fill="#2ecc71" stroke="#27ae60" stroke-width="2"/>
    <text x="80" y="145" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">e₃</text>

    <circle cx="160" cy="160" r="10" fill="#2ecc71" stroke="#27ae60" stroke-width="2"/>
    <text x="160" y="145" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">e₄</text>

    <circle cx="240" cy="160" r="10" fill="#2ecc71" stroke="#27ae60" stroke-width="2"/>
    <text x="240" y="145" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">e₅</text>

    <!-- Level 3 -->
    <circle cx="200" cy="240" r="10" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
    <text x="200" y="225" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">e₆</text>

    <!-- Causal edges -->
    <defs>
      <marker id="causal-arrow" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
        <polygon points="0 0, 8 3, 0 6" fill="#7f8c8d"/>
      </marker>
    </defs>

    <line x1="200" y1="10" x2="100" y2="68" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>
    <line x1="200" y1="10" x2="200" y2="68" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>
    <line x1="200" y1="10" x2="300" y2="68" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>

    <line x1="100" y1="90" x2="80" y2="148" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>
    <line x1="100" y1="90" x2="160" y2="148" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>
    <line x1="200" y1="90" x2="240" y2="148" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>

    <line x1="160" y1="170" x2="200" y2="228" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>

    <!-- Highlight interval I(e0, e6) -->
    <ellipse cx="160" cy="120" rx="120" ry="95" fill="none" stroke="#9b59b6" stroke-width="3" stroke-dasharray="8,4" opacity="0.7"/>
    <text x="280" y="125" font-family="Arial, sans-serif" font-size="12" fill="#9b59b6" font-weight="bold">I(e₀, e₆)</text>
  </g>

  <!-- Interval cardinality box -->
  <rect x="430" y="100" width="240" height="200" fill="#f8f9fa" stroke="#9b59b6" stroke-width="2" rx="8"/>
  <text x="550" y="125" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c3e50" font-weight="bold">
    Interval Cardinality
  </text>

  <text x="445" y="150" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
    For e₀ ≺ e₆:
  </text>

  <text x="445" y="175" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    I(e₀, e₆) = {z : e₀ ≺ z ≺ e₆}
  </text>

  <text x="445" y="200" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    = {e₁, e₃, e₄, e₅}
  </text>

  <text x="445" y="225" font-family="Arial, sans-serif" font-size="11" fill="#9b59b6" font-weight="bold">
    |I(e₀, e₆)| = 4
  </text>

  <line x1="440" y1="240" x2="660" y2="240" stroke="#95a5a6" stroke-width="1"/>

  <text x="445" y="260" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    Weight function:
  </text>

  <text x="445" y="280" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    w(e₀, e₆) = exp(-α · 4)
  </text>

  <!-- Properties -->
  <rect x="50" y="330" width="600" height="140" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1.5" rx="8"/>
  <text x="65" y="355" font-family="Arial, sans-serif" font-size="13" fill="#2c3e50" font-weight="bold">
    Order-Invariant Property:
  </text>
  <text x="65" y="377" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    The interval cardinality |I(x, y)| depends ONLY on the causal order ≺, not on:
  </text>
  <text x="80" y="397" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">
    • Coordinate system (Minkowski, Schwarzschild, etc.)
  </text>
  <text x="80" y="414" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">
    • Spacetime embedding Φ (death times, positions)
  </text>
  <text x="80" y="431" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">
    • Metric tensor g_μν (curvature, conformal rescaling)
  </text>
  <text x="65" y="453" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    ⟹ IG constructed from order-invariant functionals is <text fill="#e74c3c" font-weight="bold">Lorentz invariant</text> (Theorem 3.2)
  </text>

  <!-- Legend -->
  <g transform="translate(50, 480)">
    <circle cx="8" cy="0" r="6" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
    <text x="20" y="5" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">Episode in CST</text>

    <line x1="120" y1="0" x2="160" y2="0" stroke="#7f8c8d" stroke-width="2" marker-end="url(#causal-arrow)"/>
    <text x="170" y="5" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">Causal order x ≺ y</text>

    <ellipse cx="320" cy="0" rx="25" ry="12" fill="none" stroke="#9b59b6" stroke-width="2" stroke-dasharray="4,2"/>
    <text x="350" y="5" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">Interval I(x, y)</text>
  </g>
</svg>
