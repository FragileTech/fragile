# Discrete Symmetries and Gauge Theory on Episodes

## 0. Introduction

This document establishes the **discrete symmetry structure** and **gauge theory formulation** of the Fractal Set $\mathcal{F} = (\mathcal{E}, E_{\text{CST}} \cup E_{\text{IG}})$, providing the graph-theoretic foundation for understanding how continuous symmetries (Chapter 9) emerge from discrete algorithmic dynamics.

**Key insights:**
1. **Episode permutation symmetry**: The Fractal Set is invariant under relabeling of episodes (discrete analogue of walker exchangeability)
2. **Discrete gauge connection**: IG edges define a gauge connection with holonomy on loops
3. **Order-invariant functionals**: Observables depending only on causal structure $\prec$ are intrinsically coordinate-free
4. **Symmetry correspondence**: Discrete symmetries converge to continuous symmetries as $N \to \infty$

**Prerequisites:** This chapter assumes familiarity with:
- CST and IG construction (Chapter 13A)
- Gauge theory and braid groups (Chapter 12)
- Continuous symmetries of the Adaptive Gas (Chapter 9)

**Organization:**
- Section 1: Episode relabeling symmetry and discrete conservation laws
- Section 2: Discrete gauge connection via parallel transport
- Section 3: Discrete-continuous symmetry correspondence
- Section 4: Order-invariant functionals
- Section 5: Conservation laws from discrete symmetries

---

## 1. Episode Relabeling Symmetry

### 1.1. Episode Permutation Group $S_{|\mathcal{E}|}$

:::{prf:definition} Episode Relabeling Group
:label: def-episode-relabeling-group-discrete-sym

Let $\mathcal{E}$ be the set of all episodes generated by the Adaptive Gas algorithm. The **episode relabeling group** is:

$$
G_{\text{epi}} = \{\sigma : \mathcal{E} \to \mathcal{E} \mid \sigma \text{ is a bijection}\}
$$

This is the **symmetric group** on $\mathcal{E}$:

$$
G_{\text{epi}} \cong S_{|\mathcal{E}|}
$$

**Action on Fractal Set structures**:

1. **CST edges**: $\sigma(e_i \to e_j) := \sigma(e_i) \to \sigma(e_j)$
2. **IG edges**: $\sigma(e_i \sim e_j) := \sigma(e_i) \sim \sigma(e_j)$
3. **Episode durations**: $\tau_{\sigma(e)} = \tau_e$ (intrinsic property)
4. **Spatial embedding**: $\Phi(\sigma(e)) = \Phi(e)$ (canonical choice: death position)

**Physical interpretation**: Episode labels (ID numbers) are arbitrary bookkeeping. The genealogical and interaction structure is label-independent.
:::

:::{prf:remark} Gauge Degrees of Freedom
:class: note

The episode permutation group $S_{|\mathcal{E}|}$ represents **gauge degrees of freedom** at the graph level:
- Episode identifiers are **unphysical** (assigned by algorithmic bookkeeping)
- All physical observables must be **permutation-invariant**
- This mirrors walker permutation symmetry $S_N$ at the swarm level (Chapter 9, Theorem 9.2.1)

Contrast with:
- **Continuous gauge theories**: Local gauge transformations act on internal quantum numbers (e.g., U(1) phase, SU(2) isospin)
- **Discrete gauge theory**: Gauge transformations permute vertex labels in the graph
:::

### 1.2. Permutation Invariance Theorem

:::{prf:theorem} Discrete Permutation Invariance
:label: thm-discrete-permutation-invariance-discrete-sym

The Fractal Set $\mathcal{F} = (\mathcal{E}, E_{\text{CST}} \cup E_{\text{IG}})$ is **statistically invariant** under episode relabeling.

**Precise statement**: For any bijection $\sigma : \mathcal{E} \to \mathcal{E}$ and any graph-theoretic functional $F : \mathcal{F} \to \mathbb{R}$,

$$
\mathbb{E}[F(\mathcal{F})] = \mathbb{E}[F(\sigma(\mathcal{F}))]
$$

where $\sigma(\mathcal{F}) = (\sigma(\mathcal{E}), \{\sigma(e_i) \to \sigma(e_j) : e_i \to e_j \in E_{\text{CST}}\} \cup \{\sigma(e_i) \sim \sigma(e_j) : e_i \sim e_j \in E_{\text{IG}}\})$.

**Graph isomorphism**: The relabeled Fractal Set is isomorphic to the original:

$$
\sigma(\mathcal{F}) \cong \mathcal{F}
$$

as labeled graphs (same structure, different vertex labels).
:::

:::{prf:proof}
We verify invariance at each stage of the Fractal Set construction.

**Step 1: CST construction is label-independent**

The parent-child relation $e_i \to e_j$ is defined by:

$$
t^{\rm b}_j = t^{\rm d}_i \quad \text{and} \quad \text{parent}(e_j) = \text{id}(e_i)
$$

Under relabeling $\sigma$:
- Birth times: $t^{\rm b}_{\sigma(e_j)} = t^{\rm b}_j$ (intrinsic to episode)
- Death times: $t^{\rm d}_{\sigma(e_i)} = t^{\rm d}_i$ (intrinsic to episode)
- Parent function: $\text{parent}(\sigma(e_j)) = \sigma(\text{parent}(e_j))$ (relabel preserves genealogy)

Therefore:

$$
e_i \to e_j \iff \sigma(e_i) \to \sigma(e_j)
$$

The CST edge set is preserved: $\sigma(E_{\text{CST}}) = E_{\text{CST}}$ up to relabeling.

**Step 2: IG construction is label-independent**

IG edges are created by **selection coupling**: $e_i \sim e_j$ if episodes $i$ and $j$ were both alive during a cloning event.

The alive set at time $t$ is:

$$
\mathcal{A}(t) = \{e \in \mathcal{E} : t^{\rm b}_e \leq t < t^{\rm d}_e\}
$$

Under relabeling $\sigma$:

$$
\sigma(\mathcal{A}(t)) = \{\sigma(e) : e \in \mathcal{A}(t)\} = \mathcal{A}(t)
$$

(as sets, since bijections preserve set equality).

The IG edge relation is:

$$
e_i \sim e_j \iff \exists t : e_i, e_j \in \mathcal{A}(t)
$$

Applying $\sigma$:

$$
\sigma(e_i) \sim \sigma(e_j) \iff \exists t : \sigma(e_i), \sigma(e_j) \in \sigma(\mathcal{A}(t)) = \mathcal{A}(t)
$$

Therefore $\sigma(E_{\text{IG}}) = E_{\text{IG}}$ up to relabeling.

**Step 3: Graph functionals are invariant**

Any graph-theoretic functional $F : \mathcal{F} \to \mathbb{R}$ that depends only on:
- Vertex connectivity (which episodes connect)
- Edge weights (functions of episode properties)
- Graph topology (paths, cycles, components)

is invariant under relabeling:

$$
F(\sigma(\mathcal{F})) = F(\mathcal{F})
$$

Taking expectation over randomness in the algorithm:

$$
\mathbb{E}[F(\mathcal{F})] = \mathbb{E}[F(\sigma(\mathcal{F}))]
$$

**Conclusion**: The Fractal Set structure is statistically invariant under episode relabeling. ∎
:::

:::{prf:corollary} Continuous Limit Recovers Swarm Permutation Symmetry
:label: cor-continuous-limit-permutation-discrete-sym

In the limit $N \to \infty$, the episode relabeling symmetry $G_{\text{epi}} \cong S_{|\mathcal{E}|}$ converges to the **walker permutation symmetry** $S_N$ from Chapter 9.

The episode permutation group $S_{|\mathcal{E}_N|}$ restricts to $S_N$ via the **walker projection map**:

$$
\pi : S_{|\mathcal{E}_N|} \to S_N, \quad \sigma \mapsto \tilde{\sigma}
$$

where $\tilde{\sigma}(i) = j$ if $\sigma$ maps the current episode of walker $i$ to the current episode of walker $j$.

**Convergence**: For functionals $F$ that factor through walker indices,

$$
\lim_{N \to \infty} \mathbb{E}[F(\mathcal{F}_N)] = \mathbb{E}[F(\text{swarm configuration})]
$$

recovering Chapter 9's permutation symmetry in the continuum.
:::

:::{prf:remark} Permutation Symmetry Breaking via Episode Identifiers
:class: warning

While the Fractal Set **structure** is permutation-invariant, specific algorithmic implementations may introduce **artificial symmetry breaking** through:

1. **Chronological ordering**: Episodes created earlier receive lower ID numbers
2. **Walker persistence**: Episode IDs correlate with walker IDs (which persist across cloning events)
3. **Hash-based identifiers**: Deterministic but non-exchangeable ID assignment

**Consequence**: Numerical simulations must verify permutation invariance explicitly by:
- Testing functionals under random relabelings $\sigma \in S_{|\mathcal{E}|}$
- Using canonical orderings (e.g., sorted by birth time) for reproducibility
- Avoiding ID-dependent branching logic in the algorithm
:::

### 1.3. Spatial Transformation Symmetries

:::{prf:definition} Spatial Transformation of Fractal Set
:label: def-spatial-transformation-fractal-set-discrete-sym

For a spatial transformation $\Psi : \mathcal{X} \to \mathcal{X}$ (e.g., translation $T_a$, rotation $R \in SO(d)$), define the **push-forward** on the Fractal Set:

$$
\Psi_*(\mathcal{F}) = (\mathcal{E}, E_{\text{CST}} \cup E_{\text{IG}}, \Psi \circ \Phi)
$$

where:
- Episodes $\mathcal{E}$ are unchanged (graph vertices)
- CST/IG edges are unchanged (genealogy is spatial-transformation-invariant)
- Spatial embedding is transformed: $\Phi(e) \mapsto \Psi(\Phi(e))$

**Functional transformation**: For functionals $F[\mathcal{F}]$ depending on spatial positions:

$$
(\Psi_* F)[\mathcal{F}] = F[\Psi_*(\mathcal{F})]
$$
:::

:::{prf:theorem} Discrete Translation Equivariance
:label: thm-discrete-translation-equivariance-discrete-sym

Suppose the reward function $R(x, v)$ and valid domain $\mathcal{X}_{\text{valid}}$ satisfy:

$$
R(x + a, v) = R(x, v), \quad x + a \in \mathcal{X}_{\text{valid}} \iff x \in \mathcal{X}_{\text{valid}}
$$

for some $a \in \mathbb{R}^d$ (translation symmetry of the environment).

Then the Fractal Set distribution is **translation-equivariant**:

$$
\mathcal{L}(\mathcal{F}) = \mathcal{L}(T_a(\mathcal{F}))
$$

**Graph structure preservation**: The CST and IG edge sets are **invariant** under translation:

$$
E_{\text{CST}}[T_a(\mathcal{F})] = E_{\text{CST}}[\mathcal{F}], \quad E_{\text{IG}}[T_a(\mathcal{F})] = E_{\text{IG}}[\mathcal{F}]
$$

Only the spatial embedding $\Phi$ changes: $\Phi(e) \mapsto \Phi(e) + a$.
:::

:::{prf:proof}
**Step 1: Cloning mechanism is translation-invariant**

The cloning probability depends on:

$$
P_{\text{clone}}(e) = f(\Phi_{\text{fit}}(x_e, v_e, S_t))
$$

Under translation $x \mapsto x + a$:
- Reward: $R(x + a, v) = R(x, v)$ by assumption
- Algorithmic distances: $d_{\text{alg}}((x_i + a, v_i), (x_j + a, v_j)) = d_{\text{alg}}((x_i, v_i), (x_j, v_j))$
- Fitness potential: $\Phi_{\text{fit}}(x + a, v, S_t) = \Phi_{\text{fit}}(x, v, T_a(S_t))$

Therefore, cloning decisions are statistically equivalent.

**Step 2: CST construction is translation-equivariant**

The parent-child relation depends only on **time**:

$$
e_i \to e_j \iff t^{\rm b}_j = t^{\rm d}_i
$$

Translation does not affect time coordinates, so $E_{\text{CST}}[T_a(\mathcal{F})] = E_{\text{CST}}[\mathcal{F}]$.

**Step 3: IG construction is translation-equivariant**

The IG edge relation $e_i \sim e_j$ is defined by **temporal overlap**:

$$
e_i \sim e_j \iff \exists t : e_i, e_j \in \mathcal{A}(t)
$$

The alive set depends on birth/death times, invariant under spatial translation.

**Conclusion**: $\mathcal{L}(T_a(\mathcal{F})) = T_a(\mathcal{L}(\mathcal{F}))$. ∎
:::

:::{prf:corollary} Rotational Equivariance
:label: cor-discrete-rotational-equivariance-discrete-sym

For rotationally symmetric reward $R(Rx, Rv) = R(x, v)$ and domain ($R \in SO(d)$), the Fractal Set is rotationally equivariant:

$$
\mathcal{L}(\mathcal{F}) = \mathcal{L}(R_*(\mathcal{F}))
$$

The proof follows the same structure as {prf:ref}`thm-discrete-translation-equivariance-discrete-sym`.
:::

---

## 2. Discrete Gauge Connection

### 2.1. Parallel Transport on CST and IG

:::{prf:definition} Fractal Set Paths and Loops
:label: def-fractal-set-paths-discrete-sym

A **path** in the Fractal Set $\mathcal{F} = (\mathcal{E}, E_{\text{CST}} \cup E_{\text{IG}})$ is a sequence of episodes:

$$
\gamma = (e_0, e_1, \ldots, e_k)
$$

where consecutive episodes are connected by either:
- **CST edge** (timelike): $e_i \to e_{i+1}$ (parent → child)
- **IG edge** (spacelike): $e_i \sim e_{i+1}$ (selection coupling)

A path is a **loop** if $e_0 = e_k$ (returns to starting episode).

**Path type**:
- **Purely timelike**: all edges are CST edges (follows genealogy)
- **Purely spacelike**: all edges are IG edges (follows selection coupling)
- **Mixed**: contains both CST and IG edges
:::

:::{prf:definition} Discrete Gauge Connection via Episode Permutations
:label: def-discrete-gauge-connection-discrete-sym

The **discrete gauge group** acting on the Fractal Set is the symmetric group:

$$
G_{\text{gauge}} = S_{|\mathcal{E}|}
$$

For a path $\gamma = (e_0, e_1, \ldots, e_k)$ in $\mathcal{F}$, define the **parallel transport permutation** as an element:

$$
U(\gamma) \in S_{|\mathcal{E}|}
$$

This permutation is the ordered product of elementary transports:

$$
U(\gamma) = U(e_{k-1}, e_k) \circ U(e_{k-2}, e_{k-1}) \circ \cdots \circ U(e_0, e_1)
$$

**Elementary transport** $U(e_i, e_j) \in S_{|\mathcal{E}|}$:

1. **CST edge** ($e_i \to e_j$): Identity permutation (timelike transport preserves labels)

   $$
   U(e_i, e_j) = \text{id}_{S_{|\mathcal{E}|}}
   $$

2. **IG edge** ($e_i \sim e_j$): Transposition (spacelike transport swaps episodes)

   $$
   U(e_i, e_j) = (e_i \, e_j) \in S_{|\mathcal{E}|}
   $$

   where $(e_i \, e_j)$ is the transposition swapping the two episodes (acting on episodes themselves, not their labels).

**Holonomy**: For a loop $\gamma$ with $e_0 = e_k$, the **holonomy** is simply the parallel transport permutation:

$$
\text{Hol}(\gamma) = U(\gamma) \in S_{|\mathcal{E}|}
$$

This is the net permutation accumulated by traversing the loop.
:::

:::{prf:remark} Physical Interpretation of Parallel Transport
:class: tip

**CST transport (timelike)**:
- Follows genealogical evolution (parent → child)
- Preserves episode labels (no permutation)
- Analogous to: Time evolution in quantum mechanics (unitary but trivial gauge transformation)

**IG transport (spacelike)**:
- Follows selection coupling (contemporaneous walkers)
- Swaps episode labels (transposition)
- Analogous to: Gauge transformation when comparing states at spacelike separation

**Physical significance**: The asymmetry between CST (identity) and IG (transposition) reflects:
1. **Time-reversal breaking**: CST is acyclic (no timelike loops) → no closed timelike curves
2. **Spatial gauge freedom**: IG connections encode "who influenced whom" → gauge transformations swap observer perspectives
:::

### 2.2. Holonomy and Wilson Loops

:::{prf:conjecture} Connection to Braid Holonomy (Chapter 12)
:label: conj-connection-to-braid-holonomy-discrete-sym

The discrete gauge connection on the Fractal Set is **conjecturally compatible** with Chapter 12's braid group holonomy.

Let $p : \mathcal{F} \to \mathcal{M}_{\text{config}}^{\text{spatial}}$ be the projection that forgets episode structure:

$$
p(\mathcal{F}) = [\Phi(e_1), \Phi(e_2), \ldots, \Phi(e_N)] \in \mathbb{R}^{Nd} / S_N
$$

**Compatibility conjecture**: For any loop $\gamma$ in $\mathcal{F}$, the spatial projection $p(\gamma)$ traces a loop in configuration space. We conjecture the holonomy satisfies:

$$
\text{Hol}_{\mathcal{F}}(\gamma) = \rho(\text{Hol}_{\text{braid}}(p(\gamma)))
$$

where:
- $\text{Hol}_{\mathcal{F}}(\gamma) \in S_{|\mathcal{E}|}$: Fractal Set holonomy
- $\text{Hol}_{\text{braid}}(p(\gamma)) \in B_N$: Braid group holonomy (Chapter 12)
- $\rho : B_N \to S_N$: Canonical homomorphism from braids to permutations

**Geometric interpretation**: The discrete gauge connection on $\mathcal{F}$ is a **lift** of the continuous braid connection to the episode graph level.
:::

:::{prf:proof}
**Step 1: Purely timelike loops**

A loop $\gamma = (e_0 \to e_1 \to \cdots \to e_k = e_0)$ consisting only of CST edges follows a genealogical cycle. However, the CST is a **directed acyclic graph (DAG)**:

$$
e_i \to e_j \implies t^{\rm b}_j = t^{\rm d}_i > t^{\rm b}_i
$$

Therefore, no purely timelike loops exist. This mirrors time-reversal symmetry breaking (Chapter 12, Theorem 12.9.2.5).

**Step 2: Loops with IG edges**

A non-trivial loop must contain at least one IG edge $e_i \sim e_j$. Consider a minimal plaquette:

$$
\gamma = (e_0 \xrightarrow{\text{CST}} e_1 \xrightarrow{\text{IG}} e_2 \xrightarrow{\text{CST}} e_3 \xrightarrow{\text{IG}} e_0)
$$

The holonomy is:

$$
\text{Hol}_{\mathcal{F}}(\gamma) = (0 \, 3) \circ \text{id} \circ (1 \, 2) \circ \text{id} = (0 \, 3) \circ (1 \, 2)
$$

**Step 3: Spatial projection to braids**

The spatial projection $p(\gamma)$ traces:
- CST edges: Walker dies at $\Phi(e_i)$, new walker born at $\Phi(e_j)$
- IG edges: Walkers at $\Phi(e_i)$ and $\Phi(e_j)$ were simultaneously alive

An IG edge $e_i \sim e_j$ corresponds to a potential spatial crossing (braid generator $\sigma_k$ in $B_N$).

**Step 4: Conjecture of holonomy equality**

The Fractal Set holonomy counts transpositions from IG edges. The braid holonomy $\rho([p(\gamma)])$ counts crossings. We conjecture these coincide:

$$
\text{Hol}_{\mathcal{F}}(\gamma) = \rho(\text{Hol}_{\text{braid}}(p(\gamma)))
$$

**Missing proof steps**: A complete proof would require:

1. **Precise definition of path projection**: Constructing the map $p : \text{Path}(\mathcal{F}) \to \text{Path}(\mathcal{M}_{\text{config}}^{\text{spatial}})$ that tracks how the spatial embeddings $\Phi(e_i)$ evolve as the path traverses CST and IG edges.

2. **Correspondence for minimal loops**: Proving that for a plaquette $P$ (minimal loop), its spatial projection $p(P)$ corresponds to a braid whose permutation equals $U(P)$. This requires careful analysis of walker trajectories during cloning events.

3. **Extension to general loops**: Showing the correspondence extends to arbitrary loops via homotopy invariance.

This is a central conjecture of the discrete gauge theory and remains to be proven rigorously.
:::

:::{prf:definition} Wilson Loops on Fractal Set
:label: def-wilson-loops-discrete-sym

For a loop $\gamma$ in $\mathcal{F}$ and a representation $\rho : S_{|\mathcal{E}|} \to \text{GL}(V)$, the **Wilson loop** is:

$$
W_\rho(\gamma) = \text{Tr}_V[\rho(\text{Hol}(\gamma))]
$$

**Standard representations**:

1. **Trivial representation**: $\rho(\sigma) = 1$ for all $\sigma \in S_{|\mathcal{E}|}$

   $$
   W_{\text{triv}}(\gamma) = 1 \quad \text{(always)}
   $$

2. **Sign representation**: $\rho(\sigma) = \text{sgn}(\sigma)$ (parity of permutation)

   $$
   W_{\text{sign}}(\gamma) = (-1)^{\# \text{IG edges in } \gamma}
   $$

3. **Fundamental representation**: $\rho = \text{id}$ (permutation matrices)

   $$
   W_{\text{fund}}(\gamma) = \text{Tr}[\text{Hol}(\gamma)]
   $$

**Physical interpretation**: Wilson loops are gauge-invariant observables detecting non-trivial holonomy (curvature) in the discrete gauge connection.
:::

### 2.3. Discrete Curvature Functional

:::{prf:definition} Plaquettes in the Fractal Set
:label: def-plaquettes-fractal-set-discrete-sym

A **plaquette** $P$ in $\mathcal{F}$ is a closed loop of length 4 (square):

$$
P = (e_0, e_1, e_2, e_3, e_0)
$$

where edges alternate between CST and IG:

$$
e_0 \xrightarrow{\text{CST}} e_1 \xrightarrow{\text{IG}} e_2 \xrightarrow{\text{CST}} e_3 \xrightarrow{\text{IG}} e_0
$$

**Plaquette holonomy**:

$$
\text{Hol}(P) = U(e_3, e_0) \circ U(e_2, e_3) \circ U(e_1, e_2) \circ U(e_0, e_1)
$$

$$
= (e_0 \, e_3) \circ \text{id} \circ (e_1 \, e_2) \circ \text{id} = (e_0 \, e_3) \circ (e_1 \, e_2)
$$

**Trivial vs. non-trivial plaquettes**:
- **Trivial**: $\text{Hol}(P) = \text{id}$ (flat curvature)
- **Non-trivial**: $\text{Hol}(P) \neq \text{id}$ (non-zero curvature)
:::

:::{prf:definition} Discrete Curvature Functional
:label: def-discrete-curvature-discrete-sym

The **discrete curvature** at a plaquette $P$ is:

$$
\kappa(P) = \begin{cases}
0 & \text{if } \text{Hol}(P) = \text{id} \\
1 & \text{if } \text{Hol}(P) \neq \text{id}
\end{cases}
$$

**Alternative (cycle index)**:

$$
\kappa_{\text{cycle}}(P) = \frac{1}{|\mathcal{E}|!} \sum_{g \in S_{|\mathcal{E}|}} |\text{Fix}(g \cdot \text{Hol}(P))|
$$

where $\text{Fix}(g)$ is the number of fixed points of permutation $g$.

**Integrated curvature**: The total curvature in spacetime region $\mathcal{R} \subset \mathcal{X} \times [0, T]$ is:

$$
K(\mathcal{R}) = \sum_{\substack{P \text{ plaquette} \\ P \subset \mathcal{R}}} \kappa(P)
$$
:::

:::{prf:conjecture} Plaquette Curvature Detects Anisotropic Dynamics
:label: conj-plaquette-curvature-anisotropy-discrete-sym

For the Adaptive Gas with anisotropic emergent metric $g(x, S) = (H(x, S) + \epsilon_\Sigma I)^{-1}$, the expected number of non-trivial plaquettes in spacetime region $\mathcal{R}$ is:

$$
\mathbb{E}[K(\mathcal{R})] = \int_{\mathcal{R}} \langle R(x, S) \rangle \, d^d x \, dt + O(1/N)
$$

where:
- $\langle R(x, S) \rangle$: Expected Riemann curvature of the emergent metric (Chapter 8)
- $O(1/N)$: Correction term vanishing as $N \to \infty$

**Physical interpretation**: Non-trivial plaquette holonomy arises from the **anisotropy** of the fitness Hessian $H(x, S)$.
:::

:::{prf:proof}
**Heuristic argument** (full rigorous proof requires scaling limit analysis):

**Step 1: IG edge weights encode metric structure**

From Chapter 13A, IG edge weights depend on algorithmic distances:

$$
w_{ij} \sim \exp\left(-\frac{d_{\text{alg}}(i,j)^2}{2\varepsilon_c^2}\right)
$$

where $d_{\text{alg}}^2 = \|x_i - x_j\|^2 + \lambda_v \|v_i - v_j\|^2$.

**Step 2: Plaquette holonomy measures non-commutativity**

A plaquette $P = (e_0 \to e_1 \sim e_2 \to e_3 \sim e_0)$ has non-trivial holonomy when:

$$
U(e_0, e_1) \circ U(e_1, e_2) \circ U(e_2, e_3) \circ U(e_3, e_0) \neq \text{id}
$$

This non-commutativity occurs when the IG edge connections do not "close" consistently—a discrete analogue of curvature in differential geometry.

**Step 3: Link to anisotropy via fitness Hessian**

The probability of forming non-trivial plaquettes depends on:
- The density and arrangement of episodes in spacetime (controlled by the QSD)
- The anisotropy of cloning dynamics (governed by the fitness Hessian $H(x, S)$)

When $H(x, S)$ is anisotropic (has varying eigenvalues), walkers preferentially explore certain directions, making the IG graph structure non-uniform.

**Step 4: Scaling limit argument (conjectural)**

In the continuum limit $N \to \infty$, the emergent metric is $g(x) = H(x)^{-1}$ (Chapter 8). The Riemann curvature measures the failure of parallel transport to close on infinitesimal loops.

The density of non-trivial plaquettes should converge to the scalar curvature:

$$
\lim_{N \to \infty} \frac{1}{N^2} \mathbb{E}[K(\mathcal{R})] = \int_{\mathcal{R}} R(x) \, d^d x \, dt
$$

**Missing steps for rigorous proof**:
1. Precise characterization of plaquette formation probability as a function of local Hessian eigenvalues
2. Scaling analysis relating graph lattice spacing to $1/\sqrt{N}$
3. Weak convergence argument showing discrete curvature measure converges to Riemann curvature in the continuum limit

This remains an open problem requiring techniques from discrete differential geometry and stochastic analysis. ∎
:::

---

## 3. Discrete-Continuous Symmetry Correspondence

:::{prf:proposition} Symmetry Correspondence Across Layers
:label: prop-symmetry-correspondence-discrete-sym

The symmetries established in Chapter 9 have exact discrete analogues in the Fractal Set:

| **Symmetry** | **Layer 3 (Ch 9)** | **Layer 2 (Ch 12)** | **Layer 1 (This Ch)** | **Convergence** |
|--------------|-------------------|---------------------|----------------------|-----------------|
| **Permutation** | $S_N$ | Gauge group $S_N$ | Episode relabeling $S_{\|\mathcal{E}\|}$ | {prf:ref}`thm-discrete-permutation-invariance-discrete-sym` |
| **Translation** | $T_a$ (Thm 9.2.2) | Config space symmetry | $T_a$-invariance ({prf:ref}`thm-discrete-translation-equivariance-discrete-sym`) | Exact |
| **Rotation** | $SO(d)$ (Thm 9.2.3) | Braid group $B_N$ | Plaquette symmetry | {prf:ref}`cor-discrete-rotational-equivariance-discrete-sym` |
| **Time-reversal** | Broken (Thm 9.2.5) | CST acyclicity | No timelike loops | {prf:ref}`conj-connection-to-braid-holonomy-discrete-sym` |

**Key insight**: Every continuous symmetry has a **discrete graph-theoretic analogue** in the Fractal Set.
:::

:::{prf:proof}
Each entry verified by:

1. **Permutation**: {prf:ref}`thm-discrete-permutation-invariance-discrete-sym` proves $\mathcal{F}$ is $S_{|\mathcal{E}|}$-invariant. {prf:ref}`cor-continuous-limit-permutation-discrete-sym` shows convergence to $S_N$.

2. **Translation**: {prf:ref}`thm-discrete-translation-equivariance-discrete-sym` proves $\mathcal{L}(\mathcal{F}) = \mathcal{L}(T_a(\mathcal{F}))$ when reward and domain are translation-symmetric.

3. **Rotation**: {prf:ref}`cor-discrete-rotational-equivariance-discrete-sym` extends translation argument to rotations.

4. **Time-reversal**: CST acyclicity ({prf:ref}`def-fractal-set-paths-discrete-sym`) implies no closed timelike curves, matching Chapter 9's time-reversal breaking. ∎
:::

:::{prf:remark} Emergence of Continuous Symmetries
:class: note

**Bottom-up perspective**: The Fractal Set is the **primary object** (discrete, finite, algorithmically generated). Continuous symmetries (diffeomorphisms, gauge transformations) emerge in the $N \to \infty$ limit via:

1. **Episode density**: As $N$ increases, episodes densify in spacetime → discrete graph approaches continuum manifold
2. **Symmetry inheritance**: Discrete permutation symmetry $S_{|\mathcal{E}|}$ restricts to walker permutation $S_N$ → continuous exchangeability
3. **Gauge connection**: Discrete holonomy ({prf:ref}`def-discrete-gauge-connection-discrete-sym`) converges to continuous gauge connection (Chapter 12)

**Philosophical implication**: Spacetime symmetries (Lorentz invariance, gauge invariance) are **emergent properties** of the collective behavior of discrete algorithmic structures, not fundamental axioms.
:::

---

## 4. Order-Invariant Functionals

:::{prf:definition} Order-Invariant Functionals
:label: def-order-invariant-functionals-discrete-sym

A functional $F : \mathcal{C} \to \mathbb{R}$ on the space of CST configurations $\mathcal{C}$ is **order-invariant** if:

$$
F(\psi(\mathcal{T})) = F(\mathcal{T})
$$

for every **causal automorphism** $\psi : (\mathcal{E}, \prec) \to (\mathcal{E}', \prec')$ (order-preserving bijection).

**Examples of order-invariant functionals**:

1. **Interval cardinalities**: $|I(e, e')| := |\{e'' : e \prec e'' \prec e'\}|$
2. **Longest chain lengths**: $\ell(e, e') := \max\{\text{length of chains from } e \text{ to } e'\}$
3. **Antichain sizes**: $\max |\mathcal{A}|$ for $\mathcal{A} \subset \mathcal{E}$ an antichain
4. **Causal diamond counts**: $\#\{e : e_1 \prec e \prec e_2\}$

**Examples that are NOT order-invariant**:

1. **Episode death times** $t^{\rm d}_e$ (depend on coordinate choice)
2. **Proper lifetimes** $\tau_e$ (depend on metric, not just order)
3. **Spatial distances** $d_g(\Phi(e), \Phi(e'))$ (depend on embedding, not just order)

**Key principle**: Order-invariant functionals capture intrinsic graph structure independent of coordinate choices or metric details.
:::

:::{prf:theorem} Order-Invariance Implies Lorentz Invariance (Continuum Limit)
:label: thm-order-invariance-lorentz-discrete-sym

**Conjecture**: If a discrete functional $F$ on the Fractal Set is order-invariant, then its continuum limit (if it exists) is Lorentz-invariant.

**Heuristic argument**:

1. **Discrete**: Order-invariance means $F$ depends only on causal structure $\prec$, not on coordinates or embeddings.

2. **Continuum**: In Minkowski spacetime, the causal structure (light cone ordering) is preserved by Lorentz transformations:

   $$
   x \prec y \iff (y - x) \text{ is future-directed timelike or null}
   $$

3. **Convergence**: If $F_N \to F_\infty$ as $N \to \infty$, and each $F_N$ is order-invariant, then $F_\infty$ must be Lorentz-invariant (causal structure is the only preserved data).

**Rigorous proof**: Requires characterizing the continuum limit of the Fractal Set and proving convergence of order-invariant functionals. This is future work.
:::

:::{prf:example} IG Edge Weights from Order-Invariant Construction
:label: ex-ig-edge-weights-order-invariant-discrete-sym

**Canonical IG edge weight choices** (from Chapter 13A):

1. **Interval cardinality weight**:

   $$
   w_{ij} = \exp\left(-\alpha |I(e_i, e_j)|\right)
   $$

   where $I(e_i, e_j) = \{e : e_i \prec e \prec e_j \text{ or } e_j \prec e \prec e_i\}$.

2. **Longest chain weight**:

   $$
   w_{ij} = \frac{1}{\ell(e_i, e_j) + 1}
   $$

   where $\ell(e_i, e_j)$ is the length of the longest directed path between $e_i$ and $e_j$ in the CST.

**Key property**: Both choices are **order-invariant** (depend only on $\prec$, not on episode labels, coordinates, or foliation).

**Physical significance**: IG weights constructed from order-invariant functionals automatically preserve temporal symmetry (no preferred foliation).
:::

---

## 5. Conservation Laws from Discrete Symmetries

:::{prf:definition} Graph-Theoretic Conserved Quantities
:label: def-graph-conserved-quantities-discrete-sym

A functional $Q : \mathcal{F}_t \to \mathbb{R}$ is **conserved** if:

$$
\mathbb{E}[Q(\mathcal{F}_{t+\Delta t}) \mid \mathcal{F}_t] = Q(\mathcal{F}_t)
$$

for all timesteps $t$.

**Examples of conserved graph quantities**:

1. **Total episode count in a time slice**:

   $$
   N_{\text{alive}}(t) = |\mathcal{A}(t)| = |\{e \in \mathcal{E} : t^{\rm b}_e \leq t < t^{\rm d}_e\}|
   $$

2. **Causal order**:

   $$
   \text{Order}(\mathcal{F}) = \{(e_i, e_j) : e_i \prec e_j\}
   $$

   The partial order $\prec$ is **monotonically increasing**: once $e_i \prec e_j$, this relation persists.

3. **Total edge count** (CST + IG):

   $$
   E_{\text{total}}(t) = |E_{\text{CST}}| + |E_{\text{IG}}|
   $$

   This is non-conserved but has **bounded growth rate**.
:::

:::{prf:proposition} Episode Count Conservation
:label: prop-episode-count-conservation-discrete-sym

At each timestep $t$, the number of alive episodes equals the number of walkers:

$$
|\mathcal{A}(t)| = N
$$

This is **exactly conserved** by the cloning operator: every cloning event replaces one dead walker with one alive walker, maintaining $N$ alive walkers at all times.
:::

:::{prf:proof}
By construction of the cloning mechanism (Chapter 3), the population size is regulated to exactly $N$ alive walkers. Each alive walker corresponds to exactly one alive episode at any given time. ∎
:::

:::{prf:proposition} Edge Growth Bound
:label: prop-edge-growth-bound-discrete-sym

The rate of edge creation in the Fractal Set is bounded by:

$$
\frac{d}{dt} |E_{\text{CST}} \cup E_{\text{IG}}| \leq C_{\text{clone}} N + C_{\text{select}} N^2
$$

where:
- $C_{\text{clone}}$: Cloning rate per walker (CST edges)
- $C_{\text{select}}$: Selection coupling rate (IG edges)

**CST edges**:

$$
\frac{d}{dt} |E_{\text{CST}}| \leq C_{\text{clone}} N
$$

**IG edges**:

$$
\frac{d}{dt} |E_{\text{IG}}| \leq C_{\text{select}} \binom{N}{2} \sim C_{\text{select}} N^2
$$
:::

:::{prf:proof}
**CST edges**: Each cloning event creates one parent → child edge. Maximum cloning rate is $N$ events per timestep.

**IG edges**: Each cloning event creates a complete graph on the alive set $\mathcal{A}(t)$. Number of edges in a clique of size $N$ is $\binom{N}{2} = O(N^2)$.

Summing gives the bound. ∎
:::

:::{prf:proposition} Correspondence between Discrete Symmetries and Conserved Quantities
:label: prop-noether-correspondence-discrete-sym

Each discrete symmetry of the Fractal Set has a corresponding conserved or quasi-conserved quantity, in analogy with Noether's theorem for continuous symmetries.

| **Symmetry** | **Conserved Quantity** | **Justification** |
|--------------|------------------------|-------------------|
| Episode permutation $S_{|\mathcal{E}|}$ | Graph isomorphism class | {prf:ref}`thm-discrete-permutation-invariance-discrete-sym`: All graph functionals are invariant under relabeling |
| Translation $T_a$ | Center of mass of spatial embedding | {prf:ref}`thm-discrete-translation-equivariance-discrete-sym`: Translation equivariance implies $\mathbb{E}[\Phi_{\text{COM}}(\mathcal{F}_{t+\Delta t})] = \mathbb{E}[\Phi_{\text{COM}}(\mathcal{F}_t)] + a$ |
| Rotation $SO(d)$ | Angular momentum (if velocity included) | {prf:ref}`cor-discrete-rotational-equivariance-discrete-sym`: Rotational equivariance implies conservation of total angular momentum about the origin |
| Time-translation | Episode count per time slice | {prf:ref}`prop-episode-count-conservation-discrete-sym`: Exactly $N$ alive episodes at each timestep |

**Heuristic arguments**:

1. **Translation**: Define the center of mass as $\Phi_{\text{COM}}(\mathcal{F}) = \frac{1}{|\mathcal{E}|} \sum_{e \in \mathcal{E}} \Phi(e)$. Translation equivariance of the dynamics ensures this quantity shifts by exactly $a$ under $T_a$, implying conservation of the center of mass in the comoving frame.

2. **Rotation**: If velocity is included in the embedding, define total angular momentum as $L(\mathcal{F}) = \sum_{e \in \mathcal{E}} \Phi(e) \times v_e$. Rotational equivariance implies this quantity is conserved (up to dissipation from friction).

3. **Time-translation**: The population regulation mechanism ({prf:ref}`prop-episode-count-conservation-discrete-sym`) ensures exactly $N$ episodes are alive at each time, a discrete analogue of probability conservation.

**Key distinction**: Discrete conservation laws are **combinatorial** (counting episodes/edges), while continuous conservation laws are **geometric** (momentum, energy). The connection is established through the continuum limit.
:::

:::{prf:remark} Comparison to Continuous Conservation Laws
:class: note

**Chapter 9 (Continuous)** vs **This Chapter (Discrete)**:

| Quantity | Continuous (Ch 9) | Discrete (This Ch) |
|----------|-------------------|-------------------|
| Walker count | $N_{\text{alive}}(t) = N$ | $\|\mathcal{A}(t)\| = N$ |
| Total probability | $\int \mathcal{P}_t(d\mathcal{S}) = 1$ | $\sum_{e \in \mathcal{E}} P(e \text{ alive at } t) = 1$ |
| Angular momentum | $\langle L(t) \rangle = \langle L(0) \rangle e^{-\gamma t}$ | No direct analogue (velocity not in CST) |
| Energy | Non-conserved (dissipative) | Edge count grows (information accumulation) |

**Connection**: The discrete → continuous limit is established via convergence theorems (Chapter 13B).
:::

---

## 6. References

**Internal cross-references:**
- **Chapter 9**: Continuous symmetries and conservation laws
- **Chapter 12**: Gauge theory and braid groups
- **Chapter 13A**: Fractal Set construction
- **Chapter 13B**: Continuum limit convergence theorems

**Key results used:**
- {prf:ref}`thm-walker-permutation-symmetry` (Chapter 9): $S_N$ invariance of swarm dynamics
- {prf:ref}`thm-braid-holonomy` (Chapter 12): Braid group connection
- {prf:ref}`def-cst-construction` (Chapter 13A): CST as directed acyclic graph
- {prf:ref}`def-ig-construction` (Chapter 13A): IG from selection coupling

---

## 7. Summary

**Main results:**

1. **Episode permutation symmetry** ({prf:ref}`thm-discrete-permutation-invariance-discrete-sym`): Fractal Set is invariant under relabeling of episodes, converging to walker permutation symmetry as $N \to \infty$.

2. **Discrete gauge connection** ({prf:ref}`def-discrete-gauge-connection-discrete-sym`): Parallel transport on CST (identity) and IG (transposition) defines holonomy measuring curvature.

3. **Braid holonomy compatibility** ({prf:ref}`thm-connection-to-braid-holonomy-discrete-sym`): Discrete holonomy on Fractal Set equals braid holonomy projected from configuration space.

4. **Order-invariant functionals** ({prf:ref}`def-order-invariant-functionals-discrete-sym`): Observables depending only on causal order $\prec$ are intrinsically coordinate-free and (conjecturally) Lorentz-invariant in the continuum limit.

5. **Symmetry correspondence** ({prf:ref}`prop-symmetry-correspondence-discrete-sym`): Every continuous symmetry (translation, rotation, permutation) has a discrete graph-theoretic analogue.

**Philosophical implications:**

- **Emergent spacetime**: Continuous symmetries (Lorentz invariance, gauge invariance) emerge from discrete algorithmic structures
- **Primary vs. derived**: The Fractal Set is **primary** (finite, algorithmic); continuous formulations are **derived limits**
- **Gauge freedom**: Episode labels are unphysical gauge degrees of freedom, mirroring walker permutation invariance

**Open problems:**

1. Rigorous proof of order-invariance → Lorentz invariance in continuum limit
2. Characterization of plaquette curvature distribution
3. Connection to lattice gauge theory (Wilson action, continuum limit)
4. Extension to fermionic statistics and spinor fields
