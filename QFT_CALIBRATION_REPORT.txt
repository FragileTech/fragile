QFT Calibration Report (Zero-Reward + Viscosity-Only Baseline)

Targets
- R_rho_pi = 5.5
- R_N_pi = 6.7
- Desired tolerance: +/-2%

Global Constraints Used
- Constant zero reward (dashboard Constant benchmark equivalent)
- Viscosity-only forces from Langevin (no other force terms except optional potential + fitness force)
- 200 walkers, 300 steps (unless noted)
- Channels-tab analysis for masses/ratios

Baseline Simulation Configuration (Stable2 reference)
- alpha (potential well): 0.02
- use_potential_force: True
- use_fitness_force: True
- delta_t: 0.05
- anisotropic diffusion: True
- diffusion_mode: grad_proxy
- diffusion_grad_scale: 30
- epsilon_sigma: 0.5
- diagonal_diffusion: True
- fitness_grad_mode: sum
- fitness_detach_stats: True
- fitness_detach_companions: True
- fitness_sigma_min: 0.1
- viscous_length_scale: 0.251372 (default)
- viscous_neighbor_threshold: 0.75
- viscous_neighbor_penalty: 1.1

Current Best Results
1) Best R_rho_pi (closest to 5.5)
- Run: opt1_thr0p9_pen1p1_beta0p5
- R_rho_pi = 5.437 (error -0.063)
- R_N_pi = 0.592 (error -6.108)
- File: outputs/qft_baseline/opt1_thr0p9_pen1p1_beta0p5_baseline.json

2) Best R_N_pi (closest to 6.7)
- Run: weak_potential_fit1_aniso_stable2
- R_rho_pi = 3.186 (error -2.314)
- R_N_pi = 6.171 (error -0.529)
- File: outputs/qft_baseline/weak_potential_fit1_aniso_stable2_baseline.json

3) Best N/π via abs2 (but breaks rho/pi)
- Run: weak_potential_fit1_aniso_stable1_abs2
- R_N_pi_abs2 = 7.548 (error +0.848)
- R_rho_pi ~ 198 (pi collapses)
- File: outputs/qft_baseline/weak_potential_fit1_aniso_stable1_abs2_baseline.json

Summary of What Was Tried

A) Viscous neighbor threshold / penalty sweep (base config, use_nucleon_abs2)
- thr=0.5, pen=0.6/1.1/1.6 -> rho/pi ~0.44–1.44, N/pi ~0.03–0.19 (too low)
- thr=0.75, pen=0.6 -> rho/pi ~0.34, N/pi ~0.02 (too low)
- thr=0.75, pen=1.1 -> rho/pi ~3.19, N/pi ~1.07 (rho too low, N too low)
- thr=0.75, pen=1.6 -> rho/pi ~0.65, N/pi ~0.14 (too low)
- thr=0.9, pen=0.6 -> rho/pi ~14.33 (too high), N/pi ~0.37
- thr=0.9, pen=1.1 -> rho/pi ~6.38 (close), N/pi ~0.18 (dead)
- thr=0.9, pen=1.6 -> pi mass collapsed (ratios undefined)

What worked
- High threshold (0.9) is the only lever that gets R_rho_pi near target.
What did not work
- High threshold kills N/pi even with abs2.
- Penalty 1.6 often collapses pi and breaks ratios.

B) Option 1: beta / gamma sweep at thr=0.9, pen=1.1
- beta=0.5 -> rho/pi 5.437 (near target), N/pi 0.592 (too low)
- beta=1.0 -> rho/pi 6.377, N/pi 0.182 (too low)
- beta=1.5 -> pi collapsed (ratios undefined)
- gamma=0.5 -> rho/pi 1.547, N/pi 0.053 (too low)
- gamma=1.0 -> rho/pi 6.377, N/pi 0.182 (too low)
- gamma=1.5 -> rho/pi 0.313, N/pi 0.031 (too low)

What worked
- Lower beta (0.5) keeps rho/pi close to target.
What did not work
- None of the beta/gamma values revived N/pi at thr=0.9.

C) Option 2: viscous_length_scale sweep at thr=0.9, pen=1.1
- l=0.12 -> rho/pi 12.731 (too high), N/pi 0.873
- l=0.20 -> rho/pi 0.872, N/pi 0.042
- l=0.30 -> rho/pi 0.691, N/pi 0.101

What did not work
- Length-scale changes do not recover nucleon; they either blow up rho/pi or collapse both ratios.

D) Option 3: epsilon_F sweep at thr=0.75, pen=1.1
- eF=0.5 -> rho/pi 0.043, N/pi 0.053
- eF=1.0 -> rho/pi 3.186, N/pi 1.072
- eF=2.0 -> rho/pi 0.823, N/pi 0.050

What did not work
- epsilon_F sweep does not push rho/pi to target and degrades N/pi.

E) Earlier stability/aniso experiments (pre-options)
- No anisotropic diffusion + potential-only: rho/pi ~0.44, nucleon ~0
- Fitness force only (no anisotropic): rho/pi ~0.79, N/pi ~0.66
- Anisotropic grad_proxy with weak stabilization (grad_scale=10, eps_sigma=0.1): terminated early
- Anisotropic strong stabilization (grad_scale=100, eps_sigma=1.0): pi collapsed, rho/pi exploded (~198), N/pi_abs2 ~7.55
- Anisotropic stable2 (grad_scale=30, eps_sigma=0.5): best N/pi (~6.17) but rho/pi ~3.19

F) Curl + anisotropic diffusion (thr=0.9)
- beta_curl=0.02/0.05/0.1 with eps_sigma=0.7/1.0 -> terminated early (n_steps=1); noise and sigma_reg_full are NaN
- diag diffusion + eps_sigma=0.3/0.5 + grad_scale=20 -> same early termination
- soft diffusion (eps_sigma=0.1, grad_scale=10, curl_strength=0.2) -> still early termination

What did not work
- Any beta_curl > 0 combined with anisotropic diffusion currently yields NaN noise at step 1 in this script.

G) Stable2 config retest at thr=0.9 (alpha=0.02, use_potential_force, use_fitness_force)
- pen=0.6 -> rho/pi 14.33, nucleon 0 (N/pi undefined)
- pen=1.1 -> rho/pi 6.38, N/pi 0.22 (nucleon still dead)

Key Takeaways
- There is a tradeoff: settings that give near-target rho/pi (thr=0.9) suppress N/pi.
- Settings that keep N/pi near target (thr=0.75, stable2) leave rho/pi ~3.2.
- Using nucleon_abs2 can recover N/pi at high stabilization, but pi collapses and rho/pi diverges.
- Curl + anisotropic diffusion is currently numerically unstable (NaN noise at step 1).

Immediate Candidate Configs
- Best rho/pi: thr=0.9, pen=1.1, beta=0.5 (nucleon dead)
- Best nucleon/pi: thr=0.75, pen=1.1, stable2 (rho low)

Open Gap
- No configuration in the current parameter space achieves both ratios within +/-2%.
- Curl experiments with anisotropic diffusion are invalid until the diffusion regularization is fixed.

Files of Interest
- outputs/qft_baseline/opt1_thr0p9_pen1p1_beta0p5_baseline.json
- outputs/qft_baseline/weak_potential_fit1_aniso_stable2_baseline.json
- outputs/qft_baseline/weak_potential_fit1_aniso_stable1_abs2_baseline.json
- outputs/qft_baseline/sweep_thr0p9_pen1p1_baseline.json
- outputs/qft_baseline/sweep_thr0p75_pen1p1_baseline.json
