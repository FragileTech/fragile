{
  "source": {
    "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
    "line_range": {
      "lines": [
        [
          231,
          538
        ]
      ]
    },
    "label": "section-2-the-continuous-forward-generator-mathcal-l-_-text-fg",
    "volume": "1_euclidean_gas",
    "article_id": "07_mean_field",
    "section": "1.3",
    "section_name": "Density-Dependent Fitness Potential"
  },
  "full_text": "\nThe evolution of the N-particle system from one discrete timestep to the next is governed by the Swarm Update Operator $\\Psi_{\\mathcal{F}}$, which is a composition of a cloning stage and a kinetic stage. To transition from this discrete-time map to a continuous-time evolution, we define an infinitesimal generator, $\\mathcal{L}_{\\text{FG}}$. This generator describes the instantaneous rate of change of any observable of the system and serves as the foundation for deriving the mean-field PDE.\n\nThe composite nature of the discrete-time update, $\\Psi = \\Psi_{\\text{kin}} \\circ \\Psi_{\\text{clone}}$, suggests that the continuous-time generator can be represented as a sum of generators for each stage. This is formally justified by the Lie-Trotter product formula, which guarantees that a semigroup generated by a sum of operators can be approximated by the product of the semigroups of the individual operators. We therefore define the full generator as:\n$$\n\\mathcal{L}_{\\text{FG}} := \\mathcal{L}_{\\text{kin}} + \\mathcal{L}_{\\text{clone}}\n$$\nwhere $\\mathcal{L}_{\\text{kin}}$ is a local, second-order differential operator representing the diffusive kinetic motion, and $\\mathcal{L}_{\\text{clone}}$ is a non-local, integro-differential operator representing the discontinuous jump process of cloning and revival.\n\n### 2.1. The Underlying Discrete-Time Integrator: BAOAB Splitting\n\nBefore defining the continuous generator, we first specify the high-fidelity discrete-time integrator whose continuous limit it represents. The kinetic stage of the Euclidean Gas algorithm is not a simple Euler-Maruyama step but a robust, time-reversible, and symmetric splitting integrator known as **BAOAB**. This scheme is specifically designed for the underdamped Langevin equation and provides excellent stability and sampling accuracy, making it a solid foundation for our continuous model.\n\nThe integrator is designed to provide a numerical solution to the following stochastic differential equation (SDE) for a single particle:\n\n$$\n\\begin{cases}\n\\mathrm d X_t = V_t\\,\\mathrm dt,\\\\[2pt]\n\\mathrm d V_t = \\left(\\frac{1}{m}F(X_t) - \\gamma_{\\mathrm{fric}}\\bigl(V_t-u(X_t)\\bigr)\\right)\\mathrm dt\n\\;+\\; \\sqrt{2\\gamma_{\\mathrm{fric}}\\Theta/m}\\,\\mathrm dW_t,\n\\end{cases}\n$$\nwhere $W_t$ is a standard Wiener process and all parameters are as defined in the Euclidean Gas specification. The BAOAB method splits this SDE into analytically solvable parts and composes them symmetrically.\n\n:::{prf:definition} The BAOAB Update Rule\n:label: def-baoab-update-rule\n\nFor a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\tau$ is computed via the following five steps:\n\n1.  **B-Step (Force Kick):** The velocity is updated with a half-step kick from the conservative force $F(x)$.\n\n    $$\n    v_{n+1/2}^{(1)} = v_n + \\frac{\\tau}{2m} F(x_n)\n    $$\n\n2.  **A-Step (Position Drift):** The position is updated with a half-step drift using the new velocity.\n\n    $$\n    x_{n+1/2} = x_n + \\frac{\\tau}{2} v_{n+1/2}^{(1)}\n    $$\n\n3.  **O-Step (Ornstein-Uhlenbeck):** The velocity is updated for a full timestep by exactly solving the Ornstein-Uhlenbeck process that combines friction and thermal noise. Let $u_{n+1/2} = u(x_{n+1/2})$ be the flow field evaluated at the midpoint.\n\n    $$\n    v_{n+1/2}^{(2)} = u_{n+1/2} + e^{-\\gamma_{\\mathrm{fric}}\\tau}\\left(v_{n+1/2}^{(1)} - u_{n+1/2}\\right) + \\sqrt{\\frac{\\Theta}{m}(1 - e^{-2\\gamma_{\\mathrm{fric}}\\tau})} \\cdot \\xi\n    $$\n    where $\\xi \\sim \\mathcal{N}(0, I_d)$ is a standard Gaussian random vector.\n\n4.  **A-Step (Position Drift):** The position is updated with a final half-step drift.\n\n    $$\n    x_{n+1} = x_{n+1/2} + \\frac{\\tau}{2} v_{n+1/2}^{(2)}\n    $$\n\n5.  **B-Step (Force Kick):** The velocity is updated with a final half-step kick using the force evaluated at the new position, $F(x_{n+1})$.\n\n    $$\n    v_{n+1} = v_{n+1/2}^{(2)} + \\frac{\\tau}{2m} F(x_{n+1})\n    $$\n\nAn optional velocity cap, $\\psi_v$, is applied after the final B-step to ensure $v_{n+1} \\in V_{\\text{alg}}$, maintaining perfect fidelity with the discrete algorithm's definition.\n:::\n\n:::{admonition} Fidelity of the Continuous Generator\n:class: important\n:label: remark-fidelity-generator\n:open:\nThis explicit definition of the BAOAB integrator provides the rigorous foundation for the continuous generator that follows. Each part of the BAOAB scheme corresponds directly to a term in the Fokker-Planck operator that we will derive in the next section:\n\n*   The **B-steps** (force kicks) and the drift part of the **O-step** correspond to the advection in velocity space, represented by the term $\\nabla_v \\cdot (A_v f)$.\n*   The **A-steps** (position drifts) correspond to the advection in position space, represented by the term $\\nabla_x \\cdot (v f)$.\n*   The **stochastic part of the O-step** corresponds to the diffusion in velocity space, represented by the term $\\nabla_v \\cdot (D_v \\nabla_v f)$.\n\nTherefore, the generator $\\mathcal{L}_{\\text{kin}}$ defined in the next section is not an arbitrary choice but is the unique infinitesimal generator for the continuous stochastic process that the BAOAB integrator faithfully approximates.\n:::\n\n### 2.2. The Kinetic Transport Operator ($L^\\dagger$)\n\nBetween cloning events and death/revival transitions, the state of each alive walker evolves according to a continuous stochastic process. The kinetic stage of the Euclidean Gas algorithm, as defined by the BAOAB integrator, is a discrete-time approximation of a specific underdamped Langevin stochastic differential equation (SDE). This SDE governs the diffusive part of the generator.\n\n:::{prf:definition} Kinetic Transport Operator\n:label: def-kinetic-generator\n\nThe kinetic evolution of a single alive walker $i$ is governed by the underdamped Langevin SDE on the phase space $\\Omega$:\n\n$$\n\\mathrm d x_i = v_i\\,\\mathrm dt,\\qquad\n\\mathrm d v_i = \\left(\\frac{1}{m}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\,\\mathrm dt \\;+\\; \\sigma_v\\,\\mathrm dW_t\n$$\n\nwhere $W_t$ is a standard $d$-dimensional Wiener process and the parameters are those of the Euclidean Gas. This SDE is subject to **reflecting boundary conditions** on both position and velocity:\n\n1.  **Reflecting Position Boundary:** Trajectories reflect at the boundary $\\partial X_{\\text{valid}}$, ensuring no mass leaves the domain through kinetic transport. This models the pure kinetic portion of the dynamics with a simple, local boundary condition.\n2.  **Reflecting Velocity Boundary:** The dynamics are constrained to the velocity ball $V_{\\text{alg}}$. This is modeled by a reflecting or squash boundary condition at $\\|v\\|=V_{\\text{alg}}$ that mirrors the action of the velocity cap $\\psi_v$.\n\nThe infinitesimal generator for the N-particle system under this collection of independent SDEs is the **Fokker-Planck operator**, which acts on a test function $f$ on the swarm state space. For the set of alive walkers $\\mathcal{A}$, it is given by:\n\n$$\n\\boxed{\n\\mathcal{L}_{\\text{kin}} f = \\sum_{i\\in\\mathcal A}\\left[ v_i\\cdot\\nabla_{x_i} f + \\left(m^{-1}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\cdot\\nabla_{v_i} f + \\tfrac{\\sigma_v^2}{2}\\,\\Delta_{v_i} f\\right]\n}\n$$\n\nA key property of this operator with reflecting boundary conditions is that it is **mass-conservative**: when integrated over the domain, the total flux through the boundary vanishes, so $\\int_\\Omega L^\\dagger f \\,\\mathrm{d}z = 0$.\n:::\n\n:::{admonition} Separation of Kinetic Transport and Death\n:class: note\n:label: remark-separation-kinetic-death\nIn this formulation, the kinetic operator describes only the continuous transport of the alive population via drift and diffusion. Death at the boundary is handled separately by the interior killing rate operator (Section 2.3), which provides a smooth transition zone near $\\partial X_{\\text{valid}}$. This separation simplifies the PDE analysis by decoupling the local kinetic transport from the non-local revival mechanism.\n:::\n\n### 2.3. The Reaction Operators (Killing, Revival, and Cloning)\n\nIn the two-population model, we explicitly separate the three distinct physical processes that modify the alive population: (1) **death** of walkers near the boundary, (2) **revival** of dead walkers back into the alive population, and (3) **internal cloning** that redistributes mass within the alive population. This section defines the three corresponding operators as \"reaction\" terms in the PDE.\n\n:::{admonition} Separation of Death, Revival, and Internal Dynamics\n:class: important\n:label: remark-separation-death-revival-cloning\n:open:\nThe key innovation of this formulation is the explicit decoupling of boundary death from the revival and cloning mechanisms. In the discrete algorithm, a walker dies when it leaves $X_{\\text{valid}}$, setting its status to 0. In the continuous model, we represent this as:\n\n*   **Interior Killing**: A smooth killing rate $c(z)$ that is zero in the interior and positive near the boundary, removing mass from $f$ at rate $c(z)f(z)$.\n*   **Revival**: A non-local source term that re-injects the killed mass by cloning from the current alive population.\n*   **Internal Cloning**: A mass-neutral operator that redistributes alive mass based on fitness.\n\nThis separation makes the PDE analytically tractable while faithfully representing the discrete algorithm's behavior.\n:::\n\n:::{prf:definition} Interior Killing Operator\n:label: def-killing-operator\n\nDeath is modeled by an **interior killing rate** $c: \\Omega \\to [0, \\infty)$, a smooth, non-negative function with the following properties:\n\n1.  **Safety in the interior**: $c(z) = 0$ for all $z$ in a safe subset of $\\Omega$ away from the position boundary.\n2.  **Activity near the boundary**: $c(z) > 0$ in a smooth transition layer near $\\partial X_{\\text{valid}} \\times V_{\\text{alg}}$.\n3.  **Smoothness**: $c \\in C^\\infty(\\Omega)$ to ensure regularity of the PDE solutions.\n\nThe killing operator removes mass from the alive density $f$ at a rate $c(z)f(z)$. The **total mass killed per unit time** is a functional of $f$:\n\n$$\nk_{\\text{killed}}[f](t) := \\int_{\\Omega} c(z) f(t,z) \\, \\mathrm{d}z\n$$\n\nThis is the instantaneous rate at which alive mass transitions to dead mass.\n:::\n\n:::{prf:definition} Revival Operator\n:label: def-revival-operator\n\nRevival is modeled as a source term that re-injects mass from the dead population back into the alive population. The dead population acts as a reservoir from which revival occurs at a constant rate. Dead walkers are instantly revived by cloning from alive companions, so the spatial profile of the re-injected mass is simply **proportional to the current alive density**, mirroring the discrete algorithm's revival mechanism.\n\nThe **Revival Operator** is defined as:\n\n$$\nB[f, m_d](t, z) := \\lambda_{\\text{revive}} \\cdot m_d(t) \\cdot \\frac{f(t,z)}{m_a(t)}\n$$\n\nwhere:\n*   $\\lambda_{\\text{revive}} > 0$ is the **revival rate**, a free parameter independent of the timestep (typical values: 0.1-5)\n*   $m_d(t) = 1 - m_a(t)$ is the current dead mass\n*   $f(t,z)/m_a(t)$ is the **normalized alive density** (the probability distribution over the alive population)\n\nThis form directly translates the discrete algorithm: dead walkers select companions uniformly from the alive set and clone to their positions.\n\n**Key property**: The total mass revived per unit time is:\n\n$$\n\\int_{\\Omega} B[f, m_d](t,z)\\,\\mathrm{d}z = \\lambda_{\\text{revive}} \\cdot m_d(t)\n$$\n\nsince the normalized alive density integrates to unity: $\\int_\\Omega [f/m_a]\\,\\mathrm{d}z = 1$.\n:::\n\n#### 2.3.3. Derivation of the Internal Cloning Operator from First Principles\n\nWe now derive the continuous cloning operator $S[f]$ directly from the discrete algorithm's cloning mechanism. This derivation is essential to ensure mathematical rigor and eliminate potential inconsistencies.\n\n**Discrete Cloning Algorithm** (per timestep $\\tau$):\n\nIn the discrete Fragile Gas, at each timestep, each alive walker $i$ with state $(x_i, v_i)$ undergoes the following cloning decision:\n\n1. **Select a random companion** $j$ uniformly from all alive walkers (indices $\\{1, \\ldots, k\\}$ where $k$ is the number of alive walkers)\n2. **Compute fitness** $V(x_i, v_i)$ and $V(x_j, v_j)$ using the current alive population statistics\n3. **Clone with probability** $P_{\\text{clone}}(V_i, V_j)$ where:\n   - If cloning occurs: Walker $i$ is replaced by a noisy copy of walker $j$: $(x_i, v_i) \\leftarrow (x_j + \\xi, v_j + \\eta)$ where $\\xi \\sim \\mathcal{N}(0, \\delta^2 I)$ is spatial jitter\n   - If no cloning: Walker $i$ remains unchanged\n\n**Mean-Field Limit** (as $N \\to \\infty$):\n\nConsider the empirical density at time $t$:\n\n$$\nf_N(t, x, v) = \\frac{1}{N} \\sum_{i=1}^k \\delta(x - x_i(t), v - v_i(t))\n$$\n\nwhere $k \\le N$ is the number of alive walkers. The normalized alive density is:\n\n$$\n\\rho(t, x, v) := \\frac{f_N(t, x, v)}{m_a(t)}, \\quad m_a(t) = \\frac{k}{N}\n$$\n\n**Infinitesimal Generator for a Single Walker**:\n\nConsider walker $i$ at state $z = (x,v)$. The expected infinitesimal change in the empirical density due to cloning is:\n\n$$\n\\mathbb{E}[\\delta f_N(t, z) \\mid \\text{walker } i \\text{ at } z] = \\frac{1}{N} \\left[\\text{Rate}_{\\text{gain}}(z) - \\text{Rate}_{\\text{loss}}(z)\\right] \\tau + o(\\tau)\n$$\n\n**Loss Rate** (walker $i$ gets cloned away from $z$):\n\nWalker $i$ disappears from state $z$ if it clones from any other walker $j$. The probability per timestep is:\n\n$$\n\\begin{aligned}\nP_{\\text{loss}}(z, \\tau) &= \\sum_{j=1}^k \\frac{1}{k} P_{\\text{clone}}(V[z], V[z_j]) \\cdot \\tau + o(\\tau) \\\\\n&= \\int_{\\Omega} P_{\\text{clone}}(V[z], V[z']) \\rho(t, z') \\,\\mathrm{d}z' \\cdot \\tau + o(\\tau)\n\\end{aligned}\n$$\n\nThe loss rate is therefore:\n\n$$\n\\text{Rate}_{\\text{loss}}(z) = \\frac{1}{\\tau} \\int_{\\Omega} P_{\\text{clone}}(V[z], V[z']) \\rho(t, z') \\,\\mathrm{d}z'\n$$\n\n**Gain Rate** (walker $i$ clones to state $z$ from some other state):\n\nWalker $i$ arrives at state $z$ if:\n1. It was originally at some state $z_d = (x_d, v_d)$\n2. It selected companion at state $z_c = (x_c, v_c)$\n3. Cloning occurred: $P_{\\text{clone}}(V[z_d], V[z_c])$\n4. The jitter placed it at $z$: $Q_\\delta(z \\mid z_c)$ where $Q_\\delta(x,v \\mid x_c, v_c) = \\mathcal{N}(x; x_c, \\delta^2 I) \\delta(v - v_c)$\n\nThe probability density for this transition is:\n\n$$\n\\begin{aligned}\n\\text{Rate}_{\\text{gain}}(z) &= \\frac{1}{\\tau} \\int_{\\Omega} \\int_{\\Omega} \\rho(t, z_d) \\cdot \\rho(t, z_c) \\cdot P_{\\text{clone}}(V[z_d], V[z_c]) \\cdot Q_\\delta(z \\mid z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c\n\\end{aligned}\n$$\n\n**Combining Gain and Loss**:\n\nThe net rate of change of density at $z$ due to cloning is:\n\n$$\n\\begin{aligned}\n\\frac{\\partial f}{\\partial t}\\Big|_{\\text{clone}} &= m_a(t) \\left[\\text{Rate}_{\\text{gain}}(z) - \\text{Rate}_{\\text{loss}}(z)\\right] \\\\\n&= m_a(t) \\cdot \\frac{1}{\\tau} \\Bigg[\\int_{\\Omega} \\int_{\\Omega} \\rho(z_d) \\rho(z_c) P_{\\text{clone}}(V[z_d], V[z_c]) Q_\\delta(z \\mid z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c \\\\\n&\\quad - \\rho(z) \\int_{\\Omega} P_{\\text{clone}}(V[z], V[z']) \\rho(z') \\,\\mathrm{d}z'\\Bigg]\n\\end{aligned}\n$$\n\nSubstituting $\\rho = f/m_a$:\n\n$$\n\\begin{aligned}\n\\frac{\\partial f}{\\partial t}\\Big|_{\\text{clone}} &= \\frac{1}{\\tau} \\Bigg[\\frac{1}{m_a(t)} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P_{\\text{clone}}(V[z_d], V[z_c]) Q_\\delta(z \\mid z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c \\\\\n&\\quad - f(z) \\int_{\\Omega} P_{\\text{clone}}(V[z], V[z']) \\frac{f(z')}{m_a(t)} \\,\\mathrm{d}z'\\Bigg]\n\\end{aligned}\n$$\n\nThis is exactly the form of the cloning operator stated below.\n\n:::{prf:definition} Internal Cloning Operator (Derived Form)\n:label: def-cloning-generator\n\nThe **Internal Cloning Operator**, $S[f]$, is the mean-field limit of the discrete cloning mechanism. It is a mass-neutral, non-local operator that decomposes into sink and source terms:\n\n$$\nS[f](t, z) = S_{\\text{src}}[f](t, z) - S_{\\text{sink}}[f](t, z)\n$$\n\nwhere:\n\n*   **Sink** (mass removed when walkers at $z$ clone away):\n\n    $$\n    S_{\\text{sink}}[f](t,z) = \\frac{1}{\\tau} f(t,z) \\int_{\\Omega} P_{\\text{clone}}[f/m_a](z, z_c) \\frac{f(t,z_c)}{m_a(t)} \\,\\mathrm{d}z_c\n    $$\n\n*   **Source** (mass gained when walkers from other states clone to $z$):\n\n    $$\n    S_{\\text{src}}[f](t,z) = \\frac{1}{\\tau m_a(t)} \\int_{\\Omega} \\int_{\\Omega} f(t,z_d) f(t,z_c) P_{\\text{clone}}[f/m_a](z_d, z_c) Q_{\\delta}(z \\mid z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c\n    $$\n\nHere:\n- $P_{\\text{clone}}[f/m_a](z_d, z_c)$ is the cloning probability depending on fitness values computed from the normalized alive density $f/m_a$\n- $Q_\\delta(z \\mid z_c)$ is the jitter kernel (Gaussian in position, delta in velocity)\n- $\\tau$ is the discrete timestep, and $1/\\tau$ converts per-step probabilities to continuous rates\n\n**Key property**: The operator is mass-neutral by construction. To verify, integrate over $\\Omega$:\n\n$$\n\\begin{aligned}\n\\int_{\\Omega} S[f](t,z)\\,\\mathrm{d}z &= \\int_{\\Omega} S_{\\text{src}}[f](t,z)\\,\\mathrm{d}z - \\int_{\\Omega} S_{\\text{sink}}[f](t,z)\\,\\mathrm{d}z \\\\\n&= \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) Q_\\delta(z \\mid z_c) \\,\\mathrm{d}z\\,\\mathrm{d}z_d\\,\\mathrm{d}z_c \\\\\n&\\quad - \\frac{1}{\\tau} \\int_{\\Omega} f(z) \\int_{\\Omega} P(z, z_c) \\frac{f(z_c)}{m_a} \\,\\mathrm{d}z_c\\,\\mathrm{d}z\n\\end{aligned}\n$$\n\nUsing $\\int_\\Omega Q_\\delta(z \\mid z_c)\\,\\mathrm{d}z = 1$:\n\n$$\n= \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c - \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c = 0",
  "section_id": "## 2. The Continuous Forward Generator ($\\mathcal{L}_{\\text{FG}}$)",
  "definitions": [
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              255,
              287
            ]
          ]
        },
        "label": "def-baoab-update-rule",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.1",
        "section_name": "The Underlying Discrete-Time Integrator: BAOAB Splitting"
      },
      "full_text": ":::{prf:definition} The BAOAB Update Rule\n:label: def-baoab-update-rule\n\nFor a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\tau$ is computed via the following five steps:\n\n1.  **B-Step (Force Kick):** The velocity is updated with a half-step kick from the conservative force $F(x)$.\n\n    $$\n    v_{n+1/2}^{(1)} = v_n + \\frac{\\tau}{2m} F(x_n)\n    $$\n\n2.  **A-Step (Position Drift):** The position is updated with a half-step drift using the new velocity.\n\n    $$\n    x_{n+1/2} = x_n + \\frac{\\tau}{2} v_{n+1/2}^{(1)}\n    $$\n\n3.  **O-Step (Ornstein-Uhlenbeck):** The velocity is updated for a full timestep by exactly solving the Ornstein-Uhlenbeck process that combines friction and thermal noise. Let $u_{n+1/2} = u(x_{n+1/2})$ be the flow field evaluated at the midpoint.\n\n    $$\n    v_{n+1/2}^{(2)} = u_{n+1/2} + e^{-\\gamma_{\\mathrm{fric}}\\tau}\\left(v_{n+1/2}^{(1)} - u_{n+1/2}\\right) + \\sqrt{\\frac{\\Theta}{m}(1 - e^{-2\\gamma_{\\mathrm{fric}}\\tau})} \\cdot \\xi\n    $$\n    where $\\xi \\sim \\mathcal{N}(0, I_d)$ is a standard Gaussian random vector.\n\n4.  **A-Step (Position Drift):** The position is updated with a final half-step drift.\n\n    $$\n    x_{n+1} = x_{n+1/2} + \\frac{\\tau}{2} v_{n+1/2}^{(2)}\n    $$\n\n5.  **B-Step (Force Kick):** The velocity is updated with a final half-step kick using the force evaluated at the new position, $F(x_{n+1})$.\n\n    $$",
      "label": "def-baoab-update-rule",
      "term": "BAOAB Update Rule",
      "parameters_mentioned": [
        "x_n",
        "v_n",
        "t_n",
        "tau",
        "m",
        "F",
        "u",
        "gamma_fric",
        "Theta",
        "xi"
      ]
    },
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              306,
              330
            ]
          ]
        },
        "label": "def-kinetic-generator",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.2",
        "section_name": "The Kinetic Transport Operator ($L^\\dagger$)"
      },
      "full_text": "\n### 2.2. The Kinetic Transport Operator ($L^\\dagger$)\n\nBetween cloning events and death/revival transitions, the state of each alive walker evolves according to a continuous stochastic process. The kinetic stage of the Euclidean Gas algorithm, as defined by the BAOAB integrator, is a discrete-time approximation of a specific underdamped Langevin stochastic differential equation (SDE). This SDE governs the diffusive part of the generator.\n\n:::{prf:definition} Kinetic Transport Operator\n:label: def-kinetic-generator\n\nThe kinetic evolution of a single alive walker $i$ is governed by the underdamped Langevin SDE on the phase space $\\Omega$:\n\n$$\n\\mathrm d x_i = v_i\\,\\mathrm dt,\\qquad\n\\mathrm d v_i = \\left(\\frac{1}{m}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\,\\mathrm dt \\;+\\; \\sigma_v\\,\\mathrm dW_t\n$$\n\nwhere $W_t$ is a standard $d$-dimensional Wiener process and the parameters are those of the Euclidean Gas. This SDE is subject to **reflecting boundary conditions** on both position and velocity:\n\n1.  **Reflecting Position Boundary:** Trajectories reflect at the boundary $\\partial X_{\\text{valid}}$, ensuring no mass leaves the domain through kinetic transport. This models the pure kinetic portion of the dynamics with a simple, local boundary condition.\n2.  **Reflecting Velocity Boundary:** The dynamics are constrained to the velocity ball $V_{\\text{alg}}$. This is modeled by a reflecting or squash boundary condition at $\\|v\\|=V_{\\text{alg}}$ that mirrors the action of the velocity cap $\\psi_v$.\n\nThe infinitesimal generator for the N-particle system under this collection of independent SDEs is the **Fokker-Planck operator**, which acts on a test function $f$ on the swarm state space. For the set of alive walkers $\\mathcal{A}$, it is given by:\n\n$$\n\\boxed{\n\\mathcal{L}_{\\text{kin}} f = \\sum_{i\\in\\mathcal A}\\left[ v_i\\cdot\\nabla_{x_i} f + \\left(m^{-1}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\cdot\\nabla_{v_i} f + \\tfrac{\\sigma_v^2}{2}\\,\\Delta_{v_i} f\\right]",
      "label": "def-kinetic-generator",
      "term": "Kinetic Transport Operator",
      "parameters_mentioned": [
        "x_i",
        "v_i",
        "m",
        "F",
        "u",
        "gamma_fric",
        "sigma_v",
        "W_t",
        "Omega"
      ]
    },
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              355,
              371
            ]
          ]
        },
        "label": "def-killing-operator",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.3",
        "section_name": "The Reaction Operators (Killing, Revival, and Cloning)"
      },
      "full_text": "*   **Internal Cloning**: A mass-neutral operator that redistributes alive mass based on fitness.\n\nThis separation makes the PDE analytically tractable while faithfully representing the discrete algorithm's behavior.\n:::\n\n:::{prf:definition} Interior Killing Operator\n:label: def-killing-operator\n\nDeath is modeled by an **interior killing rate** $c: \\Omega \\to [0, \\infty)$, a smooth, non-negative function with the following properties:\n\n1.  **Safety in the interior**: $c(z) = 0$ for all $z$ in a safe subset of $\\Omega$ away from the position boundary.\n2.  **Activity near the boundary**: $c(z) > 0$ in a smooth transition layer near $\\partial X_{\\text{valid}} \\times V_{\\text{alg}}$.\n3.  **Smoothness**: $c \\in C^\\infty(\\Omega)$ to ensure regularity of the PDE solutions.\n\nThe killing operator removes mass from the alive density $f$ at a rate $c(z)f(z)$. The **total mass killed per unit time** is a functional of $f$:\n\n$$",
      "label": "def-killing-operator",
      "term": "Interior Killing Operator",
      "parameters_mentioned": [
        "c",
        "z",
        "Omega",
        "X_valid",
        "V_alg"
      ]
    },
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              373,
              398
            ]
          ]
        },
        "label": "def-revival-operator",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.3",
        "section_name": "The Reaction Operators (Killing, Revival, and Cloning)"
      },
      "full_text": "$$\n\nThis is the instantaneous rate at which alive mass transitions to dead mass.\n:::\n\n:::{prf:definition} Revival Operator\n:label: def-revival-operator\n\nRevival is modeled as a source term that re-injects mass from the dead population back into the alive population. The dead population acts as a reservoir from which revival occurs at a constant rate. Dead walkers are instantly revived by cloning from alive companions, so the spatial profile of the re-injected mass is simply **proportional to the current alive density**, mirroring the discrete algorithm's revival mechanism.\n\nThe **Revival Operator** is defined as:\n\n$$\nB[f, m_d](t, z) := \\lambda_{\\text{revive}} \\cdot m_d(t) \\cdot \\frac{f(t,z)}{m_a(t)}\n$$\n\nwhere:\n*   $\\lambda_{\\text{revive}} > 0$ is the **revival rate**, a free parameter independent of the timestep (typical values: 0.1-5)\n*   $m_d(t) = 1 - m_a(t)$ is the current dead mass\n*   $f(t,z)/m_a(t)$ is the **normalized alive density** (the probability distribution over the alive population)\n\nThis form directly translates the discrete algorithm: dead walkers select companions uniformly from the alive set and clone to their positions.\n\n**Key property**: The total mass revived per unit time is:\n\n$$",
      "label": "def-revival-operator",
      "term": "Revival Operator",
      "parameters_mentioned": [
        "lambda_revive",
        "m_d",
        "m_a",
        "f",
        "z"
      ]
    },
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              492,
              537
            ]
          ]
        },
        "label": "def-cloning-generator",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.3.3",
        "section_name": "Derivation of the Internal Cloning Operator from First Principles"
      },
      "full_text": "\\end{aligned}\n$$\n\nThis is exactly the form of the cloning operator stated below.\n\n:::{prf:definition} Internal Cloning Operator (Derived Form)\n:label: def-cloning-generator\n\nThe **Internal Cloning Operator**, $S[f]$, is the mean-field limit of the discrete cloning mechanism. It is a mass-neutral, non-local operator that decomposes into sink and source terms:\n\n$$\nS[f](t, z) = S_{\\text{src}}[f](t, z) - S_{\\text{sink}}[f](t, z)\n$$\n\nwhere:\n\n*   **Sink** (mass removed when walkers at $z$ clone away):\n\n    $$\n    S_{\\text{sink}}[f](t,z) = \\frac{1}{\\tau} f(t,z) \\int_{\\Omega} P_{\\text{clone}}[f/m_a](z, z_c) \\frac{f(t,z_c)}{m_a(t)} \\,\\mathrm{d}z_c\n    $$\n\n*   **Source** (mass gained when walkers from other states clone to $z$):\n\n    $$\n    S_{\\text{src}}[f](t,z) = \\frac{1}{\\tau m_a(t)} \\int_{\\Omega} \\int_{\\Omega} f(t,z_d) f(t,z_c) P_{\\text{clone}}[f/m_a](z_d, z_c) Q_{\\delta}(z \\mid z_c) \\,\\mathrm{d}z_d\\,\\mathrm{d}z_c\n    $$\n\nHere:\n- $P_{\\text{clone}}[f/m_a](z_d, z_c)$ is the cloning probability depending on fitness values computed from the normalized alive density $f/m_a$\n- $Q_\\delta(z \\mid z_c)$ is the jitter kernel (Gaussian in position, delta in velocity)\n- $\\tau$ is the discrete timestep, and $1/\\tau$ converts per-step probabilities to continuous rates\n\n**Key property**: The operator is mass-neutral by construction. To verify, integrate over $\\Omega$:\n\n$$\n\\begin{aligned}\n\\int_{\\Omega} S[f](t,z)\\,\\mathrm{d}z &= \\int_{\\Omega} S_{\\text{src}}[f](t,z)\\,\\mathrm{d}z - \\int_{\\Omega} S_{\\text{sink}}[f](t,z)\\,\\mathrm{d}z \\\\\n&= \\frac{1}{\\tau m_a} \\int_{\\Omega} \\int_{\\Omega} \\int_{\\Omega} f(z_d) f(z_c) P(z_d, z_c) Q_\\delta(z \\mid z_c) \\,\\mathrm{d}z\\,\\mathrm{d}z_d\\,\\mathrm{d}z_c \\\\\n&\\quad - \\frac{1}{\\tau} \\int_{\\Omega} f(z) \\int_{\\Omega} P(z, z_c) \\frac{f(z_c)}{m_a} \\,\\mathrm{d}z_c\\,\\mathrm{d}z\n\\end{aligned}\n$$\n\nUsing $\\int_\\Omega Q_\\delta(z \\mid z_c)\\,\\mathrm{d}z = 1$:\n\n$$",
      "label": "def-cloning-generator",
      "term": "Internal Cloning Operator",
      "parameters_mentioned": [
        "S",
        "f",
        "P_clone",
        "Q_delta",
        "tau",
        "m_a",
        "z_d",
        "z_c"
      ]
    }
  ],
  "theorems": [],
  "proofs": [],
  "citations": [],
  "parameters": [
    {
      "label": "param-c",
      "symbol": "c",
      "meaning": "Parameter c",
      "scope": "global",
      "full_text": "$$  Setting $C := \\max(C_1 M_f |\\mathcal{T}_\\delta|, M_v/\\delta)$ gives:  $$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              1209,
              1211
            ]
          ]
        },
        "label": "param-c",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "4.4.2",
        "section_name": "Main Theorem: Killing Rate Approximation"
      }
    },
    {
      "label": "param-x_i",
      "symbol": "x_i",
      "meaning": "Parameter x_i",
      "scope": "global",
      "full_text": "$$ \\mathrm d x_i = v_i\\,\\mathrm dt,\\qquad \\mathrm d v_i = \\left(\\frac{1}{m}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\,\\mathrm dt \\;+\\; \\sigma_v\\,\\mathrm dW_t $$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              312,
              314
            ]
          ]
        },
        "label": "param-x_i",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.2",
        "section_name": "The Kinetic Transport Operator ($L^\\dagger$)"
      }
    },
    {
      "label": "param-v_i",
      "symbol": "v_i",
      "meaning": "Parameter v_i",
      "scope": "global",
      "full_text": "$$ \\mathrm d x_i = v_i\\,\\mathrm dt,\\qquad \\mathrm d v_i = \\left(\\frac{1}{m}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\,\\mathrm dt \\;+\\; \\sigma_v\\,\\mathrm dW_t $$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              313,
              315
            ]
          ]
        },
        "label": "param-v_i",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.2",
        "section_name": "The Kinetic Transport Operator ($L^\\dagger$)"
      }
    },
    {
      "label": "param-v_alg",
      "symbol": "V_alg",
      "meaning": "Parameter V_alg",
      "scope": "global",
      "full_text": "# The Mean-Field Limit and Continuous Forward Equation**",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              1,
              1
            ]
          ]
        },
        "label": "param-v_alg",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": null,
        "section_name": null
      }
    },
    {
      "label": "param-lambda_revive",
      "symbol": "lambda_revive",
      "meaning": "Parameter lambda_revive",
      "scope": "global",
      "full_text": "where: *   $\\lambda_{\\text{revive}} > 0$ is the **revival rate**, a free parameter independent of the timestep (typical values: 0.1-5) *   $m_d(t) = 1 - m_a(t)$ is the current dead mass",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              385,
              386
            ]
          ]
        },
        "label": "param-lambda_revive",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.3",
        "section_name": "The Reaction Operators (Killing, Revival, and Cloning)"
      }
    },
    {
      "label": "param-theta",
      "symbol": "Theta",
      "meaning": "Temperature parameter",
      "scope": "global",
      "full_text": "*   **(H2)** The reward potential $R_{\\text{pos}}$ is $C^2$, making the force field $F$ globally Lipschitz. *   **(H3)** The flow field $u$ is $C^1$, and all physical parameters ($m, \\gamma_{\\text{fric}}, \\Theta, \\sigma_x$) are finite and positive. *   **(H4)** All algorithmic functions (e.g., the rescale function, companion selection) are measurable and satisfy the continuity properties established in the abstract framework.",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              741,
              742
            ]
          ]
        },
        "label": "param-theta",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "4.2",
        "section_name": "Well-Posedness and Future Work"
      }
    },
    {
      "label": "param-m",
      "symbol": "m",
      "meaning": "Mass parameter",
      "scope": "global",
      "full_text": "The first conceptual shift is in how we represent the state of the system. In the N-particle framework, the state is a single point in the high-dimensional configuration space $\\Sigma_N$. In the mean-field limit, we shift our perspective to that of a single, representative particle. The state is no longer a collection of individual points but a continuous probability \"cloud\" on the single-particle phase space $\\Omega$. The mathematical bridge enabling this transition is the replacement of discrete empirical averages with continuous integrals against this probability density. This principle forms the core of our translation dictionary. For example, the empirical average of a quantity $Q(w_i)$ over $k$ alive walkers, $\\bar{Q} = \\frac{1}{k} \\sum_{i \\in \\mathcal{A}} Q(w_i)$, becomes the expected value integral, $\\mathbb{E}[Q] = \\int_{\\Omega} Q(z) f(t,z) \\, dz$.",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              22,
              23
            ]
          ]
        },
        "label": "param-m",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "1",
        "section_name": "Foundations of the Mean-Field Model"
      }
    },
    {
      "label": "param-z_d",
      "symbol": "z_d",
      "meaning": "Parameter z_d",
      "scope": "global",
      "full_text": "Walker $i$ arrives at state $z$ if: 1. It was originally at some state $z_d = (x_d, v_d)$ 2. It selected companion at state $z_c = (x_c, v_c)$ 3. Cloning occurred: $P_{\\text{clone}}(V[z_d], V[z_c])$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              456,
              458
            ]
          ]
        },
        "label": "param-z_d",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.3.3",
        "section_name": "Derivation of the Internal Cloning Operator from First Principles"
      }
    },
    {
      "label": "param-xi",
      "symbol": "xi",
      "meaning": "Parameter xi",
      "scope": "global",
      "full_text": "$$ where $\\xi \\sim \\mathcal{N}(0, I_d)$ is a standard Gaussian random vector.",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              274,
              275
            ]
          ]
        },
        "label": "param-xi",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.1",
        "section_name": "The Underlying Discrete-Time Integrator: BAOAB Splitting"
      }
    },
    {
      "label": "param-w_t",
      "symbol": "W_t",
      "meaning": "Parameter W_t",
      "scope": "global",
      "full_text": "$$ where $W_t$ is a standard Wiener process and all parameters are as defined in the Euclidean Gas specification. The BAOAB method splits this SDE into analytically solvable parts and composes them symmetrically.",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              253,
              254
            ]
          ]
        },
        "label": "param-w_t",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.1",
        "section_name": "The Underlying Discrete-Time Integrator: BAOAB Splitting"
      }
    },
    {
      "label": "param-z",
      "symbol": "z",
      "meaning": "Parameter z",
      "scope": "global",
      "full_text": "$$  A key property of this operator with reflecting boundary conditions is that it is **mass-conservative**: when integrated over the domain, the total flux through the boundary vanishes, so $\\int_\\Omega L^\\dagger f \\,\\mathrm{d}z = 0$. :::",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              329,
              331
            ]
          ]
        },
        "label": "param-z",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.2",
        "section_name": "The Kinetic Transport Operator ($L^\\dagger$)"
      }
    },
    {
      "label": "param-u",
      "symbol": "u",
      "meaning": "Parameter u",
      "scope": "global",
      "full_text": "The first conceptual shift is in how we represent the state of the system. In the N-particle framework, the state is a single point in the high-dimensional configuration space $\\Sigma_N$. In the mean-field limit, we shift our perspective to that of a single, representative particle. The state is no longer a collection of individual points but a continuous probability \"cloud\" on the single-particle phase space $\\Omega$. The mathematical bridge enabling this transition is the replacement of discrete empirical averages with continuous integrals against this probability density. This principle forms the core of our translation dictionary. For example, the empirical average of a quantity $Q(w_i)$ over $k$ alive walkers, $\\bar{Q} = \\frac{1}{k} \\sum_{i \\in \\mathcal{A}} Q(w_i)$, becomes the expected value integral, $\\mathbb{E}[Q] = \\int_{\\Omega} Q(z) f(t,z) \\, dz$.",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              22,
              23
            ]
          ]
        },
        "label": "param-u",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "1",
        "section_name": "Foundations of the Mean-Field Model"
      }
    },
    {
      "label": "param-t_n",
      "symbol": "t_n",
      "meaning": "Parameter t_n",
      "scope": "global",
      "full_text": "For a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\tau$ is computed via the following five steps:",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              258,
              259
            ]
          ]
        },
        "label": "param-t_n",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.1",
        "section_name": "The Underlying Discrete-Time Integrator: BAOAB Splitting"
      }
    },
    {
      "label": "param-m_a",
      "symbol": "m_a",
      "meaning": "Parameter m_a",
      "scope": "global",
      "full_text": "**Positivity Requirement:** The definitions of the statistical moments rely on the normalization by the alive mass $m_a(t)$. These functionals are well-defined for all $t$ such that $m_a(t) > 0$. The global well-posedness of the PDE system requires regularizing the behavior as $m_a(t) \\to 0$.  **Cemetery State ($m_a = 0$) and the Regularization Assumption:**  In the discrete N-particle algorithm, there exists an absorbing \"cemetery state\" where all $N$ walkers have died ($k = 0$). While this state has exponentially low probability for any finite N and initial condition with $k_0 > 0$, it cannot be completely excluded.",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              151,
              153
            ]
          ]
        },
        "label": "param-m_a",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "1.2",
        "section_name": "Mean-Field Measurement Pipeline"
      }
    },
    {
      "label": "param-z_c",
      "symbol": "z_c",
      "meaning": "Parameter z_c",
      "scope": "global",
      "full_text": "Walker $i$ arrives at state $z$ if: 1. It was originally at some state $z_d = (x_d, v_d)$ 2. It selected companion at state $z_c = (x_c, v_c)$ 3. Cloning occurred: $P_{\\text{clone}}(V[z_d], V[z_c])$ 4. The jitter placed it at $z$: $Q_\\delta(z \\mid z_c)$ where $Q_\\delta(x,v \\mid x_c, v_c) = \\mathcal{N}(x; x_c, \\delta^2 I) \\delta(v - v_c)$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              457,
              459
            ]
          ]
        },
        "label": "param-z_c",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.3.3",
        "section_name": "Derivation of the Internal Cloning Operator from First Principles"
      }
    },
    {
      "label": "param-sigma_v",
      "symbol": "sigma_v",
      "meaning": "Parameter sigma_v",
      "scope": "global",
      "full_text": "$$  where $\\sigma_v := \\sqrt{\\Theta/m}$, $\\xi \\sim \\mathcal{N}(0, I_d)$, and $v_{n+1/2}^{(1)} = v + \\frac{\\tau}{2m}F(x)$.  For small $\\tau$, using $e^{-\\gamma\\tau} = 1 - \\gamma\\tau + O(\\tau^2)$ and $1 - e^{-2\\gamma\\tau} = 2\\gamma\\tau + O(\\tau^2)$:",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              887,
              889
            ]
          ]
        },
        "label": "param-sigma_v",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "4.4.2",
        "section_name": "Main Theorem: Killing Rate Approximation"
      }
    },
    {
      "label": "param-m_d",
      "symbol": "m_d",
      "meaning": "Parameter m_d",
      "scope": "global",
      "full_text": "*   **Coupled Reaction-Diffusion Structure:** The system has the form of a coupled reaction-diffusion system. The PDE for $f$ has the form of a reaction-diffusion PDE with non-local reaction terms. The kinetic operator $L^\\dagger$ provides the diffusion (with reflecting boundaries), while the killing $-c(z)f$, revival $B[f, m_d]$, and cloning $S[f]$ terms provide the reactions. The ODE for $m_d$ describes the evolution of the dead reservoir. This structure is well-studied in PDE theory and enables the application of standard analytical techniques for coupled systems.  *   **Total Mass Conservation with Dynamic Equilibrium:** As proven in Theorem 3.3, the coupled system conserves the total population $m_a(t) + m_d(t) = 1$. However, unlike a model with instantaneous revival, the alive and dead masses can exchange and evolve towards a non-trivial **stationary state** where $\\mathrm{d}/\\mathrm{d}t\\, m_a = 0$ and $\\mathrm{d}/\\mathrm{d}t\\, m_d = 0$. At this stationary state, the killing and revival rates are balanced: $k_{\\text{killed}}[f_\\infty] = \\lambda_{\\text{revive}} m_{d,\\infty}$. This faithfully represents the discrete algorithm's behavior where the number of alive walkers $k$ fluctuates and converges to a stationary distribution.  ### 4.2. Well-Posedness and Future Work",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              729,
              731
            ]
          ]
        },
        "label": "param-m_d",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "4.1",
        "section_name": "Key Properties of the Coupled System"
      }
    },
    {
      "label": "param-f",
      "symbol": "F",
      "meaning": "Parameter F",
      "scope": "global",
      "full_text": "$$ \\boxed{ \\mathcal{L}_{\\text{kin}} f = \\sum_{i\\in\\mathcal A}\\left[ v_i\\cdot\\nabla_{x_i} f + \\left(m^{-1}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\cdot\\nabla_{v_i} f + \\tfrac{\\sigma_v^2}{2}\\,\\Delta_{v_i} f\\right] } $$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              325,
              327
            ]
          ]
        },
        "label": "param-f",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.2",
        "section_name": "The Kinetic Transport Operator ($L^\\dagger$)"
      }
    },
    {
      "label": "param-x_n",
      "symbol": "x_n",
      "meaning": "Parameter x_n",
      "scope": "global",
      "full_text": "For a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\tau$ is computed via the following five steps:",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              258,
              259
            ]
          ]
        },
        "label": "param-x_n",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.1",
        "section_name": "The Underlying Discrete-Time Integrator: BAOAB Splitting"
      }
    },
    {
      "label": "param-f",
      "symbol": "f",
      "meaning": "Parameter f",
      "scope": "global",
      "full_text": "$$ \\boxed{ \\mathcal{L}_{\\text{kin}} f = \\sum_{i\\in\\mathcal A}\\left[ v_i\\cdot\\nabla_{x_i} f + \\left(m^{-1}F(x_i)-\\gamma_{\\mathrm{fric}}(v_i-u(x_i))\\right)\\cdot\\nabla_{v_i} f + \\tfrac{\\sigma_v^2}{2}\\,\\Delta_{v_i} f\\right] } $$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              325,
              327
            ]
          ]
        },
        "label": "param-f",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.2",
        "section_name": "The Kinetic Transport Operator ($L^\\dagger$)"
      }
    },
    {
      "label": "param-p_clone",
      "symbol": "P_clone",
      "meaning": "Parameter P_clone",
      "scope": "global",
      "full_text": "# The Mean-Field Limit and Continuous Forward Equation**",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              1,
              1
            ]
          ]
        },
        "label": "param-p_clone",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": null,
        "section_name": null
      }
    },
    {
      "label": "param-v_n",
      "symbol": "v_n",
      "meaning": "Parameter v_n",
      "scope": "global",
      "full_text": "$$  where $C_\\sigma = \\frac{1}{4}\\sigma_v^2 \\cdot 2\\gamma = \\frac{\\gamma\\Theta}{2m}$ and $v_n := v \\cdot n_x(x)$ is the outward normal velocity.  The exit probability is:",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              924,
              926
            ]
          ]
        },
        "label": "param-v_n",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "4.4.2",
        "section_name": "Main Theorem: Killing Rate Approximation"
      }
    },
    {
      "label": "param-x_valid",
      "symbol": "X_valid",
      "meaning": "Parameter X_valid",
      "scope": "global",
      "full_text": "# The Mean-Field Limit and Continuous Forward Equation**",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              1,
              1
            ]
          ]
        },
        "label": "param-x_valid",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": null,
        "section_name": null
      }
    },
    {
      "label": "param-s",
      "symbol": "S",
      "meaning": "Parameter S",
      "scope": "global",
      "full_text": "Let $f(t, \\cdot)$ be the phase-space density at time $t$, with total alive mass $m_a(t) = \\int_\\Omega f(t,z)\\,\\mathrm{d}z$. The statistical moments required for the standardization pipeline are defined as the following **functionals** of $f$. The notation $\\mu[f]$ emphasizes that these are numbers that depend on the entire *shape* of the function $f$.  The moments are computed with respect to the **normalized density of the alive population**, which is $f(t,z) / m_a(t)$. This normalization is critical for ensuring the mean-field model is a faithful limit of the N-particle system, where statistics are computed by averaging over the $k$ alive walkers.  *   **Reward Moments:** The mean reward, $\\mu_R[f]$, is computed as the expected value over the normalized alive population:",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              122,
              124
            ]
          ]
        },
        "label": "param-s",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "1.2",
        "section_name": "Mean-Field Measurement Pipeline"
      }
    },
    {
      "label": "param-omega",
      "symbol": "Omega",
      "meaning": "Parameter Omega",
      "scope": "global",
      "full_text": "$$ \\Omega := X_{\\text{valid}} \\times V_{\\text{alg}} $$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              48,
              50
            ]
          ]
        },
        "label": "param-omega",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "1.1",
        "section_name": "Phase Space and Probability Density"
      }
    },
    {
      "label": "param-gamma_fric",
      "symbol": "gamma_fric",
      "meaning": "Friction coefficient",
      "scope": "global",
      "full_text": "*   **(H2)** The reward potential $R_{\\text{pos}}$ is $C^2$, making the force field $F$ globally Lipschitz. *   **(H3)** The flow field $u$ is $C^1$, and all physical parameters ($m, \\gamma_{\\text{fric}}, \\Theta, \\sigma_x$) are finite and positive. *   **(H4)** All algorithmic functions (e.g., the rescale function, companion selection) are measurable and satisfy the continuity properties established in the abstract framework.",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              741,
              742
            ]
          ]
        },
        "label": "param-gamma_fric",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "4.2",
        "section_name": "Well-Posedness and Future Work"
      }
    },
    {
      "label": "param-q_delta",
      "symbol": "Q_delta",
      "meaning": "Parameter Q_delta",
      "scope": "global",
      "full_text": "# The Mean-Field Limit and Continuous Forward Equation**",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              1,
              1
            ]
          ]
        },
        "label": "param-q_delta",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": null,
        "section_name": null
      }
    },
    {
      "label": "param-tau",
      "symbol": "tau",
      "meaning": "Time step size",
      "scope": "global",
      "full_text": "$$  We are interested in the regime where $\\tau \\sim \\tau_* := d(x)/v_n$ (near the ballistic crossing time). Let $\\tau = \\tau_*(1 + \\epsilon)$ where $\\epsilon$ is a small parameter. Then:  $$",
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              988,
              990
            ]
          ]
        },
        "label": "param-tau",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "4.4.2",
        "section_name": "Main Theorem: Killing Rate Approximation"
      }
    }
  ],
  "remarks": [
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              289,
              300
            ]
          ]
        },
        "label": "remark-fidelity-generator",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.1",
        "section_name": "The Underlying Discrete-Time Integrator: BAOAB Splitting"
      },
      "full_text": "    $$\n\nAn optional velocity cap, $\\psi_v$, is applied after the final B-step to ensure $v_{n+1} \\in V_{\\text{alg}}$, maintaining perfect fidelity with the discrete algorithm's definition.\n:::\n\n:::{admonition} Fidelity of the Continuous Generator\n:class: important\n:label: remark-fidelity-generator\n:open:\nThis explicit definition of the BAOAB integrator provides the rigorous foundation for the continuous generator that follows. Each part of the BAOAB scheme corresponds directly to a term in the Fokker-Planck operator that we will derive in the next section:\n\n*   The **B-steps** (force kicks) and the drift part of the **O-step** correspond to the advection in velocity space, represented by the term $\\nabla_v \\cdot (A_v f)$.",
      "label": "remark-fidelity-generator",
      "remark_type": "note"
    },
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              332,
              336
            ]
          ]
        },
        "label": "remark-separation-kinetic-death",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.2",
        "section_name": "The Kinetic Transport Operator ($L^\\dagger$)"
      },
      "full_text": "$$\n\nA key property of this operator with reflecting boundary conditions is that it is **mass-conservative**: when integrated over the domain, the total flux through the boundary vanishes, so $\\int_\\Omega L^\\dagger f \\,\\mathrm{d}z = 0$.\n:::",
      "label": "remark-separation-kinetic-death",
      "remark_type": "note"
    },
    {
      "source": {
        "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
        "line_range": {
          "lines": [
            [
              342,
              353
            ]
          ]
        },
        "label": "remark-separation-death-revival-cloning",
        "volume": "1_euclidean_gas",
        "article_id": "07_mean_field",
        "section": "2.3",
        "section_name": "The Reaction Operators (Killing, Revival, and Cloning)"
      },
      "full_text": "\n### 2.3. The Reaction Operators (Killing, Revival, and Cloning)\n\nIn the two-population model, we explicitly separate the three distinct physical processes that modify the alive population: (1) **death** of walkers near the boundary, (2) **revival** of dead walkers back into the alive population, and (3) **internal cloning** that redistributes mass within the alive population. This section defines the three corresponding operators as \"reaction\" terms in the PDE.\n\n:::{admonition} Separation of Death, Revival, and Internal Dynamics\n:class: important\n:label: remark-separation-death-revival-cloning\n:open:\nThe key innovation of this formulation is the explicit decoupling of boundary death from the revival and cloning mechanisms. In the discrete algorithm, a walker dies when it leaves $X_{\\text{valid}}$, setting its status to 0. In the continuous model, we represent this as:\n\n*   **Interior Killing**: A smooth killing rate $c(z)$ that is zero in the interior and positive near the boundary, removing mass from $f$ at rate $c(z)f(z)$.",
      "label": "remark-separation-death-revival-cloning",
      "remark_type": "observation"
    }
  ],
  "axioms": [],
  "assumptions": [],
  "_extraction_errors": [
    {
      "error": "Attempt 1 failed: AdapterParseError: LM response cannot be serialized to a JSON object.\n\nAdapter JSONAdapter failed to parse the LM response. \n\nLM Response: {\n  \"next_thought\": \"The previous tool call to `compare_labels_tool` failed due to an invalid escape sequence in the JSON string provided for `extraction_json`. This usually happens when LaTeX math content contains unescaped backslashes that are interpreted as JSON string escapes. I need to re-examine the extracted text, especially the math parts, and ensure all backslashes are properly escaped for the JSON string format (i.e., `\\\\` instead of `\\\\`).\\n\\nLooking at the error: `Label comparison error: Invalid \\\\escape: line 6 column 16 (char 88)`. This points to an issue within the JSON string itself, likely in the text content of one of the entities.\\n\\nI will re-check the extraction JSON, focusing on escaping in the math content, particularly for labels like `sde-langevin-particle` and `eq-L_kin`.\\n\\nIn the original extraction attempt:\\n- `sde-langevin-particle`: `\\\\mathrm d X_t = V_t\\\\,\\\\mathrm dt,\\\\ [2pt]\\\\n\\\\mathrm d V_t = \\\\left(\\\\frac{1}{m}F(X_t) - \\\\gamma_{\\\\mathrm{fric}}\\\\bigl(V_t-u(X_t)\\\\bigr)\\\\right)\\\\mathrm dt\\\\n\\\\;+\\\\; \\\\sqrt{2\\\\gamma_{\\\\mathrm{fric}}\\\\Theta/m}\\\\,\\\\mathrm dW_t,`\\n- `eq-L_kin`: `\\\\mathcal{L}_{\\\\text{kin}} f = \\\\sum_{i\\\\in\\\\mathcal A}\\\\left[ v_i\\\\cdot\\\\nabla_{x_i} f + \\\\left(m^{-1}F(x_i)-\\\\gamma_{\\\\mathrm{fric}}(v_i-u(x_i))\\\\right)\\\\cdot\\\\nabla_{v_i} f + \\\\tfrac{\\\\sigma_v^2}{2}\\\\,\\\\Delta_{v_i} f\\\\right]`\\n\\nI need to ensure all single backslashes in the math are doubled (`\\\\` -> `\\\\\\\\`).\\n\\nLet's correct the escaping for the next attempt.\\n\\nCorrected `sde-langevin-particle` text:\\n`\\\"\\\\\\\\begin{cases}\\\\\\\\n\\\\\\\\mathrm d X_t = V_t\\\\\\\\,\\\\mathrm dt,\\\\\\\\ [2pt]\\\\\\\\n\\\\\\\\mathrm d V_t = \\\\\\\\left(\\\\\\\\frac{1}{m}F(X_t) - \\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\bigl(V_t-u(X_t)\\\\\\\\bigr)\\\\\\\\right)\\\\\\\\mathrm dt\\\\\\\\n\\\\\\\\;+\\\\\\\\; \\\\\\\\sqrt{2\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\Theta/m}\\\\\\\\mathrm dW_t,\\\\\\\\n\\\\\\\\end{cases}\\\"`\\n\\nCorrected `eq-L_kin` text:\\n`\\\"\\\\\\\\mathcal{L}_{\\\\\\\\text{kin}} f = \\\\\\\\sum_{i\\\\\\\\in\\\\\\\\mathcal A}\\\\\\\\left[ v_i\\\\\\\\cdot\\\\\\\\nabla_{x_i} f + \\\\\\\\left(m^{-1}F(x_i)-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}(v_i-u(x_i))\\\\\\\\right)\\\\\\\\cdot\\\\\\\\nabla_{v_i} f + \\\\\\\\tfrac{\\\\\\\\sigma_v^2}{2}\\\\\\\\cdot\\\\\\\\Delta_{v_i} f\\\\\\\\right]\\\"` (I noticed I missed escaping some characters in the previous attempt's text representation, I will be more careful now).\\n\\nI will regenerate the full extraction JSON with double backslashes for all LaTeX commands.\",\n  \"next_tool_name\": \"compare_labels_tool\",\n  \"next_tool_args\": {\n    \"extraction_json\": \"{\\n  \\\"chapter_number\\\": 3,\\n  \\\"entities\\\": [\\n    {\\n      \\\"label\\\": \\\"eq-L_FG\\\",\\n      \\\"text\\\": \\\"\\\\\\\\mathcal{L}_{\\\\\\\\text{FG}} := \\\\\\\\mathcal{L}_{\\\\text{kin}} + \\\\\\\\mathcal{L}_{\\\\text{clone}}\\\",\\n      \\\"line_numbers\\\": [237]\\n    },\\n    {\\n      \\\"label\\\": \\\"def-baoab-update-rule\\\",\\n      \\\"text\\\": \\\":::prf:definition} The BAOAB Update Rule\\\\n:label: def-baoab-update-rule\\\\n\\\\nFor a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\\\\\\\tau$ is computed via the following five steps:\\\",\\n      \\\"line_numbers\\\": [255, 258]\\n    },\\n    {\\n      \\\"label\\\": \\\"sde-langevin-particle\\\",\\n      \\\"text\\\": \\\"\\\\\\\\begin{cases}\\\\\\\\n\\\\\\\\mathrm d X_t = V_t\\\\\\\\,\\\\mathrm dt,\\\\\\\\ [2pt]\\\\\\\\n\\\\\\\\mathrm d V_t = \\\\\\\\left(\\\\\\\\frac{1}{m}F(X_t) - \\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\bigl(V_t-u(X_t)\\\\\\\\bigr)\\\\\\\\right)\\\\\\\\mathrm dt\\\\\\\\n\\\\\\\\;+\\\\\\\\; \\\\\\\\sqrt{2\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\Theta/m}\\\\\\\\mathrm dW_t,\\\\\\\\n\\\\\\\\end{cases}\\\",\\n      \\\"line_numbers\\\": [247, 251]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-v1\\\",\\n      \\\"text\\\": \\\"v_{n+1/2}^{(1)} = v_n + \\\\\\\\frac{\\\\\\\\tau}{2m} F(x_n)\\\",\\n      \\\"line_numbers\\\": [262]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-x1\\\",\\n      \\\"text\\\": \\\"x_{n+1/2} = x_n + \\\\\\\\frac{\\\\\\\\tau}{2} v_{n+1/2}^{(1)}\\\",\\n      \\\"line_numbers\\\": [267]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-v2\\\",\\n      \\\"text\\\": \\\"v_{n+1/2}^{(2)} = u_{n+1/2} + e^{-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\tau}\\\\\\\\left(v_{n+1/2}^{(1)} - u_{n+1/2}\\\\\\\\right) + \\\\\\\\sqrt{\\\\\\\\frac{\\\\\\\\Theta}{m}(1 - e^{-2\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\tau})} \\\\\\\\cdot \\\\\\\\xi\\\",\\n      \\\"line_numbers\\\": [272]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-x2\\\",\\n      \\\"text\\\": \\\"x_{n+1} = x_{n+1/2} + \\\\\\\\frac{\\\\\\\\tau}{2} v_{n+1/2}^{(2)}\\\",\\n      \\\"line_numbers\\\": [278]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-v_final\\\",\\n      \\\"text\\\": \\\"v_{n+1} = v_{n+1/2}^{(2)} + \\\\\\\\frac{\\\\\\\\tau}{2m} F(x_{n+1})\\\",\\n      \\\"line_numbers\\\": [283]\\n    },\\n    {\\n      \\\"label\\\": \\\"def-kinetic-generator\\\",\\n      \\\"text\\\": \\\":::prf:definition} Kinetic Transport Operator\\\\n:label: def-kinetic-generator\\\\n\\\\nThe kinetic evolution of a single alive walker $i$ is governed by the underdamped Langevin SDE on the phase space $\\\\\\\\Omega$:\\\",\\n      \\\"line_numbers\\\": [306, 309]\\n    },\\n    {\\n      \\\"label\\\": \\\"sde-kinetic-evolution\\\",\\n      \\\"text\\\": \\\"\\\\\\\\mathrm d x_i = v_i\\\\\\\\,\\\\mathrm dt,\\\\\\\\qquad\\\\\\\\n\\\\\\\\mathrm d v_i = \\\\\\\\left(\\\\\\\\frac{1}{m}F(x_i)-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}(v_i-u(x_i))\\\\\\\\right)\\\\\\\\mathrm dt \\\\\\\\;+\\\\; \\\\\\\\sigma_v\\\\\\\\mathrm dW_t\\\",\\n      \\\"line_numbers\\\": [312, 314]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-L_kin\\\",\\n      \\\"text\\\": \\\"\\\\\\\\mathcal{L}_{\\\\text{kin}} f = \\\\\\\\sum_{i\\\\\\\\in\\\\\\\\mathcal A}\\\\\\\\left[ v_i\\\\\\\\cdot\\\\\\\\nabla_{x_i} f + \\\\\\\\left(m^{-1}F(x_i)-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}(v_i-u(x_i))\\\\\\\\right)\\\\\\\\cdot\\\\\\\\nabla_{v_i} f + \\\\\\\\tfrac{\\\\\\\\sigma_v^2}{2}\\\\\\\\cdot\\\\\\\\Delta_{v_i} f\\\\\\\\right]\\\",\\n      \\\"line_numbers\\\": [325]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-k_killed\\\",\\n      \\\"text\\\": \\\"k_{\\\\\\\\text{killed}}[f](t) := \\\\\\\\int_{\\\\\\\\Omega} c(z) f(t,z) \\\\\\\\, \\\\\\\\mathrm{d}z\\\",\\n      \\\"line_numbers\\\": [367]\\n    },\\n    {\\n      \\\"label\\\": \\\"def-revival-operator\\\",\\n      \\\"text\\\": \\\":::prf:definition} Revival Operator\\\\n:label: def-revival-operator\\\\n\\\\nRevival is modeled as a source term that re-injects mass from the dead population back into the alive population.\\\",\\n      \\\"line_numbers\\\": [373, 376]\\n    } \n\nExpected to find output fields in the LM response: [next_thought, next_tool_name, next_tool_args] \n\n",
      "value": {
        "attempt": 1,
        "max_retries": 3,
        "exception_type": "AdapterParseError",
        "exception_message": "LM response cannot be serialized to a JSON object.\n\nAdapter JSONAdapter failed to parse the LM response. \n\nLM Response: {\n  \"next_thought\": \"The previous tool call to `compare_labels_tool` failed due to an invalid escape sequence in the JSON string provided for `extraction_json`. This usually happens when LaTeX math content contains unescaped backslashes that are interpreted as JSON string escapes. I need to re-examine the extracted text, especially the math parts, and ensure all backslashes are properly escaped for the JSON string format (i.e., `\\\\` instead of `\\\\`).\\n\\nLooking at the error: `Label comparison error: Invalid \\\\escape: line 6 column 16 (char 88)`. This points to an issue within the JSON string itself, likely in the text content of one of the entities.\\n\\nI will re-check the extraction JSON, focusing on escaping in the math content, particularly for labels like `sde-langevin-particle` and `eq-L_kin`.\\n\\nIn the original extraction attempt:\\n- `sde-langevin-particle`: `\\\\mathrm d X_t = V_t\\\\,\\\\mathrm dt,\\\\ [2pt]\\\\n\\\\mathrm d V_t = \\\\left(\\\\frac{1}{m}F(X_t) - \\\\gamma_{\\\\mathrm{fric}}\\\\bigl(V_t-u(X_t)\\\\bigr)\\\\right)\\\\mathrm dt\\\\n\\\\;+\\\\; \\\\sqrt{2\\\\gamma_{\\\\mathrm{fric}}\\\\Theta/m}\\\\,\\\\mathrm dW_t,`\\n- `eq-L_kin`: `\\\\mathcal{L}_{\\\\text{kin}} f = \\\\sum_{i\\\\in\\\\mathcal A}\\\\left[ v_i\\\\cdot\\\\nabla_{x_i} f + \\\\left(m^{-1}F(x_i)-\\\\gamma_{\\\\mathrm{fric}}(v_i-u(x_i))\\\\right)\\\\cdot\\\\nabla_{v_i} f + \\\\tfrac{\\\\sigma_v^2}{2}\\\\,\\\\Delta_{v_i} f\\\\right]`\\n\\nI need to ensure all single backslashes in the math are doubled (`\\\\` -> `\\\\\\\\`).\\n\\nLet's correct the escaping for the next attempt.\\n\\nCorrected `sde-langevin-particle` text:\\n`\\\"\\\\\\\\begin{cases}\\\\\\\\n\\\\\\\\mathrm d X_t = V_t\\\\\\\\,\\\\mathrm dt,\\\\\\\\ [2pt]\\\\\\\\n\\\\\\\\mathrm d V_t = \\\\\\\\left(\\\\\\\\frac{1}{m}F(X_t) - \\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\bigl(V_t-u(X_t)\\\\\\\\bigr)\\\\\\\\right)\\\\\\\\mathrm dt\\\\\\\\n\\\\\\\\;+\\\\\\\\; \\\\\\\\sqrt{2\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\Theta/m}\\\\\\\\mathrm dW_t,\\\\\\\\n\\\\\\\\end{cases}\\\"`\\n\\nCorrected `eq-L_kin` text:\\n`\\\"\\\\\\\\mathcal{L}_{\\\\\\\\text{kin}} f = \\\\\\\\sum_{i\\\\\\\\in\\\\\\\\mathcal A}\\\\\\\\left[ v_i\\\\\\\\cdot\\\\\\\\nabla_{x_i} f + \\\\\\\\left(m^{-1}F(x_i)-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}(v_i-u(x_i))\\\\\\\\right)\\\\\\\\cdot\\\\\\\\nabla_{v_i} f + \\\\\\\\tfrac{\\\\\\\\sigma_v^2}{2}\\\\\\\\cdot\\\\\\\\Delta_{v_i} f\\\\\\\\right]\\\"` (I noticed I missed escaping some characters in the previous attempt's text representation, I will be more careful now).\\n\\nI will regenerate the full extraction JSON with double backslashes for all LaTeX commands.\",\n  \"next_tool_name\": \"compare_labels_tool\",\n  \"next_tool_args\": {\n    \"extraction_json\": \"{\\n  \\\"chapter_number\\\": 3,\\n  \\\"entities\\\": [\\n    {\\n      \\\"label\\\": \\\"eq-L_FG\\\",\\n      \\\"text\\\": \\\"\\\\\\\\mathcal{L}_{\\\\\\\\text{FG}} := \\\\\\\\mathcal{L}_{\\\\text{kin}} + \\\\\\\\mathcal{L}_{\\\\text{clone}}\\\",\\n      \\\"line_numbers\\\": [237]\\n    },\\n    {\\n      \\\"label\\\": \\\"def-baoab-update-rule\\\",\\n      \\\"text\\\": \\\":::prf:definition} The BAOAB Update Rule\\\\n:label: def-baoab-update-rule\\\\n\\\\nFor a single particle with state $(x_n, v_n)$ at time $t_n$, the state $(x_{n+1}, v_{n+1})$ at time $t_{n+1} = t_n + \\\\\\\\tau$ is computed via the following five steps:\\\",\\n      \\\"line_numbers\\\": [255, 258]\\n    },\\n    {\\n      \\\"label\\\": \\\"sde-langevin-particle\\\",\\n      \\\"text\\\": \\\"\\\\\\\\begin{cases}\\\\\\\\n\\\\\\\\mathrm d X_t = V_t\\\\\\\\,\\\\mathrm dt,\\\\\\\\ [2pt]\\\\\\\\n\\\\\\\\mathrm d V_t = \\\\\\\\left(\\\\\\\\frac{1}{m}F(X_t) - \\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\bigl(V_t-u(X_t)\\\\\\\\bigr)\\\\\\\\right)\\\\\\\\mathrm dt\\\\\\\\n\\\\\\\\;+\\\\\\\\; \\\\\\\\sqrt{2\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\Theta/m}\\\\\\\\mathrm dW_t,\\\\\\\\n\\\\\\\\end{cases}\\\",\\n      \\\"line_numbers\\\": [247, 251]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-v1\\\",\\n      \\\"text\\\": \\\"v_{n+1/2}^{(1)} = v_n + \\\\\\\\frac{\\\\\\\\tau}{2m} F(x_n)\\\",\\n      \\\"line_numbers\\\": [262]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-x1\\\",\\n      \\\"text\\\": \\\"x_{n+1/2} = x_n + \\\\\\\\frac{\\\\\\\\tau}{2} v_{n+1/2}^{(1)}\\\",\\n      \\\"line_numbers\\\": [267]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-v2\\\",\\n      \\\"text\\\": \\\"v_{n+1/2}^{(2)} = u_{n+1/2} + e^{-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\tau}\\\\\\\\left(v_{n+1/2}^{(1)} - u_{n+1/2}\\\\\\\\right) + \\\\\\\\sqrt{\\\\\\\\frac{\\\\\\\\Theta}{m}(1 - e^{-2\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}\\\\\\\\tau})} \\\\\\\\cdot \\\\\\\\xi\\\",\\n      \\\"line_numbers\\\": [272]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-x2\\\",\\n      \\\"text\\\": \\\"x_{n+1} = x_{n+1/2} + \\\\\\\\frac{\\\\\\\\tau}{2} v_{n+1/2}^{(2)}\\\",\\n      \\\"line_numbers\\\": [278]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-baoab-v_final\\\",\\n      \\\"text\\\": \\\"v_{n+1} = v_{n+1/2}^{(2)} + \\\\\\\\frac{\\\\\\\\tau}{2m} F(x_{n+1})\\\",\\n      \\\"line_numbers\\\": [283]\\n    },\\n    {\\n      \\\"label\\\": \\\"def-kinetic-generator\\\",\\n      \\\"text\\\": \\\":::prf:definition} Kinetic Transport Operator\\\\n:label: def-kinetic-generator\\\\n\\\\nThe kinetic evolution of a single alive walker $i$ is governed by the underdamped Langevin SDE on the phase space $\\\\\\\\Omega$:\\\",\\n      \\\"line_numbers\\\": [306, 309]\\n    },\\n    {\\n      \\\"label\\\": \\\"sde-kinetic-evolution\\\",\\n      \\\"text\\\": \\\"\\\\\\\\mathrm d x_i = v_i\\\\\\\\,\\\\mathrm dt,\\\\\\\\qquad\\\\\\\\n\\\\\\\\mathrm d v_i = \\\\\\\\left(\\\\\\\\frac{1}{m}F(x_i)-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}(v_i-u(x_i))\\\\\\\\right)\\\\\\\\mathrm dt \\\\\\\\;+\\\\; \\\\\\\\sigma_v\\\\\\\\mathrm dW_t\\\",\\n      \\\"line_numbers\\\": [312, 314]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-L_kin\\\",\\n      \\\"text\\\": \\\"\\\\\\\\mathcal{L}_{\\\\text{kin}} f = \\\\\\\\sum_{i\\\\\\\\in\\\\\\\\mathcal A}\\\\\\\\left[ v_i\\\\\\\\cdot\\\\\\\\nabla_{x_i} f + \\\\\\\\left(m^{-1}F(x_i)-\\\\\\\\gamma_{\\\\\\\\mathrm{fric}}(v_i-u(x_i))\\\\\\\\right)\\\\\\\\cdot\\\\\\\\nabla_{v_i} f + \\\\\\\\tfrac{\\\\\\\\sigma_v^2}{2}\\\\\\\\cdot\\\\\\\\Delta_{v_i} f\\\\\\\\right]\\\",\\n      \\\"line_numbers\\\": [325]\\n    },\\n    {\\n      \\\"label\\\": \\\"eq-k_killed\\\",\\n      \\\"text\\\": \\\"k_{\\\\\\\\text{killed}}[f](t) := \\\\\\\\int_{\\\\\\\\Omega} c(z) f(t,z) \\\\\\\\, \\\\\\\\mathrm{d}z\\\",\\n      \\\"line_numbers\\\": [367]\\n    },\\n    {\\n      \\\"label\\\": \\\"def-revival-operator\\\",\\n      \\\"text\\\": \\\":::prf:definition} Revival Operator\\\\n:label: def-revival-operator\\\\n\\\\nRevival is modeled as a source term that re-injects mass from the dead population back into the alive population.\\\",\\n      \\\"line_numbers\\\": [373, 376]\\n    } \n\nExpected to find output fields in the LM response: [next_thought, next_tool_name, next_tool_args] \n\n",
        "chapter_info": {
          "chapter_number": 3,
          "file_path": "docs/source/1_euclidean_gas/07_mean_field.md",
          "article_id": "07_mean_field"
        }
      }
    }
  ]
}