{
  "chapter_index": 7,
  "section_id": "## 7. Swarm Measuring",
  "directive_count": 10,
  "hints": [
    {
      "directive_type": "definition",
      "label": "def-swarm-aggregation-operator-axiomatic",
      "title": "Swarm Aggregation Operator",
      "start_line": 1286,
      "end_line": 1312,
      "header_lines": [
        1287
      ],
      "content_start": 1288,
      "content_end": 1311,
      "content": "1288: :label: def-swarm-aggregation-operator-axiomatic\n1289: A **Swarm Aggregation Operator**, denoted $M$, is a function that maps a swarm state $\\mathcal{S}$ and a raw value vector $\\mathbf{v}$ (defined on the alive set $\\mathcal{A}(\\mathcal{S})$) to a probability measure $\\mu_{\\mathbf{v}}$ on $\\mathbb{R}$.\n1290: **Signature:** $M: \\Sigma_N \\times \\mathbb{R}^{|\\mathcal{A}(\\mathcal{S})|} \\to \\mathcal{P}(\\mathbb{R})$\n1291: For the operator to be valid, it must satisfy the foundational axioms for aggregators defined in Section 2.3.4. Furthermore, the user must provide proofs and explicit functions for the following continuity and structural properties.\n1292: 1.  **Value Continuity (Lipschitz):** For a fixed swarm structure $\\mathcal{S}$, the moment functions must be Lipschitz continuous with respect to the L2-norm of the input value vector $\\mathbf{v}$. The user must provide the **Value Lipschitz Functions**, $L_{\\mu,M}(\\mathcal{S})$ and $L_{m_2,M}(\\mathcal{S})$, such that for any two value vectors $\\mathbf{v}_1, \\mathbf{v}_2$:\n1293: \n1294: $$\n1295: |\\mu(\\mathcal{S}, \\mathbf{v}_1) - \\mu(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{\\mu,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1296: $$\n1297: $$\n1298: |m_2(\\mathcal{S}, \\mathbf{v}_1) - m_2(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{m_2,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1299: $$\n1300: \n1301: 2.  **Structural Continuity (Quadratic):** For a fixed value vector $\\mathbf{v}$, the change in the moment functions due to a change in the swarm's alive set must be bounded. The user must provide the **Structural Continuity Functions**, $L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2)$ and $L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2)$, which may depend on both the initial and final swarm states. These functions must satisfy the following inequalities for any two swarms $\\mathcal{S}_1, \\mathcal{S}_2$:\n1302: \n1303: $$\n1304: |\\mu(\\mathcal{S}_1, \\mathbf{v}) - \\mu(\\mathcal{S}_2, \\mathbf{v})| \\le L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1305: $$\n1306: \n1307: $$\n1308: |m_2(\\mathcal{S}_1, \\mathbf{v}) - m_2(\\mathcal{S}_2, \\mathbf{v})| \\le L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1309: $$\n1310: *Note: The structural continuity is defined with respect to the squared L2-norm of the status change vector. For notational convenience in subsequent sections, we define the **total number of status changes** between two swarms as $n_c := \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2 = \\sum_{j=1}^N (s_{1,j} - s_{2,j})^2$. This quadratic form is a natural choice because the error in common aggregators (like the empirical mean) is directly proportional to the number of added or removed data points, not its square root.*\n1311: :::{hint}",
      "metadata": {
        "label": "def-swarm-aggregation-operator-axiomatic"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1286: #### 7.2.1 Definition: Swarm Aggregation Operator\n1287: :::{prf:definition} Swarm Aggregation Operator\n1288: :label: def-swarm-aggregation-operator-axiomatic\n1289: A **Swarm Aggregation Operator**, denoted $M$, is a function that maps a swarm state $\\mathcal{S}$ and a raw value vector $\\mathbf{v}$ (defined on the alive set $\\mathcal{A}(\\mathcal{S})$) to a probability measure $\\mu_{\\mathbf{v}}$ on $\\mathbb{R}$.\n1290: **Signature:** $M: \\Sigma_N \\times \\mathbb{R}^{|\\mathcal{A}(\\mathcal{S})|} \\to \\mathcal{P}(\\mathbb{R})$\n1291: For the operator to be valid, it must satisfy the foundational axioms for aggregators defined in Section 2.3.4. Furthermore, the user must provide proofs and explicit functions for the following continuity and structural properties.\n1292: 1.  **Value Continuity (Lipschitz):** For a fixed swarm structure $\\mathcal{S}$, the moment functions must be Lipschitz continuous with respect to the L2-norm of the input value vector $\\mathbf{v}$. The user must provide the **Value Lipschitz Functions**, $L_{\\mu,M}(\\mathcal{S})$ and $L_{m_2,M}(\\mathcal{S})$, such that for any two value vectors $\\mathbf{v}_1, \\mathbf{v}_2$:\n1293: \n1294: $$\n1295: |\\mu(\\mathcal{S}, \\mathbf{v}_1) - \\mu(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{\\mu,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1296: $$\n1297: $$\n1298: |m_2(\\mathcal{S}, \\mathbf{v}_1) - m_2(\\mathcal{S}, \\mathbf{v}_2)| \\le L_{m_2,M}(\\mathcal{S}) \\cdot \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1299: $$\n1300: \n1301: 2.  **Structural Continuity (Quadratic):** For a fixed value vector $\\mathbf{v}$, the change in the moment functions due to a change in the swarm's alive set must be bounded. The user must provide the **Structural Continuity Functions**, $L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2)$ and $L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2)$, which may depend on both the initial and final swarm states. These functions must satisfy the following inequalities for any two swarms $\\mathcal{S}_1, \\mathcal{S}_2$:\n1302: \n1303: $$\n1304: |\\mu(\\mathcal{S}_1, \\mathbf{v}) - \\mu(\\mathcal{S}_2, \\mathbf{v})| \\le L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1305: $$\n1306: \n1307: $$\n1308: |m_2(\\mathcal{S}_1, \\mathbf{v}) - m_2(\\mathcal{S}_2, \\mathbf{v})| \\le L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2\n1309: $$\n1310: *Note: The structural continuity is defined with respect to the squared L2-norm of the status change vector. For notational convenience in subsequent sections, we define the **total number of status changes** between two swarms as $n_c := \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2 = \\sum_{j=1}^N (s_{1,j} - s_{2,j})^2$. This quadratic form is a natural choice because the error in common aggregators (like the empirical mean) is directly proportional to the number of added or removed data points, not its square root.*\n1311: :::{hint}\n1312: Why quadratic dependence on status changes? When a walker dies or revives, it's like suddenly adding or removing a data point from your dataset. The resulting error in statistics (like the mean) jumps discontinuously. The quadratic form $n_c$ counts these discontinuous jumps, making it the natural measure for how much the aggregated statistics can change."
    },
    {
      "directive_type": "lemma",
      "label": "lem-empirical-moments-lipschitz",
      "title": "Empirical moments are Lipschitz in L2",
      "start_line": 1325,
      "end_line": 1342,
      "header_lines": [
        1326
      ],
      "content_start": 1328,
      "content_end": 1341,
      "content": "1328: \n1329: Let $\\mathbf v\\in\\mathbb R^k$ collect the values of the $k=|\\mathcal A(\\mathcal S)|$ alive walkers. Consider the empirical mean and second raw moment\n1330: \n1331: $$\n1332: \\mu(\\mathbf v) = \\frac{1}{k}\\sum_{i=1}^k v_i,\\qquad m_2(\\mathbf v) = \\frac{1}{k}\\sum_{i=1}^k v_i^{\\,2}.\n1333: $$\n1334: \n1335: Assume $|v_i|\\le V_{\\max}$ for all $i$. Then, with respect to the L2 norm on $\\mathbb R^k$,\n1336: \n1337: $$\n1338: |\\mu(\\mathbf v_1)-\\mu(\\mathbf v_2)|\\;\\le\\; \\frac{1}{\\sqrt{k}}\\,\\|\\mathbf v_1-\\mathbf v_2\\|_2,\\qquad\n1339: |m_2(\\mathbf v_1)-m_2(\\mathbf v_2)|\\;\\le\\; \\frac{2 V_{\\max}}{\\sqrt{k}}\\,\\|\\mathbf v_1-\\mathbf v_2\\|_2.\n1340: $$\n1341: ",
      "metadata": {
        "label": "lem-empirical-moments-lipschitz"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1325: ##### 7.2.2.1 Lemma: Lipschitz constants for empirical moments (mean and second moment)\n1326: :::{prf:lemma} Empirical moments are Lipschitz in L2\n1327: :label: lem-empirical-moments-lipschitz\n1328: \n1329: Let $\\mathbf v\\in\\mathbb R^k$ collect the values of the $k=|\\mathcal A(\\mathcal S)|$ alive walkers. Consider the empirical mean and second raw moment\n1330: \n1331: $$\n1332: \\mu(\\mathbf v) = \\frac{1}{k}\\sum_{i=1}^k v_i,\\qquad m_2(\\mathbf v) = \\frac{1}{k}\\sum_{i=1}^k v_i^{\\,2}.\n1333: $$\n1334: \n1335: Assume $|v_i|\\le V_{\\max}$ for all $i$. Then, with respect to the L2 norm on $\\mathbb R^k$,\n1336: \n1337: $$\n1338: |\\mu(\\mathbf v_1)-\\mu(\\mathbf v_2)|\\;\\le\\; \\frac{1}{\\sqrt{k}}\\,\\|\\mathbf v_1-\\mathbf v_2\\|_2,\\qquad\n1339: |m_2(\\mathbf v_1)-m_2(\\mathbf v_2)|\\;\\le\\; \\frac{2 V_{\\max}}{\\sqrt{k}}\\,\\|\\mathbf v_1-\\mathbf v_2\\|_2.\n1340: $$\n1341: \n1342: In particular, for the empirical aggregator we may take $L_{\\mu,M}=1/\\sqrt{k}$ and $L_{m_2,M}=2V_{\\max}/\\sqrt{k}$."
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-empirical-moments-lipschitz",
      "title": null,
      "start_line": 1343,
      "end_line": 1354,
      "header_lines": [
        1344
      ],
      "content_start": 1346,
      "content_end": 1353,
      "content": "1346: \n1347: Gradients are $\\nabla\\mu = (1/k)\\,\\mathbf 1$ and $\\nabla m_2 = (2/k)\\,(v_1,\\dots,v_k)$. Thus\n1348: \n1349: $$\n1350: \\|\\nabla\\mu\\|_2 = \\frac{\\sqrt{k}}{k} = \\frac{1}{\\sqrt{k}},\\qquad \\|\\nabla m_2\\|_2 = \\frac{2}{k}\\,\\|\\mathbf v\\|_2\\;\\le\\; \\frac{2}{k}\\,\\sqrt{k}\\,V_{\\max}\\;=\\; \\frac{2V_{\\max}}{\\sqrt{k}}.\n1351: $$\n1352: \n1353: Lipschitz constants equal the suprema of these gradient norms, giving the stated bounds.",
      "metadata": {
        "label": "proof-lem-empirical-moments-lipschitz"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1343: :::\n1344: :::{prf:proof}\n1345: :label: proof-lem-empirical-moments-lipschitz\n1346: \n1347: Gradients are $\\nabla\\mu = (1/k)\\,\\mathbf 1$ and $\\nabla m_2 = (2/k)\\,(v_1,\\dots,v_k)$. Thus\n1348: \n1349: $$\n1350: \\|\\nabla\\mu\\|_2 = \\frac{\\sqrt{k}}{k} = \\frac{1}{\\sqrt{k}},\\qquad \\|\\nabla m_2\\|_2 = \\frac{2}{k}\\,\\|\\mathbf v\\|_2\\;\\le\\; \\frac{2}{k}\\,\\sqrt{k}\\,V_{\\max}\\;=\\; \\frac{2V_{\\max}}{\\sqrt{k}}.\n1351: $$\n1352: \n1353: Lipschitz constants equal the suprema of these gradient norms, giving the stated bounds.\n1354: **Q.E.D.**"
    },
    {
      "directive_type": "lemma",
      "label": "lem-empirical-aggregator-properties",
      "title": "Axiomatic Properties of the Empirical Measure Aggregator",
      "start_line": 1356,
      "end_line": 1371,
      "header_lines": [
        1357
      ],
      "content_start": 1358,
      "content_end": 1370,
      "content": "1358: :label: lem-empirical-aggregator-properties\n1359: Let the aggregation operator $M$ be defined such that for any swarm state $\\mathcal{S}$ with alive set $\\mathcal{A}(\\mathcal{S})$ of size $k = |\\mathcal{A}(\\mathcal{S})| \\ge 1$, and any raw value vector $\\mathbf{v}$, it produces the discrete empirical measure:\n1360: \n1361: $$\n1362: M(\\mathcal{S}, \\mathbf{v}) = \\frac{1}{k} \\sum_{i \\in \\mathcal{A}(\\mathcal{S})} \\delta_{v_i}\n1363: $$\n1364: \n1365: :::{note}\n1366: **Breaking down this formula**:\n1367: - $k = |\\mathcal{A}(\\mathcal{S})|$ is the number of alive walkers\n1368: - $\\delta_{v_i}$ is a \"spike\" (Dirac delta) at value $v_i$ - it puts all probability mass exactly at that point\n1369: - The sum creates a collection of spikes, one for each alive walker's value\n1370: - The $\\frac{1}{k}$ factor gives each walker equal weight",
      "metadata": {
        "label": "lem-empirical-aggregator-properties"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1356: The most fundamental aggregation operator is one that produces the standard empirical measure of the raw values from the alive set. We now formally prove that this operator satisfies the axiomatic requirements of [](#def-swarm-aggregation-operator-axiomatic) and derive its specific continuity constants and growth exponents.\n1357: :::{prf:lemma} Axiomatic Properties of the Empirical Measure Aggregator\n1358: :label: lem-empirical-aggregator-properties\n1359: Let the aggregation operator $M$ be defined such that for any swarm state $\\mathcal{S}$ with alive set $\\mathcal{A}(\\mathcal{S})$ of size $k = |\\mathcal{A}(\\mathcal{S})| \\ge 1$, and any raw value vector $\\mathbf{v}$, it produces the discrete empirical measure:\n1360: \n1361: $$\n1362: M(\\mathcal{S}, \\mathbf{v}) = \\frac{1}{k} \\sum_{i \\in \\mathcal{A}(\\mathcal{S})} \\delta_{v_i}\n1363: $$\n1364: \n1365: :::{note}\n1366: **Breaking down this formula**:\n1367: - $k = |\\mathcal{A}(\\mathcal{S})|$ is the number of alive walkers\n1368: - $\\delta_{v_i}$ is a \"spike\" (Dirac delta) at value $v_i$ - it puts all probability mass exactly at that point\n1369: - The sum creates a collection of spikes, one for each alive walker's value\n1370: - The $\\frac{1}{k}$ factor gives each walker equal weight\n1371: **Result**: A probability distribution that treats each alive walker's measurement as equally important. This is the foundation for computing means, variances, and other statistics!"
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-empirical-aggregator-properties",
      "title": null,
      "start_line": 1391,
      "end_line": 1435,
      "header_lines": [
        1392
      ],
      "content_start": 1394,
      "content_end": 1434,
      "content": "1394: \n1395: **Proof.**\n1396: Let $k = |\\mathcal{A}(\\mathcal{S})|$, $k_1 = |\\mathcal{A}(\\mathcal{S}_1)|$, and $k_2 = |\\mathcal{A}(\\mathcal{S}_2)|$. Let the raw values be bounded by $|v_i| \\le V_{\\max}$.\n1397: 1.  **Value Continuity:**\n1398:     We bound the change in moments for a fixed swarm $\\mathcal{S}$ of size $k$ and two value vectors $\\mathbf{v}_1, \\mathbf{v}_2$.\n1399:     *   **Mean:** By the Cauchy-Schwarz inequality:\n1400: \n1401: $$\n1402:         |\\mu_1 - \\mu_2| = \\frac{1}{k} \\left| \\sum_{i \\in \\mathcal{A}} (v_{1,i} - v_{2,i}) \\right| \\le \\frac{1}{k} \\sqrt{k} \\sqrt{\\sum_{i \\in \\mathcal{A}} (v_{1,i} - v_{2,i})^2} = k^{-1/2} \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1403:         $$\n1404: Thus, $L_{\\mu,M}(\\mathcal{S}) = k^{-1/2}$.\n1405:     *   **Second Moment:**\n1406: \n1407: $$\n1408:         |m_{2,1} - m_{2,2}| = \\frac{1}{k} \\left| \\sum_{i \\in \\mathcal{A}} (v_{1,i}^2 - v_{2,i}^2) \\right| = \\frac{1}{k} \\left| \\sum_{i \\in \\mathcal{A}} (v_{1,i} - v_{2,i})(v_{1,i} + v_{2,i}) \\right|\n1409: $$\n1410: The term $|v_{1,i} + v_{2,i}| \\le 2V_{\\max}$. Applying Cauchy-Schwarz:\n1411: $$\n1412:         \\le \\frac{1}{k} \\sqrt{\\sum (v_{1,i} - v_{2,i})^2} \\sqrt{\\sum (v_{1,i} + v_{2,i})^2} \\le \\frac{1}{k} \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2 \\sqrt{k(2V_{\\max})^2} = 2V_{\\max} k^{-1/2} \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1413: $$\n1414: Thus, $L_{m_2,M}(\\mathcal{S}) \\le 2V_{\\max} k^{-1/2}$.\n1415: 2.  **Structural Continuity:**\n1416:     We bound the change in moments for a fixed value vector $\\mathbf{v}$ and two swarms $\\mathcal{S}_1, \\mathcal{S}_2$. Let $n_c = \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2 = |\\mathcal{A}_1 \\Delta \\mathcal{A}_2|$. We decompose the error by adding and subtracting the intermediate term $\\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_1} v_i$.\n1417:     *   **Mean:**\n1418: $$\n1419:         |\\mu_1 - \\mu_2| = \\left| \\frac{1}{k_1}\\sum_{i \\in \\mathcal{A}_1} v_i - \\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_2} v_i \\right| \\le \\left|\\frac{1}{k_1}\\sum_{i \\in \\mathcal{A}_1} v_i - \\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_1} v_i \\right| + \\left|\\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_1} v_i - \\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_2} v_i \\right|\n1420: $$\n1421: The first term is bounded by $\\left|\\frac{1}{k_1} - \\frac{1}{k_2}\\right| |\\sum_{\\mathcal{A}_1} v_i| \\le \\frac{|k_2 - k_1|}{k_1 k_2} (k_1 V_{\\max}) = \\frac{|k_2 - k_1|}{k_2}V_{\\max}$.\n1422:         The second term is $\\frac{1}{k_2}|\\sum_{i \\in \\mathcal{A}_1 \\setminus \\mathcal{A}_2} v_i - \\sum_{i \\in \\mathcal{A}_2 \\setminus \\mathcal{A}_1} v_i| \\le \\frac{V_{\\max}}{k_2}|\\mathcal{A}_1 \\Delta \\mathcal{A}_2|$.\n1423:         Since $|k_2 - k_1| \\le n_c$ and $|\\mathcal{A}_1 \\Delta \\mathcal{A}_2| = n_c$, the sum is bounded by $\\frac{2V_{\\max}}{k_2} n_c$.\n1424:         Thus, $L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\le \\frac{2V_{\\max}}{k_2}$.\n1425:     *   **Second Moment:** The derivation is identical, replacing $v_i$ with $v_i^2$ and the bound $V_{\\max}$ with $V_{\\max}^2$. This yields $L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\le \\frac{2V_{\\max}^2}{k_2}$.\n1426: 3.  **Axiom of Bounded Deviation from Aggregated Variance ($\\kappa_{\\text{var}}$):**\n1427:     The axiom requires $\\sum_{i \\in \\mathcal{A}} (v_i - \\mu)^2 \\le \\kappa_{\\text{var}} \\cdot k \\cdot \\text{Var}[M]$. For the empirical aggregator, $\\mu$ is the sample mean and $\\text{Var}[M]$ is the sample variance $\\frac{1}{k}\\sum_{i \\in \\mathcal{A}} (v_i - \\mu)^2$. The axiom becomes an identity for $\\kappa_{\\text{var}} = 1$.\n1428: 4.  **Axiom of Bounded Variance Production ($\\kappa_{\\text{range}}$):**\n1429:     The axiom requires $\\text{Var}[M] \\le \\kappa_{\\text{range}} \\cdot V_{\\max}^2$. The sample variance is $\\frac{1}{k}\\sum v_i^2 - \\mu^2$. Since $v_i^2 \\le V_{\\max}^2$ and $\\mu^2 \\ge 0$, we have $\\text{Var}[M] \\le \\frac{1}{k}\\sum V_{\\max}^2 - \\mu^2 = V_{\\max}^2 - \\mu^2 \\le V_{\\max}^2$. The axiom is satisfied with $\\kappa_{\\text{range}} = 1$.\n1430: 5.  **Structural Growth Exponents:**\n1431:     Under the **Axiom of Bounded Relative Collapse**, $k_2 \\ge c_{\\min} k_1$. We analyze the asymptotic behavior of the structural continuity functions for large $k_1$:\n1432:     *   $L_{\\mu,S} \\propto k_2^{-1} \\le (c_{\\min}k_1)^{-1} \\propto k_1^{-1}$, implying $p_{\\mu,S} = -1$.\n1433:     *   $L_{m_2,S} \\propto k_2^{-1} \\le (c_{\\min}k_1)^{-1} \\propto k_1^{-1}$, implying $p_{m_2,S} = -1$.\n1434:     *   The worst-case exponent is $p_{\\text{worst-case}} = \\max(-1, -1) = -1$.",
      "metadata": {
        "label": "proof-lem-empirical-aggregator-properties"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1391: :::\n1392: :::{prf:proof}\n1393: :label: proof-lem-empirical-aggregator-properties\n1394: \n1395: **Proof.**\n1396: Let $k = |\\mathcal{A}(\\mathcal{S})|$, $k_1 = |\\mathcal{A}(\\mathcal{S}_1)|$, and $k_2 = |\\mathcal{A}(\\mathcal{S}_2)|$. Let the raw values be bounded by $|v_i| \\le V_{\\max}$.\n1397: 1.  **Value Continuity:**\n1398:     We bound the change in moments for a fixed swarm $\\mathcal{S}$ of size $k$ and two value vectors $\\mathbf{v}_1, \\mathbf{v}_2$.\n1399:     *   **Mean:** By the Cauchy-Schwarz inequality:\n1400: \n1401: $$\n1402:         |\\mu_1 - \\mu_2| = \\frac{1}{k} \\left| \\sum_{i \\in \\mathcal{A}} (v_{1,i} - v_{2,i}) \\right| \\le \\frac{1}{k} \\sqrt{k} \\sqrt{\\sum_{i \\in \\mathcal{A}} (v_{1,i} - v_{2,i})^2} = k^{-1/2} \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1403:         $$\n1404: Thus, $L_{\\mu,M}(\\mathcal{S}) = k^{-1/2}$.\n1405:     *   **Second Moment:**\n1406: \n1407: $$\n1408:         |m_{2,1} - m_{2,2}| = \\frac{1}{k} \\left| \\sum_{i \\in \\mathcal{A}} (v_{1,i}^2 - v_{2,i}^2) \\right| = \\frac{1}{k} \\left| \\sum_{i \\in \\mathcal{A}} (v_{1,i} - v_{2,i})(v_{1,i} + v_{2,i}) \\right|\n1409: $$\n1410: The term $|v_{1,i} + v_{2,i}| \\le 2V_{\\max}$. Applying Cauchy-Schwarz:\n1411: $$\n1412:         \\le \\frac{1}{k} \\sqrt{\\sum (v_{1,i} - v_{2,i})^2} \\sqrt{\\sum (v_{1,i} + v_{2,i})^2} \\le \\frac{1}{k} \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2 \\sqrt{k(2V_{\\max})^2} = 2V_{\\max} k^{-1/2} \\|\\mathbf{v}_1 - \\mathbf{v}_2\\|_2\n1413: $$\n1414: Thus, $L_{m_2,M}(\\mathcal{S}) \\le 2V_{\\max} k^{-1/2}$.\n1415: 2.  **Structural Continuity:**\n1416:     We bound the change in moments for a fixed value vector $\\mathbf{v}$ and two swarms $\\mathcal{S}_1, \\mathcal{S}_2$. Let $n_c = \\|\\mathbf{s}_1 - \\mathbf{s}_2\\|_2^2 = |\\mathcal{A}_1 \\Delta \\mathcal{A}_2|$. We decompose the error by adding and subtracting the intermediate term $\\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_1} v_i$.\n1417:     *   **Mean:**\n1418: $$\n1419:         |\\mu_1 - \\mu_2| = \\left| \\frac{1}{k_1}\\sum_{i \\in \\mathcal{A}_1} v_i - \\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_2} v_i \\right| \\le \\left|\\frac{1}{k_1}\\sum_{i \\in \\mathcal{A}_1} v_i - \\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_1} v_i \\right| + \\left|\\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_1} v_i - \\frac{1}{k_2}\\sum_{i \\in \\mathcal{A}_2} v_i \\right|\n1420: $$\n1421: The first term is bounded by $\\left|\\frac{1}{k_1} - \\frac{1}{k_2}\\right| |\\sum_{\\mathcal{A}_1} v_i| \\le \\frac{|k_2 - k_1|}{k_1 k_2} (k_1 V_{\\max}) = \\frac{|k_2 - k_1|}{k_2}V_{\\max}$.\n1422:         The second term is $\\frac{1}{k_2}|\\sum_{i \\in \\mathcal{A}_1 \\setminus \\mathcal{A}_2} v_i - \\sum_{i \\in \\mathcal{A}_2 \\setminus \\mathcal{A}_1} v_i| \\le \\frac{V_{\\max}}{k_2}|\\mathcal{A}_1 \\Delta \\mathcal{A}_2|$.\n1423:         Since $|k_2 - k_1| \\le n_c$ and $|\\mathcal{A}_1 \\Delta \\mathcal{A}_2| = n_c$, the sum is bounded by $\\frac{2V_{\\max}}{k_2} n_c$.\n1424:         Thus, $L_{\\mu,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\le \\frac{2V_{\\max}}{k_2}$.\n1425:     *   **Second Moment:** The derivation is identical, replacing $v_i$ with $v_i^2$ and the bound $V_{\\max}$ with $V_{\\max}^2$. This yields $L_{m_2,S}(\\mathcal{S}_1, \\mathcal{S}_2) \\le \\frac{2V_{\\max}^2}{k_2}$.\n1426: 3.  **Axiom of Bounded Deviation from Aggregated Variance ($\\kappa_{\\text{var}}$):**\n1427:     The axiom requires $\\sum_{i \\in \\mathcal{A}} (v_i - \\mu)^2 \\le \\kappa_{\\text{var}} \\cdot k \\cdot \\text{Var}[M]$. For the empirical aggregator, $\\mu$ is the sample mean and $\\text{Var}[M]$ is the sample variance $\\frac{1}{k}\\sum_{i \\in \\mathcal{A}} (v_i - \\mu)^2$. The axiom becomes an identity for $\\kappa_{\\text{var}} = 1$.\n1428: 4.  **Axiom of Bounded Variance Production ($\\kappa_{\\text{range}}$):**\n1429:     The axiom requires $\\text{Var}[M] \\le \\kappa_{\\text{range}} \\cdot V_{\\max}^2$. The sample variance is $\\frac{1}{k}\\sum v_i^2 - \\mu^2$. Since $v_i^2 \\le V_{\\max}^2$ and $\\mu^2 \\ge 0$, we have $\\text{Var}[M] \\le \\frac{1}{k}\\sum V_{\\max}^2 - \\mu^2 = V_{\\max}^2 - \\mu^2 \\le V_{\\max}^2$. The axiom is satisfied with $\\kappa_{\\text{range}} = 1$.\n1430: 5.  **Structural Growth Exponents:**\n1431:     Under the **Axiom of Bounded Relative Collapse**, $k_2 \\ge c_{\\min} k_1$. We analyze the asymptotic behavior of the structural continuity functions for large $k_1$:\n1432:     *   $L_{\\mu,S} \\propto k_2^{-1} \\le (c_{\\min}k_1)^{-1} \\propto k_1^{-1}$, implying $p_{\\mu,S} = -1$.\n1433:     *   $L_{m_2,S} \\propto k_2^{-1} \\le (c_{\\min}k_1)^{-1} \\propto k_1^{-1}$, implying $p_{m_2,S} = -1$.\n1434:     *   The worst-case exponent is $p_{\\text{worst-case}} = \\max(-1, -1) = -1$.\n1435: **Q.E.D.**"
    },
    {
      "directive_type": "definition",
      "label": "def-smoothed-gaussian-measure",
      "title": "Smoothed Gaussian Measure",
      "start_line": 1438,
      "end_line": 1448,
      "header_lines": [
        1439
      ],
      "content_start": 1440,
      "content_end": 1447,
      "content": "1440: :label: def-smoothed-gaussian-measure\n1441: The creation of a smoothed measure requires a key analytical parameter:\n1442: *   **Smoothed Measure Kernel Scale ($\\ell$):** The length scale (standard deviation), $\\ell > 0$, of the Gaussian kernel used for smoothing. A larger $\\ell$ results in a smoother, less detailed density estimate.\n1443: Let $K_\\ell(y, y')$ be a Gaussian kernel with length scale $\\ell$. The **smoothed Gaussian measure**, denoted $\\tilde{\\nu}_{\\mathcal{S}, \\ell}$, is the probability measure whose density is given by:\n1444: \n1445: $$\n1446: \\tilde{\\rho}_{\\mathcal{S}, \\ell}(y) := \\frac{1}{|\\mathcal{A}(\\mathcal{S})|} \\sum_{i \\in \\mathcal{A}(\\mathcal{S})} K_\\ell(y, \\varphi(x_i))\n1447: $$",
      "metadata": {
        "label": "def-smoothed-gaussian-measure"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1438: For analyses where the precise locations of individual walkers are less important than their overall density, we represent the swarm's state using a kernel density estimate.\n1439: :::{prf:definition} Smoothed Gaussian Measure\n1440: :label: def-smoothed-gaussian-measure\n1441: The creation of a smoothed measure requires a key analytical parameter:\n1442: *   **Smoothed Measure Kernel Scale ($\\ell$):** The length scale (standard deviation), $\\ell > 0$, of the Gaussian kernel used for smoothing. A larger $\\ell$ results in a smoother, less detailed density estimate.\n1443: Let $K_\\ell(y, y')$ be a Gaussian kernel with length scale $\\ell$. The **smoothed Gaussian measure**, denoted $\\tilde{\\nu}_{\\mathcal{S}, \\ell}$, is the probability measure whose density is given by:\n1444: \n1445: $$\n1446: \\tilde{\\rho}_{\\mathcal{S}, \\ell}(y) := \\frac{1}{|\\mathcal{A}(\\mathcal{S})|} \\sum_{i \\in \\mathcal{A}(\\mathcal{S})} K_\\ell(y, \\varphi(x_i))\n1447: $$\n1448: This representation provides a smooth, differentiable approximation of the swarm's distribution in the algorithmic space and is the foundation for the $d_{\\Sigma_N, L_2}$ distance."
    },
    {
      "directive_type": "definition",
      "label": "def-algorithmic-cemetery-extension",
      "title": "Algorithmic space with cemetery point",
      "start_line": 1451,
      "end_line": 1460,
      "header_lines": [
        1452
      ],
      "content_start": 1453,
      "content_end": 1459,
      "content": "1453: :label: def-algorithmic-cemetery-extension\n1454: Define $\\mathcal{Y}^{\\dagger}:=\\mathcal{Y}\\cup\\{\\dagger\\}$ with metric $d_\\dagger$ given by\n1455: $$\n1456: \n1457: d_\\dagger(y_1,y_2)=d_{\\mathcal{Y}}(y_1,y_2),\\quad d_\\dagger(y,\\dagger)=D_{\\mathrm{valid}}\\quad \\text{for all }y\\in\\mathcal{Y}.\n1458: \n1459: $$",
      "metadata": {
        "label": "def-algorithmic-cemetery-extension"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1451: To ensure that our swarm metrics are well-defined for all possible outcomes, including the absorption of the swarm into the cemetery state, we must formally define its distributional representation. This is achieved by introducing a unique, abstract measure that represents this terminal state.\n1452: :::{prf:definition} Algorithmic space with cemetery point\n1453: :label: def-algorithmic-cemetery-extension\n1454: Define $\\mathcal{Y}^{\\dagger}:=\\mathcal{Y}\\cup\\{\\dagger\\}$ with metric $d_\\dagger$ given by\n1455: $$\n1456: \n1457: d_\\dagger(y_1,y_2)=d_{\\mathcal{Y}}(y_1,y_2),\\quad d_\\dagger(y,\\dagger)=D_{\\mathrm{valid}}\\quad \\text{for all }y\\in\\mathcal{Y}.\n1458: \n1459: $$\n1460: Identifying a dead walker with the point $\\dagger$ makes the Wasserstein distance to the cemetery law canonical: for any living swarm law $\\nu$ and the cemetery $\\delta_{\\dagger}$ we have $W_p(\\nu,\\delta_{\\dagger})=D_{\\mathrm{valid}}$."
    },
    {
      "directive_type": "remark",
      "label": "rem-maximal-cemetery-distance-design-choice",
      "title": "Maximal cemetery distance (design choice)",
      "start_line": 1461,
      "end_line": 1464,
      "header_lines": [
        1462
      ],
      "content_start": 1463,
      "content_end": 1463,
      "content": "1463: :label: rem-maximal-cemetery-distance-design-choice",
      "metadata": {
        "label": "rem-maximal-cemetery-distance-design-choice"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1461: :::\n1462: :::{prf:remark} Maximal cemetery distance (design choice)\n1463: :label: rem-maximal-cemetery-distance-design-choice\n1464: This convention selects a maximal, state\u2011independent distance to the cemetery law so that absorption events represent the largest possible jump in distributional metrics. It simplifies comparisons (no ad\u2011hoc offsets) and keeps $W_p(\\nu,\\delta_{\\dagger})$ constant across all living $\\nu$."
    },
    {
      "directive_type": "definition",
      "label": "def-cemetery-state-measure",
      "title": "Cemetery State Measure",
      "start_line": 1465,
      "end_line": 1471,
      "header_lines": [
        1466
      ],
      "content_start": 1467,
      "content_end": 1470,
      "content": "1467: :label: def-cemetery-state-measure\n1468: Let $\\mathcal{S}$ be a swarm. Its distributional representation, denoted $\\mu_{\\mathcal{S}}$, is defined as:\n1469: 1.  If $|\\mathcal{A}(\\mathcal{S})| > 0$, $\\mu_{\\mathcal{S}}$ is the empirical or smoothed measure as defined in 5.1 and 5.2 (i.e., $\\mu_{\\mathcal{S}} = \\nu_{\\mathcal{S}}$ or $\\mu_{\\mathcal{S}} = \\tilde{\\nu}_{\\mathcal{S}, \\ell}$).\n1470: 2.  If $|\\mathcal{A}(\\mathcal{S})| = 0$, its representation is the unique **Cemetery State Measure**, denoted $\\mu_{\\mathcal{S}} := \\nu_{\\emptyset}$.",
      "metadata": {
        "label": "def-cemetery-state-measure"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1465: :::\n1466: :::{prf:definition} Cemetery State Measure\n1467: :label: def-cemetery-state-measure\n1468: Let $\\mathcal{S}$ be a swarm. Its distributional representation, denoted $\\mu_{\\mathcal{S}}$, is defined as:\n1469: 1.  If $|\\mathcal{A}(\\mathcal{S})| > 0$, $\\mu_{\\mathcal{S}}$ is the empirical or smoothed measure as defined in 5.1 and 5.2 (i.e., $\\mu_{\\mathcal{S}} = \\nu_{\\mathcal{S}}$ or $\\mu_{\\mathcal{S}} = \\tilde{\\nu}_{\\mathcal{S}, \\ell}$).\n1470: 2.  If $|\\mathcal{A}(\\mathcal{S})| = 0$, its representation is the unique **Cemetery State Measure**, denoted $\\mu_{\\mathcal{S}} := \\nu_{\\emptyset}$.\n1471: The Cemetery State Measure $\\nu_{\\emptyset}$ is an abstract object that does not have a density on $\\mathcal{Y}$. Its properties are defined entirely by its interaction with the distance functions used in the swarm metrics."
    },
    {
      "directive_type": "definition",
      "label": "def-distance-to-cemetery-state",
      "title": "Distance to the Cemetery State",
      "start_line": 1472,
      "end_line": 1486,
      "header_lines": [
        1473
      ],
      "content_start": 1474,
      "content_end": 1485,
      "content": "1474: :label: def-distance-to-cemetery-state\n1475: The distance between any valid probability measure $\\nu$ (representing a living swarm) and the Cemetery State Measure $\\nu_{\\emptyset}$ is defined to be a maximal constant, ensuring that entering the cemetery state represents the largest possible jump in distributional terms.\n1476: *   **For the Wasserstein Metric:** Using [](#def-algorithmic-cemetery-extension), for any measure $\\nu$ corresponding to a living swarm:\n1477: \n1478: $$\n1479:     W_p(\\nu, \\nu_{\\emptyset}) := D_{\\mathrm{valid}} \\quad \\text{and} \\quad W_p(\\nu_{\\emptyset}, \\nu_{\\emptyset}) := 0\n1480: $$\n1481: *   **For the MMD (on living swarms):** We evaluate $\\mathrm{MMD}_k$ only between measures supported on $\\mathcal Y$ (living swarms). No cemetery extension is defined here. If an extension is required, one must specify an explicit positive\u2011definite kernel $k^{\\dagger}$ on $\\mathcal Y^{\\dagger}$ that yields the desired constant distances while preserving metric properties. When $k$ is characteristic (e.g., Gaussian/RBF), MMD is a true metric on probability measures over $\\mathcal Y$.\n1482: *   **For the $L_2$ Distance:** The distance is a pre-defined maximal value $M_{L2}$ for the norm. For any density $\\tilde{\\rho}$ corresponding to a living swarm:\n1483: \n1484: $$\n1485:     \\|\\tilde{\\rho} - \\tilde{\\rho}_{\\emptyset}\\|_{L_2} := M_{L2} \\quad \\text{and} \\quad \\|\\tilde{\\rho}_{\\emptyset} - \\tilde{\\rho}_{\\emptyset}\\|_{L2} := 0",
      "metadata": {
        "label": "def-distance-to-cemetery-state"
      },
      "section": "## 7. Swarm Measuring",
      "references": [],
      "raw_directive": "1472: :::\n1473: :::{prf:definition} Distance to the Cemetery State\n1474: :label: def-distance-to-cemetery-state\n1475: The distance between any valid probability measure $\\nu$ (representing a living swarm) and the Cemetery State Measure $\\nu_{\\emptyset}$ is defined to be a maximal constant, ensuring that entering the cemetery state represents the largest possible jump in distributional terms.\n1476: *   **For the Wasserstein Metric:** Using [](#def-algorithmic-cemetery-extension), for any measure $\\nu$ corresponding to a living swarm:\n1477: \n1478: $$\n1479:     W_p(\\nu, \\nu_{\\emptyset}) := D_{\\mathrm{valid}} \\quad \\text{and} \\quad W_p(\\nu_{\\emptyset}, \\nu_{\\emptyset}) := 0\n1480: $$\n1481: *   **For the MMD (on living swarms):** We evaluate $\\mathrm{MMD}_k$ only between measures supported on $\\mathcal Y$ (living swarms). No cemetery extension is defined here. If an extension is required, one must specify an explicit positive\u2011definite kernel $k^{\\dagger}$ on $\\mathcal Y^{\\dagger}$ that yields the desired constant distances while preserving metric properties. When $k$ is characteristic (e.g., Gaussian/RBF), MMD is a true metric on probability measures over $\\mathcal Y$.\n1482: *   **For the $L_2$ Distance:** The distance is a pre-defined maximal value $M_{L2}$ for the norm. For any density $\\tilde{\\rho}$ corresponding to a living swarm:\n1483: \n1484: $$\n1485:     \\|\\tilde{\\rho} - \\tilde{\\rho}_{\\emptyset}\\|_{L_2} := M_{L2} \\quad \\text{and} \\quad \\|\\tilde{\\rho}_{\\emptyset} - \\tilde{\\rho}_{\\emptyset}\\|_{L2} := 0\n1486: $$"
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}