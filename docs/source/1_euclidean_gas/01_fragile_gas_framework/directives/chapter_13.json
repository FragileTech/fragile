{
  "chapter_index": 13,
  "section_id": "## 13. Fitness potential operator",
  "directive_count": 10,
  "hints": [
    {
      "directive_type": "definition",
      "label": "def-alive-set-potential-operator",
      "title": "Rescaled Potential Operator for the Alive Set",
      "start_line": 3765,
      "end_line": 3791,
      "header_lines": [
        3766
      ],
      "content_start": 3767,
      "content_end": 3790,
      "content": "3767: \n3768: \n3769: $$\n3770: 4.  **Combine the Bounds:** Substituting the bounds from steps 2 and 3 into the decomposition from step 1 yields the final inequality as stated in the theorem. This provides a complete, deterministic, worst-case bound on the operator's output error.\n3771: **Q.E.D.**\n3772: :::\n3773: ## 13. Fitness potential operator\n3774: This section defines the sequence of deterministic operators that transform the raw measurement vectors (rewards and distances) into a final, N-dimensional fitness potential vector. These operators are executed after the stochastic measurement stage and are fixed for the remainder of the cloning decision process.\n3775: ### 12.1 Rescaled Potential Operator for the Alive Set\n3776: :::{prf:definition} Rescaled Potential Operator for the Alive Set\n3777: :label: def-alive-set-potential-operator\n3778: The **Rescaled Potential Operator for the Alive Set**, denoted $V_{\\text{op},\\mathcal{A}}$, is a deterministic function that maps the raw reward and distance vectors of an alive set of size $k=|\\mathcal{A}_t|$ to a vector of fitness potentials for that same set.\n3779: **Signature:** $V_{\\text{op},\\mathcal{A}}: \\Sigma_N \\times \\mathbb{R}^k \\times \\mathbb{R}^k \\to \\mathbb{R}^k$\n3780: **Inputs:**\n3781: *   The current swarm state, $\\mathcal{S}_t$ (used for the aggregation operators).\n3782: *   The raw reward vector for the alive set, $\\mathbf{r} = (r_j)_{j \\in \\mathcal{A}_t}$.\n3783: *   The raw distance vector for the alive set, $\\mathbf{d} = (d_j)_{j \\in \\mathcal{A}_t}$.\n3784: *   All relevant algorithmic parameters ($\\eta, \\varepsilon_{\\mathrm{std}}, z_{\\max}, R_{agg}, M_D, \\alpha, \\beta$).\n3785: **Operation:**\n3786: The operator computes the output vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$ as follows:\n3787: 1.  **Standardize Raw Values (patched z\u2011score):** The **N-Dimensional Standardization Operator** (Def. 11.1.1) is applied independently to each raw vector using the regularized standard deviation $\\sigma\\'_{\\text{reg}}$.\n3788:     *   Compute reward Z\u2011scores: $\\mathbf{z_r} := z(\\mathcal{S}_t, \\mathbf{r}, R_{agg}, \\varepsilon_{\\mathrm{std}})$.\n3789:     *   Compute distance Z-scores: $\\mathbf{z_d} := z(\\mathcal{S}_t, \\mathbf{d}, M_D, \\varepsilon_{\\mathrm{std}})$.\n3790: 2.  **Compute Potentials:** For each walker $i \\in \\mathcal{A}_t$:",
      "metadata": {
        "label": "def-alive-set-potential-operator"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3765: \n3766:     E_{S}^2(\\mathcal{S}_1, \\mathcal{S}_2; \\mathbf{v}_2) \\le C_{S,\\text{direct}} \\cdot n_c(\\mathcal{S}_1, \\mathcal{S}_2) + C_{S,\\text{indirect}}(\\mathcal{S}_1, \\mathcal{S}_2) \\cdot n_c(\\mathcal{S}_1, \\mathcal{S}_2)^2\n3767: \n3768: \n3769: $$\n3770: 4.  **Combine the Bounds:** Substituting the bounds from steps 2 and 3 into the decomposition from step 1 yields the final inequality as stated in the theorem. This provides a complete, deterministic, worst-case bound on the operator's output error.\n3771: **Q.E.D.**\n3772: :::\n3773: ## 13. Fitness potential operator\n3774: This section defines the sequence of deterministic operators that transform the raw measurement vectors (rewards and distances) into a final, N-dimensional fitness potential vector. These operators are executed after the stochastic measurement stage and are fixed for the remainder of the cloning decision process.\n3775: ### 12.1 Rescaled Potential Operator for the Alive Set\n3776: :::{prf:definition} Rescaled Potential Operator for the Alive Set\n3777: :label: def-alive-set-potential-operator\n3778: The **Rescaled Potential Operator for the Alive Set**, denoted $V_{\\text{op},\\mathcal{A}}$, is a deterministic function that maps the raw reward and distance vectors of an alive set of size $k=|\\mathcal{A}_t|$ to a vector of fitness potentials for that same set.\n3779: **Signature:** $V_{\\text{op},\\mathcal{A}}: \\Sigma_N \\times \\mathbb{R}^k \\times \\mathbb{R}^k \\to \\mathbb{R}^k$\n3780: **Inputs:**\n3781: *   The current swarm state, $\\mathcal{S}_t$ (used for the aggregation operators).\n3782: *   The raw reward vector for the alive set, $\\mathbf{r} = (r_j)_{j \\in \\mathcal{A}_t}$.\n3783: *   The raw distance vector for the alive set, $\\mathbf{d} = (d_j)_{j \\in \\mathcal{A}_t}$.\n3784: *   All relevant algorithmic parameters ($\\eta, \\varepsilon_{\\mathrm{std}}, z_{\\max}, R_{agg}, M_D, \\alpha, \\beta$).\n3785: **Operation:**\n3786: The operator computes the output vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$ as follows:\n3787: 1.  **Standardize Raw Values (patched z\u2011score):** The **N-Dimensional Standardization Operator** (Def. 11.1.1) is applied independently to each raw vector using the regularized standard deviation $\\sigma\\'_{\\text{reg}}$.\n3788:     *   Compute reward Z\u2011scores: $\\mathbf{z_r} := z(\\mathcal{S}_t, \\mathbf{r}, R_{agg}, \\varepsilon_{\\mathrm{std}})$.\n3789:     *   Compute distance Z-scores: $\\mathbf{z_d} := z(\\mathcal{S}_t, \\mathbf{d}, M_D, \\varepsilon_{\\mathrm{std}})$.\n3790: 2.  **Compute Potentials:** For each walker $i \\in \\mathcal{A}_t$:\n3791:     a.  Apply the **Smooth Piecewise Rescale Function** ($g_A$) and add the lower bound $\\eta$ to create the rescaled components from the Z-scores $z_{i,r}$ and $z_{i,d}$:"
    },
    {
      "directive_type": "definition",
      "label": "def-swarm-potential-assembly-operator",
      "title": "Swarm Potential Assembly Operator",
      "start_line": 3792,
      "end_line": 3806,
      "header_lines": [
        3793
      ],
      "content_start": 3794,
      "content_end": 3805,
      "content": "3794:     b.  Combine the components to get the final fitness potential for that walker:\n3795: $$\n3796: \n3797:     V_i := (d'_i)^{\\beta} \\cdot (r'_i)^{\\alpha} \\quad \\text{for } i \\in \\mathcal{A}_t\n3798: \n3799: \n3800: $$\n3801: **Output:** The operator returns the $k$-dimensional vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$.\n3802: :::\n3803: :::{prf:definition} Swarm Potential Assembly Operator\n3804: :label: def-swarm-potential-assembly-operator\n3805: The **Swarm Potential Assembly Operator**, denoted $A_{\\text{pot}}$, is a deterministic function that maps the potential vector of the alive set to the full N-dimensional fitness potential vector for the entire swarm.",
      "metadata": {
        "label": "def-swarm-potential-assembly-operator"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3792:         *   $r'_i := g_A(z_{i,r}) + \\eta$\n3793:         *   $d'_i := g_A(z_{i,d}) + \\eta$\n3794:     b.  Combine the components to get the final fitness potential for that walker:\n3795: $$\n3796: \n3797:     V_i := (d'_i)^{\\beta} \\cdot (r'_i)^{\\alpha} \\quad \\text{for } i \\in \\mathcal{A}_t\n3798: \n3799: \n3800: $$\n3801: **Output:** The operator returns the $k$-dimensional vector $\\mathbf{V}_{\\mathcal{A}} = (V_i)_{i \\in \\mathcal{A}_t}$.\n3802: :::\n3803: :::{prf:definition} Swarm Potential Assembly Operator\n3804: :label: def-swarm-potential-assembly-operator\n3805: The **Swarm Potential Assembly Operator**, denoted $A_{\\text{pot}}$, is a deterministic function that maps the potential vector of the alive set to the full N-dimensional fitness potential vector for the entire swarm.\n3806: **Signature:** $A_{\\text{pot}}: \\Sigma_N \\times \\mathbb{R}^{|\\mathcal{A}_t|} \\to \\mathbb{R}^N$"
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-potential-boundedness",
      "title": null,
      "start_line": 3822,
      "end_line": 3836,
      "header_lines": [
        3823
      ],
      "content_start": 3824,
      "content_end": 3835,
      "content": "3824: $$\n3825: \n3826: 0 < V_{\\text{pot,min}} \\le V_i \\le V_{\\text{pot,max}} < \\infty\n3827: \n3828: $$\n3829: where the bounds are defined in terms of the global algorithmic parameters:\n3830: *   $V_{\\text{pot,min}} := \\eta^{\\alpha+\\beta}$\n3831: *   $V_{\\text{pot,max}} := (g_{A,\\max} + \\eta)^{\\alpha+\\beta}$\n3832: *   $g_{A,\\max} := \\log(1 + z_{\\max}) + 1$\n3833: :::{prf:proof}\n3834: :label: proof-lem-potential-boundedness\n3835: **Proof.**",
      "metadata": {
        "label": "proof-lem-potential-boundedness"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3822: :label: lem-potential-boundedness\n3823: For any alive walker $i$, its fitness potential $V_i$ is strictly positive and uniformly bounded. That is, there exist finite, state-independent constants $V_{\\text{pot,min}}$ and $V_{\\text{pot,max}}$ such that:\n3824: $$\n3825: \n3826: 0 < V_{\\text{pot,min}} \\le V_i \\le V_{\\text{pot,max}} < \\infty\n3827: \n3828: $$\n3829: where the bounds are defined in terms of the global algorithmic parameters:\n3830: *   $V_{\\text{pot,min}} := \\eta^{\\alpha+\\beta}$\n3831: *   $V_{\\text{pot,max}} := (g_{A,\\max} + \\eta)^{\\alpha+\\beta}$\n3832: *   $g_{A,\\max} := \\log(1 + z_{\\max}) + 1$\n3833: :::{prf:proof}\n3834: :label: proof-lem-potential-boundedness\n3835: **Proof.**\n3836: The proof follows from the definition of the potential function and the properties of the rescale function."
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-component-potential-lipschitz",
      "title": null,
      "start_line": 3846,
      "end_line": 3867,
      "header_lines": [
        3847
      ],
      "content_start": 3848,
      "content_end": 3866,
      "content": "3848: #### 12.2.2. Lemma: Lipschitz Continuity of the Fitness Potential Function\n3849: :label: lem-component-potential-lipschitz\n3850: Let the component-wise potential function be defined as $F(z_r, z_d) := (g_A(z_d) + \\eta)^{\\beta} \\cdot (g_A(z_r) + \\eta)^{\\alpha}$. This function is Lipschitz continuous with respect to its Z-score inputs. For any two pairs of Z-scores $(z_{r1}, z_{d1})$ and $(z_{r2}, z_{d2})$:\n3851: $$\n3852: \n3853: |F(z_{r1}, z_{d1}) - F(z_{r2}, z_{d2})| \\le L_{F,r}|z_{r1} - z_{r2}| + L_{F,d}|z_{d1} - z_{d2}|\n3854: \n3855: $$\n3856: where the Lipschitz constants $L_{F,r}$ and $L_{F,d}$ are finite, state-independent constants.\n3857: :::{prf:proof}\n3858: :label: proof-lem-component-potential-lipschitz\n3859: **Proof.**\n3860: The proof proceeds by bounding the partial derivatives of $F$ with respect to its inputs, $z_r$ and $z_d$.\n3861: 1.  **Partial Derivative with respect to $z_r$:**\n3862: $$\n3863: \n3864: \\frac{\\partial F}{\\partial z_r} = (g_A(z_d) + \\eta)^{\\beta} \\cdot \\left[ \\alpha (g_A(z_r) + \\eta)^{\\alpha-1} \\cdot g'_A(z_r) \\right]\n3865: \n3866: $$",
      "metadata": {
        "label": "proof-lem-component-potential-lipschitz"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3846: **Q.E.D.**\n3847: :::\n3848: #### 12.2.2. Lemma: Lipschitz Continuity of the Fitness Potential Function\n3849: :label: lem-component-potential-lipschitz\n3850: Let the component-wise potential function be defined as $F(z_r, z_d) := (g_A(z_d) + \\eta)^{\\beta} \\cdot (g_A(z_r) + \\eta)^{\\alpha}$. This function is Lipschitz continuous with respect to its Z-score inputs. For any two pairs of Z-scores $(z_{r1}, z_{d1})$ and $(z_{r2}, z_{d2})$:\n3851: $$\n3852: \n3853: |F(z_{r1}, z_{d1}) - F(z_{r2}, z_{d2})| \\le L_{F,r}|z_{r1} - z_{r2}| + L_{F,d}|z_{d1} - z_{d2}|\n3854: \n3855: $$\n3856: where the Lipschitz constants $L_{F,r}$ and $L_{F,d}$ are finite, state-independent constants.\n3857: :::{prf:proof}\n3858: :label: proof-lem-component-potential-lipschitz\n3859: **Proof.**\n3860: The proof proceeds by bounding the partial derivatives of $F$ with respect to its inputs, $z_r$ and $z_d$.\n3861: 1.  **Partial Derivative with respect to $z_r$:**\n3862: $$\n3863: \n3864: \\frac{\\partial F}{\\partial z_r} = (g_A(z_d) + \\eta)^{\\beta} \\cdot \\left[ \\alpha (g_A(z_r) + \\eta)^{\\alpha-1} \\cdot g'_A(z_r) \\right]\n3865: \n3866: $$\n3867: We bound the absolute value of each term in this product:"
    },
    {
      "directive_type": "proof",
      "label": "proof-thm-fitness-potential-mean-square-continuity",
      "title": null,
      "start_line": 3886,
      "end_line": 3897,
      "header_lines": [
        3887
      ],
      "content_start": 3888,
      "content_end": 3896,
      "content": "3888: where the **Expected Squared Potential Error Bound**, $F_{\\text{pot}}$, is defined as:\n3889: $$\n3890: \n3891: \\boxed{\n3892: F_{\\text{pot}}(\\mathcal{S}_1, \\mathcal{S}_2) := E_{\\text{unstable,ms}}^2(\\mathcal{S}_1, \\mathcal{S}_2) + E_{\\text{stable,ms}}^2(\\mathcal{S}_1, \\mathcal{S}_2)\n3893: }\n3894: \n3895: $$\n3896: and the two error components are the expected squared errors from the unstable and stable sets of walkers, respectively.",
      "metadata": {
        "label": "proof-thm-fitness-potential-mean-square-continuity"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3886: \n3887: $$\n3888: where the **Expected Squared Potential Error Bound**, $F_{\\text{pot}}$, is defined as:\n3889: $$\n3890: \n3891: \\boxed{\n3892: F_{\\text{pot}}(\\mathcal{S}_1, \\mathcal{S}_2) := E_{\\text{unstable,ms}}^2(\\mathcal{S}_1, \\mathcal{S}_2) + E_{\\text{stable,ms}}^2(\\mathcal{S}_1, \\mathcal{S}_2)\n3893: }\n3894: \n3895: $$\n3896: and the two error components are the expected squared errors from the unstable and stable sets of walkers, respectively.\n3897: :::{prf:proof}"
    },
    {
      "directive_type": "lemma",
      "label": "lem-sub-potential-unstable-error-mean-square",
      "title": "Bounding the Expected Error from Unstable Walkers",
      "start_line": 3899,
      "end_line": 3909,
      "header_lines": [
        3900
      ],
      "content_start": 3902,
      "content_end": 3908,
      "content": "3902: \n3903: \\|\\mathbf{V}_1 - \\mathbf{V}_2\\|_2^2 = \\sum_{i \\in \\mathcal{A}_{\\text{unstable}}} |V_{1,i} - V_{2,i}|^2 + \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2\n3904: \n3905: $$\n3906: We take the expectation of both sides. By linearity of expectation, the total expected squared error is the sum of the expected squared errors over these two partitions. We define the first term as the expected error from unstable walkers, $E^2_{\\text{unstable,ms}}$, and the second term as the expected error from stable walkers, $E^2_{\\text{stable,ms}}$. The subsequent lemmas provide bounds for these terms.\n3907: **Q.E.D.**\n3908: :::",
      "metadata": {
        "label": "lem-sub-potential-unstable-error-mean-square"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3899: **Proof.**\n3900: We decompose the total squared error $\\|\\mathbf{V}_1 - \\mathbf{V}_2\\|_2^2$ into contributions from two disjoint sets of walker indices: the unstable set $\\mathcal{A}_{\\text{unstable}} = \\mathcal{A}_1 \\Delta \\mathcal{A}_2$ and the stable set $\\mathcal{A}_{\\text{stable}} = \\mathcal{A}_1 \\cap \\mathcal{A}_2$. Because the sets are disjoint, the error vectors are orthogonal, and the total squared norm is the sum of the squared norms of the error over each set.\n3901: $$\n3902: \n3903: \\|\\mathbf{V}_1 - \\mathbf{V}_2\\|_2^2 = \\sum_{i \\in \\mathcal{A}_{\\text{unstable}}} |V_{1,i} - V_{2,i}|^2 + \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2\n3904: \n3905: $$\n3906: We take the expectation of both sides. By linearity of expectation, the total expected squared error is the sum of the expected squared errors over these two partitions. We define the first term as the expected error from unstable walkers, $E^2_{\\text{unstable,ms}}$, and the second term as the expected error from stable walkers, $E^2_{\\text{stable,ms}}$. The subsequent lemmas provide bounds for these terms.\n3907: **Q.E.D.**\n3908: :::\n3909: #### 12.2.4. Sub-Lemma: Bounding the Expected Error from Unstable Walkers"
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-sub-potential-unstable-error-mean-square",
      "title": null,
      "start_line": 3910,
      "end_line": 3916,
      "header_lines": [
        3911
      ],
      "content_start": 3912,
      "content_end": 3915,
      "content": "3912: \n3913: The expected squared error component from walkers changing their survival status is bounded deterministically by the number of status changes.\n3914: \n3915: $$",
      "metadata": {
        "label": "proof-lem-sub-potential-unstable-error-mean-square"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3910: :::{prf:lemma} Bounding the Expected Error from Unstable Walkers\n3911: :label: lem-sub-potential-unstable-error-mean-square\n3912: \n3913: The expected squared error component from walkers changing their survival status is bounded deterministically by the number of status changes.\n3914: \n3915: $$\n3916: "
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-sub-potential-stable-error-mean-square",
      "title": null,
      "start_line": 3928,
      "end_line": 3956,
      "header_lines": [
        3929
      ],
      "content_start": 3930,
      "content_end": 3955,
      "content": "3930: The expected squared error component from walkers that remain alive in both states ($\\mathcal{A}_{\\text{stable}} = \\mathcal{A}(\\mathcal{S}_1) \\cap \\mathcal{A}(\\mathcal{S}_2)$), denoted $E^2_{\\text{stable,ms}}$, is bounded in terms of the mean-square continuity of the underlying standardization pipelines.\n3931: $$\n3932: \n3933: E_{\\text{stable,ms}}^2(\\mathcal{S}_1, \\mathcal{S}_2) \\le 2L_{F,r}^2 \\cdot \\mathbb{E}[\\|\\Delta\\mathbf{z}_r\\|_2^2] + 2L_{F,d}^2 \\cdot \\mathbb{E}[\\|\\Delta\\mathbf{z}_d\\|_2^2]\n3934: \n3935: $$\n3936: where:\n3937: *   $L_{F,r}$ and $L_{F,d}$ are the component-wise Lipschitz constants for the potential function from [](#lem-component-potential-lipschitz).\n3938: *   $\\mathbb{E}[\\|\\Delta\\mathbf{z}_r\\|_2^2]$ and $\\mathbb{E}[\\|\\Delta\\mathbf{z}_d\\|_2^2]$ are the total expected squared error bounds for the **reward standardization pipeline** and **distance standardization pipeline**, respectively. These bounds are given by **[](#thm-standardization-operator-unified-mean-square-continuity)**.\n3939: :::{prf:proof}\n3940: :label: proof-lem-sub-potential-stable-error-mean-square\n3941: **Proof.**\n3942: The proof proceeds by applying the Lipschitz continuity of the fitness potential function and then taking the expectation.\n3943: 1.  **Bound the Single-Walker Error:**\n3944:     For any stable walker $i \\in \\mathcal{A}_{\\text{stable}}$, its fitness potential $V_i$ is a function of its reward Z-score $z_{r,i}$ and its distance Z-score $z_{d,i}$. From the Lipschitz continuity of the component-wise potential function ([](#lem-component-potential-lipschitz)) and the inequality $(a+b)^2 \\leq 2a^2 + 2b^2$, we can bound the squared error for this single walker:\n3945: $$\n3946: \n3947: |V_{1,i} - V_{2,i}|^2 \\le \\left(L_{F,r}|\\Delta z_{r,i}| + L_{F,d}|\\Delta z_{d,i}|\\right)^2 \\le 2L_{F,r}^2|\\Delta z_{r,i}|^2 + 2L_{F,d}^2|\\Delta z_{d,i}|^2\n3948: \n3949: $$\n3950: where $\\Delta z_{r,i}$ and $\\Delta z_{d,i}$ are the changes in the $i$-th components of the reward and distance standardized vectors, respectively.\n3951: 2.  **Sum Over All Stable Walkers:**\n3952:     The total squared error for the stable set is the sum of the individual squared errors. The sum over the stable subset is less than or equal to the sum over all $N$ walkers, which is the full squared L2-norm of the error vectors:\n3953: $$\n3954: \n3955: \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2 \\le 2L_{F,r}^2 \\|\\Delta\\mathbf{z}_r\\|_2^2 + 2L_{F,d}^2 \\|\\Delta\\mathbf{z}_d\\|_2^2",
      "metadata": {
        "label": "proof-lem-sub-potential-stable-error-mean-square"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3928: #### 12.2.5. Sub-Lemma: Bounding the Expected Error from Stable Walkers\n3929: :label: lem-sub-potential-stable-error-mean-square\n3930: The expected squared error component from walkers that remain alive in both states ($\\mathcal{A}_{\\text{stable}} = \\mathcal{A}(\\mathcal{S}_1) \\cap \\mathcal{A}(\\mathcal{S}_2)$), denoted $E^2_{\\text{stable,ms}}$, is bounded in terms of the mean-square continuity of the underlying standardization pipelines.\n3931: $$\n3932: \n3933: E_{\\text{stable,ms}}^2(\\mathcal{S}_1, \\mathcal{S}_2) \\le 2L_{F,r}^2 \\cdot \\mathbb{E}[\\|\\Delta\\mathbf{z}_r\\|_2^2] + 2L_{F,d}^2 \\cdot \\mathbb{E}[\\|\\Delta\\mathbf{z}_d\\|_2^2]\n3934: \n3935: $$\n3936: where:\n3937: *   $L_{F,r}$ and $L_{F,d}$ are the component-wise Lipschitz constants for the potential function from [](#lem-component-potential-lipschitz).\n3938: *   $\\mathbb{E}[\\|\\Delta\\mathbf{z}_r\\|_2^2]$ and $\\mathbb{E}[\\|\\Delta\\mathbf{z}_d\\|_2^2]$ are the total expected squared error bounds for the **reward standardization pipeline** and **distance standardization pipeline**, respectively. These bounds are given by **[](#thm-standardization-operator-unified-mean-square-continuity)**.\n3939: :::{prf:proof}\n3940: :label: proof-lem-sub-potential-stable-error-mean-square\n3941: **Proof.**\n3942: The proof proceeds by applying the Lipschitz continuity of the fitness potential function and then taking the expectation.\n3943: 1.  **Bound the Single-Walker Error:**\n3944:     For any stable walker $i \\in \\mathcal{A}_{\\text{stable}}$, its fitness potential $V_i$ is a function of its reward Z-score $z_{r,i}$ and its distance Z-score $z_{d,i}$. From the Lipschitz continuity of the component-wise potential function ([](#lem-component-potential-lipschitz)) and the inequality $(a+b)^2 \\leq 2a^2 + 2b^2$, we can bound the squared error for this single walker:\n3945: $$\n3946: \n3947: |V_{1,i} - V_{2,i}|^2 \\le \\left(L_{F,r}|\\Delta z_{r,i}| + L_{F,d}|\\Delta z_{d,i}|\\right)^2 \\le 2L_{F,r}^2|\\Delta z_{r,i}|^2 + 2L_{F,d}^2|\\Delta z_{d,i}|^2\n3948: \n3949: $$\n3950: where $\\Delta z_{r,i}$ and $\\Delta z_{d,i}$ are the changes in the $i$-th components of the reward and distance standardized vectors, respectively.\n3951: 2.  **Sum Over All Stable Walkers:**\n3952:     The total squared error for the stable set is the sum of the individual squared errors. The sum over the stable subset is less than or equal to the sum over all $N$ walkers, which is the full squared L2-norm of the error vectors:\n3953: $$\n3954: \n3955: \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2 \\le 2L_{F,r}^2 \\|\\Delta\\mathbf{z}_r\\|_2^2 + 2L_{F,d}^2 \\|\\Delta\\mathbf{z}_d\\|_2^2\n3956: "
    },
    {
      "directive_type": "proof",
      "label": "proof-proof-deterministic-potential-continuity",
      "title": null,
      "start_line": 3972,
      "end_line": 4012,
      "header_lines": [
        3973
      ],
      "content_start": 3974,
      "content_end": 4011,
      "content": "3974: The squared Euclidean error between the output potential vectors is deterministically bounded by a function of the swarm displacement and the raw value differences:\n3975: $$\n3976: \n3977: \\|\\mathbf{V}_1 - \\mathbf{V}_2\\|_2^2 \\le F_{\\text{pot,det}}(\\mathcal{S}_1, \\mathcal{S}_2, \\mathbf{v}_{r1}, \\mathbf{v}_{r2}, \\mathbf{v}_{d1}, \\mathbf{v}_{d2})\n3978: \n3979: $$\n3980: where $F_{\\text{pot,det}}$ is a deterministic bounding function that is jointly continuous in its arguments and vanishes as $d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2) \\to 0$, $\\|\\mathbf{v}_{r1} - \\mathbf{v}_{r2}\\|_2 \\to 0$, and $\\|\\mathbf{v}_{d1} - \\mathbf{v}_{d2}\\|_2 \\to 0$.\n3981: #### 12.3.2 Proof of Deterministic Continuity for the Fitness Potential Operator\n3982: :label: proof-deterministic-potential-continuity\n3983: :::{prf:proof}\n3984: :label: proof-proof-deterministic-potential-continuity\n3985: **Proof.**\n3986: The proof proceeds by deterministically decomposing the total error and applying the established continuity properties of the constituent operators.\n3987: 1.  **Decomposition of Total Error:** The total squared error is decomposed into contributions from unstable walkers (whose status changes) and stable walkers.\n3988: $$\n3989: \n3990:     \\|\\mathbf{V}_1 - \\mathbf{V}_2\\|_2^2 = \\sum_{i \\in \\mathcal{A}_{\\text{unstable}}} |V_{1,i} - V_{2,i}|^2 + \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2\n3991: \n3992: \n3993: $$\n3994: 2.  **Bound the Error from Unstable Walkers:**\n3995:     The error from the $n_c$ unstable walkers is bounded deterministically. Since one potential is zero and the other is bounded by $V_{\\text{pot,max}}$ ([](#lem-potential-boundedness)), this component is bounded by:\n3996: $$\n3997: \n3998:     \\sum_{i \\in \\mathcal{A}_{\\text{unstable}}} |V_{1,i} - V_{2,i}|^2 \\le V_{\\text{pot,max}}^2 \\cdot n_c(\\mathcal{S}_1, \\mathcal{S}_2)\n3999: \n4000: \n4001: $$\n4002: 3.  **Bound the Error from Stable Walkers:**\n4003:     For stable walkers, the potential $V_i$ is a composite function of the standardized vectors for rewards and distance: $V_i = F(z_{r,i}, z_{d,i})$. As shown in [](#lem-component-potential-lipschitz), the function $F$ is globally Lipschitz continuous with respect to its Z-score inputs. The total squared error for the stable set is therefore bounded by a linear combination of the squared errors of the underlying standardization pipelines:\n4004: $$\n4005: \n4006:     \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2 \\le 2L_{F,r}^2 \\|\\mathbf{z}_{r,1} - \\mathbf{z}_{r,2}\\|_2^2 + 2L_{F,d}^2 \\|\\mathbf{z}_{d,1} - \\mathbf{z}_{d,2}\\|_2^2\n4007: \n4008: \n4009: $$\n4010: where the constants $L_{F,r}$ and $L_{F,d}$ are from [](#lem-component-potential-lipschitz).\n4011: 4.  **Apply the Deterministic Bound for Standardization:**",
      "metadata": {
        "label": "proof-proof-deterministic-potential-continuity"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "3972: :label: thm-deterministic-potential-continuity\n3973: Let the Fitness Potential Operator $V_{\\text{op}}$ be constructed using the patched **N-Dimensional Standardization Operator**. Let $(\\mathcal{S}_1, \\mathbf{v}_{r1}, \\mathbf{v}_{d1})$ and $(\\mathcal{S}_2, \\mathbf{v}_{r2}, \\mathbf{v}_{d2})$ be two sets of inputs, consisting of swarm states and their corresponding raw reward and distance vectors. Let $\\mathbf{V}_1$ and $\\mathbf{V}_2$ be the resulting N-dimensional fitness potential vectors.\n3974: The squared Euclidean error between the output potential vectors is deterministically bounded by a function of the swarm displacement and the raw value differences:\n3975: $$\n3976: \n3977: \\|\\mathbf{V}_1 - \\mathbf{V}_2\\|_2^2 \\le F_{\\text{pot,det}}(\\mathcal{S}_1, \\mathcal{S}_2, \\mathbf{v}_{r1}, \\mathbf{v}_{r2}, \\mathbf{v}_{d1}, \\mathbf{v}_{d2})\n3978: \n3979: $$\n3980: where $F_{\\text{pot,det}}$ is a deterministic bounding function that is jointly continuous in its arguments and vanishes as $d_{\\text{Disp},\\mathcal{Y}}(\\mathcal{S}_1, \\mathcal{S}_2) \\to 0$, $\\|\\mathbf{v}_{r1} - \\mathbf{v}_{r2}\\|_2 \\to 0$, and $\\|\\mathbf{v}_{d1} - \\mathbf{v}_{d2}\\|_2 \\to 0$.\n3981: #### 12.3.2 Proof of Deterministic Continuity for the Fitness Potential Operator\n3982: :label: proof-deterministic-potential-continuity\n3983: :::{prf:proof}\n3984: :label: proof-proof-deterministic-potential-continuity\n3985: **Proof.**\n3986: The proof proceeds by deterministically decomposing the total error and applying the established continuity properties of the constituent operators.\n3987: 1.  **Decomposition of Total Error:** The total squared error is decomposed into contributions from unstable walkers (whose status changes) and stable walkers.\n3988: $$\n3989: \n3990:     \\|\\mathbf{V}_1 - \\mathbf{V}_2\\|_2^2 = \\sum_{i \\in \\mathcal{A}_{\\text{unstable}}} |V_{1,i} - V_{2,i}|^2 + \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2\n3991: \n3992: \n3993: $$\n3994: 2.  **Bound the Error from Unstable Walkers:**\n3995:     The error from the $n_c$ unstable walkers is bounded deterministically. Since one potential is zero and the other is bounded by $V_{\\text{pot,max}}$ ([](#lem-potential-boundedness)), this component is bounded by:\n3996: $$\n3997: \n3998:     \\sum_{i \\in \\mathcal{A}_{\\text{unstable}}} |V_{1,i} - V_{2,i}|^2 \\le V_{\\text{pot,max}}^2 \\cdot n_c(\\mathcal{S}_1, \\mathcal{S}_2)\n3999: \n4000: \n4001: $$\n4002: 3.  **Bound the Error from Stable Walkers:**\n4003:     For stable walkers, the potential $V_i$ is a composite function of the standardized vectors for rewards and distance: $V_i = F(z_{r,i}, z_{d,i})$. As shown in [](#lem-component-potential-lipschitz), the function $F$ is globally Lipschitz continuous with respect to its Z-score inputs. The total squared error for the stable set is therefore bounded by a linear combination of the squared errors of the underlying standardization pipelines:\n4004: $$\n4005: \n4006:     \\sum_{i \\in \\mathcal{A}_{\\text{stable}}} |V_{1,i} - V_{2,i}|^2 \\le 2L_{F,r}^2 \\|\\mathbf{z}_{r,1} - \\mathbf{z}_{r,2}\\|_2^2 + 2L_{F,d}^2 \\|\\mathbf{z}_{d,1} - \\mathbf{z}_{d,2}\\|_2^2\n4007: \n4008: \n4009: $$\n4010: where the constants $L_{F,r}$ and $L_{F,d}$ are from [](#lem-component-potential-lipschitz).\n4011: 4.  **Apply the Deterministic Bound for Standardization:**\n4012:     We now substitute the deterministic bound from [](#thm-global-continuity-patched-standardization) for both the reward and distance standardization pipelines. For $*\\in\\{r,d\\}$ we obtain"
    },
    {
      "directive_type": "corollary",
      "label": "cor-pipeline-continuity-margin-stability",
      "title": null,
      "start_line": 4014,
      "end_line": 4027,
      "header_lines": [
        4015
      ],
      "content_start": 4017,
      "content_end": 4026,
      "content": "4017: \n4018: $$\n4019: where $C_{V,\\text{total}}^{(*)}$ is defined in [](#def-lipschitz-value-error-coefficients) and $C_{S,\\text{direct}}^{(*)}$, $C_{S,\\text{indirect}}^{(*)}$ are from [](#def-lipschitz-structural-error-coefficients). The dependence on the swarm states is entirely through these deterministic coefficients.\n4020: 5.  **Assemble the Final Bound `F_pot,det`:**\n4021:     Combining the bounds from steps 2\u20134 yields the final deterministic function $F_{\\text{pot,det}}$. It is a sum of terms proportional to $\\|\\Delta\\mathbf{v}_r\\|^2$, $\\|\\Delta\\mathbf{v}_d\\|^2$, $n_c$, and $n_c^2$, with coefficients obtained by collecting $V_{\\text{pot,max}}$, $L_{F,*}$, and the standardization constants $C_{V,\\text{total}}^{(*)}$, $C_{S,\\text{direct}}^{(*)}$, $C_{S,\\text{indirect}}^{(*)}$. Since each constituent coefficient is finite by definition, $F_{\\text{pot,det}}$ is a well-defined, continuous bound on the deterministic error. This completes the proof.\n4022: **Q.E.D.**\n4023: :::\n4024: #### 12.3.3 Corollary: Pipeline Continuity Under Margin-Based Status Stability\n4025: :::{prf:corollary}\n4026: :label: cor-pipeline-continuity-margin-stability",
      "metadata": {
        "label": "cor-pipeline-continuity-margin-stability"
      },
      "section": "## 13. Fitness potential operator",
      "references": [],
      "raw_directive": "4014: \n4015:     \\|\\mathbf{z}_{*,1} - \\mathbf{z}_{*,2}\\|_2^2 \\le 2 C_{V,\\text{total}}^{(*)}\\cdot \\|\\Delta\\mathbf{v}_*\\|_2^2 + 2 C_{S,\\text{direct}}^{(*)} \\cdot n_c + 2 C_{S,\\text{indirect}}^{(*)}(\\mathcal{S}_1,\\mathcal{S}_2) \\cdot n_c^2,\n4016: \n4017: \n4018: $$\n4019: where $C_{V,\\text{total}}^{(*)}$ is defined in [](#def-lipschitz-value-error-coefficients) and $C_{S,\\text{direct}}^{(*)}$, $C_{S,\\text{indirect}}^{(*)}$ are from [](#def-lipschitz-structural-error-coefficients). The dependence on the swarm states is entirely through these deterministic coefficients.\n4020: 5.  **Assemble the Final Bound `F_pot,det`:**\n4021:     Combining the bounds from steps 2\u20134 yields the final deterministic function $F_{\\text{pot,det}}$. It is a sum of terms proportional to $\\|\\Delta\\mathbf{v}_r\\|^2$, $\\|\\Delta\\mathbf{v}_d\\|^2$, $n_c$, and $n_c^2$, with coefficients obtained by collecting $V_{\\text{pot,max}}$, $L_{F,*}$, and the standardization constants $C_{V,\\text{total}}^{(*)}$, $C_{S,\\text{direct}}^{(*)}$, $C_{S,\\text{indirect}}^{(*)}$. Since each constituent coefficient is finite by definition, $F_{\\text{pot,det}}$ is a well-defined, continuous bound on the deterministic error. This completes the proof.\n4022: **Q.E.D.**\n4023: :::\n4024: #### 12.3.3 Corollary: Pipeline Continuity Under Margin-Based Status Stability\n4025: :::{prf:corollary}\n4026: :label: cor-pipeline-continuity-margin-stability\n4027: "
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}