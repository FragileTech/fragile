{
  "document_id": "02_euclidean_gas",
  "stage": "directives",
  "directive_type": "theorem",
  "generated_at": "2025-11-12T22:37:33.897739+00:00",
  "count": 5,
  "items": [
    {
      "directive_type": "theorem",
      "label": "thm-sasaki-distance-ms",
      "title": "Mean-square continuity of the distance measurement (Sasaki)",
      "start_line": 1202,
      "end_line": 1226,
      "header_lines": [
        1203
      ],
      "content_start": 1205,
      "content_end": 1225,
      "content": "1205: :label: thm-sasaki-distance-ms\n1206: \n1207: Let $\\mathbf d^{(r)}$ be the expected raw distance vectors of swarms $\\mathcal S_r$. With $k_{\\min}:=\\max\\{1,\\min(k_1,k_2)\\}$, $k_{\\mathrm{stable}}:=|\\mathcal A_{\\mathrm{stable}}|$, and alive-difference count $n_c:=\\sum_{i=1}^N(s_{1,i}-s_{2,i})^2$, define\n1208: \n1209: $$\n1210: F_{d,ms}^{\\mathrm{Sasaki}}(\\Delta_{\\mathrm{pos}}^2,n_c):=C_{\\mathrm{pos}}^{\\mathrm{Sasaki}}(k_1,k_{\\mathrm{stable}})\\,\\Delta_{\\mathrm{pos}}^2+4k_{\\mathrm{stable}}\\frac{D_{\\mathcal Y}^2}{\\max\\{1,k_1-1\\}^2}\\,n_c^2+4D_{\\mathcal Y}^2 n_c.\n1211: \n1212: $$\n1213: \n1214: Referenced by {prf:ref}`thm-euclidean-feller`.\n1215: \n1216: Then\n1217: \n1218: $$\n1219: \\big\\|\\mathbf d^{(1)}-\\mathbf d^{(2)}\\big\\|_2^2\\le F_{d,ms}^{\\mathrm{Sasaki}}\\big(\\Delta_{\\mathrm{pos,Sasaki}}^2(\\mathcal S_1,\\mathcal S_2),n_c(\\mathcal S_1,\\mathcal S_2)\\big).\n1220: \n1221: $$\n1222: \n1223: ```{dropdown} Proof\n1224: :::{prf:proof}\n1225: Decompose the index set into stable walkers $\\mathcal A_{\\mathrm{stable}}$ and the complement. For stable walkers the bound in Lemma {prf:ref}`lem-sasaki-total-squared-error-stable` applies. For walkers whose status changes between the two swarms we use $|d^{(1)}_i-d^{(2)}_i|\\le D_{\\mathcal Y}$ because each expected distance is bounded by the diameter of the Sasaki algorithmic space. There are at most $2n_c$ such indices, contributing at most $4D_{\\mathcal Y}^2n_c$ to the squared error.",
      "metadata": {
        "label": "thm-sasaki-distance-ms"
      },
      "section": "## 4. Axiom-by-axiom validation (Sasaki formulation)",
      "references": [
        "thm-euclidean-feller",
        "lem-sasaki-total-squared-error-stable",
        "lem-sasaki-single-walker-structural-error"
      ],
      "raw_directive": "1202: :::\n1203: \n1204: :::{prf:theorem} Mean-square continuity of the distance measurement (Sasaki)\n1205: :label: thm-sasaki-distance-ms\n1206: \n1207: Let $\\mathbf d^{(r)}$ be the expected raw distance vectors of swarms $\\mathcal S_r$. With $k_{\\min}:=\\max\\{1,\\min(k_1,k_2)\\}$, $k_{\\mathrm{stable}}:=|\\mathcal A_{\\mathrm{stable}}|$, and alive-difference count $n_c:=\\sum_{i=1}^N(s_{1,i}-s_{2,i})^2$, define\n1208: \n1209: $$\n1210: F_{d,ms}^{\\mathrm{Sasaki}}(\\Delta_{\\mathrm{pos}}^2,n_c):=C_{\\mathrm{pos}}^{\\mathrm{Sasaki}}(k_1,k_{\\mathrm{stable}})\\,\\Delta_{\\mathrm{pos}}^2+4k_{\\mathrm{stable}}\\frac{D_{\\mathcal Y}^2}{\\max\\{1,k_1-1\\}^2}\\,n_c^2+4D_{\\mathcal Y}^2 n_c.\n1211: \n1212: $$\n1213: \n1214: Referenced by {prf:ref}`thm-euclidean-feller`.\n1215: \n1216: Then\n1217: \n1218: $$\n1219: \\big\\|\\mathbf d^{(1)}-\\mathbf d^{(2)}\\big\\|_2^2\\le F_{d,ms}^{\\mathrm{Sasaki}}\\big(\\Delta_{\\mathrm{pos,Sasaki}}^2(\\mathcal S_1,\\mathcal S_2),n_c(\\mathcal S_1,\\mathcal S_2)\\big).\n1220: \n1221: $$\n1222: \n1223: ```{dropdown} Proof\n1224: :::{prf:proof}\n1225: Decompose the index set into stable walkers $\\mathcal A_{\\mathrm{stable}}$ and the complement. For stable walkers the bound in Lemma {prf:ref}`lem-sasaki-total-squared-error-stable` applies. For walkers whose status changes between the two swarms we use $|d^{(1)}_i-d^{(2)}_i|\\le D_{\\mathcal Y}$ because each expected distance is bounded by the diameter of the Sasaki algorithmic space. There are at most $2n_c$ such indices, contributing at most $4D_{\\mathcal Y}^2n_c$ to the squared error.\n1226: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "02_euclidean_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Axiom-by-axiom validation (Sasaki formulation)"
      }
    },
    {
      "directive_type": "theorem",
      "label": "thm-sasaki-standardization-value-sq",
      "title": "Value continuity of patched standardization (Sasaki)",
      "start_line": 1358,
      "end_line": 1369,
      "header_lines": [
        1359
      ],
      "content_start": 1361,
      "content_end": 1368,
      "content": "1361: :label: thm-sasaki-standardization-value-sq\n1362: \n1363: Suppose $\\mathcal S_1$ and $\\mathcal S_2$ share the same alive set $\\mathcal A$ of size $k\\ge 1$ (so $n_c(\\mathcal S_1,\\mathcal S_2)=0$). The N-dimensional standardization operator is Lipschitz continuous with respect to positional changes in the Sasaki metric. The squared L2-norm of the output error is bounded as follows:\n1364: \n1365: $$\n1366: \\big\\|z(\\mathcal S_1)-z(\\mathcal S_2)\\big\\|_2^2 \\le C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1) \\cdot \\Delta_{\\mathrm{pos,Sasaki}}^2(\\mathcal S_1,\\mathcal S_2).\n1367: \n1368: $$",
      "metadata": {
        "label": "thm-sasaki-standardization-value-sq"
      },
      "section": "## 4. Axiom-by-axiom validation (Sasaki formulation)",
      "references": [
        "def-sasaki-standardization-constants-sq"
      ],
      "raw_directive": "1358: #### 2.3.4. Theorem: Value Continuity of Patched Standardization (Sasaki)\n1359: \n1360: :::{prf:theorem} Value continuity of patched standardization (Sasaki)\n1361: :label: thm-sasaki-standardization-value-sq\n1362: \n1363: Suppose $\\mathcal S_1$ and $\\mathcal S_2$ share the same alive set $\\mathcal A$ of size $k\\ge 1$ (so $n_c(\\mathcal S_1,\\mathcal S_2)=0$). The N-dimensional standardization operator is Lipschitz continuous with respect to positional changes in the Sasaki metric. The squared L2-norm of the output error is bounded as follows:\n1364: \n1365: $$\n1366: \\big\\|z(\\mathcal S_1)-z(\\mathcal S_2)\\big\\|_2^2 \\le C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1) \\cdot \\Delta_{\\mathrm{pos,Sasaki}}^2(\\mathcal S_1,\\mathcal S_2).\n1367: \n1368: $$\n1369: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "02_euclidean_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Axiom-by-axiom validation (Sasaki formulation)"
      }
    },
    {
      "directive_type": "theorem",
      "label": "thm-sasaki-standardization-structural-sq",
      "title": "Structural Continuity of Patched Standardization (Sasaki)",
      "start_line": 1714,
      "end_line": 1727,
      "header_lines": [
        1715
      ],
      "content_start": 1717,
      "content_end": 1726,
      "content": "1717: :label: thm-sasaki-standardization-structural-sq\n1718: \n1719: For general swarms $\\mathcal S_1,\\mathcal S_2$ with alive counts $k_r\\ge 1$, the squared L2-norm of the output error of the standardization operator is bounded by a function of the number of status changes, $n_c(\\mathcal S_1,\\mathcal S_2)$.\n1720: \n1721: Referenced by {prf:ref}`def-sasaki-structural-coeffs-sq` and {prf:ref}`lem-sasaki-standardization-lipschitz`.\n1722: \n1723: $$\n1724: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2 \\le C_{S,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S_1, \\mathcal S_2) \\cdot n_c(\\mathcal S_1, \\mathcal S_2) + C_{S,\\mathrm{indirect}}^{\\mathrm{sq}}(\\mathcal S_1, \\mathcal S_2) \\cdot n_c(\\mathcal S_1, \\mathcal S_2)^2\n1725: \n1726: $$",
      "metadata": {
        "label": "thm-sasaki-standardization-structural-sq"
      },
      "section": "## 4. Axiom-by-axiom validation (Sasaki formulation)",
      "references": [
        "def-sasaki-structural-coeffs-sq",
        "lem-sasaki-standardization-lipschitz"
      ],
      "raw_directive": "1714: ###### 2.3.6. Theorem: Structural Continuity of Patched Standardization (Sasaki)\n1715: \n1716: :::{prf:theorem} Structural Continuity of Patched Standardization (Sasaki)\n1717: :label: thm-sasaki-standardization-structural-sq\n1718: \n1719: For general swarms $\\mathcal S_1,\\mathcal S_2$ with alive counts $k_r\\ge 1$, the squared L2-norm of the output error of the standardization operator is bounded by a function of the number of status changes, $n_c(\\mathcal S_1,\\mathcal S_2)$.\n1720: \n1721: Referenced by {prf:ref}`def-sasaki-structural-coeffs-sq` and {prf:ref}`lem-sasaki-standardization-lipschitz`.\n1722: \n1723: $$\n1724: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2 \\le C_{S,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S_1, \\mathcal S_2) \\cdot n_c(\\mathcal S_1, \\mathcal S_2) + C_{S,\\mathrm{indirect}}^{\\mathrm{sq}}(\\mathcal S_1, \\mathcal S_2) \\cdot n_c(\\mathcal S_1, \\mathcal S_2)^2\n1725: \n1726: $$\n1727: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "02_euclidean_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Axiom-by-axiom validation (Sasaki formulation)"
      }
    },
    {
      "directive_type": "theorem",
      "label": "lem-sasaki-standardization-lipschitz",
      "title": "Composite Continuity of the Patched Standardization Operator (Sasaki)",
      "start_line": 2001,
      "end_line": 2099,
      "header_lines": [
        2002,
        2086
      ],
      "content_start": 2004,
      "content_end": 2098,
      "content": "2004: :label: thm-sasaki-standardization-composite-sq\n2005: \n2006: The N-dimensional standardization operator $z(\\mathcal S)$, when applied to the reward vector, is continuous with respect to the dispersion metric. For any two swarms $\\mathcal S_1, \\mathcal S_2$ with $k_1=|\\mathcal A(\\mathcal S_1)|\\ge 1$, the squared L2-norm of the output error is bounded by a composite function of the squared dispersion distance:\n2007: \n2008: $$\n2009: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2 \\le L_{z,L}^2(\\mathcal S_1,\\mathcal S_2) \\cdot d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1, \\mathcal S_2)^2 + L_{z,H}^2(\\mathcal S_1,\\mathcal S_2) \\cdot d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1, \\mathcal S_2)^4\n2010: \n2011: $$\n2012: \n2013: where $L_{z,L}^2$ and $L_{z,H}^2$ are state-dependent coefficients representing the Lipschitz and higher-order parts of the bound, respectively. Consequently, the logistic rescale operator $u(\\mathcal S) = g_A(z(\\mathcal S))$ is also continuous.\n2014: \n2015: ```{dropdown} Proof\n2016: :::{prf:proof}\n2017: The proof establishes a deterministic bound on the total error $\\|z(\\mathcal S_1, \\mathbf r_1) - z(\\mathcal S_2, \\mathbf r_2)\\|_2^2$ by combining the bounds for value-induced error and structure-induced error.\n2018: \n2019: **Step 1: Decomposing the Total Error.**\n2020: Let $\\mathbf r_1$ and $\\mathbf r_2$ be the raw reward vectors for swarms $\\mathcal S_1$ and $\\mathcal S_2$. We introduce an intermediate vector $z(\\mathcal S_1, \\mathbf r_2)$ and use the inequality $\\|A-C\\|_2^2 \\le 2(\\|A-B\\|_2^2 + \\|B-C\\|_2^2)$. The total squared error is bounded by the sum of a pure value error component and a pure structural error component:\n2021: \n2022: $$\n2023: \\|z(\\mathcal S_1, \\mathbf r_1) - z(\\mathcal S_2, \\mathbf r_2)\\|_2^2 \\le 2\\,\\|\\underbrace{z(\\mathcal S_1, \\mathbf r_1) - z(\\mathcal S_1, \\mathbf r_2)}_{E_V}\\|_2^2 + 2\\,\\|\\underbrace{z(\\mathcal S_1, \\mathbf r_2) - z(\\mathcal S_2, \\mathbf r_2)}_{E_S}\\|_2^2\n2024: \n2025: $$\n2026: \n2027: **Step 2: Bounding the Squared Value Error Term (`||E_V||_2^2`).**\n2028: The first term is a pure value error for the fixed swarm structure $\\mathcal S_1$. We apply Theorem {prf:ref}`thm-sasaki-standardization-value`:\n2029: \n2030: $$\n2031: \\|E_V\\|_2^2 \\le C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1) \\cdot \\|\\mathbf r_1 - \\mathbf r_2\\|_2^2\n2032: \n2033: $$\n2034: The squared difference of the raw reward vectors is bounded by the sum of contributions from walkers with stable status and unstable status:\n2035: \n2036: $$\n2037: \\|\\mathbf r_1 - \\mathbf r_2\\|_2^2 = \\sum_{i \\in \\mathcal A_1 \\cap \\mathcal A_2} |r_{1,i}-r_{2,i}|^2 + \\sum_{i \\in \\mathcal A_1 \\triangle \\mathcal A_2} |r_{1,i}-r_{2,i}|^2 \\le (L_R^{\\mathrm{Sasaki}})^2 \\Delta_{\\mathrm{pos,Sasaki}}^2 + n_c (2 V_{\\max}^{(R)})^2\n2038: \n2039: $$\n2040: where we used that for unstable walkers, one reward is zero and the other is bounded by $V_{\\max}^{(R)}$.\n2041: \n2042: **Step 3: Bounding the Squared Structural Error Term (`||E_S||_2^2`).**\n2043: The second term is a pure structural error for the fixed raw value vector $\\mathbf r_2$. We apply Theorem {prf:ref}`thm-sasaki-standardization-structural-sq`:\n2044: \n2045: $$\n2046: \\|E_S\\|_2^2 \\le C_{S,\\mathrm{direct}}^{\\mathrm{sq}} \\cdot n_c + C_{S,\\mathrm{indirect}}^{\\mathrm{sq}}(\\mathcal S_1, \\mathcal S_2) \\cdot n_c^2\n2047: \n2048: $$\n2049: \n2050: **Step 4: Assembling the Composite Bound in Terms of Displacement Components.**\n2051: Combining the bounds from Steps 2 and 3 into the decomposition from Step 1 gives a complete bound in terms of $\\Delta_{\\mathrm{pos,Sasaki}}^2$ and $n_c$:\n2052: \n2053: $$\n2054: \\|z_1 - z_2\\|_2^2 \\le 2\\,C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}} \\left[ (L_R^{\\mathrm{Sasaki}})^2 \\Delta_{\\mathrm{pos,Sasaki}}^2 + 4(V_{\\max}^{(R)})^2 n_c \\right] + 2 \\left[ C_{S,\\mathrm{direct}}^{\\mathrm{sq}} n_c + C_{S,\\mathrm{indirect}}^{\\mathrm{sq}} n_c^2 \\right]\n2055: \n2056: $$\n2057: \n2058: **Step 5: Expressing the Bound in Terms of the Dispersion Metric.**\n2059: Let $d^2:=d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1,\\mathcal S_2)^2$. From the definition of the dispersion metric we obtain\n2060: \n2061: $$\n2062: \\Delta_{\\mathrm{pos,Sasaki}}^2\\le N d^2,\\qquad n_c\\le\\frac{N}{\\lambda_{\\mathrm{status}}}d^2,\\qquad n_c^2\\le\\left(\\frac{N}{\\lambda_{\\mathrm{status}}}\\right)^2 d^4.\n2063: \n2064: $$\n2065: \n2066: Substituting these bounds into the expression from Step 4 yields\n2067: \n2068: $$\n2069: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2\\le L_{z,L}^2(\\mathcal S_1,\\mathcal S_2)d^2+L_{z,H}^2(\\mathcal S_1,\\mathcal S_2)d^4.\n2070: \n2071: $$\n2072: \n2073: The coefficients are explicit:\n2074: \n2075: $$\n2076: \\begin{aligned}\n2077: L_{z,L}^2(\\mathcal S_1,\\mathcal S_2)&:=2C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1)(L_R^{\\mathrm{Sasaki}})^2N\\\\&\\quad{}+\\frac{N}{\\lambda_{\\mathrm{status}}}\\Big(8C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1)(V_{\\max}^{(R)})^2+2C_{S,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S_1,\\mathcal S_2)\\Big),\\\\[4pt]\n2078: L_{z,H}^2(\\mathcal S_1,\\mathcal S_2)&:=2C_{S,\\mathrm{indirect}}^{\\mathrm{sq}}(\\mathcal S_1,\\mathcal S_2)\\left(\\frac{N}{\\lambda_{\\mathrm{status}}}\\right)^2.\n2079: \\end{aligned}\n2080: \n2081: $$\n2082: \n2083: All quantities on the right-hand side depend only on the swarm parameters and the bounds established earlier, so the coefficients are finite. Since the rescale function $g_A$ is globally Lipschitz ({prf:ref}`thm-rescale-function-lipschitz`), the continuity of $z$ implies the continuity of the composite operator $u(\\mathcal S)=g_A(z(\\mathcal S))$.\n2084: \n2085: **Q.E.D.**\n2086: ```\n2087: :::{prf:lemma} Lipschitz continuity of patched standardization (Sasaki)\n2088: :label: lem-sasaki-standardization-lipschitz\n2089: \n2090: The bounds in Theorem {prf:ref}`thm-sasaki-standardization-composite-sq` show that the patched standardization operator $z$ is continuous with respect to the dispersion metric. In particular, $z$ admits the composite Lipschitz–Hölder control\n2091: \n2092: $$\n2093: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2\\le L_{z,L}^2(\\mathcal S_1,\\mathcal S_2)\\,d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1,\\mathcal S_2)^2+L_{z,H}^2(\\mathcal S_1,\\mathcal S_2)\\,d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1,\\mathcal S_2)^4.\n2094: \n2095: $$\n2096: \n2097: ```{dropdown} Proof\n2098: :::{prf:proof}",
      "metadata": {
        "label": "lem-sasaki-standardization-lipschitz"
      },
      "section": "## 4. Axiom-by-axiom validation (Sasaki formulation)",
      "references": [
        "thm-sasaki-standardization-value",
        "thm-sasaki-standardization-structural-sq",
        "thm-rescale-function-lipschitz",
        "thm-sasaki-standardization-composite-sq"
      ],
      "raw_directive": "2001: ###### 2.3.8. Theorem: Composite Continuity of the Patched Standardization Operator\n2002: \n2003: :::{prf:theorem} Composite Continuity of the Patched Standardization Operator (Sasaki)\n2004: :label: thm-sasaki-standardization-composite-sq\n2005: \n2006: The N-dimensional standardization operator $z(\\mathcal S)$, when applied to the reward vector, is continuous with respect to the dispersion metric. For any two swarms $\\mathcal S_1, \\mathcal S_2$ with $k_1=|\\mathcal A(\\mathcal S_1)|\\ge 1$, the squared L2-norm of the output error is bounded by a composite function of the squared dispersion distance:\n2007: \n2008: $$\n2009: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2 \\le L_{z,L}^2(\\mathcal S_1,\\mathcal S_2) \\cdot d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1, \\mathcal S_2)^2 + L_{z,H}^2(\\mathcal S_1,\\mathcal S_2) \\cdot d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1, \\mathcal S_2)^4\n2010: \n2011: $$\n2012: \n2013: where $L_{z,L}^2$ and $L_{z,H}^2$ are state-dependent coefficients representing the Lipschitz and higher-order parts of the bound, respectively. Consequently, the logistic rescale operator $u(\\mathcal S) = g_A(z(\\mathcal S))$ is also continuous.\n2014: \n2015: ```{dropdown} Proof\n2016: :::{prf:proof}\n2017: The proof establishes a deterministic bound on the total error $\\|z(\\mathcal S_1, \\mathbf r_1) - z(\\mathcal S_2, \\mathbf r_2)\\|_2^2$ by combining the bounds for value-induced error and structure-induced error.\n2018: \n2019: **Step 1: Decomposing the Total Error.**\n2020: Let $\\mathbf r_1$ and $\\mathbf r_2$ be the raw reward vectors for swarms $\\mathcal S_1$ and $\\mathcal S_2$. We introduce an intermediate vector $z(\\mathcal S_1, \\mathbf r_2)$ and use the inequality $\\|A-C\\|_2^2 \\le 2(\\|A-B\\|_2^2 + \\|B-C\\|_2^2)$. The total squared error is bounded by the sum of a pure value error component and a pure structural error component:\n2021: \n2022: $$\n2023: \\|z(\\mathcal S_1, \\mathbf r_1) - z(\\mathcal S_2, \\mathbf r_2)\\|_2^2 \\le 2\\,\\|\\underbrace{z(\\mathcal S_1, \\mathbf r_1) - z(\\mathcal S_1, \\mathbf r_2)}_{E_V}\\|_2^2 + 2\\,\\|\\underbrace{z(\\mathcal S_1, \\mathbf r_2) - z(\\mathcal S_2, \\mathbf r_2)}_{E_S}\\|_2^2\n2024: \n2025: $$\n2026: \n2027: **Step 2: Bounding the Squared Value Error Term (`||E_V||_2^2`).**\n2028: The first term is a pure value error for the fixed swarm structure $\\mathcal S_1$. We apply Theorem {prf:ref}`thm-sasaki-standardization-value`:\n2029: \n2030: $$\n2031: \\|E_V\\|_2^2 \\le C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1) \\cdot \\|\\mathbf r_1 - \\mathbf r_2\\|_2^2\n2032: \n2033: $$\n2034: The squared difference of the raw reward vectors is bounded by the sum of contributions from walkers with stable status and unstable status:\n2035: \n2036: $$\n2037: \\|\\mathbf r_1 - \\mathbf r_2\\|_2^2 = \\sum_{i \\in \\mathcal A_1 \\cap \\mathcal A_2} |r_{1,i}-r_{2,i}|^2 + \\sum_{i \\in \\mathcal A_1 \\triangle \\mathcal A_2} |r_{1,i}-r_{2,i}|^2 \\le (L_R^{\\mathrm{Sasaki}})^2 \\Delta_{\\mathrm{pos,Sasaki}}^2 + n_c (2 V_{\\max}^{(R)})^2\n2038: \n2039: $$\n2040: where we used that for unstable walkers, one reward is zero and the other is bounded by $V_{\\max}^{(R)}$.\n2041: \n2042: **Step 3: Bounding the Squared Structural Error Term (`||E_S||_2^2`).**\n2043: The second term is a pure structural error for the fixed raw value vector $\\mathbf r_2$. We apply Theorem {prf:ref}`thm-sasaki-standardization-structural-sq`:\n2044: \n2045: $$\n2046: \\|E_S\\|_2^2 \\le C_{S,\\mathrm{direct}}^{\\mathrm{sq}} \\cdot n_c + C_{S,\\mathrm{indirect}}^{\\mathrm{sq}}(\\mathcal S_1, \\mathcal S_2) \\cdot n_c^2\n2047: \n2048: $$\n2049: \n2050: **Step 4: Assembling the Composite Bound in Terms of Displacement Components.**\n2051: Combining the bounds from Steps 2 and 3 into the decomposition from Step 1 gives a complete bound in terms of $\\Delta_{\\mathrm{pos,Sasaki}}^2$ and $n_c$:\n2052: \n2053: $$\n2054: \\|z_1 - z_2\\|_2^2 \\le 2\\,C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}} \\left[ (L_R^{\\mathrm{Sasaki}})^2 \\Delta_{\\mathrm{pos,Sasaki}}^2 + 4(V_{\\max}^{(R)})^2 n_c \\right] + 2 \\left[ C_{S,\\mathrm{direct}}^{\\mathrm{sq}} n_c + C_{S,\\mathrm{indirect}}^{\\mathrm{sq}} n_c^2 \\right]\n2055: \n2056: $$\n2057: \n2058: **Step 5: Expressing the Bound in Terms of the Dispersion Metric.**\n2059: Let $d^2:=d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1,\\mathcal S_2)^2$. From the definition of the dispersion metric we obtain\n2060: \n2061: $$\n2062: \\Delta_{\\mathrm{pos,Sasaki}}^2\\le N d^2,\\qquad n_c\\le\\frac{N}{\\lambda_{\\mathrm{status}}}d^2,\\qquad n_c^2\\le\\left(\\frac{N}{\\lambda_{\\mathrm{status}}}\\right)^2 d^4.\n2063: \n2064: $$\n2065: \n2066: Substituting these bounds into the expression from Step 4 yields\n2067: \n2068: $$\n2069: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2\\le L_{z,L}^2(\\mathcal S_1,\\mathcal S_2)d^2+L_{z,H}^2(\\mathcal S_1,\\mathcal S_2)d^4.\n2070: \n2071: $$\n2072: \n2073: The coefficients are explicit:\n2074: \n2075: $$\n2076: \\begin{aligned}\n2077: L_{z,L}^2(\\mathcal S_1,\\mathcal S_2)&:=2C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1)(L_R^{\\mathrm{Sasaki}})^2N\\\\&\\quad{}+\\frac{N}{\\lambda_{\\mathrm{status}}}\\Big(8C_{V,\\mathrm{total}}^{\\mathrm{Sasaki}}(\\mathcal S_1)(V_{\\max}^{(R)})^2+2C_{S,\\mathrm{direct}}^{\\mathrm{sq}}(\\mathcal S_1,\\mathcal S_2)\\Big),\\\\[4pt]\n2078: L_{z,H}^2(\\mathcal S_1,\\mathcal S_2)&:=2C_{S,\\mathrm{indirect}}^{\\mathrm{sq}}(\\mathcal S_1,\\mathcal S_2)\\left(\\frac{N}{\\lambda_{\\mathrm{status}}}\\right)^2.\n2079: \\end{aligned}\n2080: \n2081: $$\n2082: \n2083: All quantities on the right-hand side depend only on the swarm parameters and the bounds established earlier, so the coefficients are finite. Since the rescale function $g_A$ is globally Lipschitz ({prf:ref}`thm-rescale-function-lipschitz`), the continuity of $z$ implies the continuity of the composite operator $u(\\mathcal S)=g_A(z(\\mathcal S))$.\n2084: \n2085: **Q.E.D.**\n2086: ```\n2087: :::{prf:lemma} Lipschitz continuity of patched standardization (Sasaki)\n2088: :label: lem-sasaki-standardization-lipschitz\n2089: \n2090: The bounds in Theorem {prf:ref}`thm-sasaki-standardization-composite-sq` show that the patched standardization operator $z$ is continuous with respect to the dispersion metric. In particular, $z$ admits the composite Lipschitz–Hölder control\n2091: \n2092: $$\n2093: \\|z(\\mathcal S_1)-z(\\mathcal S_2)\\|_2^2\\le L_{z,L}^2(\\mathcal S_1,\\mathcal S_2)\\,d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1,\\mathcal S_2)^2+L_{z,H}^2(\\mathcal S_1,\\mathcal S_2)\\,d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}(\\mathcal S_1,\\mathcal S_2)^4.\n2094: \n2095: $$\n2096: \n2097: ```{dropdown} Proof\n2098: :::{prf:proof}\n2099: The inequality is precisely the statement of Theorem {prf:ref}`thm-sasaki-standardization-composite-sq`; no additional work is required.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "02_euclidean_gas",
        "chapter_index": 4,
        "chapter_file": "chapter_4.json",
        "section_id": "## 4. Axiom-by-axiom validation (Sasaki formulation)"
      }
    },
    {
      "directive_type": "theorem",
      "label": "thm-euclidean-feller",
      "title": "Feller continuity of $\\Psi_{\\mathcal F_{\\mathrm{EG}}}$",
      "start_line": 2306,
      "end_line": 2323,
      "header_lines": [
        2307
      ],
      "content_start": 2309,
      "content_end": 2322,
      "content": "2309: :label: thm-euclidean-feller\n2310: \n2311: ```{dropdown} Proof\n2312: :::{prf:proof}\n2313: Write the single-step operator as the composition of the cemetery check (Stage 1), the measurement and potential pipeline (Stage 2), the Clone/Persist gate (Stage 3), and the kinetic-plus-status update (Stage 4). Each stage defines a Markov kernel on $\\Sigma_N$ that is Feller with respect to $d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}$; the claim follows because Feller kernels are closed under composition (see, e.g., \\[Ethier & Kurtz 86, Prop. 4.2.2\\]).\n2314: \n2315: 1. **Stage 1 (cemetery absorption).** The map $\\mathcal S\\mapsto\\delta_{\\mathcal S}$ is continuous. The absorbing branch fires only when $\\mathcal A(\\mathcal S)=\\varnothing$, which is a closed condition, so Stage 1 is Feller.\n2316: \n2317: 2. **Stage 2 (measurement and potential pipeline).** Conditional on $\\mathcal S$, the companion draws $(c_{\\mathrm{pot}}(i))$ are sampled from the product coupling $\\mathbb C(\\mathcal S)$, which depends continuously on $\\mathcal S$ in the dispersion metric by Lemma {prf:ref}`lem-sasaki-single-walker-positional-error`. Lemma {prf:ref}`thm-sasaki-distance-ms` bounds the mean-square variation of the companion distances, and Lemma {prf:ref}`lem-sasaki-aggregator-lipschitz` together with Theorems {prf:ref}`thm-sasaki-standardization-value` and {prf:ref}`thm-sasaki-standardization-structural` show that the patched standardisation and logistic rescale operators depend continuously on the raw values. Consequently the kernel that outputs $(\\mathbf r,\\mathbf d,\\mathbf V_{\\text{fit}})$ is Feller.\n2318: \n2319: 3. **Stage 3 (Clone/Persist gate).** The Bernoulli probabilities $p_i(\\mathcal S)$ governing the Clone/Persist decision are continuous functions of the standardized scores produced in Stage 2. Conditional on cloning, the jitter distribution is Gaussian with fixed covariance; the resulting pushforward through the 1-Lipschitz squashing map $\\psi_v$ is Feller by Lemma {prf:ref}`lem-squashing-properties-generic`. Therefore the Stage-3 kernel is a finite mixture of Feller kernels with continuous weights and is itself Feller.\n2320: \n2321: 4. **Stage 4 (kinetic step and boundary check).** Lemma {prf:ref}`lem-euclidean-perturb-moment` proves that the capped kinetic update map $(x,v)\\mapsto(x^+,v^+)$ is Feller and that its second moment grows at most quadratically in the state norm. The status indicator is applied to $x^+$; Lemma {prf:ref}`lem-euclidean-boundary-holder` shows that the death probability varies continuously and that $\\mathbb P(x^+\\in\\partial\\mathcal X_{\\mathrm{valid}})=0$ under the $C^1$-boundary assumption, so the indicator preserves the Feller property.\n2322: ",
      "metadata": {
        "label": "thm-euclidean-feller"
      },
      "section": "## Appendix A. Proof of the Feller Property for the Euclidean Gas Kernel",
      "references": [
        "lem-sasaki-single-walker-positional-error",
        "thm-sasaki-distance-ms",
        "lem-sasaki-aggregator-lipschitz",
        "thm-sasaki-standardization-value",
        "thm-sasaki-standardization-structural",
        "lem-squashing-properties-generic",
        "lem-euclidean-perturb-moment",
        "lem-euclidean-boundary-holder"
      ],
      "raw_directive": "2306: ## Appendix A. Proof of the Feller Property for the Euclidean Gas Kernel\n2307: \n2308: :::{prf:theorem} Feller continuity of $\\Psi_{\\mathcal F_{\\mathrm{EG}}}$\n2309: :label: thm-euclidean-feller\n2310: \n2311: ```{dropdown} Proof\n2312: :::{prf:proof}\n2313: Write the single-step operator as the composition of the cemetery check (Stage 1), the measurement and potential pipeline (Stage 2), the Clone/Persist gate (Stage 3), and the kinetic-plus-status update (Stage 4). Each stage defines a Markov kernel on $\\Sigma_N$ that is Feller with respect to $d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}}$; the claim follows because Feller kernels are closed under composition (see, e.g., \\[Ethier & Kurtz 86, Prop. 4.2.2\\]).\n2314: \n2315: 1. **Stage 1 (cemetery absorption).** The map $\\mathcal S\\mapsto\\delta_{\\mathcal S}$ is continuous. The absorbing branch fires only when $\\mathcal A(\\mathcal S)=\\varnothing$, which is a closed condition, so Stage 1 is Feller.\n2316: \n2317: 2. **Stage 2 (measurement and potential pipeline).** Conditional on $\\mathcal S$, the companion draws $(c_{\\mathrm{pot}}(i))$ are sampled from the product coupling $\\mathbb C(\\mathcal S)$, which depends continuously on $\\mathcal S$ in the dispersion metric by Lemma {prf:ref}`lem-sasaki-single-walker-positional-error`. Lemma {prf:ref}`thm-sasaki-distance-ms` bounds the mean-square variation of the companion distances, and Lemma {prf:ref}`lem-sasaki-aggregator-lipschitz` together with Theorems {prf:ref}`thm-sasaki-standardization-value` and {prf:ref}`thm-sasaki-standardization-structural` show that the patched standardisation and logistic rescale operators depend continuously on the raw values. Consequently the kernel that outputs $(\\mathbf r,\\mathbf d,\\mathbf V_{\\text{fit}})$ is Feller.\n2318: \n2319: 3. **Stage 3 (Clone/Persist gate).** The Bernoulli probabilities $p_i(\\mathcal S)$ governing the Clone/Persist decision are continuous functions of the standardized scores produced in Stage 2. Conditional on cloning, the jitter distribution is Gaussian with fixed covariance; the resulting pushforward through the 1-Lipschitz squashing map $\\psi_v$ is Feller by Lemma {prf:ref}`lem-squashing-properties-generic`. Therefore the Stage-3 kernel is a finite mixture of Feller kernels with continuous weights and is itself Feller.\n2320: \n2321: 4. **Stage 4 (kinetic step and boundary check).** Lemma {prf:ref}`lem-euclidean-perturb-moment` proves that the capped kinetic update map $(x,v)\\mapsto(x^+,v^+)$ is Feller and that its second moment grows at most quadratically in the state norm. The status indicator is applied to $x^+$; Lemma {prf:ref}`lem-euclidean-boundary-holder` shows that the death probability varies continuously and that $\\mathbb P(x^+\\in\\partial\\mathcal X_{\\mathrm{valid}})=0$ under the $C^1$-boundary assumption, so the indicator preserves the Feller property.\n2322: \n2323: Since every stage is Feller, their composition $\\Psi_{\\mathcal F_{\\mathrm{EG}}}$ is a Feller Markov kernel on $(\\Sigma_N,d_{\\mathrm{Disp},\\mathcal Y}^{\\mathrm{Sasaki}})$.",
      "_registry_context": {
        "stage": "directives",
        "document_id": "02_euclidean_gas",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## Appendix A. Proof of the Feller Property for the Euclidean Gas Kernel"
      }
    }
  ]
}