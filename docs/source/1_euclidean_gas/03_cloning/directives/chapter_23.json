{
  "chapter_index": 23,
  "section_id": "## 11.2. The Boundary Barrier and Fitness Gradient",
  "directive_count": 6,
  "hints": [
    {
      "directive_type": "definition",
      "label": "def-boundary-potential-recall",
      "title": "Boundary Potential Component (Recall)",
      "start_line": 7096,
      "end_line": 7114,
      "header_lines": [
        7097
      ],
      "content_start": 7099,
      "content_end": 7113,
      "content": "7099: :label: def-boundary-potential-recall\n7100: \n7101: From {prf:ref}`def-full-synergistic-lyapunov-function`, the boundary potential is:\n7102: \n7103: $$\n7104: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n7105: $$\n7106: \n7107: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function satisfying:\n7108: \n7109: 1. **Interior safety:** $\\varphi_{\\text{barrier}}(x) = 0$ for $x$ in the safe interior region (distance $> \\delta_{\\text{safe}}$ from boundary)\n7110: \n7111: 2. **Boundary growth:** $\\varphi_{\\text{barrier}}(x) \\to \\infty$ as $x \\to \\partial \\mathcal{X}_{\\text{valid}}$\n7112: \n7113: 3. **Smoothness:** $\\varphi_{\\text{barrier}} \\in C^2(\\mathcal{X}_{\\text{valid}})$ with bounded derivatives in the interior",
      "metadata": {
        "label": "def-boundary-potential-recall"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [
        "def-full-synergistic-lyapunov-function",
        "prop-barrier-existence"
      ],
      "raw_directive": "7096: ### 11.2.1. The Barrier Function\n7097: \n7098: :::{prf:definition} Boundary Potential Component (Recall)\n7099: :label: def-boundary-potential-recall\n7100: \n7101: From {prf:ref}`def-full-synergistic-lyapunov-function`, the boundary potential is:\n7102: \n7103: $$\n7104: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n7105: $$\n7106: \n7107: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function satisfying:\n7108: \n7109: 1. **Interior safety:** $\\varphi_{\\text{barrier}}(x) = 0$ for $x$ in the safe interior region (distance $> \\delta_{\\text{safe}}$ from boundary)\n7110: \n7111: 2. **Boundary growth:** $\\varphi_{\\text{barrier}}(x) \\to \\infty$ as $x \\to \\partial \\mathcal{X}_{\\text{valid}}$\n7112: \n7113: 3. **Smoothness:** $\\varphi_{\\text{barrier}} \\in C^2(\\mathcal{X}_{\\text{valid}})$ with bounded derivatives in the interior\n7114: "
    },
    {
      "directive_type": "remark",
      "label": "rem-barrier-geometric-penalty",
      "title": "Barrier Function as Geometric Penalty",
      "start_line": 7116,
      "end_line": 7128,
      "header_lines": [
        7117
      ],
      "content_start": 7119,
      "content_end": 7127,
      "content": "7119: :label: rem-barrier-geometric-penalty\n7120: \n7121: The barrier function creates a \"soft wall\" around the boundary:\n7122: \n7123: - **Far from boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) > \\delta_{\\text{safe}}$): No penalty, $\\varphi_{\\text{barrier}}(x) = 0$\n7124: \n7125: - **Near boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) \\leq \\delta_{\\text{safe}}$): Penalty increases, reducing fitness\n7126: \n7127: - **At boundary:** Infinite penalty (though walkers at the boundary are dead, so this limit is never realized for alive walkers)",
      "metadata": {
        "label": "rem-barrier-geometric-penalty"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7116: :::\n7117: \n7118: :::{prf:remark} Barrier Function as Geometric Penalty\n7119: :label: rem-barrier-geometric-penalty\n7120: \n7121: The barrier function creates a \"soft wall\" around the boundary:\n7122: \n7123: - **Far from boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) > \\delta_{\\text{safe}}$): No penalty, $\\varphi_{\\text{barrier}}(x) = 0$\n7124: \n7125: - **Near boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) \\leq \\delta_{\\text{safe}}$): Penalty increases, reducing fitness\n7126: \n7127: - **At boundary:** Infinite penalty (though walkers at the boundary are dead, so this limit is never realized for alive walkers)\n7128: "
    },
    {
      "directive_type": "lemma",
      "label": "lem-fitness-gradient-boundary",
      "title": "Fitness Gradient from Boundary Proximity",
      "start_line": 7140,
      "end_line": 7156,
      "header_lines": [
        7141
      ],
      "content_start": 7143,
      "content_end": 7155,
      "content": "7143: :label: lem-fitness-gradient-boundary\n7144: \n7145: Consider two walkers $i$ and $j$ with similar positions and velocities, except that walker $i$ is closer to the boundary than walker $j$. Specifically, let:\n7146: \n7147: $$\n7148: \\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j) = \\Delta_{\\text{barrier}} > 0\n7149: $$\n7150: \n7151: Then, under the fitness evaluation pipeline (Chapter 5), walker $i$ has systematically lower fitness potential:\n7152: \n7153: $$\n7154: V_{\\text{fit},i} \\leq V_{\\text{fit},j} - f(\\Delta_{\\text{barrier}})\n7155: $$",
      "metadata": {
        "label": "lem-fitness-gradient-boundary"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7140: This raw reward feeds into the fitness potential calculation, so walkers near the boundary have systematically lower fitness.\n7141: \n7142: :::{prf:lemma} Fitness Gradient from Boundary Proximity\n7143: :label: lem-fitness-gradient-boundary\n7144: \n7145: Consider two walkers $i$ and $j$ with similar positions and velocities, except that walker $i$ is closer to the boundary than walker $j$. Specifically, let:\n7146: \n7147: $$\n7148: \\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j) = \\Delta_{\\text{barrier}} > 0\n7149: $$\n7150: \n7151: Then, under the fitness evaluation pipeline (Chapter 5), walker $i$ has systematically lower fitness potential:\n7152: \n7153: $$\n7154: V_{\\text{fit},i} \\leq V_{\\text{fit},j} - f(\\Delta_{\\text{barrier}})\n7155: $$\n7156: "
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-fitness-gradient-boundary",
      "title": null,
      "start_line": 7158,
      "end_line": 7298,
      "header_lines": [
        7159
      ],
      "content_start": 7160,
      "content_end": 7297,
      "content": "7160: :::{prf:proof}\n7161: :label: proof-lem-fitness-gradient-boundary\n7162: **Proof.**\n7163: \n7164: The proof traces the boundary-induced fitness difference through each stage of the measurement and fitness evaluation pipeline defined in Chapter 5, demonstrating that the ordering is preserved and quantifying the resulting gap.\n7165: \n7166: **Step 1: Raw reward difference.**\n7167: \n7168: The raw reward for walker $i$ is defined as (from Section 5.6):\n7169: \n7170: $$\n7171: r_i = R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\n7172: $$\n7173: \n7174: where $R_{\\text{pos}}(x_i)$ is the positional reward component and $\\varphi_{\\text{barrier}}(x_i)$ is the boundary barrier penalty.\n7175: \n7176: For walkers $i$ and $j$ with similar positions and velocities (so $R_{\\text{pos}}(x_i) \\approx R_{\\text{pos}}(x_j)$ and $\\|v_i\\| \\approx \\|v_j\\|$), but with walker $i$ closer to the boundary ($\\varphi_{\\text{barrier}}(x_i) > \\varphi_{\\text{barrier}}(x_j)$), the raw reward difference is:\n7177: \n7178: $$\n7179: \\begin{aligned}\n7180: r_i - r_j &= \\left[R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\\right] - \\left[R_{\\text{pos}}(x_j) - c_{v\\_reg} \\|v_j\\|^2 - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7181: &\\approx -\\left[\\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7182: &= -\\Delta_{\\text{barrier}} < 0\n7183: \\end{aligned}\n7184: $$\n7185: \n7186: Thus, walker $i$ has strictly lower raw reward than walker $j$.\n7187: \n7188: **Step 2: Floor addition preserves ordering.**\n7189: \n7190: The fitness potential construction adds a positive floor $\\eta > 0$ to ensure all values are positive:\n7191: \n7192: $$\n7193: \\tilde{r}_i = r_i + \\eta, \\quad \\tilde{r}_j = r_j + \\eta\n7194: $$\n7195: \n7196: Since adding a constant preserves ordering:\n7197: \n7198: $$\n7199: \\tilde{r}_i - \\tilde{r}_j = (r_i + \\eta) - (r_j + \\eta) = r_i - r_j = -\\Delta_{\\text{barrier}} < 0\n7200: $$\n7201: \n7202: Therefore, $\\tilde{r}_i < \\tilde{r}_j$.\n7203: \n7204: **Step 3: Z-score standardization preserves ordering.**\n7205: \n7206: The standardized Z-scores are computed as (from Section 5.3):\n7207: \n7208: $$\n7209: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}, \\quad z_{r,j} = \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}\n7210: $$\n7211: \n7212: where $\\mu_{\\tilde{r}}$ is the mean and $\\sigma'_{\\tilde{r}} > 0$ is the patched standard deviation (see {prf:ref}`def-patched-std-dev-function`) (strictly positive by definition).\n7213: \n7214: Since $\\tilde{r}_i < \\tilde{r}_j$ and we're dividing by the same positive quantity:\n7215: \n7216: $$\n7217: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} < \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} = z_{r,j}\n7218: $$\n7219: \n7220: The ordering is preserved: $z_{r,i} < z_{r,j}$.\n7221: \n7222: **Step 4: Fitness potential computation.**\n7223: \n7224: The fitness potential is computed as (from Section 5.7):\n7225: \n7226: $$\n7227: V_{\\text{fit},i} = (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta}\n7228: $$\n7229: \n7230: where $\\alpha, \\beta > 0$ are the weighting exponents and $\\eta > 0$ ensures positivity of the argument.\n7231: \n7232: Assuming walkers $i$ and $j$ have similar diversity measurements (i.e., $z_{d,i} \\approx z_{d,j}$), the fitness potentials satisfy:\n7233: \n7234: $$\n7235: \\begin{aligned}\n7236: V_{\\text{fit},i} &= (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta} \\\\\n7237: V_{\\text{fit},j} &= (\\alpha z_{d,j} + \\beta z_{r,j} + \\eta)^{\\alpha+\\beta}\n7238: \\end{aligned}\n7239: $$\n7240: \n7241: Since $z_{r,i} < z_{r,j}$ and $z_{d,i} \\approx z_{d,j}$:\n7242: \n7243: $$\n7244: \\alpha z_{d,i} + \\beta z_{r,i} + \\eta < \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7245: $$\n7246: \n7247: The function $f(x) = x^{\\alpha+\\beta}$ is strictly increasing for $x > 0$ and $\\alpha + \\beta > 0$. Therefore:\n7248: \n7249: $$\n7250: V_{\\text{fit},i} < V_{\\text{fit},j}\n7251: $$\n7252: \n7253: **Step 5: Quantifying the fitness gap $f(\\Delta_{\\text{barrier}})$.**\n7254: \n7255: To obtain an explicit lower bound on the fitness gap, we use the mean value theorem. Let:\n7256: \n7257: $$\n7258: u_i := \\alpha z_{d,i} + \\beta z_{r,i} + \\eta, \\quad u_j := \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7259: $$\n7260: \n7261: By the mean value theorem, there exists $\\xi \\in (u_i, u_j)$ such that:\n7262: \n7263: $$\n7264: V_{\\text{fit},j} - V_{\\text{fit},i} = (u_j - u_i) \\cdot (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1}\n7265: $$\n7266: \n7267: The difference in arguments is:\n7268: \n7269: $$\n7270: u_j - u_i = \\beta(z_{r,j} - z_{r,i}) + \\alpha(z_{d,j} - z_{d,i}) \\approx \\beta(z_{r,j} - z_{r,i}) = \\frac{\\beta}{\\sigma'_{\\tilde{r}}}(\\tilde{r}_j - \\tilde{r}_i) = \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}}\n7271: $$\n7272: \n7273: Since $u_i, u_j > \\eta > 0$ (by construction), we have $\\xi > \\eta$. The derivative term is bounded below:\n7274: \n7275: $$\n7276: (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1} \\geq (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} > 0\n7277: $$\n7278: \n7279: Therefore, the fitness gap satisfies:\n7280: \n7281: $$\n7282: V_{\\text{fit},j} - V_{\\text{fit},i} \\geq \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}} \\cdot (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} =: f(\\Delta_{\\text{barrier}})\n7283: $$\n7284: \n7285: **Step 6: N-uniformity of the fitness gap function.**\n7286: \n7287: The function $f(\\Delta) = c_{\\beta} \\Delta$ where:\n7288: \n7289: $$\n7290: c_{\\beta} := \\frac{\\beta (\\alpha + \\beta)}{\\sigma'_{\\max}} \\eta^{\\alpha + \\beta - 1}\n7291: $$\n7292: \n7293: is a positive constant independent of $N$. Here $\\sigma'_{\\max}$ is an upper bound on the patched standard deviation (which exists by the boundedness axioms). The fitness gap scales linearly with the barrier difference, with a proportionality constant determined by the algorithm's reward sensitivity parameter $\\beta$ and the standardization scaling.\n7294: \n7295: **Conclusion:**\n7296: \n7297: The boundary proximity creates a systematic fitness deficit: walker $i$ (closer to boundary) has fitness potential at least $f(\\Delta_{\\text{barrier}})$ lower than walker $j$ (farther from boundary), where $f$ is a positive, N-uniform, monotonically increasing function of the barrier difference.",
      "metadata": {
        "label": "proof-lem-fitness-gradient-boundary"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [
        "def-patched-std-dev-function"
      ],
      "raw_directive": "7158: :::\n7159: \n7160: :::{prf:proof}\n7161: :label: proof-lem-fitness-gradient-boundary\n7162: **Proof.**\n7163: \n7164: The proof traces the boundary-induced fitness difference through each stage of the measurement and fitness evaluation pipeline defined in Chapter 5, demonstrating that the ordering is preserved and quantifying the resulting gap.\n7165: \n7166: **Step 1: Raw reward difference.**\n7167: \n7168: The raw reward for walker $i$ is defined as (from Section 5.6):\n7169: \n7170: $$\n7171: r_i = R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\n7172: $$\n7173: \n7174: where $R_{\\text{pos}}(x_i)$ is the positional reward component and $\\varphi_{\\text{barrier}}(x_i)$ is the boundary barrier penalty.\n7175: \n7176: For walkers $i$ and $j$ with similar positions and velocities (so $R_{\\text{pos}}(x_i) \\approx R_{\\text{pos}}(x_j)$ and $\\|v_i\\| \\approx \\|v_j\\|$), but with walker $i$ closer to the boundary ($\\varphi_{\\text{barrier}}(x_i) > \\varphi_{\\text{barrier}}(x_j)$), the raw reward difference is:\n7177: \n7178: $$\n7179: \\begin{aligned}\n7180: r_i - r_j &= \\left[R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\\right] - \\left[R_{\\text{pos}}(x_j) - c_{v\\_reg} \\|v_j\\|^2 - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7181: &\\approx -\\left[\\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7182: &= -\\Delta_{\\text{barrier}} < 0\n7183: \\end{aligned}\n7184: $$\n7185: \n7186: Thus, walker $i$ has strictly lower raw reward than walker $j$.\n7187: \n7188: **Step 2: Floor addition preserves ordering.**\n7189: \n7190: The fitness potential construction adds a positive floor $\\eta > 0$ to ensure all values are positive:\n7191: \n7192: $$\n7193: \\tilde{r}_i = r_i + \\eta, \\quad \\tilde{r}_j = r_j + \\eta\n7194: $$\n7195: \n7196: Since adding a constant preserves ordering:\n7197: \n7198: $$\n7199: \\tilde{r}_i - \\tilde{r}_j = (r_i + \\eta) - (r_j + \\eta) = r_i - r_j = -\\Delta_{\\text{barrier}} < 0\n7200: $$\n7201: \n7202: Therefore, $\\tilde{r}_i < \\tilde{r}_j$.\n7203: \n7204: **Step 3: Z-score standardization preserves ordering.**\n7205: \n7206: The standardized Z-scores are computed as (from Section 5.3):\n7207: \n7208: $$\n7209: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}, \\quad z_{r,j} = \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}\n7210: $$\n7211: \n7212: where $\\mu_{\\tilde{r}}$ is the mean and $\\sigma'_{\\tilde{r}} > 0$ is the patched standard deviation (see {prf:ref}`def-patched-std-dev-function`) (strictly positive by definition).\n7213: \n7214: Since $\\tilde{r}_i < \\tilde{r}_j$ and we're dividing by the same positive quantity:\n7215: \n7216: $$\n7217: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} < \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} = z_{r,j}\n7218: $$\n7219: \n7220: The ordering is preserved: $z_{r,i} < z_{r,j}$.\n7221: \n7222: **Step 4: Fitness potential computation.**\n7223: \n7224: The fitness potential is computed as (from Section 5.7):\n7225: \n7226: $$\n7227: V_{\\text{fit},i} = (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta}\n7228: $$\n7229: \n7230: where $\\alpha, \\beta > 0$ are the weighting exponents and $\\eta > 0$ ensures positivity of the argument.\n7231: \n7232: Assuming walkers $i$ and $j$ have similar diversity measurements (i.e., $z_{d,i} \\approx z_{d,j}$), the fitness potentials satisfy:\n7233: \n7234: $$\n7235: \\begin{aligned}\n7236: V_{\\text{fit},i} &= (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta} \\\\\n7237: V_{\\text{fit},j} &= (\\alpha z_{d,j} + \\beta z_{r,j} + \\eta)^{\\alpha+\\beta}\n7238: \\end{aligned}\n7239: $$\n7240: \n7241: Since $z_{r,i} < z_{r,j}$ and $z_{d,i} \\approx z_{d,j}$:\n7242: \n7243: $$\n7244: \\alpha z_{d,i} + \\beta z_{r,i} + \\eta < \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7245: $$\n7246: \n7247: The function $f(x) = x^{\\alpha+\\beta}$ is strictly increasing for $x > 0$ and $\\alpha + \\beta > 0$. Therefore:\n7248: \n7249: $$\n7250: V_{\\text{fit},i} < V_{\\text{fit},j}\n7251: $$\n7252: \n7253: **Step 5: Quantifying the fitness gap $f(\\Delta_{\\text{barrier}})$.**\n7254: \n7255: To obtain an explicit lower bound on the fitness gap, we use the mean value theorem. Let:\n7256: \n7257: $$\n7258: u_i := \\alpha z_{d,i} + \\beta z_{r,i} + \\eta, \\quad u_j := \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7259: $$\n7260: \n7261: By the mean value theorem, there exists $\\xi \\in (u_i, u_j)$ such that:\n7262: \n7263: $$\n7264: V_{\\text{fit},j} - V_{\\text{fit},i} = (u_j - u_i) \\cdot (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1}\n7265: $$\n7266: \n7267: The difference in arguments is:\n7268: \n7269: $$\n7270: u_j - u_i = \\beta(z_{r,j} - z_{r,i}) + \\alpha(z_{d,j} - z_{d,i}) \\approx \\beta(z_{r,j} - z_{r,i}) = \\frac{\\beta}{\\sigma'_{\\tilde{r}}}(\\tilde{r}_j - \\tilde{r}_i) = \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}}\n7271: $$\n7272: \n7273: Since $u_i, u_j > \\eta > 0$ (by construction), we have $\\xi > \\eta$. The derivative term is bounded below:\n7274: \n7275: $$\n7276: (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1} \\geq (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} > 0\n7277: $$\n7278: \n7279: Therefore, the fitness gap satisfies:\n7280: \n7281: $$\n7282: V_{\\text{fit},j} - V_{\\text{fit},i} \\geq \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}} \\cdot (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} =: f(\\Delta_{\\text{barrier}})\n7283: $$\n7284: \n7285: **Step 6: N-uniformity of the fitness gap function.**\n7286: \n7287: The function $f(\\Delta) = c_{\\beta} \\Delta$ where:\n7288: \n7289: $$\n7290: c_{\\beta} := \\frac{\\beta (\\alpha + \\beta)}{\\sigma'_{\\max}} \\eta^{\\alpha + \\beta - 1}\n7291: $$\n7292: \n7293: is a positive constant independent of $N$. Here $\\sigma'_{\\max}$ is an upper bound on the patched standard deviation (which exists by the boundedness axioms). The fitness gap scales linearly with the barrier difference, with a proportionality constant determined by the algorithm's reward sensitivity parameter $\\beta$ and the standardization scaling.\n7294: \n7295: **Conclusion:**\n7296: \n7297: The boundary proximity creates a systematic fitness deficit: walker $i$ (closer to boundary) has fitness potential at least $f(\\Delta_{\\text{barrier}})$ lower than walker $j$ (farther from boundary), where $f$ is a positive, N-uniform, monotonically increasing function of the barrier difference.\n7298: "
    },
    {
      "directive_type": "definition",
      "label": "def-boundary-exposed-set",
      "title": "The Boundary-Exposed Set",
      "start_line": 7304,
      "end_line": 7321,
      "header_lines": [
        7305
      ],
      "content_start": 7307,
      "content_end": 7320,
      "content": "7307: :label: def-boundary-exposed-set\n7308: \n7309: For a swarm $S$ and a threshold $\\phi_{\\text{thresh}} > 0$, the **boundary-exposed set** is:\n7310: \n7311: $$\n7312: \\mathcal{E}_{\\text{boundary}}(S) := \\{i \\in \\mathcal{A}(S) : \\varphi_{\\text{barrier}}(x_i) > \\phi_{\\text{thresh}}\\}\n7313: $$\n7314: \n7315: These are alive walkers whose barrier penalty exceeds the threshold, indicating dangerous proximity to the boundary.\n7316: \n7317: The **boundary-exposed mass** is:\n7318: \n7319: $$\n7320: M_{\\text{boundary}}(S) := \\frac{1}{N} \\sum_{i \\in \\mathcal{E}_{\\text{boundary}}(S)} \\varphi_{\\text{barrier}}(x_i)",
      "metadata": {
        "label": "def-boundary-exposed-set"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7304: We now formalize the set of walkers (see {prf:ref}`def-boundary-exposed-set`) that are in danger due to boundary proximity.\n7305: \n7306: :::{prf:definition} The Boundary-Exposed Set\n7307: :label: def-boundary-exposed-set\n7308: \n7309: For a swarm $S$ and a threshold $\\phi_{\\text{thresh}} > 0$, the **boundary-exposed set** is:\n7310: \n7311: $$\n7312: \\mathcal{E}_{\\text{boundary}}(S) := \\{i \\in \\mathcal{A}(S) : \\varphi_{\\text{barrier}}(x_i) > \\phi_{\\text{thresh}}\\}\n7313: $$\n7314: \n7315: These are alive walkers whose barrier penalty exceeds the threshold, indicating dangerous proximity to the boundary.\n7316: \n7317: The **boundary-exposed mass** is:\n7318: \n7319: $$\n7320: M_{\\text{boundary}}(S) := \\frac{1}{N} \\sum_{i \\in \\mathcal{E}_{\\text{boundary}}(S)} \\varphi_{\\text{barrier}}(x_i)\n7321: $$"
    },
    {
      "directive_type": "remark",
      "label": "rem-boundary-mass-relationship",
      "title": "Relationship to Total Boundary Potential",
      "start_line": 7323,
      "end_line": 7333,
      "header_lines": [
        7324
      ],
      "content_start": 7326,
      "content_end": 7332,
      "content": "7326: :label: rem-boundary-mass-relationship\n7327: \n7328: If all walkers outside the exposed set have $\\varphi_{\\text{barrier}}(x_i) \\leq \\phi_{\\text{thresh}}$, then:\n7329: \n7330: $$\n7331: W_b(S_k) = \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\varphi_{\\text{barrier}}(x_i) \\leq M_{\\text{boundary}}(S_k) + \\frac{k_{\\text{alive}}}{N} \\phi_{\\text{thresh}}\n7332: $$",
      "metadata": {
        "label": "rem-boundary-mass-relationship"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7323: :::\n7324: \n7325: :::{prf:remark} Relationship to Total Boundary Potential\n7326: :label: rem-boundary-mass-relationship\n7327: \n7328: If all walkers outside the exposed set have $\\varphi_{\\text{barrier}}(x_i) \\leq \\phi_{\\text{thresh}}$, then:\n7329: \n7330: $$\n7331: W_b(S_k) = \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\varphi_{\\text{barrier}}(x_i) \\leq M_{\\text{boundary}}(S_k) + \\frac{k_{\\text{alive}}}{N} \\phi_{\\text{thresh}}\n7332: $$\n7333: "
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}