{
  "chapter_index": 23,
  "section_id": "## 11.2. The Boundary Barrier and Fitness Gradient",
  "directive_count": 6,
  "hints": [
    {
      "directive_type": "definition",
      "label": "def-boundary-potential-recall",
      "title": "Boundary Potential Component (Recall)",
      "start_line": 7051,
      "end_line": 7069,
      "header_lines": [
        7052
      ],
      "content_start": 7054,
      "content_end": 7068,
      "content": "7054: :label: def-boundary-potential-recall\n7055: \n7056: From {prf:ref}`def-full-synergistic-lyapunov-function`, the boundary potential is:\n7057: \n7058: $$\n7059: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n7060: $$\n7061: \n7062: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function satisfying:\n7063: \n7064: 1. **Interior safety:** $\\varphi_{\\text{barrier}}(x) = 0$ for $x$ in the safe interior region (distance $> \\delta_{\\text{safe}}$ from boundary)\n7065: \n7066: 2. **Boundary growth:** $\\varphi_{\\text{barrier}}(x) \\to \\infty$ as $x \\to \\partial \\mathcal{X}_{\\text{valid}}$\n7067: \n7068: 3. **Smoothness:** $\\varphi_{\\text{barrier}} \\in C^2(\\mathcal{X}_{\\text{valid}})$ with bounded derivatives in the interior",
      "metadata": {
        "label": "def-boundary-potential-recall"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [
        "def-full-synergistic-lyapunov-function",
        "prop-barrier-existence"
      ],
      "raw_directive": "7051: ### 11.2.1. The Barrier Function\n7052: \n7053: :::{prf:definition} Boundary Potential Component (Recall)\n7054: :label: def-boundary-potential-recall\n7055: \n7056: From {prf:ref}`def-full-synergistic-lyapunov-function`, the boundary potential is:\n7057: \n7058: $$\n7059: W_b(S_1, S_2) := \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_1)} \\varphi_{\\text{barrier}}(x_{1,i}) + \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_2)} \\varphi_{\\text{barrier}}(x_{2,i})\n7060: $$\n7061: \n7062: where $\\varphi_{\\text{barrier}}: \\mathcal{X}_{\\text{valid}} \\to \\mathbb{R}_{\\geq 0}$ is the smooth barrier function satisfying:\n7063: \n7064: 1. **Interior safety:** $\\varphi_{\\text{barrier}}(x) = 0$ for $x$ in the safe interior region (distance $> \\delta_{\\text{safe}}$ from boundary)\n7065: \n7066: 2. **Boundary growth:** $\\varphi_{\\text{barrier}}(x) \\to \\infty$ as $x \\to \\partial \\mathcal{X}_{\\text{valid}}$\n7067: \n7068: 3. **Smoothness:** $\\varphi_{\\text{barrier}} \\in C^2(\\mathcal{X}_{\\text{valid}})$ with bounded derivatives in the interior\n7069: "
    },
    {
      "directive_type": "remark",
      "label": "rem-barrier-geometric-penalty",
      "title": "Barrier Function as Geometric Penalty",
      "start_line": 7071,
      "end_line": 7083,
      "header_lines": [
        7072
      ],
      "content_start": 7074,
      "content_end": 7082,
      "content": "7074: :label: rem-barrier-geometric-penalty\n7075: \n7076: The barrier function creates a \"soft wall\" around the boundary:\n7077: \n7078: - **Far from boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) > \\delta_{\\text{safe}}$): No penalty, $\\varphi_{\\text{barrier}}(x) = 0$\n7079: \n7080: - **Near boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) \\leq \\delta_{\\text{safe}}$): Penalty increases, reducing fitness\n7081: \n7082: - **At boundary:** Infinite penalty (though walkers at the boundary are dead, so this limit is never realized for alive walkers)",
      "metadata": {
        "label": "rem-barrier-geometric-penalty"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7071: :::\n7072: \n7073: :::{prf:remark} Barrier Function as Geometric Penalty\n7074: :label: rem-barrier-geometric-penalty\n7075: \n7076: The barrier function creates a \"soft wall\" around the boundary:\n7077: \n7078: - **Far from boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) > \\delta_{\\text{safe}}$): No penalty, $\\varphi_{\\text{barrier}}(x) = 0$\n7079: \n7080: - **Near boundary** ($d(x, \\partial \\mathcal{X}_{\\text{valid}}) \\leq \\delta_{\\text{safe}}$): Penalty increases, reducing fitness\n7081: \n7082: - **At boundary:** Infinite penalty (though walkers at the boundary are dead, so this limit is never realized for alive walkers)\n7083: "
    },
    {
      "directive_type": "lemma",
      "label": "lem-fitness-gradient-boundary",
      "title": "Fitness Gradient from Boundary Proximity",
      "start_line": 7095,
      "end_line": 7111,
      "header_lines": [
        7096
      ],
      "content_start": 7098,
      "content_end": 7110,
      "content": "7098: :label: lem-fitness-gradient-boundary\n7099: \n7100: Consider two walkers $i$ and $j$ with similar positions and velocities, except that walker $i$ is closer to the boundary than walker $j$. Specifically, let:\n7101: \n7102: $$\n7103: \\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j) = \\Delta_{\\text{barrier}} > 0\n7104: $$\n7105: \n7106: Then, under the fitness evaluation pipeline (Chapter 5), walker $i$ has systematically lower fitness potential:\n7107: \n7108: $$\n7109: V_{\\text{fit},i} \\leq V_{\\text{fit},j} - f(\\Delta_{\\text{barrier}})\n7110: $$",
      "metadata": {
        "label": "lem-fitness-gradient-boundary"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7095: This raw reward feeds into the fitness potential calculation, so walkers near the boundary have systematically lower fitness.\n7096: \n7097: :::{prf:lemma} Fitness Gradient from Boundary Proximity\n7098: :label: lem-fitness-gradient-boundary\n7099: \n7100: Consider two walkers $i$ and $j$ with similar positions and velocities, except that walker $i$ is closer to the boundary than walker $j$. Specifically, let:\n7101: \n7102: $$\n7103: \\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j) = \\Delta_{\\text{barrier}} > 0\n7104: $$\n7105: \n7106: Then, under the fitness evaluation pipeline (Chapter 5), walker $i$ has systematically lower fitness potential:\n7107: \n7108: $$\n7109: V_{\\text{fit},i} \\leq V_{\\text{fit},j} - f(\\Delta_{\\text{barrier}})\n7110: $$\n7111: "
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-fitness-gradient-boundary",
      "title": null,
      "start_line": 7113,
      "end_line": 7253,
      "header_lines": [
        7114
      ],
      "content_start": 7115,
      "content_end": 7252,
      "content": "7115: :::{prf:proof}\n7116: :label: proof-lem-fitness-gradient-boundary\n7117: **Proof.**\n7118: \n7119: The proof traces the boundary-induced fitness difference through each stage of the measurement and fitness evaluation pipeline defined in Chapter 5, demonstrating that the ordering is preserved and quantifying the resulting gap.\n7120: \n7121: **Step 1: Raw reward difference.**\n7122: \n7123: The raw reward for walker $i$ is defined as (from Section 5.6):\n7124: \n7125: $$\n7126: r_i = R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\n7127: $$\n7128: \n7129: where $R_{\\text{pos}}(x_i)$ is the positional reward component and $\\varphi_{\\text{barrier}}(x_i)$ is the boundary barrier penalty.\n7130: \n7131: For walkers $i$ and $j$ with similar positions and velocities (so $R_{\\text{pos}}(x_i) \\approx R_{\\text{pos}}(x_j)$ and $\\|v_i\\| \\approx \\|v_j\\|$), but with walker $i$ closer to the boundary ($\\varphi_{\\text{barrier}}(x_i) > \\varphi_{\\text{barrier}}(x_j)$), the raw reward difference is:\n7132: \n7133: $$\n7134: \\begin{aligned}\n7135: r_i - r_j &= \\left[R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\\right] - \\left[R_{\\text{pos}}(x_j) - c_{v\\_reg} \\|v_j\\|^2 - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7136: &\\approx -\\left[\\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7137: &= -\\Delta_{\\text{barrier}} < 0\n7138: \\end{aligned}\n7139: $$\n7140: \n7141: Thus, walker $i$ has strictly lower raw reward than walker $j$.\n7142: \n7143: **Step 2: Floor addition preserves ordering.**\n7144: \n7145: The fitness potential construction adds a positive floor $\\eta > 0$ to ensure all values are positive:\n7146: \n7147: $$\n7148: \\tilde{r}_i = r_i + \\eta, \\quad \\tilde{r}_j = r_j + \\eta\n7149: $$\n7150: \n7151: Since adding a constant preserves ordering:\n7152: \n7153: $$\n7154: \\tilde{r}_i - \\tilde{r}_j = (r_i + \\eta) - (r_j + \\eta) = r_i - r_j = -\\Delta_{\\text{barrier}} < 0\n7155: $$\n7156: \n7157: Therefore, $\\tilde{r}_i < \\tilde{r}_j$.\n7158: \n7159: **Step 3: Z-score standardization preserves ordering.**\n7160: \n7161: The standardized Z-scores are computed as (from Section 5.3):\n7162: \n7163: $$\n7164: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}, \\quad z_{r,j} = \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}\n7165: $$\n7166: \n7167: where $\\mu_{\\tilde{r}}$ is the mean and $\\sigma'_{\\tilde{r}} > 0$ is the patched standard deviation (see {prf:ref}`def-patched-std-dev-function`) (strictly positive by definition).\n7168: \n7169: Since $\\tilde{r}_i < \\tilde{r}_j$ and we're dividing by the same positive quantity:\n7170: \n7171: $$\n7172: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} < \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} = z_{r,j}\n7173: $$\n7174: \n7175: The ordering is preserved: $z_{r,i} < z_{r,j}$.\n7176: \n7177: **Step 4: Fitness potential computation.**\n7178: \n7179: The fitness potential is computed as (from Section 5.7):\n7180: \n7181: $$\n7182: V_{\\text{fit},i} = (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta}\n7183: $$\n7184: \n7185: where $\\alpha, \\beta > 0$ are the weighting exponents and $\\eta > 0$ ensures positivity of the argument.\n7186: \n7187: Assuming walkers $i$ and $j$ have similar diversity measurements (i.e., $z_{d,i} \\approx z_{d,j}$), the fitness potentials satisfy:\n7188: \n7189: $$\n7190: \\begin{aligned}\n7191: V_{\\text{fit},i} &= (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta} \\\\\n7192: V_{\\text{fit},j} &= (\\alpha z_{d,j} + \\beta z_{r,j} + \\eta)^{\\alpha+\\beta}\n7193: \\end{aligned}\n7194: $$\n7195: \n7196: Since $z_{r,i} < z_{r,j}$ and $z_{d,i} \\approx z_{d,j}$:\n7197: \n7198: $$\n7199: \\alpha z_{d,i} + \\beta z_{r,i} + \\eta < \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7200: $$\n7201: \n7202: The function $f(x) = x^{\\alpha+\\beta}$ is strictly increasing for $x > 0$ and $\\alpha + \\beta > 0$. Therefore:\n7203: \n7204: $$\n7205: V_{\\text{fit},i} < V_{\\text{fit},j}\n7206: $$\n7207: \n7208: **Step 5: Quantifying the fitness gap $f(\\Delta_{\\text{barrier}})$.**\n7209: \n7210: To obtain an explicit lower bound on the fitness gap, we use the mean value theorem. Let:\n7211: \n7212: $$\n7213: u_i := \\alpha z_{d,i} + \\beta z_{r,i} + \\eta, \\quad u_j := \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7214: $$\n7215: \n7216: By the mean value theorem, there exists $\\xi \\in (u_i, u_j)$ such that:\n7217: \n7218: $$\n7219: V_{\\text{fit},j} - V_{\\text{fit},i} = (u_j - u_i) \\cdot (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1}\n7220: $$\n7221: \n7222: The difference in arguments is:\n7223: \n7224: $$\n7225: u_j - u_i = \\beta(z_{r,j} - z_{r,i}) + \\alpha(z_{d,j} - z_{d,i}) \\approx \\beta(z_{r,j} - z_{r,i}) = \\frac{\\beta}{\\sigma'_{\\tilde{r}}}(\\tilde{r}_j - \\tilde{r}_i) = \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}}\n7226: $$\n7227: \n7228: Since $u_i, u_j > \\eta > 0$ (by construction), we have $\\xi > \\eta$. The derivative term is bounded below:\n7229: \n7230: $$\n7231: (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1} \\geq (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} > 0\n7232: $$\n7233: \n7234: Therefore, the fitness gap satisfies:\n7235: \n7236: $$\n7237: V_{\\text{fit},j} - V_{\\text{fit},i} \\geq \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}} \\cdot (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} =: f(\\Delta_{\\text{barrier}})\n7238: $$\n7239: \n7240: **Step 6: N-uniformity of the fitness gap function.**\n7241: \n7242: The function $f(\\Delta) = c_{\\beta} \\Delta$ where:\n7243: \n7244: $$\n7245: c_{\\beta} := \\frac{\\beta (\\alpha + \\beta)}{\\sigma'_{\\max}} \\eta^{\\alpha + \\beta - 1}\n7246: $$\n7247: \n7248: is a positive constant independent of $N$. Here $\\sigma'_{\\max}$ is an upper bound on the patched standard deviation (which exists by the boundedness axioms). The fitness gap scales linearly with the barrier difference, with a proportionality constant determined by the algorithm's reward sensitivity parameter $\\beta$ and the standardization scaling.\n7249: \n7250: **Conclusion:**\n7251: \n7252: The boundary proximity creates a systematic fitness deficit: walker $i$ (closer to boundary) has fitness potential at least $f(\\Delta_{\\text{barrier}})$ lower than walker $j$ (farther from boundary), where $f$ is a positive, N-uniform, monotonically increasing function of the barrier difference.",
      "metadata": {
        "label": "proof-lem-fitness-gradient-boundary"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [
        "def-patched-std-dev-function"
      ],
      "raw_directive": "7113: :::\n7114: \n7115: :::{prf:proof}\n7116: :label: proof-lem-fitness-gradient-boundary\n7117: **Proof.**\n7118: \n7119: The proof traces the boundary-induced fitness difference through each stage of the measurement and fitness evaluation pipeline defined in Chapter 5, demonstrating that the ordering is preserved and quantifying the resulting gap.\n7120: \n7121: **Step 1: Raw reward difference.**\n7122: \n7123: The raw reward for walker $i$ is defined as (from Section 5.6):\n7124: \n7125: $$\n7126: r_i = R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\n7127: $$\n7128: \n7129: where $R_{\\text{pos}}(x_i)$ is the positional reward component and $\\varphi_{\\text{barrier}}(x_i)$ is the boundary barrier penalty.\n7130: \n7131: For walkers $i$ and $j$ with similar positions and velocities (so $R_{\\text{pos}}(x_i) \\approx R_{\\text{pos}}(x_j)$ and $\\|v_i\\| \\approx \\|v_j\\|$), but with walker $i$ closer to the boundary ($\\varphi_{\\text{barrier}}(x_i) > \\varphi_{\\text{barrier}}(x_j)$), the raw reward difference is:\n7132: \n7133: $$\n7134: \\begin{aligned}\n7135: r_i - r_j &= \\left[R_{\\text{pos}}(x_i) - c_{v\\_reg} \\|v_i\\|^2 - \\varphi_{\\text{barrier}}(x_i)\\right] - \\left[R_{\\text{pos}}(x_j) - c_{v\\_reg} \\|v_j\\|^2 - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7136: &\\approx -\\left[\\varphi_{\\text{barrier}}(x_i) - \\varphi_{\\text{barrier}}(x_j)\\right] \\\\\n7137: &= -\\Delta_{\\text{barrier}} < 0\n7138: \\end{aligned}\n7139: $$\n7140: \n7141: Thus, walker $i$ has strictly lower raw reward than walker $j$.\n7142: \n7143: **Step 2: Floor addition preserves ordering.**\n7144: \n7145: The fitness potential construction adds a positive floor $\\eta > 0$ to ensure all values are positive:\n7146: \n7147: $$\n7148: \\tilde{r}_i = r_i + \\eta, \\quad \\tilde{r}_j = r_j + \\eta\n7149: $$\n7150: \n7151: Since adding a constant preserves ordering:\n7152: \n7153: $$\n7154: \\tilde{r}_i - \\tilde{r}_j = (r_i + \\eta) - (r_j + \\eta) = r_i - r_j = -\\Delta_{\\text{barrier}} < 0\n7155: $$\n7156: \n7157: Therefore, $\\tilde{r}_i < \\tilde{r}_j$.\n7158: \n7159: **Step 3: Z-score standardization preserves ordering.**\n7160: \n7161: The standardized Z-scores are computed as (from Section 5.3):\n7162: \n7163: $$\n7164: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}, \\quad z_{r,j} = \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}}\n7165: $$\n7166: \n7167: where $\\mu_{\\tilde{r}}$ is the mean and $\\sigma'_{\\tilde{r}} > 0$ is the patched standard deviation (see {prf:ref}`def-patched-std-dev-function`) (strictly positive by definition).\n7168: \n7169: Since $\\tilde{r}_i < \\tilde{r}_j$ and we're dividing by the same positive quantity:\n7170: \n7171: $$\n7172: z_{r,i} = \\frac{\\tilde{r}_i - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} < \\frac{\\tilde{r}_j - \\mu_{\\tilde{r}}}{\\sigma'_{\\tilde{r}}} = z_{r,j}\n7173: $$\n7174: \n7175: The ordering is preserved: $z_{r,i} < z_{r,j}$.\n7176: \n7177: **Step 4: Fitness potential computation.**\n7178: \n7179: The fitness potential is computed as (from Section 5.7):\n7180: \n7181: $$\n7182: V_{\\text{fit},i} = (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta}\n7183: $$\n7184: \n7185: where $\\alpha, \\beta > 0$ are the weighting exponents and $\\eta > 0$ ensures positivity of the argument.\n7186: \n7187: Assuming walkers $i$ and $j$ have similar diversity measurements (i.e., $z_{d,i} \\approx z_{d,j}$), the fitness potentials satisfy:\n7188: \n7189: $$\n7190: \\begin{aligned}\n7191: V_{\\text{fit},i} &= (\\alpha z_{d,i} + \\beta z_{r,i} + \\eta)^{\\alpha+\\beta} \\\\\n7192: V_{\\text{fit},j} &= (\\alpha z_{d,j} + \\beta z_{r,j} + \\eta)^{\\alpha+\\beta}\n7193: \\end{aligned}\n7194: $$\n7195: \n7196: Since $z_{r,i} < z_{r,j}$ and $z_{d,i} \\approx z_{d,j}$:\n7197: \n7198: $$\n7199: \\alpha z_{d,i} + \\beta z_{r,i} + \\eta < \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7200: $$\n7201: \n7202: The function $f(x) = x^{\\alpha+\\beta}$ is strictly increasing for $x > 0$ and $\\alpha + \\beta > 0$. Therefore:\n7203: \n7204: $$\n7205: V_{\\text{fit},i} < V_{\\text{fit},j}\n7206: $$\n7207: \n7208: **Step 5: Quantifying the fitness gap $f(\\Delta_{\\text{barrier}})$.**\n7209: \n7210: To obtain an explicit lower bound on the fitness gap, we use the mean value theorem. Let:\n7211: \n7212: $$\n7213: u_i := \\alpha z_{d,i} + \\beta z_{r,i} + \\eta, \\quad u_j := \\alpha z_{d,j} + \\beta z_{r,j} + \\eta\n7214: $$\n7215: \n7216: By the mean value theorem, there exists $\\xi \\in (u_i, u_j)$ such that:\n7217: \n7218: $$\n7219: V_{\\text{fit},j} - V_{\\text{fit},i} = (u_j - u_i) \\cdot (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1}\n7220: $$\n7221: \n7222: The difference in arguments is:\n7223: \n7224: $$\n7225: u_j - u_i = \\beta(z_{r,j} - z_{r,i}) + \\alpha(z_{d,j} - z_{d,i}) \\approx \\beta(z_{r,j} - z_{r,i}) = \\frac{\\beta}{\\sigma'_{\\tilde{r}}}(\\tilde{r}_j - \\tilde{r}_i) = \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}}\n7226: $$\n7227: \n7228: Since $u_i, u_j > \\eta > 0$ (by construction), we have $\\xi > \\eta$. The derivative term is bounded below:\n7229: \n7230: $$\n7231: (\\alpha + \\beta) \\xi^{\\alpha + \\beta - 1} \\geq (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} > 0\n7232: $$\n7233: \n7234: Therefore, the fitness gap satisfies:\n7235: \n7236: $$\n7237: V_{\\text{fit},j} - V_{\\text{fit},i} \\geq \\frac{\\beta \\Delta_{\\text{barrier}}}{\\sigma'_{\\tilde{r}}} \\cdot (\\alpha + \\beta) \\eta^{\\alpha + \\beta - 1} =: f(\\Delta_{\\text{barrier}})\n7238: $$\n7239: \n7240: **Step 6: N-uniformity of the fitness gap function.**\n7241: \n7242: The function $f(\\Delta) = c_{\\beta} \\Delta$ where:\n7243: \n7244: $$\n7245: c_{\\beta} := \\frac{\\beta (\\alpha + \\beta)}{\\sigma'_{\\max}} \\eta^{\\alpha + \\beta - 1}\n7246: $$\n7247: \n7248: is a positive constant independent of $N$. Here $\\sigma'_{\\max}$ is an upper bound on the patched standard deviation (which exists by the boundedness axioms). The fitness gap scales linearly with the barrier difference, with a proportionality constant determined by the algorithm's reward sensitivity parameter $\\beta$ and the standardization scaling.\n7249: \n7250: **Conclusion:**\n7251: \n7252: The boundary proximity creates a systematic fitness deficit: walker $i$ (closer to boundary) has fitness potential at least $f(\\Delta_{\\text{barrier}})$ lower than walker $j$ (farther from boundary), where $f$ is a positive, N-uniform, monotonically increasing function of the barrier difference.\n7253: "
    },
    {
      "directive_type": "definition",
      "label": "def-boundary-exposed-set",
      "title": "The Boundary-Exposed Set",
      "start_line": 7259,
      "end_line": 7276,
      "header_lines": [
        7260
      ],
      "content_start": 7262,
      "content_end": 7275,
      "content": "7262: :label: def-boundary-exposed-set\n7263: \n7264: For a swarm $S$ and a threshold $\\phi_{\\text{thresh}} > 0$, the **boundary-exposed set** is:\n7265: \n7266: $$\n7267: \\mathcal{E}_{\\text{boundary}}(S) := \\{i \\in \\mathcal{A}(S) : \\varphi_{\\text{barrier}}(x_i) > \\phi_{\\text{thresh}}\\}\n7268: $$\n7269: \n7270: These are alive walkers whose barrier penalty exceeds the threshold, indicating dangerous proximity to the boundary.\n7271: \n7272: The **boundary-exposed mass** is:\n7273: \n7274: $$\n7275: M_{\\text{boundary}}(S) := \\frac{1}{N} \\sum_{i \\in \\mathcal{E}_{\\text{boundary}}(S)} \\varphi_{\\text{barrier}}(x_i)",
      "metadata": {
        "label": "def-boundary-exposed-set"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7259: We now formalize the set of walkers (see {prf:ref}`def-boundary-exposed-set`) that are in danger due to boundary proximity.\n7260: \n7261: :::{prf:definition} The Boundary-Exposed Set\n7262: :label: def-boundary-exposed-set\n7263: \n7264: For a swarm $S$ and a threshold $\\phi_{\\text{thresh}} > 0$, the **boundary-exposed set** is:\n7265: \n7266: $$\n7267: \\mathcal{E}_{\\text{boundary}}(S) := \\{i \\in \\mathcal{A}(S) : \\varphi_{\\text{barrier}}(x_i) > \\phi_{\\text{thresh}}\\}\n7268: $$\n7269: \n7270: These are alive walkers whose barrier penalty exceeds the threshold, indicating dangerous proximity to the boundary.\n7271: \n7272: The **boundary-exposed mass** is:\n7273: \n7274: $$\n7275: M_{\\text{boundary}}(S) := \\frac{1}{N} \\sum_{i \\in \\mathcal{E}_{\\text{boundary}}(S)} \\varphi_{\\text{barrier}}(x_i)\n7276: $$"
    },
    {
      "directive_type": "remark",
      "label": "rem-boundary-mass-relationship",
      "title": "Relationship to Total Boundary Potential",
      "start_line": 7278,
      "end_line": 7288,
      "header_lines": [
        7279
      ],
      "content_start": 7281,
      "content_end": 7287,
      "content": "7281: :label: rem-boundary-mass-relationship\n7282: \n7283: If all walkers outside the exposed set have $\\varphi_{\\text{barrier}}(x_i) \\leq \\phi_{\\text{thresh}}$, then:\n7284: \n7285: $$\n7286: W_b(S_k) = \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\varphi_{\\text{barrier}}(x_i) \\leq M_{\\text{boundary}}(S_k) + \\frac{k_{\\text{alive}}}{N} \\phi_{\\text{thresh}}\n7287: $$",
      "metadata": {
        "label": "rem-boundary-mass-relationship"
      },
      "section": "## 11.2. The Boundary Barrier and Fitness Gradient",
      "references": [],
      "raw_directive": "7278: :::\n7279: \n7280: :::{prf:remark} Relationship to Total Boundary Potential\n7281: :label: rem-boundary-mass-relationship\n7282: \n7283: If all walkers outside the exposed set have $\\varphi_{\\text{barrier}}(x_i) \\leq \\phi_{\\text{thresh}}$, then:\n7284: \n7285: $$\n7286: W_b(S_k) = \\frac{1}{N} \\sum_{i \\in \\mathcal{A}(S_k)} \\varphi_{\\text{barrier}}(x_i) \\leq M_{\\text{boundary}}(S_k) + \\frac{k_{\\text{alive}}}{N} \\phi_{\\text{thresh}}\n7287: $$\n7288: "
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}