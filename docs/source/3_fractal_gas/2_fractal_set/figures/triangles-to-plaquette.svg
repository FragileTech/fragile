<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 650" role="img" aria-label="Two interaction triangles forming an hourglass plaquette">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#f9fbff" />
      <stop offset="100%" stop-color="#eef2f7" />
    </linearGradient>
    <pattern id="dotGrid" width="36" height="36" patternUnits="userSpaceOnUse">
      <circle cx="2" cy="2" r="1.2" fill="#cbd5e1" opacity="0.35" />
    </pattern>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#0b1f33" flood-opacity="0.18" />
    </filter>
    <marker id="arrow-cst" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L12,6 L0,12 z" fill="#2a6fdb" />
    </marker>
    <marker id="arrow-ia" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L12,6 L0,12 z" fill="#e07a2f" />
    </marker>
    <marker id="arrow-ig" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L12,6 L0,12 z" fill="#2f9e44" />
    </marker>
  </defs>
  <style>
    .title { font-family: "IBM Plex Sans", "Source Sans Pro", "Helvetica Neue", Arial, sans-serif; font-size: 26px; fill: #102a43; font-weight: 600; }
    .label { font-family: "IBM Plex Sans", "Source Sans Pro", "Helvetica Neue", Arial, sans-serif; font-size: 18px; fill: #102a43; }
    .label-small { font-family: "IBM Plex Sans", "Source Sans Pro", "Helvetica Neue", Arial, sans-serif; font-size: 16px; fill: #334e68; }
    .math { font-family: "IBM Plex Mono", "SFMono-Regular", Menlo, Consolas, monospace; font-size: 18px; fill: #102a43; }
    .node { fill: #ffffff; stroke: #1b263b; stroke-width: 3; filter: url(#softShadow); }
    .edge-cst { stroke: #2a6fdb; stroke-width: 5; }
    .edge-ig { stroke: #2f9e44; stroke-width: 4; stroke-dasharray: 10 7; }
    .edge-ia { stroke: #e07a2f; stroke-width: 5; }
    .triangle-a { fill: #dbeafe; opacity: 0.45; }
    .triangle-b { fill: #ffedd5; opacity: 0.45; }
    .axis { stroke: #64748b; stroke-width: 2; }
    .leader { stroke: #64748b; stroke-width: 2; }
    .callout { fill: #ffffff; stroke: #cbd5e1; stroke-width: 2; rx: 12; }
  </style>

  <rect width="1000" height="650" fill="url(#bg)" />
  <rect width="1000" height="650" fill="url(#dotGrid)" opacity="0.35" />

  <text x="60" y="70" class="title">Two triangles form a plaquette (hourglass boundary)</text>

  <line x1="120" y1="520" x2="120" y2="140" class="axis" />
  <text x="80" y="535" class="label-small">t</text>
  <text x="65" y="150" class="label-small">t+1</text>
  <text x="60" y="335" class="label-small">time</text>

  <polygon points="260,460 740,460 260,180" class="triangle-a" />
  <polygon points="260,460 740,460 740,180" class="triangle-b" />

  <line x1="260" y1="460" x2="260" y2="180" class="edge-cst" marker-end="url(#arrow-cst)" />
  <line x1="740" y1="460" x2="740" y2="180" class="edge-cst" marker-end="url(#arrow-cst)" />

  <line x1="260" y1="180" x2="740" y2="460" class="edge-ia" marker-end="url(#arrow-ia)" />
  <line x1="740" y1="180" x2="260" y2="460" class="edge-ia" marker-end="url(#arrow-ia)" />

  <line x1="260" y1="460" x2="740" y2="460" class="edge-ig" marker-end="url(#arrow-ig)" />

  <circle cx="260" cy="460" r="20" class="node" />
  <circle cx="740" cy="460" r="20" class="node" />
  <circle cx="260" cy="180" r="20" class="node" />
  <circle cx="740" cy="180" r="20" class="node" />

  <circle cx="500" cy="320" r="14" fill="#ffffff" stroke="#cbd5e1" stroke-width="2" />

  <text x="205" y="505" class="math">n_{i,t}</text>
  <text x="760" y="505" class="math">n_{j,t}</text>
  <text x="190" y="150" class="math">n_{i,t+1}</text>
  <text x="760" y="150" class="math">n_{j,t+1}</text>

  <text x="300" y="260" class="label">triangle ij</text>
  <text x="640" y="260" class="label">triangle ji</text>

  <text x="365" y="485" class="label">shared IG edge (internal, cancels)</text>
  <rect x="160" y="285" width="220" height="70" class="callout" />
  <text x="180" y="315" class="label">plaquette boundary</text>
  <text x="180" y="340" class="label">= CST + IA</text>
  <line x1="380" y1="320" x2="485" y2="320" class="leader" />

  <rect x="520" y="520" width="400" height="90" class="callout" />
  <text x="540" y="555" class="label">U[P] = U_CST(i) U_IA(i->j) U_CST(j) U_IA(j->i)</text>
</svg>
