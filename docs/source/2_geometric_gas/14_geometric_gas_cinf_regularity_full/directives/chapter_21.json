{
  "chapter_index": 21,
  "section_id": "## 12. Fitness Potential: Composition with Rescale Function",
  "directive_count": 5,
  "hints": [
    {
      "directive_type": "assumption",
      "label": "assump-rescale-function-cinf-full",
      "title": "Rescale Function C^\u221e Regularity",
      "start_line": 4525,
      "end_line": 4543,
      "header_lines": [
        4526
      ],
      "content_start": 4528,
      "content_end": 4542,
      "content": "4528: :label: assump-rescale-function-cinf-full\n4529: \n4530: The rescale function $g_A: \\mathbb{R} \\to [0, A]$ is C^\u221e with **globally bounded derivatives**:\n4531: \n4532: For all $m \\geq 1$:\n4533: \n4534: $$\n4535: \\|g_A^{(m)}\\|_\\infty := \\sup_{z \\in \\mathbb{R}} |g_A^{(m)}(z)| \\leq L_{g,m} < \\infty\n4536: \n4537: $$\n4538: \n4539: where $L_{g,m} = \\mathcal{O}(m!)$ (Gevrey-1 growth).\n4540: \n4541: **Examples**:\n4542: 1. **Sigmoid**: $g_A(z) = A / (1 + e^{-z})$ has all derivatives globally bounded",
      "metadata": {
        "label": "assump-rescale-function-cinf-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "references": [],
      "raw_directive": "4525: ### 12.1 Assumptions on Rescale Function\n4526: \n4527: :::{prf:assumption} Rescale Function C^\u221e Regularity\n4528: :label: assump-rescale-function-cinf-full\n4529: \n4530: The rescale function $g_A: \\mathbb{R} \\to [0, A]$ is C^\u221e with **globally bounded derivatives**:\n4531: \n4532: For all $m \\geq 1$:\n4533: \n4534: $$\n4535: \\|g_A^{(m)}\\|_\\infty := \\sup_{z \\in \\mathbb{R}} |g_A^{(m)}(z)| \\leq L_{g,m} < \\infty\n4536: \n4537: $$\n4538: \n4539: where $L_{g,m} = \\mathcal{O}(m!)$ (Gevrey-1 growth).\n4540: \n4541: **Examples**:\n4542: 1. **Sigmoid**: $g_A(z) = A / (1 + e^{-z})$ has all derivatives globally bounded\n4543: 2. **Tanh-based**: $g_A(z) = A(1 + \\tanh(z))/2$ has all derivatives globally bounded"
    },
    {
      "directive_type": "theorem",
      "label": "thm-main-cinf-regularity-fitness-potential-full",
      "title": "C^\u221e Regularity of Fitness Potential (Main Result)",
      "start_line": 4547,
      "end_line": 4592,
      "header_lines": [
        4548
      ],
      "content_start": 4550,
      "content_end": 4591,
      "content": "4550: :label: thm-main-cinf-regularity-fitness-potential-full\n4551: \n4552: The fitness potential:\n4553: \n4554: $$\n4555: V_{\\text{fit}}(x_i, v_i) = g_A(Z_\\rho^{(i)})\n4556: \n4557: $$\n4558: \n4559: is **C^\u221e** with respect to $(x_i, v_i)$ for all walkers $i \\in \\mathcal{A}$.\n4560: \n4561: Moreover, for all derivative orders $m \\geq 1$:\n4562: \n4563: $$\n4564: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m}(d, \\rho, \\varepsilon_c, \\eta_{\\min}) \\cdot \\max(\\rho^{-m}, \\varepsilon_d^{1-m})\n4565: \n4566: $$\n4567: \n4568: where:\n4569: \n4570: $$\n4571: C_{V,m}(d, \\rho, \\varepsilon_c, \\eta_{\\min}) = \\mathcal{O}(m! \\cdot d^m \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4572: \n4573: $$\n4574: \n4575: is **independent of $k$, $N$, and walker index $i$** (k-uniform, N-uniform).\n4576: \n4577: **Note on parameter separation**: The $\\varepsilon_d$ dependence appears exclusively in the outer $\\max(\\rho^{-m}, \\varepsilon_d^{1-m})$ term, not in $C_{V,m}$, to avoid redundancy. This clean separation reflects that $\\varepsilon_d$ controls the dominant scaling regime while $C_{V,m}$ captures combinatorial and geometric factors.\n4578: \n4579: For typical parameters where $\\varepsilon_d \\ll \\varepsilon_c$ and $m \\geq 2$, the $\\varepsilon_d^{1-m}$ term dominates, giving:\n4580: \n4581: $$\n4582: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m} \\cdot \\varepsilon_d^{1-m}\n4583: \n4584: $$\n4585: \n4586: The constant exhibits **Gevrey-1 growth**: $C_{V,m} = \\mathcal{O}(m!)$ with explicit dependence on:\n4587: - Dimension $d$ (polynomial)\n4588: - Regularization parameters $\\varepsilon_d$, $\\eta_{\\min}$ (inverse scaling for uniform bounds)\n4589: - Localization scale $\\rho$ (exponential locality)\n4590: \n4591: The $\\varepsilon_d^{1-m}$ factor enters through companion derivatives ({prf:ref}`lem-companion-measurement-derivatives-full`), making distance regularization the bottleneck for high-order derivative bounds.",
      "metadata": {
        "label": "thm-main-cinf-regularity-fitness-potential-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "references": [
        "lem-companion-measurement-derivatives-full"
      ],
      "raw_directive": "4547: ### 12.2 Final Composition: Chain Rule\n4548: \n4549: :::{prf:theorem} C^\u221e Regularity of Fitness Potential (Main Result)\n4550: :label: thm-main-cinf-regularity-fitness-potential-full\n4551: \n4552: The fitness potential:\n4553: \n4554: $$\n4555: V_{\\text{fit}}(x_i, v_i) = g_A(Z_\\rho^{(i)})\n4556: \n4557: $$\n4558: \n4559: is **C^\u221e** with respect to $(x_i, v_i)$ for all walkers $i \\in \\mathcal{A}$.\n4560: \n4561: Moreover, for all derivative orders $m \\geq 1$:\n4562: \n4563: $$\n4564: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m}(d, \\rho, \\varepsilon_c, \\eta_{\\min}) \\cdot \\max(\\rho^{-m}, \\varepsilon_d^{1-m})\n4565: \n4566: $$\n4567: \n4568: where:\n4569: \n4570: $$\n4571: C_{V,m}(d, \\rho, \\varepsilon_c, \\eta_{\\min}) = \\mathcal{O}(m! \\cdot d^m \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4572: \n4573: $$\n4574: \n4575: is **independent of $k$, $N$, and walker index $i$** (k-uniform, N-uniform).\n4576: \n4577: **Note on parameter separation**: The $\\varepsilon_d$ dependence appears exclusively in the outer $\\max(\\rho^{-m}, \\varepsilon_d^{1-m})$ term, not in $C_{V,m}$, to avoid redundancy. This clean separation reflects that $\\varepsilon_d$ controls the dominant scaling regime while $C_{V,m}$ captures combinatorial and geometric factors.\n4578: \n4579: For typical parameters where $\\varepsilon_d \\ll \\varepsilon_c$ and $m \\geq 2$, the $\\varepsilon_d^{1-m}$ term dominates, giving:\n4580: \n4581: $$\n4582: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m} \\cdot \\varepsilon_d^{1-m}\n4583: \n4584: $$\n4585: \n4586: The constant exhibits **Gevrey-1 growth**: $C_{V,m} = \\mathcal{O}(m!)$ with explicit dependence on:\n4587: - Dimension $d$ (polynomial)\n4588: - Regularization parameters $\\varepsilon_d$, $\\eta_{\\min}$ (inverse scaling for uniform bounds)\n4589: - Localization scale $\\rho$ (exponential locality)\n4590: \n4591: The $\\varepsilon_d^{1-m}$ factor enters through companion derivatives ({prf:ref}`lem-companion-measurement-derivatives-full`), making distance regularization the bottleneck for high-order derivative bounds.\n4592: "
    },
    {
      "directive_type": "proof",
      "label": "proof-thm-main-cinf-regularity-fitness-potential-full",
      "title": null,
      "start_line": 4594,
      "end_line": 4673,
      "header_lines": [
        4595
      ],
      "content_start": 4597,
      "content_end": 4672,
      "content": "4597: :label: proof-thm-main-cinf-regularity-fitness-potential-full\n4598: \n4599: **Step 1: Composition structure.**\n4600: \n4601: The fitness potential is the composition:\n4602: \n4603: $$\n4604: V_{\\text{fit}} = g_A \\circ Z_\\rho \\circ (\\mu_\\rho, \\sigma'_\\rho, d_i)\n4605: \n4606: $$\n4607: \n4608: where each component is C^\u221e by previous lemmas.\n4609: \n4610: **Step 2: Fa\u00e0 di Bruno formula for composition.**\n4611: \n4612: For $m \\geq 1$, the $m$-th derivative of $g_A(Z_\\rho^{(i)})$ is:\n4613: \n4614: $$\n4615: \\nabla^m V_{\\text{fit}} = \\sum_{k=1}^m g_A^{(k)}(Z_\\rho^{(i)}) \\cdot B_{m,k}(\\nabla Z_\\rho, \\nabla^2 Z_\\rho, \\ldots, \\nabla^m Z_\\rho)\n4616: \n4617: $$\n4618: \n4619: where $B_{m,k}$ are the **Bell polynomials** encoding the combinatorics of the chain rule.\n4620: \n4621: **Step 3: Bounding each term with \u03b5_d propagation.**\n4622: \n4623: For the $k$-th term:\n4624: - $|g_A^{(k)}(Z_\\rho)| \\leq L_{g,k} = \\mathcal{O}(k!)$ (bounded derivatives of $g_A$)\n4625: - $B_{m,k}$ involves products of $\\nabla^j Z_\\rho$ with $j \\leq m$\n4626: - $\\|\\nabla^j Z_\\rho\\| \\leq C_{Z,j}(\\rho, \\varepsilon_d) \\cdot \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ where $C_{Z,j} = \\mathcal{O}(j! \\cdot \\rho^{2dj} \\cdot \\eta_{\\min}^{-(2j+1)})$\n4627: \n4628: **\u03b5_d dependency chain**:\n4629: 1. **Companion measurements**: $\\|\\nabla^j d_i\\| \\leq C_d \\varepsilon_d^{1-j}$\n4630: 2. **Localized mean**: $\\|\\nabla^j \\mu_\\rho\\| \\leq C_\\mu(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $d_i$ via Leibniz rule)\n4631: 3. **Localized variance**: $\\|\\nabla^j \\sigma_\\rho^2\\| \\leq C_{\\sigma^2}(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\mu_\\rho$ and $d_i$)\n4632: 4. **Regularized std dev**: $\\|\\nabla^j \\sigma'_\\rho\\| \\leq C_{\\sigma'}(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\sigma_\\rho^2$)\n4633: 5. **Z-score**: $\\|\\nabla^j Z_\\rho\\| \\leq C_Z(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (quotient of functions with \u03b5_d dependence)\n4634: 6. **Fitness potential**: $\\|\\nabla^m V_{\\text{fit}}\\| \\leq C_V \\max(\\rho^{-m}, \\varepsilon_d^{1-m})$ (composition with $g_A$)\n4635: \n4636: For typical parameters $\\varepsilon_d \\ll \\rho \\sim \\varepsilon_c$, the $\\varepsilon_d^{1-m}$ term dominates for $m \\geq 2$.\n4637: \n4638: The Bell polynomial $B_{m,k}$ satisfies:\n4639: \n4640: $$\n4641: \\|B_{m,k}\\| \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m \\|\\nabla^j Z_\\rho\\|^{n_j} \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m (C_{Z,j} \\rho^{-j})^{n_j}\n4642: \n4643: $$\n4644: \n4645: The sum over partitions of $m$ into $k$ parts gives combinatorial factors of at most $m!$.\n4646: \n4647: **Step 4: Factorial accounting.**\n4648: \n4649: Combining all factors:\n4650: \n4651: $$\n4652: \\begin{aligned}\n4653: \\|\\nabla^m V_{\\text{fit}}\\|\n4654: &\\leq \\sum_{k=1}^m L_{g,k} \\cdot \\|B_{m,k}\\| \\\\\n4655: &\\leq \\sum_{k=1}^m \\mathcal{O}(k!) \\cdot \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\text{(other factors)}) \\\\\n4656: &= \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4657: \\end{aligned}\n4658: \n4659: $$\n4660: \n4661: The key observation is that summing $k!$ over $k=1$ to $m$ gives $\\mathcal{O}(m!)$ (dominated by the largest term), preserving **single-factorial growth**.\n4662: \n4663: **Step 5: k-uniformity and N-uniformity.**\n4664: \n4665: All constants in the bound trace back to:\n4666: - Localization weights: k-uniform via telescoping\n4667: - Localized moments: k-uniform via exponential localization\n4668: - Regularized std dev: deterministic function of variance\n4669: - Z-score: quotient of k-uniform functions\n4670: - Rescale function: independent of swarm configuration\n4671: \n4672: Therefore $C_{V,m}(\\rho)$ is **independent of $k$ and $N$**.",
      "metadata": {
        "label": "proof-thm-main-cinf-regularity-fitness-potential-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "references": [],
      "raw_directive": "4594: :::\n4595: \n4596: :::{prf:proof}\n4597: :label: proof-thm-main-cinf-regularity-fitness-potential-full\n4598: \n4599: **Step 1: Composition structure.**\n4600: \n4601: The fitness potential is the composition:\n4602: \n4603: $$\n4604: V_{\\text{fit}} = g_A \\circ Z_\\rho \\circ (\\mu_\\rho, \\sigma'_\\rho, d_i)\n4605: \n4606: $$\n4607: \n4608: where each component is C^\u221e by previous lemmas.\n4609: \n4610: **Step 2: Fa\u00e0 di Bruno formula for composition.**\n4611: \n4612: For $m \\geq 1$, the $m$-th derivative of $g_A(Z_\\rho^{(i)})$ is:\n4613: \n4614: $$\n4615: \\nabla^m V_{\\text{fit}} = \\sum_{k=1}^m g_A^{(k)}(Z_\\rho^{(i)}) \\cdot B_{m,k}(\\nabla Z_\\rho, \\nabla^2 Z_\\rho, \\ldots, \\nabla^m Z_\\rho)\n4616: \n4617: $$\n4618: \n4619: where $B_{m,k}$ are the **Bell polynomials** encoding the combinatorics of the chain rule.\n4620: \n4621: **Step 3: Bounding each term with \u03b5_d propagation.**\n4622: \n4623: For the $k$-th term:\n4624: - $|g_A^{(k)}(Z_\\rho)| \\leq L_{g,k} = \\mathcal{O}(k!)$ (bounded derivatives of $g_A$)\n4625: - $B_{m,k}$ involves products of $\\nabla^j Z_\\rho$ with $j \\leq m$\n4626: - $\\|\\nabla^j Z_\\rho\\| \\leq C_{Z,j}(\\rho, \\varepsilon_d) \\cdot \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ where $C_{Z,j} = \\mathcal{O}(j! \\cdot \\rho^{2dj} \\cdot \\eta_{\\min}^{-(2j+1)})$\n4627: \n4628: **\u03b5_d dependency chain**:\n4629: 1. **Companion measurements**: $\\|\\nabla^j d_i\\| \\leq C_d \\varepsilon_d^{1-j}$\n4630: 2. **Localized mean**: $\\|\\nabla^j \\mu_\\rho\\| \\leq C_\\mu(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $d_i$ via Leibniz rule)\n4631: 3. **Localized variance**: $\\|\\nabla^j \\sigma_\\rho^2\\| \\leq C_{\\sigma^2}(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\mu_\\rho$ and $d_i$)\n4632: 4. **Regularized std dev**: $\\|\\nabla^j \\sigma'_\\rho\\| \\leq C_{\\sigma'}(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\sigma_\\rho^2$)\n4633: 5. **Z-score**: $\\|\\nabla^j Z_\\rho\\| \\leq C_Z(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (quotient of functions with \u03b5_d dependence)\n4634: 6. **Fitness potential**: $\\|\\nabla^m V_{\\text{fit}}\\| \\leq C_V \\max(\\rho^{-m}, \\varepsilon_d^{1-m})$ (composition with $g_A$)\n4635: \n4636: For typical parameters $\\varepsilon_d \\ll \\rho \\sim \\varepsilon_c$, the $\\varepsilon_d^{1-m}$ term dominates for $m \\geq 2$.\n4637: \n4638: The Bell polynomial $B_{m,k}$ satisfies:\n4639: \n4640: $$\n4641: \\|B_{m,k}\\| \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m \\|\\nabla^j Z_\\rho\\|^{n_j} \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m (C_{Z,j} \\rho^{-j})^{n_j}\n4642: \n4643: $$\n4644: \n4645: The sum over partitions of $m$ into $k$ parts gives combinatorial factors of at most $m!$.\n4646: \n4647: **Step 4: Factorial accounting.**\n4648: \n4649: Combining all factors:\n4650: \n4651: $$\n4652: \\begin{aligned}\n4653: \\|\\nabla^m V_{\\text{fit}}\\|\n4654: &\\leq \\sum_{k=1}^m L_{g,k} \\cdot \\|B_{m,k}\\| \\\\\n4655: &\\leq \\sum_{k=1}^m \\mathcal{O}(k!) \\cdot \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\text{(other factors)}) \\\\\n4656: &= \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4657: \\end{aligned}\n4658: \n4659: $$\n4660: \n4661: The key observation is that summing $k!$ over $k=1$ to $m$ gives $\\mathcal{O}(m!)$ (dominated by the largest term), preserving **single-factorial growth**.\n4662: \n4663: **Step 5: k-uniformity and N-uniformity.**\n4664: \n4665: All constants in the bound trace back to:\n4666: - Localization weights: k-uniform via telescoping\n4667: - Localized moments: k-uniform via exponential localization\n4668: - Regularized std dev: deterministic function of variance\n4669: - Z-score: quotient of k-uniform functions\n4670: - Rescale function: independent of swarm configuration\n4671: \n4672: Therefore $C_{V,m}(\\rho)$ is **independent of $k$ and $N$**.\n4673: "
    },
    {
      "directive_type": "corollary",
      "label": "cor-gevrey-1-fitness-potential-full",
      "title": "Gevrey-1 Classification",
      "start_line": 4675,
      "end_line": 4688,
      "header_lines": [
        4676
      ],
      "content_start": 4678,
      "content_end": 4687,
      "content": "4678: :label: cor-gevrey-1-fitness-potential-full\n4679: \n4680: The fitness potential $V_{\\text{fit}}$ belongs to the **Gevrey-1 class**, meaning it is **real-analytic** with convergent Taylor series in a neighborhood of each point.\n4681: \n4682: Specifically, for any compact set $K \\subset \\mathcal{X} \\times \\mathbb{R}^d$:\n4683: \n4684: $$\n4685: \\sup_{(x,v) \\in K} \\|\\nabla^m V_{\\text{fit}}(x,v)\\| \\leq A \\cdot B^m \\cdot m!\n4686: \n4687: $$",
      "metadata": {
        "label": "cor-gevrey-1-fitness-potential-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "references": [],
      "raw_directive": "4675: :::\n4676: \n4677: :::{prf:corollary} Gevrey-1 Classification\n4678: :label: cor-gevrey-1-fitness-potential-full\n4679: \n4680: The fitness potential $V_{\\text{fit}}$ belongs to the **Gevrey-1 class**, meaning it is **real-analytic** with convergent Taylor series in a neighborhood of each point.\n4681: \n4682: Specifically, for any compact set $K \\subset \\mathcal{X} \\times \\mathbb{R}^d$:\n4683: \n4684: $$\n4685: \\sup_{(x,v) \\in K} \\|\\nabla^m V_{\\text{fit}}(x,v)\\| \\leq A \\cdot B^m \\cdot m!\n4686: \n4687: $$\n4688: "
    },
    {
      "directive_type": "proof",
      "label": "proof-cor-gevrey-1-fitness-potential-full",
      "title": null,
      "start_line": 4690,
      "end_line": 4694,
      "header_lines": [
        4691
      ],
      "content_start": 4693,
      "content_end": 4693,
      "content": "4693: :label: proof-cor-gevrey-1-fitness-potential-full",
      "metadata": {
        "label": "proof-cor-gevrey-1-fitness-potential-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "references": [
        "thm-main-cinf-regularity-fitness-potential-full"
      ],
      "raw_directive": "4690: :::\n4691: \n4692: :::{prf:proof}\n4693: :label: proof-cor-gevrey-1-fitness-potential-full\n4694: "
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}