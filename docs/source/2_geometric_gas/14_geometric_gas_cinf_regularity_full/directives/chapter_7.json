{
  "chapter_index": 7,
  "section_id": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
  "directive_count": 3,
  "hints": [
    {
      "directive_type": "lemma",
      "label": "lem-dalg-derivative-bounds-full",
      "title": "Higher Derivatives of Regularized Algorithmic Distance",
      "start_line": 1608,
      "end_line": 1651,
      "header_lines": [
        1609
      ],
      "content_start": 1611,
      "content_end": 1650,
      "content": "1611: :label: lem-dalg-derivative-bounds-full\n1612: \n1613: The **regularized** algorithmic distance:\n1614: \n1615: $$\n1616: d_{\\text{alg}}(i,j) = \\sqrt{\\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 + \\varepsilon_d^2}\n1617: \n1618: $$\n1619: \n1620: where $\\varepsilon_d > 0$ is the regularization parameter, has the following properties:\n1621: \n1622: 1. **Uniform Lower Bound**: $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ for all walker configurations (no singularity)\n1623: \n1624: 2. **C^\u221e Regularity**: $d_{\\text{alg}}$ is C^\u221e with **uniform** derivative bounds:\n1625: \n1626: **First derivative**:\n1627: \n1628: $$\n1629: \\nabla_{x_i} d_{\\text{alg}}(i,j) = \\frac{x_i - x_j}{d_{\\text{alg}}(i,j)}, \\quad \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| \\leq 1\n1630: \n1631: $$\n1632: \n1633: **Second derivative** (Hessian):\n1634: \n1635: $$\n1636: \\nabla^2_{x_i} d_{\\text{alg}}(i,j) = \\frac{1}{d_{\\text{alg}}(i,j)} \\left(I - \\frac{(x_i - x_j) \\otimes (x_i - x_j)}{d_{\\text{alg}}^2(i,j)}\\right)\n1637: \n1638: $$\n1639: \n1640: $$\n1641: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d} \\quad \\text{(uniform bound using } d_{\\text{alg}} \\geq \\varepsilon_d\\text{)}\n1642: \n1643: $$\n1644: \n1645: **General bound**: For derivative order $n \\geq 1$:\n1646: \n1647: $$\n1648: \\|\\nabla^n_{x_i} d_{\\text{alg}}(i,j)\\| \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1649: \n1650: $$",
      "metadata": {
        "label": "lem-dalg-derivative-bounds-full"
      },
      "section": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
      "references": [],
      "raw_directive": "1608: We now establish the derivative structure for the **regularized** algorithmic distance, which eliminates the singularity at walker collisions.\n1609: \n1610: :::{prf:lemma} Higher Derivatives of Regularized Algorithmic Distance\n1611: :label: lem-dalg-derivative-bounds-full\n1612: \n1613: The **regularized** algorithmic distance:\n1614: \n1615: $$\n1616: d_{\\text{alg}}(i,j) = \\sqrt{\\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 + \\varepsilon_d^2}\n1617: \n1618: $$\n1619: \n1620: where $\\varepsilon_d > 0$ is the regularization parameter, has the following properties:\n1621: \n1622: 1. **Uniform Lower Bound**: $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ for all walker configurations (no singularity)\n1623: \n1624: 2. **C^\u221e Regularity**: $d_{\\text{alg}}$ is C^\u221e with **uniform** derivative bounds:\n1625: \n1626: **First derivative**:\n1627: \n1628: $$\n1629: \\nabla_{x_i} d_{\\text{alg}}(i,j) = \\frac{x_i - x_j}{d_{\\text{alg}}(i,j)}, \\quad \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| \\leq 1\n1630: \n1631: $$\n1632: \n1633: **Second derivative** (Hessian):\n1634: \n1635: $$\n1636: \\nabla^2_{x_i} d_{\\text{alg}}(i,j) = \\frac{1}{d_{\\text{alg}}(i,j)} \\left(I - \\frac{(x_i - x_j) \\otimes (x_i - x_j)}{d_{\\text{alg}}^2(i,j)}\\right)\n1637: \n1638: $$\n1639: \n1640: $$\n1641: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d} \\quad \\text{(uniform bound using } d_{\\text{alg}} \\geq \\varepsilon_d\\text{)}\n1642: \n1643: $$\n1644: \n1645: **General bound**: For derivative order $n \\geq 1$:\n1646: \n1647: $$\n1648: \\|\\nabla^n_{x_i} d_{\\text{alg}}(i,j)\\| \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1649: \n1650: $$\n1651: "
    },
    {
      "directive_type": "proof",
      "label": "proof-lem-dalg-derivative-bounds-full",
      "title": null,
      "start_line": 1653,
      "end_line": 1741,
      "header_lines": [
        1654
      ],
      "content_start": 1656,
      "content_end": 1740,
      "content": "1656: :label: proof-lem-dalg-derivative-bounds-full\n1657: \n1658: **Step 0: Regularization eliminates singularity.**\n1659: \n1660: Let $r^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 \\geq 0$. Then:\n1661: \n1662: $$\n1663: d_{\\text{alg}}(i,j) = \\sqrt{r^2 + \\varepsilon_d^2}\n1664: \n1665: $$\n1666: \n1667: **Key observation**: Even when $r = 0$ (walkers coincide), we have $d_{\\text{alg}}(i,j) = \\varepsilon_d > 0$. This **eliminates the singularity** at the origin that would occur for the unregularized distance $\\sqrt{r^2}$.\n1668: \n1669: **Step 1: First derivative.**\n1670: \n1671: Direct calculation using the chain rule:\n1672: \n1673: $$\n1674: \\frac{\\partial}{\\partial x_i^{(\\alpha)}} d_{\\text{alg}}(i,j) = \\frac{\\partial}{\\partial x_i^{(\\alpha)}} \\sqrt{r^2 + \\varepsilon_d^2}\n1675: = \\frac{1}{2\\sqrt{r^2 + \\varepsilon_d^2}} \\cdot 2(x_i^{(\\alpha)} - x_j^{(\\alpha)})\n1676: = \\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\n1677: \n1678: $$\n1679: \n1680: Since $|x_i^{(\\alpha)} - x_j^{(\\alpha)}| \\leq r \\leq d_{\\text{alg}}(i,j)$, we have:\n1681: \n1682: $$\n1683: \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| = \\frac{\\|x_i - x_j\\|}{d_{\\text{alg}}(i,j)} \\leq 1\n1684: \n1685: $$\n1686: \n1687: **Step 2: Second derivative (quotient rule with uniform bound).**\n1688: \n1689: $$\n1690: \\frac{\\partial^2}{\\partial x_i^{(\\alpha)} \\partial x_i^{(\\beta)}} d_{\\text{alg}}(i,j)\n1691: = \\frac{\\partial}{\\partial x_i^{(\\beta)}} \\left[\\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\\right]\n1692: \n1693: $$\n1694: \n1695: Applying quotient rule:\n1696: \n1697: $$\n1698: = \\frac{\\delta_{\\alpha\\beta}}{d_{\\text{alg}}(i,j)} - \\frac{(x_i^{(\\alpha)} - x_j^{(\\alpha)})(x_i^{(\\beta)} - x_j^{(\\beta)})}{d_{\\text{alg}}^3(i,j)}\n1699: \n1700: $$\n1701: \n1702: **Crucial difference from unregularized case**: Since $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ always, we obtain a **uniform bound**:\n1703: \n1704: $$\n1705: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d}\n1706: \n1707: $$\n1708: \n1709: Without regularization (\u03b5_d = 0), this bound would **blow up** as $d_{\\text{alg}} \\to 0$ (walker collisions).\n1710: \n1711: **Step 3: Higher derivatives by induction with uniform bounds.**\n1712: \n1713: By induction on $n$, each derivative introduces:\n1714: - A quotient rule factor (Leibniz/Fa\u00e0 di Bruno)\n1715: - Additional powers of $1/d_{\\text{alg}}$\n1716: \n1717: The general bound:\n1718: \n1719: $$\n1720: \\|\\nabla^n d_{\\text{alg}}\\| \\leq C_{d,n} \\cdot d_{\\text{alg}}^{1-n} \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1721: \n1722: $$\n1723: \n1724: follows from the Fa\u00e0 di Bruno formula for $(f \\circ g)^{(n)}$ where $f(s) = \\sqrt{s}$ and $s = r^2 + \\varepsilon_d^2$.\n1725: \n1726: The factorial growth $C_{d,n} = \\mathcal{O}(n!)$ comes from the $n$-th derivative of $\\sqrt{s}$ at $s \\geq \\varepsilon_d^2 > 0$:\n1727: \n1728: $$\n1729: \\frac{d^n}{ds^n} \\sqrt{s} = (-1)^{n-1} \\frac{(2n-3)!!}{2^n} s^{1/2 - n}\n1730: \n1731: $$\n1732: \n1733: where $(2n-3)!! = \\mathcal{O}(n! / 2^n)$, giving the Gevrey-1 bound.\n1734: \n1735: **Crucial point**: Evaluating at $s \\geq \\varepsilon_d^2$ gives:\n1736: \n1737: $$\n1738: \\left|\\frac{d^n}{ds^n} \\sqrt{s}\\right| \\leq \\frac{C_n}{\\varepsilon_d^{n-1}} \\quad \\text{(uniform bound)}\n1739: \n1740: $$",
      "metadata": {
        "label": "proof-lem-dalg-derivative-bounds-full"
      },
      "section": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
      "references": [],
      "raw_directive": "1653: :::\n1654: \n1655: :::{prf:proof}\n1656: :label: proof-lem-dalg-derivative-bounds-full\n1657: \n1658: **Step 0: Regularization eliminates singularity.**\n1659: \n1660: Let $r^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 \\geq 0$. Then:\n1661: \n1662: $$\n1663: d_{\\text{alg}}(i,j) = \\sqrt{r^2 + \\varepsilon_d^2}\n1664: \n1665: $$\n1666: \n1667: **Key observation**: Even when $r = 0$ (walkers coincide), we have $d_{\\text{alg}}(i,j) = \\varepsilon_d > 0$. This **eliminates the singularity** at the origin that would occur for the unregularized distance $\\sqrt{r^2}$.\n1668: \n1669: **Step 1: First derivative.**\n1670: \n1671: Direct calculation using the chain rule:\n1672: \n1673: $$\n1674: \\frac{\\partial}{\\partial x_i^{(\\alpha)}} d_{\\text{alg}}(i,j) = \\frac{\\partial}{\\partial x_i^{(\\alpha)}} \\sqrt{r^2 + \\varepsilon_d^2}\n1675: = \\frac{1}{2\\sqrt{r^2 + \\varepsilon_d^2}} \\cdot 2(x_i^{(\\alpha)} - x_j^{(\\alpha)})\n1676: = \\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\n1677: \n1678: $$\n1679: \n1680: Since $|x_i^{(\\alpha)} - x_j^{(\\alpha)}| \\leq r \\leq d_{\\text{alg}}(i,j)$, we have:\n1681: \n1682: $$\n1683: \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| = \\frac{\\|x_i - x_j\\|}{d_{\\text{alg}}(i,j)} \\leq 1\n1684: \n1685: $$\n1686: \n1687: **Step 2: Second derivative (quotient rule with uniform bound).**\n1688: \n1689: $$\n1690: \\frac{\\partial^2}{\\partial x_i^{(\\alpha)} \\partial x_i^{(\\beta)}} d_{\\text{alg}}(i,j)\n1691: = \\frac{\\partial}{\\partial x_i^{(\\beta)}} \\left[\\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\\right]\n1692: \n1693: $$\n1694: \n1695: Applying quotient rule:\n1696: \n1697: $$\n1698: = \\frac{\\delta_{\\alpha\\beta}}{d_{\\text{alg}}(i,j)} - \\frac{(x_i^{(\\alpha)} - x_j^{(\\alpha)})(x_i^{(\\beta)} - x_j^{(\\beta)})}{d_{\\text{alg}}^3(i,j)}\n1699: \n1700: $$\n1701: \n1702: **Crucial difference from unregularized case**: Since $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ always, we obtain a **uniform bound**:\n1703: \n1704: $$\n1705: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d}\n1706: \n1707: $$\n1708: \n1709: Without regularization (\u03b5_d = 0), this bound would **blow up** as $d_{\\text{alg}} \\to 0$ (walker collisions).\n1710: \n1711: **Step 3: Higher derivatives by induction with uniform bounds.**\n1712: \n1713: By induction on $n$, each derivative introduces:\n1714: - A quotient rule factor (Leibniz/Fa\u00e0 di Bruno)\n1715: - Additional powers of $1/d_{\\text{alg}}$\n1716: \n1717: The general bound:\n1718: \n1719: $$\n1720: \\|\\nabla^n d_{\\text{alg}}\\| \\leq C_{d,n} \\cdot d_{\\text{alg}}^{1-n} \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1721: \n1722: $$\n1723: \n1724: follows from the Fa\u00e0 di Bruno formula for $(f \\circ g)^{(n)}$ where $f(s) = \\sqrt{s}$ and $s = r^2 + \\varepsilon_d^2$.\n1725: \n1726: The factorial growth $C_{d,n} = \\mathcal{O}(n!)$ comes from the $n$-th derivative of $\\sqrt{s}$ at $s \\geq \\varepsilon_d^2 > 0$:\n1727: \n1728: $$\n1729: \\frac{d^n}{ds^n} \\sqrt{s} = (-1)^{n-1} \\frac{(2n-3)!!}{2^n} s^{1/2 - n}\n1730: \n1731: $$\n1732: \n1733: where $(2n-3)!! = \\mathcal{O}(n! / 2^n)$, giving the Gevrey-1 bound.\n1734: \n1735: **Crucial point**: Evaluating at $s \\geq \\varepsilon_d^2$ gives:\n1736: \n1737: $$\n1738: \\left|\\frac{d^n}{ds^n} \\sqrt{s}\\right| \\leq \\frac{C_n}{\\varepsilon_d^{n-1}} \\quad \\text{(uniform bound)}\n1739: \n1740: $$\n1741: "
    },
    {
      "directive_type": "property",
      "label": "prop-dalg-locality",
      "title": "Locality of Algorithmic Distance",
      "start_line": 1757,
      "end_line": 1777,
      "header_lines": [
        1758
      ],
      "content_start": 1760,
      "content_end": 1776,
      "content": "1760: :label: prop-dalg-locality\n1761: \n1762: The regularized algorithmic distance $d_{\\text{alg}}(j,\\ell)$ depends only on the states of walkers $j$ and $\\ell$:\n1763: \n1764: $$\n1765: d_{\\text{alg}}(j,\\ell) = \\sqrt{\\|x_j - x_\\ell\\|^2 + \\lambda_{\\text{alg}} \\|v_j - v_\\ell\\|^2 + \\varepsilon_d^2}\n1766: \n1767: $$\n1768: \n1769: **Consequence (Derivative Locality)**: For any walker $i$ with $i \\neq j$ and $i \\neq \\ell$:\n1770: \n1771: $$\n1772: \\nabla_{x_i, v_i} d_{\\text{alg}}(j,\\ell) = 0\n1773: \n1774: $$\n1775: \n1776: since the expression for $d_{\\text{alg}}(j,\\ell)$ contains no dependence on $(x_i, v_i)$.",
      "metadata": {
        "label": "prop-dalg-locality"
      },
      "section": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
      "references": [],
      "raw_directive": "1757: ---\n1758: \n1759: :::{prf:property} Locality of Algorithmic Distance\n1760: :label: prop-dalg-locality\n1761: \n1762: The regularized algorithmic distance $d_{\\text{alg}}(j,\\ell)$ depends only on the states of walkers $j$ and $\\ell$:\n1763: \n1764: $$\n1765: d_{\\text{alg}}(j,\\ell) = \\sqrt{\\|x_j - x_\\ell\\|^2 + \\lambda_{\\text{alg}} \\|v_j - v_\\ell\\|^2 + \\varepsilon_d^2}\n1766: \n1767: $$\n1768: \n1769: **Consequence (Derivative Locality)**: For any walker $i$ with $i \\neq j$ and $i \\neq \\ell$:\n1770: \n1771: $$\n1772: \\nabla_{x_i, v_i} d_{\\text{alg}}(j,\\ell) = 0\n1773: \n1774: $$\n1775: \n1776: since the expression for $d_{\\text{alg}}(j,\\ell)$ contains no dependence on $(x_i, v_i)$.\n1777: "
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}