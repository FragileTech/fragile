{
  "document_id": "14_geometric_gas_cinf_regularity_full",
  "stage": "directives",
  "directive_type": "lemma",
  "generated_at": "2025-11-10T13:24:29.525187+00:00",
  "count": 24,
  "items": [
    {
      "directive_type": "lemma",
      "label": "lem-velocity-squashing-compact-domain-full",
      "title": "Velocity Squashing Ensures Compact Phase Space",
      "start_line": 578,
      "end_line": 598,
      "header_lines": [
        579
      ],
      "content_start": 581,
      "content_end": 597,
      "content": "581: :label: lem-velocity-squashing-compact-domain-full\n582: \n583: The Geometric Gas algorithmic velocity is defined via a smooth squashing map (see {prf:ref}`doc-02-euclidean-gas` ¬ß4.2):\n584: \n585: $$\n586: v_{\\text{alg}} = \\psi(v) = V_{\\max} \\cdot \\tanh(v / V_{\\max})\n587: \n588: $$\n589: \n590: where v is the dynamical velocity evolved by the kinetic operator.\n591: \n592: **Properties**:\n593: 1. **Boundedness**: ‚Äñœà(v)‚Äñ < V_max for all v ‚àà ‚Ñù^d (compact image V = B(0, V_max))\n594: 2. **Smoothness**: œà ‚àà C^‚àû with ‚Äñ‚àá^m œà‚Äñ ‚â§ C_œà,m V_max^{1-m} (Gevrey-1)\n595: 3. **Near-identity**: œà(v) ‚âà v for ‚Äñv‚Äñ ‚â™ V_max (non-intrusive)\n596: \n597: **Consequence**: The phase space ùí≥ √ó V is compact (ùí≥ is assumed compact, V is bounded by squashing).",
      "metadata": {
        "label": "lem-velocity-squashing-compact-domain-full"
      },
      "section": "## 2. Companion Selection Mechanisms: Framework Context",
      "references": [
        "doc-02-euclidean-gas"
      ],
      "raw_directive": "578: Each step depends only on previous steps. The assumption œÅ_max is **explicit** and **validated for consistency**.\n579: \n580: :::{prf:lemma} Velocity Squashing Ensures Compact Phase Space\n581: :label: lem-velocity-squashing-compact-domain-full\n582: \n583: The Geometric Gas algorithmic velocity is defined via a smooth squashing map (see {prf:ref}`doc-02-euclidean-gas` ¬ß4.2):\n584: \n585: $$\n586: v_{\\text{alg}} = \\psi(v) = V_{\\max} \\cdot \\tanh(v / V_{\\max})\n587: \n588: $$\n589: \n590: where v is the dynamical velocity evolved by the kinetic operator.\n591: \n592: **Properties**:\n593: 1. **Boundedness**: ‚Äñœà(v)‚Äñ < V_max for all v ‚àà ‚Ñù^d (compact image V = B(0, V_max))\n594: 2. **Smoothness**: œà ‚àà C^‚àû with ‚Äñ‚àá^m œà‚Äñ ‚â§ C_œà,m V_max^{1-m} (Gevrey-1)\n595: 3. **Near-identity**: œà(v) ‚âà v for ‚Äñv‚Äñ ‚â™ V_max (non-intrusive)\n596: \n597: **Consequence**: The phase space ùí≥ √ó V is compact (ùí≥ is assumed compact, V is bounded by squashing).\n598: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Companion Selection Mechanisms: Framework Context"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-fokker-planck-density-bound-conservative-full",
      "title": "Fokker-Planck Density Bound from Lipschitz Drift (Conservative Case)",
      "start_line": 600,
      "end_line": 628,
      "header_lines": [
        601
      ],
      "content_start": 603,
      "content_end": 627,
      "content": "603: :label: lem-fokker-planck-density-bound-conservative-full\n604: \n605: Consider the **conservative** Fokker-Planck equation on compact phase space ùí≥ √ó V:\n606: \n607: $$\n608: \\frac{\\partial \\rho}{\\partial t} = -\\psi(v) \\cdot \\nabla_x \\rho + \\nabla_v \\cdot \\left(\\gamma v \\rho + \\nabla_x V_{\\text{fit}} \\cdot \\rho\\right) + \\gamma T \\Delta_v \\rho\n609: \n610: $$\n611: \n612: **Note**: This PDE does NOT include cloning source/sink terms. It describes the conservative Langevin dynamics.\n613: \n614: Assume:\n615: - V_fit has Lipschitz gradient: ‚Äñ‚àá_x V_fit‚Äñ ‚â§ L_V (from C¬≥ regularity, doc-13)\n616: - Velocity domain is compact: ‚Äñv‚Äñ ‚â§ V_max (from Lemma {prf:ref}`lem-velocity-squashing-compact-domain-full`)\n617: - Spatial domain ùí≥ is compact\n618: - Kinetic diffusion Œ≥T > 0 (non-degenerate)\n619: \n620: Then the invariant measure œÅ_‚àû (if it exists) satisfies:\n621: \n622: $$\n623: \\rho_{\\infty}(x,v) \\leq C_{\\text{FK}}(\\gamma, T, L_V, V_{\\max}, \\text{Vol}(\\mathcal{X})) < \\infty\n624: \n625: $$\n626: \n627: where C_FK is uniform over the compact domain.",
      "metadata": {
        "label": "lem-fokker-planck-density-bound-conservative-full"
      },
      "section": "## 2. Companion Selection Mechanisms: Framework Context",
      "references": [
        "lem-velocity-squashing-compact-domain-full"
      ],
      "raw_directive": "600: :::\n601: \n602: :::{prf:lemma} Fokker-Planck Density Bound from Lipschitz Drift (Conservative Case)\n603: :label: lem-fokker-planck-density-bound-conservative-full\n604: \n605: Consider the **conservative** Fokker-Planck equation on compact phase space ùí≥ √ó V:\n606: \n607: $$\n608: \\frac{\\partial \\rho}{\\partial t} = -\\psi(v) \\cdot \\nabla_x \\rho + \\nabla_v \\cdot \\left(\\gamma v \\rho + \\nabla_x V_{\\text{fit}} \\cdot \\rho\\right) + \\gamma T \\Delta_v \\rho\n609: \n610: $$\n611: \n612: **Note**: This PDE does NOT include cloning source/sink terms. It describes the conservative Langevin dynamics.\n613: \n614: Assume:\n615: - V_fit has Lipschitz gradient: ‚Äñ‚àá_x V_fit‚Äñ ‚â§ L_V (from C¬≥ regularity, doc-13)\n616: - Velocity domain is compact: ‚Äñv‚Äñ ‚â§ V_max (from Lemma {prf:ref}`lem-velocity-squashing-compact-domain-full`)\n617: - Spatial domain ùí≥ is compact\n618: - Kinetic diffusion Œ≥T > 0 (non-degenerate)\n619: \n620: Then the invariant measure œÅ_‚àû (if it exists) satisfies:\n621: \n622: $$\n623: \\rho_{\\infty}(x,v) \\leq C_{\\text{FK}}(\\gamma, T, L_V, V_{\\max}, \\text{Vol}(\\mathcal{X})) < \\infty\n624: \n625: $$\n626: \n627: where C_FK is uniform over the compact domain.\n628: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Companion Selection Mechanisms: Framework Context"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-c3-independence-revised",
      "title": "QSD Density Bound with Cloning (Conditional Statement)",
      "start_line": 651,
      "end_line": 703,
      "header_lines": [
        652,
        676
      ],
      "content_start": 654,
      "content_end": 702,
      "content": "654: :label: lem-qsd-density-bound-with-cloning-full\n655: \n656: The Geometric Gas dynamics include cloning (birth-death process conditioned on alive set non-empty). The QSD satisfies:\n657: \n658: **Conditional result**: If the QSD œÄ_QSD exists and is unique (established via Keystone Principle ergodicity), then under the following:\n659: \n660: 1. The **conservative** Fokker-Planck invariant measure has density bound œÅ_FK ‚â§ C_FK (Lemma {prf:ref}`lem-fokker-planck-density-bound-conservative-full`)\n661: 2. The cloning rate Œª_clone is finite\n662: 3. The domain ùí≥ √ó V is compact (velocity squashing)\n663: \n664: The QSD density satisfies:\n665: \n666: $$\n667: \\rho_{\\text{QSD}}(x,v) \\leq C_{\\text{QSD}} \\cdot C_{\\text{FK}}\n668: \n669: $$\n670: \n671: where C_QSD depends on Œª_clone and domain volume, but is **finite**.\n672: \n673: **Rigorous proof**: A complete proof requires analyzing the generator of the conditioned process (QSD generator = Fokker-Planck generator + cloning source/sink + ground state projection). This is subject of ongoing research in QSD theory for interacting particle systems (see Champagnat-Villemonais 2017, *Exponential convergence to quasi-stationary distribution*; Cloez-Thai 2018, *Quantitative results for QSD convergence*).\n674: \n675: **For this document**: We state œÅ_max as an explicit assumption (Assumption {prf:ref}`assump-uniform-density-full`) below and validate consistency.\n676: \n677: :::{prf:lemma} Independence of C¬≥ Regularity Analysis\n678: :label: lem-c3-independence-revised\n679: \n680: To ensure the logical chain is non-circular, we verify that the C¬≥ regularity proof in {prf:ref}`doc-13-geometric-gas-c3-regularity` uses only:\n681: \n682: **Allowed inputs**:\n683: 1. **Companion availability** (Lemma {prf:ref}`lem-companion-availability-enforcement`) - derived below from Keystone + volume\n684: 2. **Bounded measurements**: d_alg ‚â§ diam(ùí≥ √ó V) < ‚àû (from compact domain)\n685: 3. **Regularization**: Œµ_d > 0 eliminates singularities\n686: 4. **Rescale function**: g_A ‚àà C¬≥ with bounded derivatives\n687: 5. **Density bound**: œÅ_max (now EXPLICITLY ASSUMED, see below)\n688: \n689: **Critically, doc-13 does NOT assume**:\n690: - ‚úó C^‚àû regularity\n691: - ‚úó k-uniform bounds at all orders\n692: - ‚úó Anything from this document (doc-20)\n693: \n694: **Verification method**: Direct inspection of doc-13 confirms only the above five inputs are used.\n695: \n696: **Conclusion**: The logical chain is:\n697: 1. **Companion availability** ‚Üê Keystone + volume (¬ß2.4 below, NO density assumption)\n698: 2. **C¬≥ regularity** ‚Üê Companion availability + **œÅ_max assumption** + elementary bounds\n699: 3. **Lipschitz gradient L_V** ‚Üê C¬≥\n700: 4. **Fokker-Planck bound C_FK** ‚Üê L_V + compact domain + velocity squashing\n701: 5. **Consistency check** ‚Üê C_FK(L_V(œÅ_max)) should have fixed point œÅ_max*\n702: 6. **C^‚àû regularity** ‚Üê œÅ_max* + C¬≥ + advanced machinery (this document)",
      "metadata": {
        "label": "lem-c3-independence-revised"
      },
      "section": "## 2. Companion Selection Mechanisms: Framework Context",
      "references": [
        "lem-fokker-planck-density-bound-conservative-full",
        "assump-uniform-density-full",
        "doc-13-geometric-gas-c3-regularity",
        "lem-companion-availability-enforcement"
      ],
      "raw_directive": "651: :::\n652: \n653: :::{prf:lemma} QSD Density Bound with Cloning (Conditional Statement)\n654: :label: lem-qsd-density-bound-with-cloning-full\n655: \n656: The Geometric Gas dynamics include cloning (birth-death process conditioned on alive set non-empty). The QSD satisfies:\n657: \n658: **Conditional result**: If the QSD œÄ_QSD exists and is unique (established via Keystone Principle ergodicity), then under the following:\n659: \n660: 1. The **conservative** Fokker-Planck invariant measure has density bound œÅ_FK ‚â§ C_FK (Lemma {prf:ref}`lem-fokker-planck-density-bound-conservative-full`)\n661: 2. The cloning rate Œª_clone is finite\n662: 3. The domain ùí≥ √ó V is compact (velocity squashing)\n663: \n664: The QSD density satisfies:\n665: \n666: $$\n667: \\rho_{\\text{QSD}}(x,v) \\leq C_{\\text{QSD}} \\cdot C_{\\text{FK}}\n668: \n669: $$\n670: \n671: where C_QSD depends on Œª_clone and domain volume, but is **finite**.\n672: \n673: **Rigorous proof**: A complete proof requires analyzing the generator of the conditioned process (QSD generator = Fokker-Planck generator + cloning source/sink + ground state projection). This is subject of ongoing research in QSD theory for interacting particle systems (see Champagnat-Villemonais 2017, *Exponential convergence to quasi-stationary distribution*; Cloez-Thai 2018, *Quantitative results for QSD convergence*).\n674: \n675: **For this document**: We state œÅ_max as an explicit assumption (Assumption {prf:ref}`assump-uniform-density-full`) below and validate consistency.\n676: \n677: :::{prf:lemma} Independence of C¬≥ Regularity Analysis\n678: :label: lem-c3-independence-revised\n679: \n680: To ensure the logical chain is non-circular, we verify that the C¬≥ regularity proof in {prf:ref}`doc-13-geometric-gas-c3-regularity` uses only:\n681: \n682: **Allowed inputs**:\n683: 1. **Companion availability** (Lemma {prf:ref}`lem-companion-availability-enforcement`) - derived below from Keystone + volume\n684: 2. **Bounded measurements**: d_alg ‚â§ diam(ùí≥ √ó V) < ‚àû (from compact domain)\n685: 3. **Regularization**: Œµ_d > 0 eliminates singularities\n686: 4. **Rescale function**: g_A ‚àà C¬≥ with bounded derivatives\n687: 5. **Density bound**: œÅ_max (now EXPLICITLY ASSUMED, see below)\n688: \n689: **Critically, doc-13 does NOT assume**:\n690: - ‚úó C^‚àû regularity\n691: - ‚úó k-uniform bounds at all orders\n692: - ‚úó Anything from this document (doc-20)\n693: \n694: **Verification method**: Direct inspection of doc-13 confirms only the above five inputs are used.\n695: \n696: **Conclusion**: The logical chain is:\n697: 1. **Companion availability** ‚Üê Keystone + volume (¬ß2.4 below, NO density assumption)\n698: 2. **C¬≥ regularity** ‚Üê Companion availability + **œÅ_max assumption** + elementary bounds\n699: 3. **Lipschitz gradient L_V** ‚Üê C¬≥\n700: 4. **Fokker-Planck bound C_FK** ‚Üê L_V + compact domain + velocity squashing\n701: 5. **Consistency check** ‚Üê C_FK(L_V(œÅ_max)) should have fixed point œÅ_max*\n702: 6. **C^‚àû regularity** ‚Üê œÅ_max* + C¬≥ + advanced machinery (this document)\n703: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Companion Selection Mechanisms: Framework Context"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-companion-availability-enforcement",
      "title": "Partition Function Lower Bound from Compactness",
      "start_line": 776,
      "end_line": 792,
      "header_lines": [
        777
      ],
      "content_start": 779,
      "content_end": 791,
      "content": "779: :label: lem-companion-availability-enforcement\n780: \n781: For any walker $i \\in \\mathcal{A}$ in the alive set with $k \\geq 2$, the softmax partition function satisfies:\n782: \n783: $$\n784: Z_i = \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{i\\}} \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,\\ell)}{2\\varepsilon_c^2}\\right) \\geq \\exp\\left(-\\frac{D_{\\max}^2}{2\\varepsilon_c^2}\\right) =: Z_{\\min} > 0\n785: \n786: $$\n787: \n788: where $D_{\\max} = \\text{diam}(\\mathcal{X} \\times V)$ is the phase-space diameter (finite by compactness).\n789: \n790: **Key properties**:\n791: 1. **Non-vanishing**: $Z_{\\min} > 0$ is strictly positive for all $i \\in \\mathcal{A}$",
      "metadata": {
        "label": "lem-companion-availability-enforcement"
      },
      "section": "## 2. Companion Selection Mechanisms: Framework Context",
      "references": [],
      "raw_directive": "776: With the approach to the density bound clarified (explicit assumption with a posteriori validation, ¬ß2.3.5 above), we now state the three framework assumptions:\n777: \n778: :::{prf:lemma} Partition Function Lower Bound from Compactness\n779: :label: lem-companion-availability-enforcement\n780: \n781: For any walker $i \\in \\mathcal{A}$ in the alive set with $k \\geq 2$, the softmax partition function satisfies:\n782: \n783: $$\n784: Z_i = \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{i\\}} \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,\\ell)}{2\\varepsilon_c^2}\\right) \\geq \\exp\\left(-\\frac{D_{\\max}^2}{2\\varepsilon_c^2}\\right) =: Z_{\\min} > 0\n785: \n786: $$\n787: \n788: where $D_{\\max} = \\text{diam}(\\mathcal{X} \\times V)$ is the phase-space diameter (finite by compactness).\n789: \n790: **Key properties**:\n791: 1. **Non-vanishing**: $Z_{\\min} > 0$ is strictly positive for all $i \\in \\mathcal{A}$\n792: 2. **k-uniform**: The bound depends only on domain diameter $D_{\\max}$ and parameter $\\varepsilon_c$, **not on the number of walkers** $k$ or $N$",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Companion Selection Mechanisms: Framework Context"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-high-prob-min-separation-full",
      "title": "High-Probability Minimum Separation",
      "start_line": 879,
      "end_line": 899,
      "header_lines": [
        880
      ],
      "content_start": 882,
      "content_end": 898,
      "content": "882: :label: lem-high-prob-min-separation-full\n883: \n884: For the Geometric Gas with Langevin kinetic operator (temperature $T > 0$, friction $\\gamma > 0$) and cloning operator maintaining swarm diversity, there exist constants $r_{\\min}(T, \\gamma, k) > 0$ and $C_{\\text{sep}}(k) > 0$ such that:\n885: \n886: $$\n887: \\mathbb{P}\\left(\\min_{i \\neq j \\in \\mathcal{A}} d_{\\text{alg}}(i,j) < r_{\\min}\\right) \\leq C_{\\text{sep}} \\cdot e^{-c_{\\text{sep}} k}\n888: \n889: $$\n890: \n891: where $c_{\\text{sep}} > 0$ depends on $T, \\gamma, \\text{Vol}(\\mathcal{X})$ but not on $k$.\n892: \n893: **Physical mechanism**: The kinetic diffusion with $T > 0$ continuously randomizes velocities, preventing walkers from remaining close for extended periods. The cloning operator maintains diversity by preferentially removing low-fitness walkers (which tend to cluster). Combined, these mechanisms produce exponential repulsion in the QSD.\n894: \n895: **Quantitative scaling**: For typical parameters:\n896: - $r_{\\min} = \\Omega(k^{-1/2d})$ (random packing in dimension $d$)\n897: - $C_{\\text{sep}} = O(k^2)$ (number of pairs)\n898: - Decay rate: $c_{\\text{sep}} = \\Omega(T/(d \\cdot \\text{diam}(\\mathcal{X})^2))$",
      "metadata": {
        "label": "lem-high-prob-min-separation-full"
      },
      "section": "## 2. Companion Selection Mechanisms: Framework Context",
      "references": [],
      "raw_directive": "879: :::\n880: \n881: :::{prf:lemma} High-Probability Minimum Separation\n882: :label: lem-high-prob-min-separation-full\n883: \n884: For the Geometric Gas with Langevin kinetic operator (temperature $T > 0$, friction $\\gamma > 0$) and cloning operator maintaining swarm diversity, there exist constants $r_{\\min}(T, \\gamma, k) > 0$ and $C_{\\text{sep}}(k) > 0$ such that:\n885: \n886: $$\n887: \\mathbb{P}\\left(\\min_{i \\neq j \\in \\mathcal{A}} d_{\\text{alg}}(i,j) < r_{\\min}\\right) \\leq C_{\\text{sep}} \\cdot e^{-c_{\\text{sep}} k}\n888: \n889: $$\n890: \n891: where $c_{\\text{sep}} > 0$ depends on $T, \\gamma, \\text{Vol}(\\mathcal{X})$ but not on $k$.\n892: \n893: **Physical mechanism**: The kinetic diffusion with $T > 0$ continuously randomizes velocities, preventing walkers from remaining close for extended periods. The cloning operator maintains diversity by preferentially removing low-fitness walkers (which tend to cluster). Combined, these mechanisms produce exponential repulsion in the QSD.\n894: \n895: **Quantitative scaling**: For typical parameters:\n896: - $r_{\\min} = \\Omega(k^{-1/2d})$ (random packing in dimension $d$)\n897: - $C_{\\text{sep}} = O(k^2)$ (number of pairs)\n898: - Decay rate: $c_{\\text{sep}} = \\Omega(T/(d \\cdot \\text{diam}(\\mathcal{X})^2))$\n899: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Companion Selection Mechanisms: Framework Context"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-sum-to-integral-bound-full",
      "title": "Sum-to-Integral Bound with Exponential Weights",
      "start_line": 971,
      "end_line": 993,
      "header_lines": [
        972
      ],
      "content_start": 974,
      "content_end": 992,
      "content": "974: :label: lem-sum-to-integral-bound-full\n975: \n976: Under {prf:ref}`assump-uniform-density-full`, for any walker $i \\in \\mathcal{A}$ and any function $f : \\mathcal{X} \\times \\mathbb{R}^d \\to \\mathbb{R}$ with $|f| \\leq M$:\n977: \n978: $$\n979: \\sum_{j \\in \\mathcal{A}} f(x_j, v_j) \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,j)}{2\\varepsilon_c^2}\\right)\n980: \\leq \\rho_{\\max} \\cdot M \\cdot \\int_{\\mathcal{X} \\times \\mathbb{R}^d} \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,y)}{2\\varepsilon_c^2}\\right) dy\\,du\n981: \n982: $$\n983: \n984: **Key consequence for Gaussian integrals**: When $f \\equiv 1$:\n985: \n986: $$\n987: \\sum_{j \\in \\mathcal{A}} \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,j)}{2\\varepsilon_c^2}\\right)\n988: \\leq \\rho_{\\max} \\cdot (2\\pi\\varepsilon_c^2)^d \\cdot C_{\\lambda}\n989: \n990: $$\n991: \n992: where $C_{\\lambda} = (1 + \\lambda_{\\text{alg}})^{d/2}$ accounts for the velocity component in $d_{\\text{alg}}$.",
      "metadata": {
        "label": "lem-sum-to-integral-bound-full"
      },
      "section": "## 2. Companion Selection Mechanisms: Framework Context",
      "references": [
        "assump-uniform-density-full"
      ],
      "raw_directive": "971: The following lemma makes the sum-to-integral approximation **explicit**.\n972: \n973: :::{prf:lemma} Sum-to-Integral Bound with Exponential Weights\n974: :label: lem-sum-to-integral-bound-full\n975: \n976: Under {prf:ref}`assump-uniform-density-full`, for any walker $i \\in \\mathcal{A}$ and any function $f : \\mathcal{X} \\times \\mathbb{R}^d \\to \\mathbb{R}$ with $|f| \\leq M$:\n977: \n978: $$\n979: \\sum_{j \\in \\mathcal{A}} f(x_j, v_j) \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,j)}{2\\varepsilon_c^2}\\right)\n980: \\leq \\rho_{\\max} \\cdot M \\cdot \\int_{\\mathcal{X} \\times \\mathbb{R}^d} \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,y)}{2\\varepsilon_c^2}\\right) dy\\,du\n981: \n982: $$\n983: \n984: **Key consequence for Gaussian integrals**: When $f \\equiv 1$:\n985: \n986: $$\n987: \\sum_{j \\in \\mathcal{A}} \\exp\\left(-\\frac{d_{\\text{alg}}^2(i,j)}{2\\varepsilon_c^2}\\right)\n988: \\leq \\rho_{\\max} \\cdot (2\\pi\\varepsilon_c^2)^d \\cdot C_{\\lambda}\n989: \n990: $$\n991: \n992: where $C_{\\lambda} = (1 + \\lambda_{\\text{alg}})^{d/2}$ accounts for the velocity component in $d_{\\text{alg}}$.\n993: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 3,
        "chapter_file": "chapter_3.json",
        "section_id": "## 2. Companion Selection Mechanisms: Framework Context"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-partition-derivative-bounds-full",
      "title": "Derivative Bounds for Partition Functions",
      "start_line": 1183,
      "end_line": 1194,
      "header_lines": [
        1184
      ],
      "content_start": 1186,
      "content_end": 1193,
      "content": "1186: :label: lem-partition-derivative-bounds-full\n1187: \n1188: The partition functions $\\psi_m$ satisfy:\n1189: \n1190: $$\n1191: \\|\\nabla^n \\psi_m\\|_\\infty \\leq C_{\\psi,n} \\cdot \\varepsilon_c^{-n}\n1192: \n1193: $$",
      "metadata": {
        "label": "lem-partition-derivative-bounds-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [],
      "raw_directive": "1183: :::\n1184: \n1185: :::{prf:lemma} Derivative Bounds for Partition Functions\n1186: :label: lem-partition-derivative-bounds-full\n1187: \n1188: The partition functions $\\psi_m$ satisfy:\n1189: \n1190: $$\n1191: \\|\\nabla^n \\psi_m\\|_\\infty \\leq C_{\\psi,n} \\cdot \\varepsilon_c^{-n}\n1192: \n1193: $$\n1194: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-effective-cluster-size-bounds-full",
      "title": "Bounds on Effective Cluster Size",
      "start_line": 1277,
      "end_line": 1295,
      "header_lines": [
        1278
      ],
      "content_start": 1280,
      "content_end": 1294,
      "content": "1280: :label: lem-effective-cluster-size-bounds-full\n1281: \n1282: Under {prf:ref}`assump-uniform-density-full`:\n1283: \n1284: $$\n1285: k_m^{\\text{eff}} \\leq \\rho_{\\max} \\cdot \\text{Vol}(B(y_m, 2\\varepsilon_c)) = C_{\\text{vol}} \\cdot \\rho_{\\max} \\cdot \\varepsilon_c^{2d}\n1286: \n1287: $$\n1288: \n1289: where $C_{\\text{vol}}$ is the volume constant for phase-space balls.\n1290: \n1291: Moreover, the total effective population sums to $k$:\n1292: \n1293: $$\n1294: \\sum_{m=1}^M k_m^{\\text{eff}} = \\sum_{m=1}^M \\sum_{j \\in \\mathcal{A}} \\psi_m(x_j, v_j) = \\sum_{j \\in \\mathcal{A}} \\underbrace{\\sum_{m=1}^M \\psi_m(x_j, v_j)}_{= 1} = k",
      "metadata": {
        "label": "lem-effective-cluster-size-bounds-full"
      },
      "section": "## 3. Smooth Phase-Space Clustering",
      "references": [
        "assump-uniform-density-full"
      ],
      "raw_directive": "1277: :::\n1278: \n1279: :::{prf:lemma} Bounds on Effective Cluster Size\n1280: :label: lem-effective-cluster-size-bounds-full\n1281: \n1282: Under {prf:ref}`assump-uniform-density-full`:\n1283: \n1284: $$\n1285: k_m^{\\text{eff}} \\leq \\rho_{\\max} \\cdot \\text{Vol}(B(y_m, 2\\varepsilon_c)) = C_{\\text{vol}} \\cdot \\rho_{\\max} \\cdot \\varepsilon_c^{2d}\n1286: \n1287: $$\n1288: \n1289: where $C_{\\text{vol}}$ is the volume constant for phase-space balls.\n1290: \n1291: Moreover, the total effective population sums to $k$:\n1292: \n1293: $$\n1294: \\sum_{m=1}^M k_m^{\\text{eff}} = \\sum_{m=1}^M \\sum_{j \\in \\mathcal{A}} \\psi_m(x_j, v_j) = \\sum_{j \\in \\mathcal{A}} \\underbrace{\\sum_{m=1}^M \\psi_m(x_j, v_j)}_{= 1} = k\n1295: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 5,
        "chapter_file": "chapter_5.json",
        "section_id": "## 3. Smooth Phase-Space Clustering"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-softmax-tail-corrected-full",
      "title": "Softmax Tail Bound",
      "start_line": 1360,
      "end_line": 1371,
      "header_lines": [
        1361
      ],
      "content_start": 1363,
      "content_end": 1370,
      "content": "1363: :label: lem-softmax-tail-corrected-full\n1364: \n1365: Under {prf:ref}`lem-companion-availability-enforcement`, for walker $i \\in \\mathcal{A}$ with companion $c(i)$ selected via softmax:\n1366: \n1367: $$\n1368: \\mathbb{P}(d_{\\text{alg}}(i, c(i)) > R \\mid \\mathcal{F}_t) \\leq k \\cdot \\exp\\left(-\\frac{R^2 - R_{\\max}^2}{2\\varepsilon_c^2}\\right)\n1369: \n1370: $$",
      "metadata": {
        "label": "lem-softmax-tail-corrected-full"
      },
      "section": "## 4. Exponential Locality and Effective Interactions",
      "references": [
        "lem-companion-availability-enforcement"
      ],
      "raw_directive": "1360: ### 4.1 Softmax Concentration Bounds\n1361: \n1362: :::{prf:lemma} Softmax Tail Bound\n1363: :label: lem-softmax-tail-corrected-full\n1364: \n1365: Under {prf:ref}`lem-companion-availability-enforcement`, for walker $i \\in \\mathcal{A}$ with companion $c(i)$ selected via softmax:\n1366: \n1367: $$\n1368: \\mathbb{P}(d_{\\text{alg}}(i, c(i)) > R \\mid \\mathcal{F}_t) \\leq k \\cdot \\exp\\left(-\\frac{R^2 - R_{\\max}^2}{2\\varepsilon_c^2}\\right)\n1369: \n1370: $$\n1371: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 4. Exponential Locality and Effective Interactions"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-effective-companion-count-corrected-full",
      "title": "Effective Companion Count",
      "start_line": 1454,
      "end_line": 1472,
      "header_lines": [
        1455
      ],
      "content_start": 1457,
      "content_end": 1471,
      "content": "1457: :label: lem-effective-companion-count-corrected-full\n1458: \n1459: Under {prf:ref}`assump-uniform-density-full`, the effective number of companions within $R_{\\text{eff}}$ is:\n1460: \n1461: $$\n1462: k_{\\text{eff}}(i) := \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{i\\}} \\mathbb{1}_{d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}} \\leq \\rho_{\\max} \\cdot C_{\\text{vol}} \\cdot R_{\\text{eff}}^{2d}\n1463: \n1464: $$\n1465: \n1466: Substituting $R_{\\text{eff}} = \\mathcal{O}(\\varepsilon_c \\sqrt{\\log k})$:\n1467: \n1468: $$\n1469: k_{\\text{eff}}(i) = \\mathcal{O}(\\varepsilon_c^{2d} \\cdot (\\log k)^d)\n1470: \n1471: $$",
      "metadata": {
        "label": "lem-effective-companion-count-corrected-full"
      },
      "section": "## 4. Exponential Locality and Effective Interactions",
      "references": [
        "assump-uniform-density-full"
      ],
      "raw_directive": "1454: ### 4.2 Effective Number of Interacting Companions\n1455: \n1456: :::{prf:lemma} Effective Companion Count\n1457: :label: lem-effective-companion-count-corrected-full\n1458: \n1459: Under {prf:ref}`assump-uniform-density-full`, the effective number of companions within $R_{\\text{eff}}$ is:\n1460: \n1461: $$\n1462: k_{\\text{eff}}(i) := \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{i\\}} \\mathbb{1}_{d_{\\text{alg}}(i,\\ell) \\leq R_{\\text{eff}}} \\leq \\rho_{\\max} \\cdot C_{\\text{vol}} \\cdot R_{\\text{eff}}^{2d}\n1463: \n1464: $$\n1465: \n1466: Substituting $R_{\\text{eff}} = \\mathcal{O}(\\varepsilon_c \\sqrt{\\log k})$:\n1467: \n1468: $$\n1469: k_{\\text{eff}}(i) = \\mathcal{O}(\\varepsilon_c^{2d} \\cdot (\\log k)^d)\n1470: \n1471: $$\n1472: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 4. Exponential Locality and Effective Interactions"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-softmax-derivative-locality-full",
      "title": "Exponential Locality of Softmax Derivatives",
      "start_line": 1505,
      "end_line": 1518,
      "header_lines": [
        1506
      ],
      "content_start": 1508,
      "content_end": 1517,
      "content": "1508: :label: lem-softmax-derivative-locality-full\n1509: \n1510: For the softmax companion selection with temperature $\\varepsilon_c$, all derivatives of the companion probability satisfy:\n1511: \n1512: $$\n1513: \\left|\\nabla^\\alpha_{x_i} P(c(j) = \\ell \\mid \\mathcal{F}_t)\\right| \\leq C_{|\\alpha|} \\cdot \\varepsilon_c^{-2|\\alpha|} \\cdot P(c(j) = \\ell \\mid \\mathcal{F}_t) \\cdot \\exp\\left(-\\frac{d_{\\text{alg}}^2(j, \\ell)}{4\\varepsilon_c^2}\\right)\n1514: \n1515: $$\n1516: \n1517: where $C_{|\\alpha|} = O(|\\alpha|!)$ (Gevrey-1 growth) and the bound is **k-uniform**.",
      "metadata": {
        "label": "lem-softmax-derivative-locality-full"
      },
      "section": "## 4. Exponential Locality and Effective Interactions",
      "references": [],
      "raw_directive": "1505: The previous sections established exponential concentration for the **probabilities** $P(c(i) = \\ell)$. We now prove that **derivatives** of these probabilities also decay exponentially.\n1506: \n1507: :::{prf:lemma} Exponential Locality of Softmax Derivatives\n1508: :label: lem-softmax-derivative-locality-full\n1509: \n1510: For the softmax companion selection with temperature $\\varepsilon_c$, all derivatives of the companion probability satisfy:\n1511: \n1512: $$\n1513: \\left|\\nabla^\\alpha_{x_i} P(c(j) = \\ell \\mid \\mathcal{F}_t)\\right| \\leq C_{|\\alpha|} \\cdot \\varepsilon_c^{-2|\\alpha|} \\cdot P(c(j) = \\ell \\mid \\mathcal{F}_t) \\cdot \\exp\\left(-\\frac{d_{\\text{alg}}^2(j, \\ell)}{4\\varepsilon_c^2}\\right)\n1514: \n1515: $$\n1516: \n1517: where $C_{|\\alpha|} = O(|\\alpha|!)$ (Gevrey-1 growth) and the bound is **k-uniform**.\n1518: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 6,
        "chapter_file": "chapter_6.json",
        "section_id": "## 4. Exponential Locality and Effective Interactions"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-dalg-derivative-bounds-full",
      "title": "Higher Derivatives of Regularized Algorithmic Distance",
      "start_line": 1608,
      "end_line": 1651,
      "header_lines": [
        1609
      ],
      "content_start": 1611,
      "content_end": 1650,
      "content": "1611: :label: lem-dalg-derivative-bounds-full\n1612: \n1613: The **regularized** algorithmic distance:\n1614: \n1615: $$\n1616: d_{\\text{alg}}(i,j) = \\sqrt{\\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 + \\varepsilon_d^2}\n1617: \n1618: $$\n1619: \n1620: where $\\varepsilon_d > 0$ is the regularization parameter, has the following properties:\n1621: \n1622: 1. **Uniform Lower Bound**: $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ for all walker configurations (no singularity)\n1623: \n1624: 2. **C^‚àû Regularity**: $d_{\\text{alg}}$ is C^‚àû with **uniform** derivative bounds:\n1625: \n1626: **First derivative**:\n1627: \n1628: $$\n1629: \\nabla_{x_i} d_{\\text{alg}}(i,j) = \\frac{x_i - x_j}{d_{\\text{alg}}(i,j)}, \\quad \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| \\leq 1\n1630: \n1631: $$\n1632: \n1633: **Second derivative** (Hessian):\n1634: \n1635: $$\n1636: \\nabla^2_{x_i} d_{\\text{alg}}(i,j) = \\frac{1}{d_{\\text{alg}}(i,j)} \\left(I - \\frac{(x_i - x_j) \\otimes (x_i - x_j)}{d_{\\text{alg}}^2(i,j)}\\right)\n1637: \n1638: $$\n1639: \n1640: $$\n1641: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d} \\quad \\text{(uniform bound using } d_{\\text{alg}} \\geq \\varepsilon_d\\text{)}\n1642: \n1643: $$\n1644: \n1645: **General bound**: For derivative order $n \\geq 1$:\n1646: \n1647: $$\n1648: \\|\\nabla^n_{x_i} d_{\\text{alg}}(i,j)\\| \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1649: \n1650: $$",
      "metadata": {
        "label": "lem-dalg-derivative-bounds-full"
      },
      "section": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
      "references": [],
      "raw_directive": "1608: We now establish the derivative structure for the **regularized** algorithmic distance, which eliminates the singularity at walker collisions.\n1609: \n1610: :::{prf:lemma} Higher Derivatives of Regularized Algorithmic Distance\n1611: :label: lem-dalg-derivative-bounds-full\n1612: \n1613: The **regularized** algorithmic distance:\n1614: \n1615: $$\n1616: d_{\\text{alg}}(i,j) = \\sqrt{\\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 + \\varepsilon_d^2}\n1617: \n1618: $$\n1619: \n1620: where $\\varepsilon_d > 0$ is the regularization parameter, has the following properties:\n1621: \n1622: 1. **Uniform Lower Bound**: $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ for all walker configurations (no singularity)\n1623: \n1624: 2. **C^‚àû Regularity**: $d_{\\text{alg}}$ is C^‚àû with **uniform** derivative bounds:\n1625: \n1626: **First derivative**:\n1627: \n1628: $$\n1629: \\nabla_{x_i} d_{\\text{alg}}(i,j) = \\frac{x_i - x_j}{d_{\\text{alg}}(i,j)}, \\quad \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| \\leq 1\n1630: \n1631: $$\n1632: \n1633: **Second derivative** (Hessian):\n1634: \n1635: $$\n1636: \\nabla^2_{x_i} d_{\\text{alg}}(i,j) = \\frac{1}{d_{\\text{alg}}(i,j)} \\left(I - \\frac{(x_i - x_j) \\otimes (x_i - x_j)}{d_{\\text{alg}}^2(i,j)}\\right)\n1637: \n1638: $$\n1639: \n1640: $$\n1641: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d} \\quad \\text{(uniform bound using } d_{\\text{alg}} \\geq \\varepsilon_d\\text{)}\n1642: \n1643: $$\n1644: \n1645: **General bound**: For derivative order $n \\geq 1$:\n1646: \n1647: $$\n1648: \\|\\nabla^n_{x_i} d_{\\text{alg}}(i,j)\\| \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1649: \n1650: $$\n1651: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 7,
        "chapter_file": "chapter_7.json",
        "section_id": "## 5. Derivatives of Algorithmic Distance (Regularized Version)"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-companion-measurement-derivatives-full",
      "title": "Derivatives of Companion-Dependent Measurements",
      "start_line": 1806,
      "end_line": 1826,
      "header_lines": [
        1807
      ],
      "content_start": 1809,
      "content_end": 1825,
      "content": "1809: :label: lem-companion-measurement-derivatives-full\n1810: \n1811: For any walker $i \\in \\mathcal{A}$ (taking derivatives with respect to $x_i$), the companion-dependent measurement for walker $j \\neq i$ satisfies:\n1812: \n1813: $$\n1814: \\|\\nabla^n_{x_i} d_j\\| \\leq C_{d_j,n} \\cdot \\max(\\varepsilon_d^{1-n}, \\varepsilon_d \\varepsilon_c^{-n})\n1815: \n1816: $$\n1817: \n1818: where $C_{d_j,n} = \\mathcal{O}(n!)$ (Gevrey-1) is **k-uniform** (independent of the number of alive walkers).\n1819: \n1820: **For typical parameters** where $\\varepsilon_d \\ll \\varepsilon_c$ and $n \\geq 2$, this simplifies to:\n1821: \n1822: $$\n1823: \\|\\nabla^n_{x_i} d_j\\| \\leq C_{d_j,n} \\cdot \\varepsilon_d^{1-n}\n1824: \n1825: $$",
      "metadata": {
        "label": "lem-companion-measurement-derivatives-full"
      },
      "section": "## 5.5 Companion-Dependent Measurements with Softmax Coupling",
      "references": [],
      "raw_directive": "1806: ### 5.5.2 High-Order Derivatives via Fa√† di Bruno Formula\n1807: \n1808: :::{prf:lemma} Derivatives of Companion-Dependent Measurements\n1809: :label: lem-companion-measurement-derivatives-full\n1810: \n1811: For any walker $i \\in \\mathcal{A}$ (taking derivatives with respect to $x_i$), the companion-dependent measurement for walker $j \\neq i$ satisfies:\n1812: \n1813: $$\n1814: \\|\\nabla^n_{x_i} d_j\\| \\leq C_{d_j,n} \\cdot \\max(\\varepsilon_d^{1-n}, \\varepsilon_d \\varepsilon_c^{-n})\n1815: \n1816: $$\n1817: \n1818: where $C_{d_j,n} = \\mathcal{O}(n!)$ (Gevrey-1) is **k-uniform** (independent of the number of alive walkers).\n1819: \n1820: **For typical parameters** where $\\varepsilon_d \\ll \\varepsilon_c$ and $n \\geq 2$, this simplifies to:\n1821: \n1822: $$\n1823: \\|\\nabla^n_{x_i} d_j\\| \\leq C_{d_j,n} \\cdot \\varepsilon_d^{1-n}\n1824: \n1825: $$\n1826: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 5.5 Companion-Dependent Measurements with Softmax Coupling"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-softmax-jacobian-reduction",
      "title": "Softmax Jacobian Reduction for $j \\neq i$",
      "start_line": 1978,
      "end_line": 1996,
      "header_lines": [
        1979
      ],
      "content_start": 1981,
      "content_end": 1995,
      "content": "1981: :label: lem-softmax-jacobian-reduction\n1982: \n1983: Let $K_\\ell := \\exp(-d_{\\text{alg}}^2(j,\\ell)/(2\\varepsilon_c^2))$, $Z := \\sum_m K_m$, and $P_\\ell := K_\\ell / Z$ be the softmax probabilities. For $j \\neq i$, only $K_i$ depends on $x_i$. Then:\n1984: \n1985: $$\n1986: \\nabla_{x_i} P_\\ell = P_\\ell (\\delta_{\\ell i} - P_i) \\nabla_{x_i} \\log K_i\n1987: \n1988: $$\n1989: \n1990: and the first derivative of $d_j$ decomposes as:\n1991: \n1992: $$\n1993: \\nabla_{x_i} d_j = P_i \\nabla_{x_i} d_{\\text{alg}}(j,i) + P_i (d_{\\text{alg}}(j,i) - d_j) \\nabla_{x_i} \\log K_i\n1994: \n1995: $$",
      "metadata": {
        "label": "lem-softmax-jacobian-reduction"
      },
      "section": "## 5.5 Companion-Dependent Measurements with Softmax Coupling",
      "references": [],
      "raw_directive": "1978: Before applying the quotient rule, we provide an alternative derivation using the probability parametrization that makes the k-uniformity mechanism explicit. This addresses potential concerns about whether $\\ell$-summations could introduce $\\mathcal{O}(k_{\\text{eff}}^{(\\varepsilon_c)}) = \\mathcal{O}((\\log k)^d)$ factors.\n1979: \n1980: :::{prf:lemma} Softmax Jacobian Reduction for $j \\neq i$\n1981: :label: lem-softmax-jacobian-reduction\n1982: \n1983: Let $K_\\ell := \\exp(-d_{\\text{alg}}^2(j,\\ell)/(2\\varepsilon_c^2))$, $Z := \\sum_m K_m$, and $P_\\ell := K_\\ell / Z$ be the softmax probabilities. For $j \\neq i$, only $K_i$ depends on $x_i$. Then:\n1984: \n1985: $$\n1986: \\nabla_{x_i} P_\\ell = P_\\ell (\\delta_{\\ell i} - P_i) \\nabla_{x_i} \\log K_i\n1987: \n1988: $$\n1989: \n1990: and the first derivative of $d_j$ decomposes as:\n1991: \n1992: $$\n1993: \\nabla_{x_i} d_j = P_i \\nabla_{x_i} d_{\\text{alg}}(j,i) + P_i (d_{\\text{alg}}(j,i) - d_j) \\nabla_{x_i} \\log K_i\n1994: \n1995: $$\n1996: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 5.5 Companion-Dependent Measurements with Softmax Coupling"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-self-measurement-derivatives-full",
      "title": "Derivatives of Self-Measurement (j=i case)",
      "start_line": 2215,
      "end_line": 2235,
      "header_lines": [
        2216
      ],
      "content_start": 2218,
      "content_end": 2234,
      "content": "2218: :label: lem-self-measurement-derivatives-full\n2219: \n2220: For walker $i \\in \\mathcal{A}$, the **self-measurement** $d_i = d_{\\text{alg}}(i, c(i))$ where $c(i)$ is selected via softmax satisfies:\n2221: \n2222: $$\n2223: \\|\\nabla^n_{x_i} d_i\\| \\leq C_{d_i,n} \\cdot \\max(\\varepsilon_d^{1-n}, \\varepsilon_d \\varepsilon_c^{-n})\n2224: \n2225: $$\n2226: \n2227: where $C_{d_i,n} = \\mathcal{O}(n!)$ (Gevrey-1) is **k-uniform** (independent of the number of alive walkers).\n2228: \n2229: **For typical parameters** where $\\varepsilon_d \\ll \\varepsilon_c$ and $n \\geq 2$:\n2230: \n2231: $$\n2232: \\|\\nabla^n_{x_i} d_i\\| \\leq C_{d_i,n} \\cdot \\varepsilon_d^{1-n}\n2233: \n2234: $$",
      "metadata": {
        "label": "lem-self-measurement-derivatives-full"
      },
      "section": "## 5.5 Companion-Dependent Measurements with Softmax Coupling",
      "references": [],
      "raw_directive": "2215: :::\n2216: \n2217: :::{prf:lemma} Derivatives of Self-Measurement (j=i case)\n2218: :label: lem-self-measurement-derivatives-full\n2219: \n2220: For walker $i \\in \\mathcal{A}$, the **self-measurement** $d_i = d_{\\text{alg}}(i, c(i))$ where $c(i)$ is selected via softmax satisfies:\n2221: \n2222: $$\n2223: \\|\\nabla^n_{x_i} d_i\\| \\leq C_{d_i,n} \\cdot \\max(\\varepsilon_d^{1-n}, \\varepsilon_d \\varepsilon_c^{-n})\n2224: \n2225: $$\n2226: \n2227: where $C_{d_i,n} = \\mathcal{O}(n!)$ (Gevrey-1) is **k-uniform** (independent of the number of alive walkers).\n2228: \n2229: **For typical parameters** where $\\varepsilon_d \\ll \\varepsilon_c$ and $n \\geq 2$:\n2230: \n2231: $$\n2232: \\|\\nabla^n_{x_i} d_i\\| \\leq C_{d_i,n} \\cdot \\varepsilon_d^{1-n}\n2233: \n2234: $$\n2235: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 8,
        "chapter_file": "chapter_8.json",
        "section_id": "## 5.5 Companion-Dependent Measurements with Softmax Coupling"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-greedy-ideal-equivalence",
      "title": "Statistical Equivalence Preserves C^‚àû Regularity",
      "start_line": 2655,
      "end_line": 2666,
      "header_lines": [
        2656
      ],
      "content_start": 2658,
      "content_end": 2665,
      "content": "2658: :label: lem-greedy-ideal-equivalence\n2659: \n2660: The Sequential Stochastic Greedy Pairing and the Idealized Spatially-Aware Pairing produce statistically equivalent measurements:\n2661: \n2662: $$\n2663: \\mathbb{E}_{\\text{greedy}}[d_i | S] = \\mathbb{E}_{\\text{ideal}}[d_i | S] + O(k^{-\\beta})\n2664: \n2665: $$",
      "metadata": {
        "label": "lem-greedy-ideal-equivalence"
      },
      "section": "## 5.6 Diversity Pairing Mechanism Analysis",
      "references": [
        "thm-diversity-pairing-measurement-regularity"
      ],
      "raw_directive": "2655: ### 5.6.4 Transfer from Idealized to Greedy Pairing\n2656: \n2657: :::{prf:lemma} Statistical Equivalence Preserves C^‚àû Regularity\n2658: :label: lem-greedy-ideal-equivalence\n2659: \n2660: The Sequential Stochastic Greedy Pairing and the Idealized Spatially-Aware Pairing produce statistically equivalent measurements:\n2661: \n2662: $$\n2663: \\mathbb{E}_{\\text{greedy}}[d_i | S] = \\mathbb{E}_{\\text{ideal}}[d_i | S] + O(k^{-\\beta})\n2664: \n2665: $$\n2666: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 9,
        "chapter_file": "chapter_9.json",
        "section_id": "## 5.6 Diversity Pairing Mechanism Analysis"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-gaussian-kernel-derivatives-full",
      "title": "Gaussian Kernel Derivatives",
      "start_line": 2978,
      "end_line": 2991,
      "header_lines": [
        2979
      ],
      "content_start": 2981,
      "content_end": 2990,
      "content": "2981: :label: lem-gaussian-kernel-derivatives-full\n2982: \n2983: The Gaussian kernel $K_\\rho(i,j) = \\exp(-d_{\\text{alg}}^2(i,j)/(2\\rho^2))$ satisfies:\n2984: \n2985: For derivative order $n \\geq 1$:\n2986: \n2987: $$\n2988: \\|\\nabla^n_{x_i} K_\\rho(i,j)\\| \\leq C_{K,n} \\cdot \\rho^{-n} \\cdot K_\\rho(i,j)\n2989: \n2990: $$",
      "metadata": {
        "label": "lem-gaussian-kernel-derivatives-full"
      },
      "section": "## 6. Structure of Localization Weights",
      "references": [],
      "raw_directive": "2978: ### 6.1 Derivative Bounds for Localization Kernel\n2979: \n2980: :::{prf:lemma} Gaussian Kernel Derivatives\n2981: :label: lem-gaussian-kernel-derivatives-full\n2982: \n2983: The Gaussian kernel $K_\\rho(i,j) = \\exp(-d_{\\text{alg}}^2(i,j)/(2\\rho^2))$ satisfies:\n2984: \n2985: For derivative order $n \\geq 1$:\n2986: \n2987: $$\n2988: \\|\\nabla^n_{x_i} K_\\rho(i,j)\\| \\leq C_{K,n} \\cdot \\rho^{-n} \\cdot K_\\rho(i,j)\n2989: \n2990: $$\n2991: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 6. Structure of Localization Weights"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-localization-weight-derivatives-full",
      "title": "Localization Weight Derivatives",
      "start_line": 3015,
      "end_line": 3026,
      "header_lines": [
        3016
      ],
      "content_start": 3018,
      "content_end": 3025,
      "content": "3018: :label: lem-localization-weight-derivatives-full\n3019: \n3020: The localization weights $w_{ij}(\\rho) = K_\\rho(i,j) / Z_i(\\rho)$ satisfy:\n3021: \n3022: $$\n3023: \\|\\nabla^n_{x_i} w_{ij}(\\rho)\\| \\leq C_{w,n} \\cdot \\rho^{-n}\n3024: \n3025: $$",
      "metadata": {
        "label": "lem-localization-weight-derivatives-full"
      },
      "section": "## 6. Structure of Localization Weights",
      "references": [],
      "raw_directive": "3015: ### 6.2 Localization Weights: Quotient Rule Analysis\n3016: \n3017: :::{prf:lemma} Localization Weight Derivatives\n3018: :label: lem-localization-weight-derivatives-full\n3019: \n3020: The localization weights $w_{ij}(\\rho) = K_\\rho(i,j) / Z_i(\\rho)$ satisfy:\n3021: \n3022: $$\n3023: \\|\\nabla^n_{x_i} w_{ij}(\\rho)\\| \\leq C_{w,n} \\cdot \\rho^{-n}\n3024: \n3025: $$\n3026: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 6. Structure of Localization Weights"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-telescoping-localization-weights-full",
      "title": "Telescoping for Localization Weights",
      "start_line": 3119,
      "end_line": 3128,
      "header_lines": [
        3120
      ],
      "content_start": 3122,
      "content_end": 3127,
      "content": "3122: :label: lem-telescoping-localization-weights-full\n3123: \n3124: For walker $i$ and any derivative order $n \\geq 1$:\n3125: \n3126: $$\n3127: \\sum_{j \\in \\mathcal{A}} \\nabla^n_{x_i} w_{ij}(\\rho) = 0",
      "metadata": {
        "label": "lem-telescoping-localization-weights-full"
      },
      "section": "## 6. Structure of Localization Weights",
      "references": [],
      "raw_directive": "3119: ### 6.3 Telescoping Identity for Smooth Weights\n3120: \n3121: :::{prf:lemma} Telescoping for Localization Weights\n3122: :label: lem-telescoping-localization-weights-full\n3123: \n3124: For walker $i$ and any derivative order $n \\geq 1$:\n3125: \n3126: $$\n3127: \\sum_{j \\in \\mathcal{A}} \\nabla^n_{x_i} w_{ij}(\\rho) = 0\n3128: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 12,
        "chapter_file": "chapter_12.json",
        "section_id": "## 6. Structure of Localization Weights"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-derivatives-companion-distance-full",
      "title": "Derivatives of Companion-Dependent Distance",
      "start_line": 3288,
      "end_line": 3300,
      "header_lines": [
        3289
      ],
      "content_start": 3291,
      "content_end": 3299,
      "content": "3291: :label: lem-derivatives-companion-distance-full\n3292: \n3293: For measurement $d_j = d_{\\text{alg}}(j, c(j))$ where $c(j)$ is selected via softmax, the derivative with respect to $x_i$ is:\n3294: \n3295: $$\n3296: \\frac{\\partial d_j}{\\partial x_i} = \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{j\\}} \\mathbb{P}(c(j) = \\ell) \\cdot \\frac{\\partial d_{\\text{alg}}(j, \\ell)}{\\partial x_i}\n3297: + \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{j\\}} d_{\\text{alg}}(j, \\ell) \\cdot \\frac{\\partial \\mathbb{P}(c(j) = \\ell)}{\\partial x_i}\n3298: \n3299: $$",
      "metadata": {
        "label": "lem-derivatives-companion-distance-full"
      },
      "section": "## 7. Companion-Dependent Measurements: Handling N-Body Coupling",
      "references": [],
      "raw_directive": "3288: ### 7.1 Derivative Structure of Companion-Dependent Measurements\n3289: \n3290: :::{prf:lemma} Derivatives of Companion-Dependent Distance\n3291: :label: lem-derivatives-companion-distance-full\n3292: \n3293: For measurement $d_j = d_{\\text{alg}}(j, c(j))$ where $c(j)$ is selected via softmax, the derivative with respect to $x_i$ is:\n3294: \n3295: $$\n3296: \\frac{\\partial d_j}{\\partial x_i} = \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{j\\}} \\mathbb{P}(c(j) = \\ell) \\cdot \\frac{\\partial d_{\\text{alg}}(j, \\ell)}{\\partial x_i}\n3297: + \\sum_{\\ell \\in \\mathcal{A} \\setminus \\{j\\}} d_{\\text{alg}}(j, \\ell) \\cdot \\frac{\\partial \\mathbb{P}(c(j) = \\ell)}{\\partial x_i}\n3298: \n3299: $$\n3300: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 13,
        "chapter_file": "chapter_13.json",
        "section_id": "## 7. Companion-Dependent Measurements: Handling N-Body Coupling"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-first-derivative-localized-mean-full",
      "title": "First Derivative of Localized Mean",
      "start_line": 3451,
      "end_line": 3460,
      "header_lines": [
        3452
      ],
      "content_start": 3454,
      "content_end": 3459,
      "content": "3454: :label: lem-first-derivative-localized-mean-full\n3455: \n3456: $$\n3457: \\|\\nabla_{x_i} \\mu_\\rho^{(i)}\\| \\leq C_{\\mu,1}(\\rho) \\cdot \\rho^{-1}\n3458: \n3459: $$",
      "metadata": {
        "label": "lem-first-derivative-localized-mean-full"
      },
      "section": "## 8. Localized Mean: Derivative Expansion",
      "references": [],
      "raw_directive": "3451: ### 8.1 First Derivative: Telescoping with Companion Coupling\n3452: \n3453: :::{prf:lemma} First Derivative of Localized Mean\n3454: :label: lem-first-derivative-localized-mean-full\n3455: \n3456: $$\n3457: \\|\\nabla_{x_i} \\mu_\\rho^{(i)}\\| \\leq C_{\\mu,1}(\\rho) \\cdot \\rho^{-1}\n3458: \n3459: $$\n3460: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 15,
        "chapter_file": "chapter_15.json",
        "section_id": "## 8. Localized Mean: Derivative Expansion"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-mth-derivative-localized-mean-full",
      "title": "m-th Derivative of Localized Mean",
      "start_line": 3630,
      "end_line": 3641,
      "header_lines": [
        3631
      ],
      "content_start": 3633,
      "content_end": 3640,
      "content": "3633: :label: lem-mth-derivative-localized-mean-full\n3634: \n3635: For derivative order $m \\geq 1$:\n3636: \n3637: $$\n3638: \\|\\nabla^m_{x_i} \\mu_\\rho^{(i)}\\| \\leq C_{\\mu,m}(\\rho) \\cdot \\rho^{-m}\n3639: \n3640: $$",
      "metadata": {
        "label": "lem-mth-derivative-localized-mean-full"
      },
      "section": "## 8. Localized Mean: Derivative Expansion",
      "references": [],
      "raw_directive": "3630: We now establish the general pattern for arbitrary derivative order $m$.\n3631: \n3632: :::{prf:lemma} m-th Derivative of Localized Mean\n3633: :label: lem-mth-derivative-localized-mean-full\n3634: \n3635: For derivative order $m \\geq 1$:\n3636: \n3637: $$\n3638: \\|\\nabla^m_{x_i} \\mu_\\rho^{(i)}\\| \\leq C_{\\mu,m}(\\rho) \\cdot \\rho^{-m}\n3639: \n3640: $$\n3641: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 15,
        "chapter_file": "chapter_15.json",
        "section_id": "## 8. Localized Mean: Derivative Expansion"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-first-derivative-localized-variance-full",
      "title": "First Derivative of Localized Variance",
      "start_line": 3818,
      "end_line": 3827,
      "header_lines": [
        3819
      ],
      "content_start": 3821,
      "content_end": 3826,
      "content": "3821: :label: lem-first-derivative-localized-variance-full\n3822: \n3823: $$\n3824: \\|\\nabla_{x_i} \\sigma_\\rho^{2(i)}\\| \\leq C_{\\sigma^2,1}(\\rho) \\cdot \\rho^{-1}\n3825: \n3826: $$",
      "metadata": {
        "label": "lem-first-derivative-localized-variance-full"
      },
      "section": "## 9. Localized Variance: Full Derivative Analysis",
      "references": [],
      "raw_directive": "3818: ### 9.1 Structure and First Derivative\n3819: \n3820: :::{prf:lemma} First Derivative of Localized Variance\n3821: :label: lem-first-derivative-localized-variance-full\n3822: \n3823: $$\n3824: \\|\\nabla_{x_i} \\sigma_\\rho^{2(i)}\\| \\leq C_{\\sigma^2,1}(\\rho) \\cdot \\rho^{-1}\n3825: \n3826: $$\n3827: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 16,
        "chapter_file": "chapter_16.json",
        "section_id": "## 9. Localized Variance: Full Derivative Analysis"
      }
    },
    {
      "directive_type": "lemma",
      "label": "lem-properties-regularized-std-dev-full",
      "title": "Properties of Regularized Standard Deviation",
      "start_line": 4284,
      "end_line": 4301,
      "header_lines": [
        4285
      ],
      "content_start": 4287,
      "content_end": 4300,
      "content": "4287: :label: lem-properties-regularized-std-dev-full\n4288: \n4289: The function $\\sigma'_\\rho(i) = \\sqrt{\\sigma_\\rho^{2(i)} + \\eta_{\\min}^2}$ satisfies:\n4290: \n4291: 1. **Positive lower bound**: $\\sigma'_\\rho(i) \\geq \\eta_{\\min} > 0$ for all configurations\n4292: \n4293: 2. **C^‚àû regularity**: $\\sigma'_\\rho \\in C^\\infty$ as a composition of C^‚àû functions\n4294: \n4295: 3. **Derivative bounds**: For $m \\geq 1$,\n4296: \n4297: $$\n4298: \\|\\nabla^m \\sigma'_\\rho(i)\\| \\leq C_{\\sigma',m}(\\rho) \\cdot \\rho^{-m}\n4299: \n4300: $$",
      "metadata": {
        "label": "lem-properties-regularized-std-dev-full"
      },
      "section": "## 10. Regularized Standard Deviation",
      "references": [],
      "raw_directive": "4284: ### 10.1 Smoothness and Lower Bounds\n4285: \n4286: :::{prf:lemma} Properties of Regularized Standard Deviation\n4287: :label: lem-properties-regularized-std-dev-full\n4288: \n4289: The function $\\sigma'_\\rho(i) = \\sqrt{\\sigma_\\rho^{2(i)} + \\eta_{\\min}^2}$ satisfies:\n4290: \n4291: 1. **Positive lower bound**: $\\sigma'_\\rho(i) \\geq \\eta_{\\min} > 0$ for all configurations\n4292: \n4293: 2. **C^‚àû regularity**: $\\sigma'_\\rho \\in C^\\infty$ as a composition of C^‚àû functions\n4294: \n4295: 3. **Derivative bounds**: For $m \\geq 1$,\n4296: \n4297: $$\n4298: \\|\\nabla^m \\sigma'_\\rho(i)\\| \\leq C_{\\sigma',m}(\\rho) \\cdot \\rho^{-m}\n4299: \n4300: $$\n4301: ",
      "_registry_context": {
        "stage": "directives",
        "document_id": "14_geometric_gas_cinf_regularity_full",
        "chapter_index": 18,
        "chapter_file": "chapter_18.json",
        "section_id": "## 10. Regularized Standard Deviation"
      }
    }
  ]
}