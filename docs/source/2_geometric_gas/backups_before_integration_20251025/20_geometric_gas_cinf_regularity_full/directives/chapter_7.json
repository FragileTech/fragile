{
  "chapter_index": 7,
  "section_id": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
  "directive_count": 3,
  "hints": [
    {
      "directive_type": "lemma",
      "label": "lem-dalg-derivative-bounds-full",
      "title": "Higher Derivatives of Regularized Algorithmic Distance",
      "start_line": 1575,
      "end_line": 1618,
      "header_lines": [
        1576
      ],
      "content_start": 1578,
      "content_end": 1617,
      "content": "1578: :label: lem-dalg-derivative-bounds-full\n1579: \n1580: The **regularized** algorithmic distance:\n1581: \n1582: $$\n1583: d_{\\text{alg}}(i,j) = \\sqrt{\\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 + \\varepsilon_d^2}\n1584: \n1585: $$\n1586: \n1587: where $\\varepsilon_d > 0$ is the regularization parameter, has the following properties:\n1588: \n1589: 1. **Uniform Lower Bound**: $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ for all walker configurations (no singularity)\n1590: \n1591: 2. **C^\u221e Regularity**: $d_{\\text{alg}}$ is C^\u221e with **uniform** derivative bounds:\n1592: \n1593: **First derivative**:\n1594: \n1595: $$\n1596: \\nabla_{x_i} d_{\\text{alg}}(i,j) = \\frac{x_i - x_j}{d_{\\text{alg}}(i,j)}, \\quad \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| \\leq 1\n1597: \n1598: $$\n1599: \n1600: **Second derivative** (Hessian):\n1601: \n1602: $$\n1603: \\nabla^2_{x_i} d_{\\text{alg}}(i,j) = \\frac{1}{d_{\\text{alg}}(i,j)} \\left(I - \\frac{(x_i - x_j) \\otimes (x_i - x_j)}{d_{\\text{alg}}^2(i,j)}\\right)\n1604: \n1605: $$\n1606: \n1607: $$\n1608: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d} \\quad \\text{(uniform bound using } d_{\\text{alg}} \\geq \\varepsilon_d\\text{)}\n1609: \n1610: $$\n1611: \n1612: **General bound**: For derivative order $n \\geq 1$:\n1613: \n1614: $$\n1615: \\|\\nabla^n_{x_i} d_{\\text{alg}}(i,j)\\| \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1616: \n1617: $$",
      "metadata": {
        "label": "lem-dalg-derivative-bounds-full"
      },
      "section": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
      "raw_directive": "1575: We now establish the derivative structure for the **regularized** algorithmic distance, which eliminates the singularity at walker collisions.\n1576: \n1577: :::{prf:lemma} Higher Derivatives of Regularized Algorithmic Distance\n1578: :label: lem-dalg-derivative-bounds-full\n1579: \n1580: The **regularized** algorithmic distance:\n1581: \n1582: $$\n1583: d_{\\text{alg}}(i,j) = \\sqrt{\\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 + \\varepsilon_d^2}\n1584: \n1585: $$\n1586: \n1587: where $\\varepsilon_d > 0$ is the regularization parameter, has the following properties:\n1588: \n1589: 1. **Uniform Lower Bound**: $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ for all walker configurations (no singularity)\n1590: \n1591: 2. **C^\u221e Regularity**: $d_{\\text{alg}}$ is C^\u221e with **uniform** derivative bounds:\n1592: \n1593: **First derivative**:\n1594: \n1595: $$\n1596: \\nabla_{x_i} d_{\\text{alg}}(i,j) = \\frac{x_i - x_j}{d_{\\text{alg}}(i,j)}, \\quad \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| \\leq 1\n1597: \n1598: $$\n1599: \n1600: **Second derivative** (Hessian):\n1601: \n1602: $$\n1603: \\nabla^2_{x_i} d_{\\text{alg}}(i,j) = \\frac{1}{d_{\\text{alg}}(i,j)} \\left(I - \\frac{(x_i - x_j) \\otimes (x_i - x_j)}{d_{\\text{alg}}^2(i,j)}\\right)\n1604: \n1605: $$\n1606: \n1607: $$\n1608: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d} \\quad \\text{(uniform bound using } d_{\\text{alg}} \\geq \\varepsilon_d\\text{)}\n1609: \n1610: $$\n1611: \n1612: **General bound**: For derivative order $n \\geq 1$:\n1613: \n1614: $$\n1615: \\|\\nabla^n_{x_i} d_{\\text{alg}}(i,j)\\| \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1616: \n1617: $$\n1618: "
    },
    {
      "directive_type": "proof",
      "label": "unlabeled-proof-48",
      "title": null,
      "start_line": 1620,
      "end_line": 1706,
      "header_lines": [],
      "content_start": 1621,
      "content_end": 1705,
      "content": "1621: \n1622: :::{prf:proof}\n1623: **Step 0: Regularization eliminates singularity.**\n1624: \n1625: Let $r^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 \\geq 0$. Then:\n1626: \n1627: $$\n1628: d_{\\text{alg}}(i,j) = \\sqrt{r^2 + \\varepsilon_d^2}\n1629: \n1630: $$\n1631: \n1632: **Key observation**: Even when $r = 0$ (walkers coincide), we have $d_{\\text{alg}}(i,j) = \\varepsilon_d > 0$. This **eliminates the singularity** at the origin that would occur for the unregularized distance $\\sqrt{r^2}$.\n1633: \n1634: **Step 1: First derivative.**\n1635: \n1636: Direct calculation using the chain rule:\n1637: \n1638: $$\n1639: \\frac{\\partial}{\\partial x_i^{(\\alpha)}} d_{\\text{alg}}(i,j) = \\frac{\\partial}{\\partial x_i^{(\\alpha)}} \\sqrt{r^2 + \\varepsilon_d^2}\n1640: = \\frac{1}{2\\sqrt{r^2 + \\varepsilon_d^2}} \\cdot 2(x_i^{(\\alpha)} - x_j^{(\\alpha)})\n1641: = \\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\n1642: \n1643: $$\n1644: \n1645: Since $|x_i^{(\\alpha)} - x_j^{(\\alpha)}| \\leq r \\leq d_{\\text{alg}}(i,j)$, we have:\n1646: \n1647: $$\n1648: \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| = \\frac{\\|x_i - x_j\\|}{d_{\\text{alg}}(i,j)} \\leq 1\n1649: \n1650: $$\n1651: \n1652: **Step 2: Second derivative (quotient rule with uniform bound).**\n1653: \n1654: $$\n1655: \\frac{\\partial^2}{\\partial x_i^{(\\alpha)} \\partial x_i^{(\\beta)}} d_{\\text{alg}}(i,j)\n1656: = \\frac{\\partial}{\\partial x_i^{(\\beta)}} \\left[\\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\\right]\n1657: \n1658: $$\n1659: \n1660: Applying quotient rule:\n1661: \n1662: $$\n1663: = \\frac{\\delta_{\\alpha\\beta}}{d_{\\text{alg}}(i,j)} - \\frac{(x_i^{(\\alpha)} - x_j^{(\\alpha)})(x_i^{(\\beta)} - x_j^{(\\beta)})}{d_{\\text{alg}}^3(i,j)}\n1664: \n1665: $$\n1666: \n1667: **Crucial difference from unregularized case**: Since $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ always, we obtain a **uniform bound**:\n1668: \n1669: $$\n1670: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d}\n1671: \n1672: $$\n1673: \n1674: Without regularization (\u03b5_d = 0), this bound would **blow up** as $d_{\\text{alg}} \\to 0$ (walker collisions).\n1675: \n1676: **Step 3: Higher derivatives by induction with uniform bounds.**\n1677: \n1678: By induction on $n$, each derivative introduces:\n1679: - A quotient rule factor (Leibniz/Fa\u00e0 di Bruno)\n1680: - Additional powers of $1/d_{\\text{alg}}$\n1681: \n1682: The general bound:\n1683: \n1684: $$\n1685: \\|\\nabla^n d_{\\text{alg}}\\| \\leq C_{d,n} \\cdot d_{\\text{alg}}^{1-n} \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1686: \n1687: $$\n1688: \n1689: follows from the Fa\u00e0 di Bruno formula for $(f \\circ g)^{(n)}$ where $f(s) = \\sqrt{s}$ and $s = r^2 + \\varepsilon_d^2$.\n1690: \n1691: The factorial growth $C_{d,n} = \\mathcal{O}(n!)$ comes from the $n$-th derivative of $\\sqrt{s}$ at $s \\geq \\varepsilon_d^2 > 0$:\n1692: \n1693: $$\n1694: \\frac{d^n}{ds^n} \\sqrt{s} = (-1)^{n-1} \\frac{(2n-3)!!}{2^n} s^{1/2 - n}\n1695: \n1696: $$\n1697: \n1698: where $(2n-3)!! = \\mathcal{O}(n! / 2^n)$, giving the Gevrey-1 bound.\n1699: \n1700: **Crucial point**: Evaluating at $s \\geq \\varepsilon_d^2$ gives:\n1701: \n1702: $$\n1703: \\left|\\frac{d^n}{ds^n} \\sqrt{s}\\right| \\leq \\frac{C_n}{\\varepsilon_d^{n-1}} \\quad \\text{(uniform bound)}\n1704: \n1705: $$",
      "metadata": {},
      "section": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
      "raw_directive": "1620: :::\n1621: \n1622: :::{prf:proof}\n1623: **Step 0: Regularization eliminates singularity.**\n1624: \n1625: Let $r^2 := \\|x_i - x_j\\|^2 + \\lambda_{\\text{alg}} \\|v_i - v_j\\|^2 \\geq 0$. Then:\n1626: \n1627: $$\n1628: d_{\\text{alg}}(i,j) = \\sqrt{r^2 + \\varepsilon_d^2}\n1629: \n1630: $$\n1631: \n1632: **Key observation**: Even when $r = 0$ (walkers coincide), we have $d_{\\text{alg}}(i,j) = \\varepsilon_d > 0$. This **eliminates the singularity** at the origin that would occur for the unregularized distance $\\sqrt{r^2}$.\n1633: \n1634: **Step 1: First derivative.**\n1635: \n1636: Direct calculation using the chain rule:\n1637: \n1638: $$\n1639: \\frac{\\partial}{\\partial x_i^{(\\alpha)}} d_{\\text{alg}}(i,j) = \\frac{\\partial}{\\partial x_i^{(\\alpha)}} \\sqrt{r^2 + \\varepsilon_d^2}\n1640: = \\frac{1}{2\\sqrt{r^2 + \\varepsilon_d^2}} \\cdot 2(x_i^{(\\alpha)} - x_j^{(\\alpha)})\n1641: = \\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\n1642: \n1643: $$\n1644: \n1645: Since $|x_i^{(\\alpha)} - x_j^{(\\alpha)}| \\leq r \\leq d_{\\text{alg}}(i,j)$, we have:\n1646: \n1647: $$\n1648: \\|\\nabla_{x_i} d_{\\text{alg}}(i,j)\\| = \\frac{\\|x_i - x_j\\|}{d_{\\text{alg}}(i,j)} \\leq 1\n1649: \n1650: $$\n1651: \n1652: **Step 2: Second derivative (quotient rule with uniform bound).**\n1653: \n1654: $$\n1655: \\frac{\\partial^2}{\\partial x_i^{(\\alpha)} \\partial x_i^{(\\beta)}} d_{\\text{alg}}(i,j)\n1656: = \\frac{\\partial}{\\partial x_i^{(\\beta)}} \\left[\\frac{x_i^{(\\alpha)} - x_j^{(\\alpha)}}{d_{\\text{alg}}(i,j)}\\right]\n1657: \n1658: $$\n1659: \n1660: Applying quotient rule:\n1661: \n1662: $$\n1663: = \\frac{\\delta_{\\alpha\\beta}}{d_{\\text{alg}}(i,j)} - \\frac{(x_i^{(\\alpha)} - x_j^{(\\alpha)})(x_i^{(\\beta)} - x_j^{(\\beta)})}{d_{\\text{alg}}^3(i,j)}\n1664: \n1665: $$\n1666: \n1667: **Crucial difference from unregularized case**: Since $d_{\\text{alg}}(i,j) \\geq \\varepsilon_d > 0$ always, we obtain a **uniform bound**:\n1668: \n1669: $$\n1670: \\|\\nabla^2_{x_i} d_{\\text{alg}}(i,j)\\| \\leq \\frac{1}{\\varepsilon_d}\n1671: \n1672: $$\n1673: \n1674: Without regularization (\u03b5_d = 0), this bound would **blow up** as $d_{\\text{alg}} \\to 0$ (walker collisions).\n1675: \n1676: **Step 3: Higher derivatives by induction with uniform bounds.**\n1677: \n1678: By induction on $n$, each derivative introduces:\n1679: - A quotient rule factor (Leibniz/Fa\u00e0 di Bruno)\n1680: - Additional powers of $1/d_{\\text{alg}}$\n1681: \n1682: The general bound:\n1683: \n1684: $$\n1685: \\|\\nabla^n d_{\\text{alg}}\\| \\leq C_{d,n} \\cdot d_{\\text{alg}}^{1-n} \\leq C_{d,n} \\cdot \\varepsilon_d^{1-n}\n1686: \n1687: $$\n1688: \n1689: follows from the Fa\u00e0 di Bruno formula for $(f \\circ g)^{(n)}$ where $f(s) = \\sqrt{s}$ and $s = r^2 + \\varepsilon_d^2$.\n1690: \n1691: The factorial growth $C_{d,n} = \\mathcal{O}(n!)$ comes from the $n$-th derivative of $\\sqrt{s}$ at $s \\geq \\varepsilon_d^2 > 0$:\n1692: \n1693: $$\n1694: \\frac{d^n}{ds^n} \\sqrt{s} = (-1)^{n-1} \\frac{(2n-3)!!}{2^n} s^{1/2 - n}\n1695: \n1696: $$\n1697: \n1698: where $(2n-3)!! = \\mathcal{O}(n! / 2^n)$, giving the Gevrey-1 bound.\n1699: \n1700: **Crucial point**: Evaluating at $s \\geq \\varepsilon_d^2$ gives:\n1701: \n1702: $$\n1703: \\left|\\frac{d^n}{ds^n} \\sqrt{s}\\right| \\leq \\frac{C_n}{\\varepsilon_d^{n-1}} \\quad \\text{(uniform bound)}\n1704: \n1705: $$\n1706: "
    },
    {
      "directive_type": "property",
      "label": "prop-dalg-locality",
      "title": "Locality of Algorithmic Distance",
      "start_line": 1722,
      "end_line": 1742,
      "header_lines": [
        1723
      ],
      "content_start": 1725,
      "content_end": 1741,
      "content": "1725: :label: prop-dalg-locality\n1726: \n1727: The regularized algorithmic distance $d_{\\text{alg}}(j,\\ell)$ depends only on the states of walkers $j$ and $\\ell$:\n1728: \n1729: $$\n1730: d_{\\text{alg}}(j,\\ell) = \\sqrt{\\|x_j - x_\\ell\\|^2 + \\lambda_{\\text{alg}} \\|v_j - v_\\ell\\|^2 + \\varepsilon_d^2}\n1731: \n1732: $$\n1733: \n1734: **Consequence (Derivative Locality)**: For any walker $i$ with $i \\neq j$ and $i \\neq \\ell$:\n1735: \n1736: $$\n1737: \\nabla_{x_i, v_i} d_{\\text{alg}}(j,\\ell) = 0\n1738: \n1739: $$\n1740: \n1741: since the expression for $d_{\\text{alg}}(j,\\ell)$ contains no dependence on $(x_i, v_i)$.",
      "metadata": {
        "label": "prop-dalg-locality"
      },
      "section": "## 5. Derivatives of Algorithmic Distance (Regularized Version)",
      "raw_directive": "1722: ---\n1723: \n1724: :::{prf:property} Locality of Algorithmic Distance\n1725: :label: prop-dalg-locality\n1726: \n1727: The regularized algorithmic distance $d_{\\text{alg}}(j,\\ell)$ depends only on the states of walkers $j$ and $\\ell$:\n1728: \n1729: $$\n1730: d_{\\text{alg}}(j,\\ell) = \\sqrt{\\|x_j - x_\\ell\\|^2 + \\lambda_{\\text{alg}} \\|v_j - v_\\ell\\|^2 + \\varepsilon_d^2}\n1731: \n1732: $$\n1733: \n1734: **Consequence (Derivative Locality)**: For any walker $i$ with $i \\neq j$ and $i \\neq \\ell$:\n1735: \n1736: $$\n1737: \\nabla_{x_i, v_i} d_{\\text{alg}}(j,\\ell) = 0\n1738: \n1739: $$\n1740: \n1741: since the expression for $d_{\\text{alg}}(j,\\ell)$ contains no dependence on $(x_i, v_i)$.\n1742: "
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}