{
  "chapter_index": 21,
  "section_id": "## 12. Fitness Potential: Composition with Rescale Function",
  "directive_count": 5,
  "hints": [
    {
      "directive_type": "assumption",
      "label": "assump-rescale-function-cinf-full",
      "title": "Rescale Function C^\u221e Regularity",
      "start_line": 4533,
      "end_line": 4551,
      "header_lines": [
        4534
      ],
      "content_start": 4536,
      "content_end": 4550,
      "content": "4536: :label: assump-rescale-function-cinf-full\n4537: \n4538: The rescale function $g_A: \\mathbb{R} \\to [0, A]$ is C^\u221e with **globally bounded derivatives**:\n4539: \n4540: For all $m \\geq 1$:\n4541: \n4542: $$\n4543: \\|g_A^{(m)}\\|_\\infty := \\sup_{z \\in \\mathbb{R}} |g_A^{(m)}(z)| \\leq L_{g,m} < \\infty\n4544: \n4545: $$\n4546: \n4547: where $L_{g,m} = \\mathcal{O}(m!)$ (Gevrey-1 growth).\n4548: \n4549: **Examples**:\n4550: 1. **Sigmoid**: $g_A(z) = A / (1 + e^{-z})$ has all derivatives globally bounded",
      "metadata": {
        "label": "assump-rescale-function-cinf-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "raw_directive": "4533: ### 12.1 Assumptions on Rescale Function\n4534: \n4535: :::{prf:assumption} Rescale Function C^\u221e Regularity\n4536: :label: assump-rescale-function-cinf-full\n4537: \n4538: The rescale function $g_A: \\mathbb{R} \\to [0, A]$ is C^\u221e with **globally bounded derivatives**:\n4539: \n4540: For all $m \\geq 1$:\n4541: \n4542: $$\n4543: \\|g_A^{(m)}\\|_\\infty := \\sup_{z \\in \\mathbb{R}} |g_A^{(m)}(z)| \\leq L_{g,m} < \\infty\n4544: \n4545: $$\n4546: \n4547: where $L_{g,m} = \\mathcal{O}(m!)$ (Gevrey-1 growth).\n4548: \n4549: **Examples**:\n4550: 1. **Sigmoid**: $g_A(z) = A / (1 + e^{-z})$ has all derivatives globally bounded\n4551: 2. **Tanh-based**: $g_A(z) = A(1 + \\tanh(z))/2$ has all derivatives globally bounded"
    },
    {
      "directive_type": "theorem",
      "label": "thm-main-cinf-regularity-fitness-potential-full",
      "title": "C^\u221e Regularity of Fitness Potential (Main Result)",
      "start_line": 4555,
      "end_line": 4598,
      "header_lines": [
        4556
      ],
      "content_start": 4558,
      "content_end": 4597,
      "content": "4558: :label: thm-main-cinf-regularity-fitness-potential-full\n4559: \n4560: The fitness potential:\n4561: \n4562: $$\n4563: V_{\\text{fit}}(x_i, v_i) = g_A(Z_\\rho^{(i)})\n4564: \n4565: $$\n4566: \n4567: is **C^\u221e** with respect to $(x_i, v_i)$ for all walkers $i \\in \\mathcal{A}$.\n4568: \n4569: Moreover, for all derivative orders $m \\geq 1$:\n4570: \n4571: $$\n4572: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m}(d, \\rho, \\varepsilon_c, \\varepsilon_d, \\eta_{\\min}) \\cdot \\max(\\rho^{-m}, \\varepsilon_d^{1-m})\n4573: \n4574: $$\n4575: \n4576: where:\n4577: \n4578: $$\n4579: C_{V,m}(d, \\rho, \\varepsilon_c, \\varepsilon_d, \\eta_{\\min}) = \\mathcal{O}(m! \\cdot d^m \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4580: \n4581: $$\n4582: \n4583: is **independent of $k$, $N$, and walker index $i$** (k-uniform, N-uniform).\n4584: \n4585: For typical parameters where $\\varepsilon_d \\ll \\varepsilon_c$ and $m \\geq 2$, the $\\varepsilon_d^{1-m}$ term dominates, giving:\n4586: \n4587: $$\n4588: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m} \\cdot \\varepsilon_d^{1-m}\n4589: \n4590: $$\n4591: \n4592: The constant exhibits **Gevrey-1 growth**: $C_{V,m} = \\mathcal{O}(m!)$ with explicit dependence on:\n4593: - Dimension $d$ (polynomial)\n4594: - Regularization parameters $\\varepsilon_d$, $\\eta_{\\min}$ (inverse scaling for uniform bounds)\n4595: - Localization scale $\\rho$ (exponential locality)\n4596: \n4597: The $\\varepsilon_d^{1-m}$ factor enters through companion derivatives ({prf:ref}`lem-companion-measurement-derivatives-full`), making distance regularization the bottleneck for high-order derivative bounds.",
      "metadata": {
        "label": "thm-main-cinf-regularity-fitness-potential-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "raw_directive": "4555: ### 12.2 Final Composition: Chain Rule\n4556: \n4557: :::{prf:theorem} C^\u221e Regularity of Fitness Potential (Main Result)\n4558: :label: thm-main-cinf-regularity-fitness-potential-full\n4559: \n4560: The fitness potential:\n4561: \n4562: $$\n4563: V_{\\text{fit}}(x_i, v_i) = g_A(Z_\\rho^{(i)})\n4564: \n4565: $$\n4566: \n4567: is **C^\u221e** with respect to $(x_i, v_i)$ for all walkers $i \\in \\mathcal{A}$.\n4568: \n4569: Moreover, for all derivative orders $m \\geq 1$:\n4570: \n4571: $$\n4572: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m}(d, \\rho, \\varepsilon_c, \\varepsilon_d, \\eta_{\\min}) \\cdot \\max(\\rho^{-m}, \\varepsilon_d^{1-m})\n4573: \n4574: $$\n4575: \n4576: where:\n4577: \n4578: $$\n4579: C_{V,m}(d, \\rho, \\varepsilon_c, \\varepsilon_d, \\eta_{\\min}) = \\mathcal{O}(m! \\cdot d^m \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4580: \n4581: $$\n4582: \n4583: is **independent of $k$, $N$, and walker index $i$** (k-uniform, N-uniform).\n4584: \n4585: For typical parameters where $\\varepsilon_d \\ll \\varepsilon_c$ and $m \\geq 2$, the $\\varepsilon_d^{1-m}$ term dominates, giving:\n4586: \n4587: $$\n4588: \\|\\nabla^m V_{\\text{fit}}\\|_\\infty \\leq C_{V,m} \\cdot \\varepsilon_d^{1-m}\n4589: \n4590: $$\n4591: \n4592: The constant exhibits **Gevrey-1 growth**: $C_{V,m} = \\mathcal{O}(m!)$ with explicit dependence on:\n4593: - Dimension $d$ (polynomial)\n4594: - Regularization parameters $\\varepsilon_d$, $\\eta_{\\min}$ (inverse scaling for uniform bounds)\n4595: - Localization scale $\\rho$ (exponential locality)\n4596: \n4597: The $\\varepsilon_d^{1-m}$ factor enters through companion derivatives ({prf:ref}`lem-companion-measurement-derivatives-full`), making distance regularization the bottleneck for high-order derivative bounds.\n4598: "
    },
    {
      "directive_type": "proof",
      "label": "unlabeled-proof-79",
      "title": null,
      "start_line": 4600,
      "end_line": 4677,
      "header_lines": [],
      "content_start": 4601,
      "content_end": 4676,
      "content": "4601: \n4602: :::{prf:proof}\n4603: **Step 1: Composition structure.**\n4604: \n4605: The fitness potential is the composition:\n4606: \n4607: $$\n4608: V_{\\text{fit}} = g_A \\circ Z_\\rho \\circ (\\mu_\\rho, \\sigma'_\\rho, d_i)\n4609: \n4610: $$\n4611: \n4612: where each component is C^\u221e by previous lemmas.\n4613: \n4614: **Step 2: Fa\u00e0 di Bruno formula for composition.**\n4615: \n4616: For $m \\geq 1$, the $m$-th derivative of $g_A(Z_\\rho^{(i)})$ is:\n4617: \n4618: $$\n4619: \\nabla^m V_{\\text{fit}} = \\sum_{k=1}^m g_A^{(k)}(Z_\\rho^{(i)}) \\cdot B_{m,k}(\\nabla Z_\\rho, \\nabla^2 Z_\\rho, \\ldots, \\nabla^m Z_\\rho)\n4620: \n4621: $$\n4622: \n4623: where $B_{m,k}$ are the **Bell polynomials** encoding the combinatorics of the chain rule.\n4624: \n4625: **Step 3: Bounding each term with \u03b5_d propagation.**\n4626: \n4627: For the $k$-th term:\n4628: - $|g_A^{(k)}(Z_\\rho)| \\leq L_{g,k} = \\mathcal{O}(k!)$ (bounded derivatives of $g_A$)\n4629: - $B_{m,k}$ involves products of $\\nabla^j Z_\\rho$ with $j \\leq m$\n4630: - $\\|\\nabla^j Z_\\rho\\| \\leq C_{Z,j}(\\rho, \\varepsilon_d) \\cdot \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ where $C_{Z,j} = \\mathcal{O}(j! \\cdot \\rho^{2dj} \\cdot \\eta_{\\min}^{-(2j+1)})$\n4631: \n4632: **\u03b5_d dependency chain**:\n4633: 1. **Companion measurements**: $\\|\\nabla^j d_i\\| \\leq C_d \\varepsilon_d^{1-j}$\n4634: 2. **Localized mean**: $\\|\\nabla^j \\mu_\\rho\\| \\leq C_\\mu(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $d_i$ via Leibniz rule)\n4635: 3. **Localized variance**: $\\|\\nabla^j \\sigma_\\rho^2\\| \\leq C_{\\sigma^2}(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\mu_\\rho$ and $d_i$)\n4636: 4. **Regularized std dev**: $\\|\\nabla^j \\sigma'_\\rho\\| \\leq C_{\\sigma'}(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\sigma_\\rho^2$)\n4637: 5. **Z-score**: $\\|\\nabla^j Z_\\rho\\| \\leq C_Z(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (quotient of functions with \u03b5_d dependence)\n4638: 6. **Fitness potential**: $\\|\\nabla^m V_{\\text{fit}}\\| \\leq C_V \\max(\\rho^{-m}, \\varepsilon_d^{1-m})$ (composition with $g_A$)\n4639: \n4640: For typical parameters $\\varepsilon_d \\ll \\rho \\sim \\varepsilon_c$, the $\\varepsilon_d^{1-m}$ term dominates for $m \\geq 2$.\n4641: \n4642: The Bell polynomial $B_{m,k}$ satisfies:\n4643: \n4644: $$\n4645: \\|B_{m,k}\\| \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m \\|\\nabla^j Z_\\rho\\|^{n_j} \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m (C_{Z,j} \\rho^{-j})^{n_j}\n4646: \n4647: $$\n4648: \n4649: The sum over partitions of $m$ into $k$ parts gives combinatorial factors of at most $m!$.\n4650: \n4651: **Step 4: Factorial accounting.**\n4652: \n4653: Combining all factors:\n4654: \n4655: $$\n4656: \\begin{aligned}\n4657: \\|\\nabla^m V_{\\text{fit}}\\|\n4658: &\\leq \\sum_{k=1}^m L_{g,k} \\cdot \\|B_{m,k}\\| \\\\\n4659: &\\leq \\sum_{k=1}^m \\mathcal{O}(k!) \\cdot \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\text{(other factors)}) \\\\\n4660: &= \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4661: \\end{aligned}\n4662: \n4663: $$\n4664: \n4665: The key observation is that summing $k!$ over $k=1$ to $m$ gives $\\mathcal{O}(m!)$ (dominated by the largest term), preserving **single-factorial growth**.\n4666: \n4667: **Step 5: k-uniformity and N-uniformity.**\n4668: \n4669: All constants in the bound trace back to:\n4670: - Localization weights: k-uniform via telescoping\n4671: - Localized moments: k-uniform via exponential localization\n4672: - Regularized std dev: deterministic function of variance\n4673: - Z-score: quotient of k-uniform functions\n4674: - Rescale function: independent of swarm configuration\n4675: \n4676: Therefore $C_{V,m}(\\rho)$ is **independent of $k$ and $N$**.",
      "metadata": {},
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "raw_directive": "4600: :::\n4601: \n4602: :::{prf:proof}\n4603: **Step 1: Composition structure.**\n4604: \n4605: The fitness potential is the composition:\n4606: \n4607: $$\n4608: V_{\\text{fit}} = g_A \\circ Z_\\rho \\circ (\\mu_\\rho, \\sigma'_\\rho, d_i)\n4609: \n4610: $$\n4611: \n4612: where each component is C^\u221e by previous lemmas.\n4613: \n4614: **Step 2: Fa\u00e0 di Bruno formula for composition.**\n4615: \n4616: For $m \\geq 1$, the $m$-th derivative of $g_A(Z_\\rho^{(i)})$ is:\n4617: \n4618: $$\n4619: \\nabla^m V_{\\text{fit}} = \\sum_{k=1}^m g_A^{(k)}(Z_\\rho^{(i)}) \\cdot B_{m,k}(\\nabla Z_\\rho, \\nabla^2 Z_\\rho, \\ldots, \\nabla^m Z_\\rho)\n4620: \n4621: $$\n4622: \n4623: where $B_{m,k}$ are the **Bell polynomials** encoding the combinatorics of the chain rule.\n4624: \n4625: **Step 3: Bounding each term with \u03b5_d propagation.**\n4626: \n4627: For the $k$-th term:\n4628: - $|g_A^{(k)}(Z_\\rho)| \\leq L_{g,k} = \\mathcal{O}(k!)$ (bounded derivatives of $g_A$)\n4629: - $B_{m,k}$ involves products of $\\nabla^j Z_\\rho$ with $j \\leq m$\n4630: - $\\|\\nabla^j Z_\\rho\\| \\leq C_{Z,j}(\\rho, \\varepsilon_d) \\cdot \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ where $C_{Z,j} = \\mathcal{O}(j! \\cdot \\rho^{2dj} \\cdot \\eta_{\\min}^{-(2j+1)})$\n4631: \n4632: **\u03b5_d dependency chain**:\n4633: 1. **Companion measurements**: $\\|\\nabla^j d_i\\| \\leq C_d \\varepsilon_d^{1-j}$\n4634: 2. **Localized mean**: $\\|\\nabla^j \\mu_\\rho\\| \\leq C_\\mu(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $d_i$ via Leibniz rule)\n4635: 3. **Localized variance**: $\\|\\nabla^j \\sigma_\\rho^2\\| \\leq C_{\\sigma^2}(\\rho, \\varepsilon_d) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\mu_\\rho$ and $d_i$)\n4636: 4. **Regularized std dev**: $\\|\\nabla^j \\sigma'_\\rho\\| \\leq C_{\\sigma'}(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (inherits from $\\sigma_\\rho^2$)\n4637: 5. **Z-score**: $\\|\\nabla^j Z_\\rho\\| \\leq C_Z(\\rho, \\varepsilon_d, \\eta) \\max(\\rho^{-j}, \\varepsilon_d^{1-j})$ (quotient of functions with \u03b5_d dependence)\n4638: 6. **Fitness potential**: $\\|\\nabla^m V_{\\text{fit}}\\| \\leq C_V \\max(\\rho^{-m}, \\varepsilon_d^{1-m})$ (composition with $g_A$)\n4639: \n4640: For typical parameters $\\varepsilon_d \\ll \\rho \\sim \\varepsilon_c$, the $\\varepsilon_d^{1-m}$ term dominates for $m \\geq 2$.\n4641: \n4642: The Bell polynomial $B_{m,k}$ satisfies:\n4643: \n4644: $$\n4645: \\|B_{m,k}\\| \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m \\|\\nabla^j Z_\\rho\\|^{n_j} \\leq \\sum_{\\text{partitions}} \\prod_{j=1}^m (C_{Z,j} \\rho^{-j})^{n_j}\n4646: \n4647: $$\n4648: \n4649: The sum over partitions of $m$ into $k$ parts gives combinatorial factors of at most $m!$.\n4650: \n4651: **Step 4: Factorial accounting.**\n4652: \n4653: Combining all factors:\n4654: \n4655: $$\n4656: \\begin{aligned}\n4657: \\|\\nabla^m V_{\\text{fit}}\\|\n4658: &\\leq \\sum_{k=1}^m L_{g,k} \\cdot \\|B_{m,k}\\| \\\\\n4659: &\\leq \\sum_{k=1}^m \\mathcal{O}(k!) \\cdot \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\text{(other factors)}) \\\\\n4660: &= \\mathcal{O}(m! \\cdot \\rho^{-m} \\cdot \\rho^{2dm} \\cdot \\eta_{\\min}^{-(2m+1)} \\cdot L_{g,m})\n4661: \\end{aligned}\n4662: \n4663: $$\n4664: \n4665: The key observation is that summing $k!$ over $k=1$ to $m$ gives $\\mathcal{O}(m!)$ (dominated by the largest term), preserving **single-factorial growth**.\n4666: \n4667: **Step 5: k-uniformity and N-uniformity.**\n4668: \n4669: All constants in the bound trace back to:\n4670: - Localization weights: k-uniform via telescoping\n4671: - Localized moments: k-uniform via exponential localization\n4672: - Regularized std dev: deterministic function of variance\n4673: - Z-score: quotient of k-uniform functions\n4674: - Rescale function: independent of swarm configuration\n4675: \n4676: Therefore $C_{V,m}(\\rho)$ is **independent of $k$ and $N$**.\n4677: "
    },
    {
      "directive_type": "corollary",
      "label": "cor-gevrey-1-fitness-potential-full",
      "title": "Gevrey-1 Classification",
      "start_line": 4679,
      "end_line": 4692,
      "header_lines": [
        4680
      ],
      "content_start": 4682,
      "content_end": 4691,
      "content": "4682: :label: cor-gevrey-1-fitness-potential-full\n4683: \n4684: The fitness potential $V_{\\text{fit}}$ belongs to the **Gevrey-1 class**, meaning it is **real-analytic** with convergent Taylor series in a neighborhood of each point.\n4685: \n4686: Specifically, for any compact set $K \\subset \\mathcal{X} \\times \\mathbb{R}^d$:\n4687: \n4688: $$\n4689: \\sup_{(x,v) \\in K} \\|\\nabla^m V_{\\text{fit}}(x,v)\\| \\leq A \\cdot B^m \\cdot m!\n4690: \n4691: $$",
      "metadata": {
        "label": "cor-gevrey-1-fitness-potential-full"
      },
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "raw_directive": "4679: :::\n4680: \n4681: :::{prf:corollary} Gevrey-1 Classification\n4682: :label: cor-gevrey-1-fitness-potential-full\n4683: \n4684: The fitness potential $V_{\\text{fit}}$ belongs to the **Gevrey-1 class**, meaning it is **real-analytic** with convergent Taylor series in a neighborhood of each point.\n4685: \n4686: Specifically, for any compact set $K \\subset \\mathcal{X} \\times \\mathbb{R}^d$:\n4687: \n4688: $$\n4689: \\sup_{(x,v) \\in K} \\|\\nabla^m V_{\\text{fit}}(x,v)\\| \\leq A \\cdot B^m \\cdot m!\n4690: \n4691: $$\n4692: "
    },
    {
      "directive_type": "proof",
      "label": "unlabeled-proof-173",
      "title": null,
      "start_line": 4694,
      "end_line": 4696,
      "header_lines": [],
      "content_start": 4695,
      "content_end": 4695,
      "content": "4695: ",
      "metadata": {},
      "section": "## 12. Fitness Potential: Composition with Rescale Function",
      "raw_directive": "4694: :::\n4695: \n4696: :::{prf:proof}"
    }
  ],
  "validation": {
    "ok": true,
    "errors": []
  }
}