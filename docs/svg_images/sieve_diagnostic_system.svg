<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 780" width="900" height="780">
  <title>The Sieve: 55 Runtime Contracts</title>
  <desc>Diagnostic monitoring architecture showing six categories of runtime contracts with three intervention levels: WARN, HALT, KILL</desc>

  <!-- Definitions -->
  <defs>
    <!-- Arrow markers -->
    <marker id="arrow-dark" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#374151"/>
    </marker>
    <marker id="arrow-warn" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#F59E0B"/>
    </marker>
    <marker id="arrow-halt" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#F97316"/>
    </marker>
    <marker id="arrow-kill" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#EF4444"/>
    </marker>

    <!-- Category gradients -->
    <linearGradient id="stabilityGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ECFDF5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D1FAE5;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="capacityGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#EFF6FF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DBEAFE;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="groundingGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ECFEFF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#CFFAFE;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="safetyGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FEF2F2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FEE2E2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="multiagentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FAF5FF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F3E8FF;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ontologyGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFFBEB;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FEF3C7;stop-opacity:1" />
    </linearGradient>

    <!-- Central core gradient -->
    <radialGradient id="coreGrad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F3F4F6;stop-opacity:1" />
    </radialGradient>

    <!-- Glow effect for intervention levels -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="780" fill="#FAFAFA"/>

  <!-- Title -->
  <g id="title">
    <text x="450" y="35" font-family="system-ui, -apple-system, sans-serif" font-size="20" font-weight="600" fill="#1F2937" text-anchor="middle">The Sieve: 55 Runtime Contracts</text>
    <text x="450" y="58" font-family="system-ui, -apple-system, sans-serif" font-size="13" fill="#6B7280" text-anchor="middle" font-style="italic">Diagnostic Monitoring Architecture</text>
  </g>

  <!-- ==================== CENTRAL AGENT CORE ==================== -->
  <g id="agent-core" transform="translate(450, 320)">
    <!-- Outer ring -->
    <circle cx="0" cy="0" r="85" fill="none" stroke="#E5E7EB" stroke-width="2" stroke-dasharray="6,4"/>

    <!-- Core hexagon -->
    <polygon points="0,-70 60.6,-35 60.6,35 0,70 -60.6,35 -60.6,-35" fill="url(#coreGrad)" stroke="#1F2937" stroke-width="2.5"/>

    <!-- Inner content -->
    <text x="0" y="-15" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#1F2937" text-anchor="middle">AGENT</text>
    <text x="0" y="8" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#1F2937" text-anchor="middle">CORE</text>
    <text x="0" y="32" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Control Loop</text>

    <!-- Pulse indicator -->
    <circle cx="0" cy="50" r="6" fill="#10B981" opacity="0.8"/>
    <circle cx="0" cy="50" r="10" fill="none" stroke="#10B981" stroke-width="1" opacity="0.4"/>
  </g>

  <!-- ==================== DIAGNOSTIC CATEGORY 1: STABILITY (TOP) ==================== -->
  <g id="stability" transform="translate(450, 110)">
    <rect x="-100" y="-35" width="200" height="90" rx="8" ry="8" fill="url(#stabilityGrad)" stroke="#10B981" stroke-width="2"/>

    <!-- Header -->
    <rect x="-100" y="-35" width="200" height="28" rx="8" ry="8" fill="#10B981"/>
    <rect x="-100" y="-15" width="200" height="10" fill="#10B981"/>
    <text x="0" y="-15" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">STABILITY</text>

    <!-- Checks -->
    <g transform="translate(-85, 10)">
      <rect x="0" y="0" width="50" height="18" rx="3" fill="#D1FAE5" stroke="#6EE7B7" stroke-width="1"/>
      <text x="25" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#047857" text-anchor="middle">CostBound</text>
    </g>
    <g transform="translate(-25, 10)">
      <rect x="0" y="0" width="50" height="18" rx="3" fill="#D1FAE5" stroke="#6EE7B7" stroke-width="1"/>
      <text x="25" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#047857" text-anchor="middle">Stiffness</text>
    </g>
    <g transform="translate(35, 10)">
      <rect x="0" y="0" width="50" height="18" rx="3" fill="#D1FAE5" stroke="#6EE7B7" stroke-width="1"/>
      <text x="25" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#047857" text-anchor="middle">Lipschitz</text>
    </g>

    <!-- Subtitle -->
    <text x="0" y="45" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle" font-style="italic">Lyapunov descent, bifurcation</text>

    <!-- Connector to core -->
    <line x1="0" y1="55" x2="0" y2="165" stroke="#10B981" stroke-width="1.5" marker-end="url(#arrow-dark)"/>
  </g>

  <!-- ==================== DIAGNOSTIC CATEGORY 2: CAPACITY (TOP-RIGHT) ==================== -->
  <g id="capacity" transform="translate(680, 195)">
    <rect x="-90" y="-35" width="180" height="90" rx="8" ry="8" fill="url(#capacityGrad)" stroke="#3B82F6" stroke-width="2"/>

    <!-- Header -->
    <rect x="-90" y="-35" width="180" height="28" rx="8" ry="8" fill="#3B82F6"/>
    <rect x="-90" y="-15" width="180" height="10" fill="#3B82F6"/>
    <text x="0" y="-15" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">CAPACITY</text>

    <!-- Checks -->
    <g transform="translate(-75, 10)">
      <rect x="0" y="0" width="70" height="18" rx="3" fill="#DBEAFE" stroke="#93C5FD" stroke-width="1"/>
      <text x="35" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#1D4ED8" text-anchor="middle">ComplexCheck</text>
    </g>
    <g transform="translate(5, 10)">
      <rect x="0" y="0" width="70" height="18" rx="3" fill="#DBEAFE" stroke="#93C5FD" stroke-width="1"/>
      <text x="35" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#1D4ED8" text-anchor="middle">CompactCheck</text>
    </g>

    <!-- Subtitle -->
    <text x="0" y="45" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle" font-style="italic">Codebook entropy, rate</text>

    <!-- Connector to core -->
    <line x1="-90" y1="20" x2="-145" y2="85" stroke="#3B82F6" stroke-width="1.5" marker-end="url(#arrow-dark)"/>
  </g>

  <!-- ==================== DIAGNOSTIC CATEGORY 3: GROUNDING (BOTTOM-RIGHT) ==================== -->
  <g id="grounding" transform="translate(680, 425)">
    <rect x="-90" y="-35" width="180" height="95" rx="8" ry="8" fill="url(#groundingGrad)" stroke="#06B6D4" stroke-width="2"/>

    <!-- Header -->
    <rect x="-90" y="-35" width="180" height="28" rx="8" ry="8" fill="#06B6D4"/>
    <rect x="-90" y="-15" width="180" height="10" fill="#06B6D4"/>
    <text x="0" y="-15" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">GROUNDING</text>

    <!-- Checks -->
    <g transform="translate(-75, 10)">
      <rect x="0" y="0" width="48" height="18" rx="3" fill="#CFFAFE" stroke="#67E8F9" stroke-width="1"/>
      <text x="24" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#0E7490" text-anchor="middle">Boundary</text>
    </g>
    <g transform="translate(-20, 10)">
      <rect x="0" y="0" width="40" height="18" rx="3" fill="#CFFAFE" stroke="#67E8F9" stroke-width="1"/>
      <text x="20" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#0E7490" text-anchor="middle">SNR</text>
    </g>
    <g transform="translate(28, 10)">
      <rect x="0" y="0" width="45" height="18" rx="3" fill="#CFFAFE" stroke="#67E8F9" stroke-width="1"/>
      <text x="22" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#0E7490" text-anchor="middle">NEP</text>
    </g>

    <!-- Subtitle -->
    <text x="0" y="45" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle" font-style="italic">I/O coupling, mixing time</text>

    <!-- Connector to core -->
    <line x1="-90" y1="-10" x2="-145" y2="-65" stroke="#06B6D4" stroke-width="1.5" marker-end="url(#arrow-dark)"/>
  </g>

  <!-- ==================== DIAGNOSTIC CATEGORY 4: SAFETY (BOTTOM) ==================== -->
  <g id="safety" transform="translate(450, 530)">
    <rect x="-100" y="-35" width="200" height="95" rx="8" ry="8" fill="url(#safetyGrad)" stroke="#EF4444" stroke-width="2"/>

    <!-- Header -->
    <rect x="-100" y="-35" width="200" height="28" rx="8" ry="8" fill="#EF4444"/>
    <rect x="-100" y="-15" width="200" height="10" fill="#EF4444"/>
    <text x="0" y="-15" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">SAFETY</text>

    <!-- Checks -->
    <g transform="translate(-85, 10)">
      <rect x="0" y="0" width="55" height="18" rx="3" fill="#FEE2E2" stroke="#FCA5A5" stroke-width="1"/>
      <text x="27" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#B91C1C" text-anchor="middle">BarrierLock</text>
    </g>
    <g transform="translate(-22, 10)">
      <rect x="0" y="0" width="50" height="18" rx="3" fill="#FEE2E2" stroke="#FCA5A5" stroke-width="1"/>
      <text x="25" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#B91C1C" text-anchor="middle">BarrierGap</text>
    </g>
    <g transform="translate(35, 10)">
      <rect x="0" y="0" width="50" height="18" rx="3" fill="#FEE2E2" stroke="#FCA5A5" stroke-width="1"/>
      <text x="25" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#B91C1C" text-anchor="middle">BarrierSat</text>
    </g>

    <!-- Subtitle -->
    <text x="0" y="45" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle" font-style="italic">Hard limits, barrier functions</text>

    <!-- Connector to core -->
    <line x1="0" y1="-35" x2="0" y2="-110" stroke="#EF4444" stroke-width="1.5" marker-end="url(#arrow-dark)"/>
  </g>

  <!-- ==================== DIAGNOSTIC CATEGORY 5: MULTI-AGENT (BOTTOM-LEFT) ==================== -->
  <g id="multiagent" transform="translate(220, 425)">
    <rect x="-90" y="-35" width="180" height="95" rx="8" ry="8" fill="url(#multiagentGrad)" stroke="#8B5CF6" stroke-width="2"/>

    <!-- Header -->
    <rect x="-90" y="-35" width="180" height="28" rx="8" ry="8" fill="#8B5CF6"/>
    <rect x="-90" y="-15" width="180" height="10" fill="#8B5CF6"/>
    <text x="0" y="-15" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">MULTI-AGENT</text>

    <!-- Checks -->
    <g transform="translate(-75, 10)">
      <rect x="0" y="0" width="70" height="18" rx="3" fill="#F3E8FF" stroke="#C4B5FD" stroke-width="1"/>
      <text x="35" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#6D28D9" text-anchor="middle">GameTensor</text>
    </g>
    <g transform="translate(5, 10)">
      <rect x="0" y="0" width="70" height="18" rx="3" fill="#F3E8FF" stroke="#C4B5FD" stroke-width="1"/>
      <text x="35" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#6D28D9" text-anchor="middle">NashResidual</text>
    </g>

    <!-- Subtitle -->
    <text x="0" y="45" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle" font-style="italic">Nash equilibrium, game bounds</text>

    <!-- Connector to core -->
    <line x1="90" y1="-10" x2="145" y2="-65" stroke="#8B5CF6" stroke-width="1.5" marker-end="url(#arrow-dark)"/>
  </g>

  <!-- ==================== DIAGNOSTIC CATEGORY 6: ONTOLOGY (TOP-LEFT) ==================== -->
  <g id="ontology" transform="translate(220, 195)">
    <rect x="-90" y="-35" width="180" height="90" rx="8" ry="8" fill="url(#ontologyGrad)" stroke="#F59E0B" stroke-width="2"/>

    <!-- Header -->
    <rect x="-90" y="-35" width="180" height="28" rx="8" ry="8" fill="#F59E0B"/>
    <rect x="-90" y="-15" width="180" height="10" fill="#F59E0B"/>
    <text x="0" y="-15" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">ONTOLOGY</text>

    <!-- Checks -->
    <g transform="translate(-75, 10)">
      <rect x="0" y="0" width="70" height="18" rx="3" fill="#FEF3C7" stroke="#FCD34D" stroke-width="1"/>
      <text x="35" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="7" fill="#92400E" text-anchor="middle">Disentanglement</text>
    </g>
    <g transform="translate(5, 10)">
      <rect x="0" y="0" width="70" height="18" rx="3" fill="#FEF3C7" stroke="#FCD34D" stroke-width="1"/>
      <text x="35" y="13" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#92400E" text-anchor="middle">Symmetry</text>
    </g>

    <!-- Subtitle -->
    <text x="0" y="45" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle" font-style="italic">Texture predictability, fission</text>

    <!-- Connector to core -->
    <line x1="90" y1="20" x2="145" y2="85" stroke="#F59E0B" stroke-width="1.5" marker-end="url(#arrow-dark)"/>
  </g>

  <!-- ==================== INTERVENTION LEVELS ==================== -->
  <g id="intervention-levels" transform="translate(450, 665)">
    <!-- Background panel -->
    <rect x="-350" y="-35" width="700" height="100" rx="10" ry="10" fill="#F9FAFB" stroke="#E5E7EB" stroke-width="2"/>

    <!-- Title -->
    <text x="0" y="-12" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700" fill="#1F2937" text-anchor="middle">INTERVENTION LEVELS</text>

    <!-- WARN -->
    <g transform="translate(-220, 15)">
      <rect x="-70" y="-8" width="140" height="50" rx="6" ry="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
      <text x="0" y="12" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700" fill="#D97706" text-anchor="middle">WARN</text>
      <text x="0" y="30" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#92400E" text-anchor="middle">Soft penalty, continue</text>
    </g>

    <!-- HALT -->
    <g transform="translate(0, 15)">
      <rect x="-70" y="-8" width="140" height="50" rx="6" ry="6" fill="#FFEDD5" stroke="#F97316" stroke-width="2"/>
      <text x="0" y="12" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700" fill="#EA580C" text-anchor="middle">HALT</text>
      <text x="0" y="30" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#9A3412" text-anchor="middle">Conservative update, pause</text>
    </g>

    <!-- KILL -->
    <g transform="translate(220, 15)">
      <rect x="-70" y="-8" width="140" height="50" rx="6" ry="6" fill="#FEE2E2" stroke="#EF4444" stroke-width="2" filter="url(#glow)"/>
      <text x="0" y="12" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700" fill="#DC2626" text-anchor="middle">KILL</text>
      <text x="0" y="30" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#991B1B" text-anchor="middle">Hard stop, intervention req.</text>
    </g>

    <!-- Severity arrow -->
    <line x1="-290" y1="55" x2="290" y2="55" stroke="#9CA3AF" stroke-width="1"/>
    <polygon points="290,55 282,51 282,59" fill="#9CA3AF"/>
    <text x="0" y="68" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Increasing severity</text>
  </g>

  <!-- ==================== DIAGNOSTIC FLOW ARROWS TO INTERVENTION ==================== -->
  <g id="diagnostic-flows">
    <!-- From Stability -->
    <path d="M450 200 L450 590 L230 622" fill="none" stroke="#F59E0B" stroke-width="1" stroke-dasharray="4,3" opacity="0.5"/>

    <!-- From Safety to KILL -->
    <path d="M450 595 L450 610 L670 622" fill="none" stroke="#EF4444" stroke-width="1.5" stroke-dasharray="4,3" opacity="0.7"/>
  </g>

  <!-- ==================== DESIGN PRINCIPLE CALLOUT ==================== -->
  <g id="principle" transform="translate(450, 755)">
    <text x="0" y="0" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#374151" text-anchor="middle" font-style="italic">"Fail gracefully, fail loudly"</text>
    <text x="0" y="18" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">The agent is designed to make failure modes observable and debuggable</text>
  </g>

  <!-- ==================== LEGEND ==================== -->
  <g id="legend" transform="translate(5, 85)">
    <rect x="0" y="0" width="120" height="145" rx="6" ry="6" fill="#FAFAFA" stroke="#E5E7EB" stroke-width="1"/>
    <text x="60" y="18" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="#6B7280" text-anchor="middle">CATEGORIES</text>

    <!-- Stability -->
    <rect x="12" y="28" width="12" height="12" rx="2" fill="#D1FAE5" stroke="#10B981" stroke-width="1"/>
    <text x="30" y="38" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#374151">Stability</text>

    <!-- Capacity -->
    <rect x="12" y="46" width="12" height="12" rx="2" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1"/>
    <text x="30" y="56" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#374151">Capacity</text>

    <!-- Grounding -->
    <rect x="12" y="64" width="12" height="12" rx="2" fill="#CFFAFE" stroke="#06B6D4" stroke-width="1"/>
    <text x="30" y="74" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#374151">Grounding</text>

    <!-- Safety -->
    <rect x="12" y="82" width="12" height="12" rx="2" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
    <text x="30" y="92" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#374151">Safety</text>

    <!-- Multi-Agent -->
    <rect x="12" y="100" width="12" height="12" rx="2" fill="#F3E8FF" stroke="#8B5CF6" stroke-width="1"/>
    <text x="30" y="110" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#374151">Multi-Agent</text>

    <!-- Ontology -->
    <rect x="12" y="118" width="12" height="12" rx="2" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
    <text x="30" y="128" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#374151">Ontology</text>
  </g>

  <!-- Contract count indicator -->
  <g id="contract-count" transform="translate(835, 85)">
    <rect x="-50" y="0" width="100" height="45" rx="6" ry="6" fill="#F3F4F6" stroke="#D1D5DB" stroke-width="1"/>
    <text x="0" y="20" font-family="system-ui, -apple-system, sans-serif" font-size="22" font-weight="700" fill="#1F2937" text-anchor="middle">55</text>
    <text x="0" y="36" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Runtime Contracts</text>
  </g>

</svg>
