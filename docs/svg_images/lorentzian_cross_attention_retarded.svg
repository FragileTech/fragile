<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 520" width="1000" height="520">
  <title>Lorentzian Cross-Attention with Retarded Potentials</title>
  <desc>Block diagram showing an external archive, retarded gate, cross-attention weights, and retrieved output with propagation delay.</desc>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#334155" />
    </marker>
    <marker id="arrowhead-dashed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B" />
    </marker>
    <linearGradient id="blockBlue" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#EFF6FF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DBEAFE;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="blockGreen" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ECFDF3;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DCFCE7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="blockAmber" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FEF3C7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FDE68A;stop-opacity:1" />
    </linearGradient>
  </defs>

  <rect width="1000" height="520" fill="#F8FAFC" />

  <text x="500" y="34" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="20" font-weight="600" fill="#0F172A" text-anchor="middle">Lorentzian cross-attention with retarded potentials</text>
  <text x="500" y="56" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#64748B" text-anchor="middle">Retrieval is gated by Theta_ret and delayed by t_ret = d_G / c_info</text>

  <!-- External archive -->
  <rect x="60" y="150" width="230" height="230" rx="14" fill="url(#blockGreen)" stroke="#86EFAC" />
  <text x="175" y="178" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="13" fill="#065F46" text-anchor="middle">External archive</text>
  <text x="175" y="196" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#065F46" text-anchor="middle">(z', t')</text>

  <rect x="90" y="215" width="170" height="28" rx="6" fill="#FFFFFF" stroke="#BBF7D0" />
  <rect x="90" y="255" width="170" height="28" rx="6" fill="#FFFFFF" stroke="#BBF7D0" />
  <rect x="90" y="295" width="170" height="28" rx="6" fill="#FFFFFF" stroke="#BBF7D0" />
  <rect x="90" y="335" width="170" height="28" rx="6" fill="#FFFFFF" stroke="#BBF7D0" />

  <text x="175" y="234" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="11" fill="#065F46" text-anchor="middle">entry t1</text>
  <text x="175" y="274" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="11" fill="#065F46" text-anchor="middle">entry t2</text>
  <text x="175" y="314" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="11" fill="#065F46" text-anchor="middle">entry t3</text>
  <text x="175" y="354" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="11" fill="#065F46" text-anchor="middle">entry t4</text>

  <!-- Retarded gate -->
  <rect x="330" y="210" width="210" height="80" rx="14" fill="url(#blockAmber)" stroke="#FBBF24" />
  <text x="435" y="242" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#92400E" text-anchor="middle">Retarded gate</text>
  <text x="435" y="262" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="11" fill="#92400E" text-anchor="middle">Theta_ret(t - t' - d_G/c_info)</text>

  <!-- Cross-attention weights -->
  <rect x="570" y="210" width="210" height="80" rx="14" fill="url(#blockBlue)" stroke="#93C5FD" />
  <text x="675" y="242" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#1E3A8A" text-anchor="middle">Cross-attn weights</text>
  <text x="675" y="262" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="11" fill="#1E3A8A" text-anchor="middle">alpha_ret = alpha_bare * Theta_ret</text>

  <!-- Query -->
  <rect x="570" y="110" width="210" height="60" rx="12" fill="#E2E8F0" stroke="#CBD5E1" />
  <text x="675" y="138" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#334155" text-anchor="middle">Query (z, t)</text>

  <!-- Output -->
  <rect x="820" y="210" width="150" height="80" rx="12" fill="url(#blockBlue)" stroke="#93C5FD" />
  <text x="895" y="242" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#1E3A8A" text-anchor="middle">Retrieved</text>
  <text x="895" y="262" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#1E3A8A" text-anchor="middle">representation</text>

  <!-- Arrows -->
  <line x1="290" y1="250" x2="330" y2="250" stroke="#334155" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="540" y1="250" x2="570" y2="250" stroke="#334155" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="780" y1="250" x2="820" y2="250" stroke="#334155" stroke-width="2" marker-end="url(#arrowhead)" />

  <line x1="675" y1="170" x2="675" y2="210" stroke="#334155" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Delay callout -->
  <line x1="290" y1="170" x2="570" y2="140" stroke="#94A3B8" stroke-width="2" stroke-dasharray="6 6" marker-end="url(#arrowhead-dashed)" />
  <text x="425" y="128" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="11" fill="#64748B" text-anchor="middle">propagation delay t_ret = d_G / c_info</text>

  <!-- Ghost memory note -->
  <rect x="330" y="320" width="450" height="50" rx="10" fill="#F1F5F9" stroke="#CBD5E1" />
  <text x="555" y="350" font-family="system-ui, -apple-system, Segoe UI, sans-serif" font-size="12" fill="#475569" text-anchor="middle">Ghost memory view: archive appears at time (t - t_ret)</text>
</svg>
